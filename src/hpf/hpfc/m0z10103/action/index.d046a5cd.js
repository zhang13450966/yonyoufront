!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["hpf/hpfc/m0z10103/action/index"]=t(require("nc-lightapp-front")):e["hpf/hpfc/m0z10103/action/index"]=t(e["nc-lightapp-front"])}(window,(function(e){return function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=44)}({0:function(t,a){t.exports=e},44:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=function(e,t){var a=this;e.createUIDom({pagecode:s},(function(o){if(o){if(o.template){var n=o.template;n=h.call(a,e,n),e.meta.setMeta(n)}if(o.button){var s=o.button;e.button.setButtons(s),e.button.setButtonDisabled({Delete:!0}),e.button.setButtonDisabled(["Enable","Disable"],!0),e.button.setButtonDisabled(["CuEnable","CuDisable"],!0),e.button.setPopContent("DelLine",a.state.json["M0Z10103-000019"])}}t()}))},t.onloaddata=function(){this.props.button.setButtonsVisible({Save:!1,Cancel:!1});var e={querycondition:{},pageInfo:this.props.editTable.getTablePageInfo("head"),pagecode:s,queryAreaCode:"search",oid:this.props.meta.getMeta().search.oid,querytype:"tree"};p.call(this,!1,e)},t.onClickButton=function(e,t){var a=this,l=e.editTable.getCheckedRows("head"),h=e.editTable.getTablePageInfo("head"),f=this.props.meta.getMeta().search.oid,D={pageInfo:h,querycondition:{},pagecode:s,queryAreaCode:"search",oid:f,querytype:"tree"};switch(t){case"Add":e.editTable.setStatus("head","edit");var y=this.props.editTable.getNumberOfRows("head");e.editTable.addRow("head",y,!0),e.button.setButtonsVisible("Edit",!1),e.button.setMainButton("Add",!1);break;case"Cancel":(0,o.promptBox)({color:"warning",title:this.state.json["M0Z10103-000006"],content:this.state.json["M0Z10103-000007"],beSureBtnClick:function(){e.editTable.cancelEdit("head"),e.editTable.setStatus("head","browse"),e.button.setMainButton("Add",!0),e.button.setButtonDisabled("Delete",!0),u.call(a)}});break;case"Edit":e.editTable.setStatus("head","edit"),e.button.setButtonsVisible("Edit",!1),e.button.setMainButton("Add",!1);break;case"Save":e.editTable.filterEmptyRows("head",r);var T=e.editTable.getAllData("head");if(!T||0===T.length)return e.editTable.cancelEdit("head"),e.editTable.setStatus("head","browse"),e.button.setMainButton("Add",!0),void u.call(this);if(!e.editTable.checkRequired("head",T.rows))return;var w={pageid:s,model:{pageInfo:h,rows:T.rows,areaType:"table",areacode:"head"}};this.props.validateToSave(w,(function(){(0,o.ajax)({url:i.saveUrl,data:w,async:!1,success:function(t){if(this.props.editTable.setStatus("head","browse"),t.data){var a=this.props.editTable.getAllData("head");!function(e,t){if(!t)return;e.rows&&e.rows.forEach((function(a,o){t.forEach((function(t,n){t.rowid===a.rowid&&(e.rows[o]=t)}))}))}(a,t.data.head.rows),this.props.editTable.setTableData("head",a),(0,o.toast)({color:"success",title:this.state.json["M0Z10103-000008"]})}e.button.setMainButton("Add",!0),e.button.setButtonDisabled("Delete",!0),u.call(this)}.bind(a),error:function(t){(0,o.toast)({color:"warning",content:t.message}),e.editTable.setStatus("head","edit"),e.button.setButtonsVisible("Edit",!1),e.button.setMainButton("Add",!1)}})}),n({},"head","editTable"),"grid"),p.call(this,!1,D);break;case"Delete":if(0!=l.length)if(e.editTable.getStatus("head")&&"edit"==e.editTable.getStatus("head")){var m=l.map((function(e){return e.index}));e.editTable.deleteTableRowsByIndex("head",m)}else{var B=l.map((function(e){return{status:"3",values:e.data.values}})),E={pageid:s,model:{areaType:"table",pageInfo:h,rows:B}};(0,o.promptBox)({color:"warning",title:this.state.json["M0Z10103-000009"],content:this.state.json["M0Z10103-000010"],beSureBtnClick:d.bind(this,E,D)})}else(0,o.promptBox)({color:"warning",title:this.state.json["M0Z10103-000011"],content:this.state.json["M0Z10103-000012"]});p.call(this,!1,D);break;case"PrintGrp":case"Print":c.call(this);break;case"Output":b.call(this);break;case"Refresh":p.call(this,!1,D),(0,o.toast)({title:this.state.json["M0Z10103-000020"],color:"success"});case"Enable":case"Disable":g.call(this,t,D);break;case"CuEnable":case"CuDisable":v.call(this,t,D)}},t.onSelected=function(){var e=this,t=this.props.editTable.getCheckedRows("head"),a=!(t&&t.length>0);if(this.props.button.setButtonDisabled(["Delete"],a),a)this.props.button.setButtonDisabled(["Disable"],!0),this.props.button.setButtonDisabled(["Enable"],!0),this.props.button.setButtonDisabled(["CuDisable"],!0),this.props.button.setButtonDisabled(["CuEnable"],!0);else{var o=0,n=0;t.forEach((function(a){a.data.values.rsflag&&a.data.values.rsflag.value&&o++,a.data.values.cuflag&&a.data.values.cuflag.value&&n++,0==o?(e.props.button.setButtonDisabled(["Disable"],!0),e.props.button.setButtonDisabled(["Enable"],!1)):o==t.length?(e.props.button.setButtonDisabled(["Disable"],!1),e.props.button.setButtonDisabled(["Enable"],!0)):(e.props.button.setButtonDisabled(["Disable"],!1),e.props.button.setButtonDisabled(["Enable"],!1)),0==n?(e.props.button.setButtonDisabled(["CuDisable"],!0),e.props.button.setButtonDisabled(["CuEnable"],!1)):n==t.length?(e.props.button.setButtonDisabled(["CuDisable"],!1),e.props.button.setButtonDisabled(["CuEnable"],!0)):(e.props.button.setButtonDisabled(["CuDisable"],!1),e.props.button.setButtonDisabled(["CuEnable"],!1))}))}this.setState(this.state)},t.gridBeChecked=l,t.gridStatusChange=u,t.onClickPageInfo=function(e,t,a){var o=e.editTable.getTablePageInfo("head"),n=e.search.getAllSearchData("search"),s={pks:a,pageInfo:o,querycondition:n};p.call(this,!1,s,"pageQueryUrl")},t.onClickSearchBtn=function(e,t){e.editTable.getStatus()&&"edit"==e.editTable.getStatus()&&(0,o.promptBox)({color:"warning",title:this.state.json["M0Z10103-000011"],content:this.state.json["M0Z10103-000015"]});var a=this.props.meta.getMeta().search.oid,n={querycondition:null==t?{}:t,pageInfo:e.editTable.getTablePageInfo("head"),pagecode:s,queryAreaCode:"search",oid:a,querytype:"tree"};p.call(this,!0,n)};var o=a(0);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s="M0Z10103_EntryconfigVO",r=["iseucountry"],i={queryUrl:"/nccloud/hpf/entryconfig/EntryconfigVOQuery.do",pageQueryUrl:"/nccloud/hpf/entryconfig/EntryconfigVOQueryPageGridByPks.do",saveUrl:"/nccloud/hpf/entryconfig/EntryconfigVOSave.do",printUrl:"/nccloud/hpf/entryconfig/EntryconfigVOPrint.do",RSCheckUrl:"/nccloud/hpf/entryconfig/EntryconfigVORSCheck.do",enableOrDisDataUrl:"/nccloud/hpf/entryconfig/EntryconfigVOEnableOrDisAction.do",enableOrDisCuDataUrl:"/nccloud/hpf/entryconfig/EntryconfigVOEnableOrDisCuAction.do"};function l(e){var t=e.editTable.getCheckedRows("head").length;e.button.setDisabled({btnDel:0===t})}function u(){var e=this.props.editTable.getStatus("head");this.props.button.setButtonsVisible({Save:"browse"!==e,Cancel:"browse"!==e,Add:"browse"===e,Edit:"browse"===e,Delete:"browse"===e,Refresh:"browse"===e,PrintGrp:"browse"===e,Output:"browse"===e,Enable:"browse"===e,Disable:"browse"===e,CuEnable:"browse"===e,CuDisable:"browse"===e}),this.props.button.setPopContent("DelLine","browse"===e?this.state.json["M0Z10103-000000"]:"")}function d(e,t){var a=this;(0,o.ajax)({url:i.saveUrl,data:e,success:function(e){e.success?(a.props.button.setButtonDisabled(["Delete"],!0),p.call(a,!1,t),(0,o.toast)({color:"success",title:a.state.json["M0Z10103-000002"]})):alert(e.message)}})}function c(){var e=this.props.editTable.getAllData("head");if(0!==e.length){var t=[];e.rows.forEach((function(e,a){t.push(e.values.pk_entryconfig.value)})),(0,o.print)("pdf",i.printUrl,{funcode:"M0Z10103",nodekey:null,oids:t})}else(0,o.toast)({content:this.state.json["M0Z10103-000013"],color:"warning"})}function b(){var e=this.props.editTable.getAllData("head");if(0!==e.length){var t=[];e.rows.forEach((function(e,a){t.push(e.values.pk_entryconfig.value)})),this.setState({ids:t},this.refs.printOutput.open())}else(0,o.toast)({content:this.state.json["M0Z10103-000014"],color:"warning"})}function p(e,t,a){var s=this,r=this,l=null==a?"queryUrl":a;(0,o.ajax)({url:i[l],data:t,success:function(t){var a=t.success,i=t.data;if(a){if(t.formulamsg&&t.formulamsg instanceof Array&&t.formulamsg.length>0&&r.props.dealFormulamsg(t.formulamsg,n({},"head","table")),t.hasOwnProperty("data")&&null!=i)r.props.editTable.setTableData("head",i.head),r.props.button.setButtonDisabled({PrintGrp:!1,Output:!1,Delete:!0});else{r.props.editTable.setTableData("head",{rows:[]}),r.props.button.setButtonDisabled({PrintGrp:!0,Output:!0,Delete:!0})}r.props.editTable.setStatus("browse"),!0===e&&(0,o.toast)({color:"success",content:s.state.json["M0Z10103-000003"]+i.head.allpks.length+s.state.json["M0Z10103-000004"]}),s.setState({hasSearched:!0})}},error:function(t){!0===e&&(0,o.toast)({color:"warning",content:s.state.json["M0Z10103-000005"]})}})}function h(e,t){var a=this;return t.head.showindex=!0,t.head.status="browse",t.head.pagination=!1,t.head.items.push({attrcode:"opr",label:this.state.json["M0Z10103-000001"],width:200,fixed:"right",className:"table-opr",itemtype:"customer",visible:!0,render:function(t,o,n){var s=function(e){return"browse"===e.editTable.getStatus("head")?[]:["DelLine"]}(e);return e.button.createOprationButton(s,{area:"table-opr-area",buttonLimit:3,onButtonClick:function(e,s){return f.call(a,e,s,t,o,n)}})}}),t.head.items.map((function(t){"pk_org"===t.attrcode&&(t.isMultiSelectedEnabled=!1,t.queryCondition=function(){return{funcode:e.getSearchParam("c"),TreeRefActionExt:"nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder"}})})),t}function f(e,t,a,n,r){var u=this;switch(t){case"DelLine":var d=e.editTable.getStatus("head");if("browse"==d||null==d){var c={status:"3",values:n.values},b={pageid:s,model:{areaType:"table",rows:[c]}};(0,o.ajax)({url:i.saveUrl,data:b,success:function(t){if(t.success){(0,o.toast)({color:"success",title:u.state.json["pk_lang-000002"]}),e.editTable.deleteTableRowsByIndex("head",r);var a=e.editTable.getAllData("head");!function(e){for(var t=e.length-1;t>=0;t--)"3"===e[t].status&&e.splice(t,1)}(a.rows),e.editTable.setTableData("head",a),l.call(u,e)}else alert(t.message)}})}else e.editTable.deleteTableRowsByIndex("head",r);break;case"EditLine":e.editTable.setStatus("head","edit"),e.button.setMainButton("Add",!1),e.editTable.openModel("head","edit",n,r);break;case"Spread":e.editTable.setStatus("head","edit"),e.editTable.openModel("head","edit",n,r);break;default:console.log(t,r)}}function g(e,t){var a=this,n=this.props.editTable.getCheckedRows("head");if(n&&n.length>0){var r=[];n.forEach((function(e){r.push(e.data)}));var l=this.props.editTable.getTablePageInfo("head"),u={pageid:s,model:{pageInfo:l,rows:r,areaType:"table",areacode:"head"},userjson:"Enable"==e?"1":"2"};(0,o.ajax)({url:i.enableOrDisDataUrl,data:u,async:!1,success:function(n){a.props.editTable.setStatus("head","browse"),n.data&&n.data.RSCheck?(0,o.toast)({color:"warning",content:n.data.msg}):((0,o.toast)({color:"success",content:"Enable"==e?"启用成功":"取消启用成功"}),p.call(a,!1,t))},error:function(e){(0,o.toast)({color:"warning",content:"操作失败,请刷新数据后重新操作"})}})}}function v(e,t){var a=this,n=this.props.editTable.getCheckedRows("head");if(n&&n.length>0){var r=[];n.forEach((function(e){r.push(e.data)}));var l=this.props.editTable.getTablePageInfo("head"),u={pageid:s,model:{pageInfo:l,rows:r,areaType:"table",areacode:"head"},userjson:"CuEnable"==e?"1":"2"};(0,o.ajax)({url:i.enableOrDisCuDataUrl,data:u,async:!1,success:function(n){a.props.editTable.setStatus("head","browse"),n.data&&n.data.RSCheck?(0,o.toast)({color:"warning",content:n.data.msg}):((0,o.toast)({color:"success",content:"CuEnable"==e?"启用成功":"取消启用成功"}),p.call(a,!1,t))},error:function(e){(0,o.toast)({color:"warning",content:"操作失败,请刷新数据后重新操作"})}})}}}})}));
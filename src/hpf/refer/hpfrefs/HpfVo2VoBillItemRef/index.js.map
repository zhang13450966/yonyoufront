{"version":3,"file":"hpf/refer/hpfrefs/HpfVo2VoBillItemRef/index.js","mappings":"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","sources":["webpack://page/webpack/universalModuleDefinition","webpack://page/external umd \"nc-lightapp-front\"","webpack://page/webpack/bootstrap","webpack://page/webpack/runtime/define property getters","webpack://page/webpack/runtime/hasOwnProperty shorthand","webpack://page/webpack/runtime/make namespace object","webpack://page/./src/hpf/refer/hpfrefs/HpfVo2VoBillItemRef/MyRefer.js","webpack://page/./src/hpf/refer/hpfrefs/HpfVo2VoBillItemRef/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"nc-lightapp-front\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"nc-lightapp-front\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hpf/refer/hpfrefs/HpfVo2VoBillItemRef/index\"] = factory(require(\"nc-lightapp-front\"));\n\telse\n\t\troot[\"hpf/refer/hpfrefs/HpfVo2VoBillItemRef/index\"] = factory(root[\"nc-lightapp-front\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__118__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__118__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { high, isFunction, promptBox } from 'nc-lightapp-front';\nconst { PopRefer } = high.Refer;\n\nclass MyRefer extends PopRefer {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...this.state, // 继承state\n            selectedRowIndex: []// 自定义扩展state\n        };\n    }\n\n    showPrompt = (content) => {\n        promptBox({\n            color: 'danger',\n            title: \"提示\",\n            content,\n            noCancelBtn: true,\n            zIndex: 9999,\n        });\n    };\n\n    checkSelBillItemRequired = (selections) => {\n        //已选中数据\n        let selitems_apply = selections.filter(item => (item.refcode.indexOf('applydept') > -1||item.refcode.indexOf('vdept') > -1));\n        let selitems_exe = selections.filter(item => (item.refcode.indexOf('exedept') > -1||item.refcode.indexOf('vexedept') > -1));\n        if (selitems_apply.length > 0 && selitems_exe.length > 0) {\n            this.showPrompt(\"开单科室，执行科室不能同时选择，二选一\");\n            return false;\n        } else if (selitems_apply.length == 0 && selitems_exe.length == 0) {\n            this.showPrompt(\"开单科室、执行科室必选一个\");\n            return false;\n        }\n        if (selitems_apply.length > 0 && selitems_apply.length == 1) {\n            this.showPrompt(\"开单科室编码，名称需同时勾选\");\n            return false;\n        }\n        if (selitems_exe.length > 0 && selitems_exe.length == 1) {\n            this.showPrompt(\"执行科室编码，名称需同时勾选\");\n            return false;\n        }\n        return true;\n    };\n\n    //参照框点确定\n    handleSureButtonClick = async () => {\n        let { isMultiSelectedEnabled, onSureBtnClick } = this.props;\n        let selections = this.getSelections();\n        //检查勾选必输字段，给提示\n        if (selections.length > 0) {\n            let pass = this.checkSelBillItemRequired(selections);\n            if (!pass) {\n                return;\n            }\n        }\n        if (isFunction(onSureBtnClick)) {\n            let closeFlag = await onSureBtnClick(selections);\n            if (closeFlag === false) return;\n        }\n        if (isMultiSelectedEnabled) {\n            let result = await this.multiSelect();\n            if (result === false) return;\n        } else {\n            this.singleSelect(this.getSelections()[0]);\n        }\n        this.handlePopoverBlur();\n    };\n    //参照框点取消\n    handleCancelButtonClick = () => {\n        this.cancel();\n    };\n\n\n}\nexport default MyRefer;\n","import { high } from 'nc-lightapp-front';\nimport MyRefer from './MyRefer';\nconst { Refer } = high;\n\nexport default function (props = {}) {\n    let conf = {\n        isCacheable: false,\n        refType: 'grid',\n        refName: '单据项目',\n        placeholder: '单据项目',\n        queryGridUrl: '/nccloud/hpf/refs/HpfVo2VoBillItemRefAction.do',\n        columnConfig: [{ name: [\"字段编码\", \"字段名称\", \"位置\"], code: [\"attrcode\", \"attrname\", \"position\"] }],/* 国际化处理： 编码,名称*/\n        isMultiSelectedEnabled: true,\n        isHasDisabledData: false,\n        onChange: function (value) {\n            console.log(value);\n        }\n    };\n\n    return <MyRefer {...conf} {...props} />;\n}\n"],"names":["high","isFunction","promptBox","PopRefer","Refer","MyRefer","constructor","props","showPrompt","content","color","title","noCancelBtn","zIndex","checkSelBillItemRequired","selections","selitems_apply","filter","item","refcode","indexOf","selitems_exe","length","handleSureButtonClick","isMultiSelectedEnabled","onSureBtnClick","getSelections","pass","closeFlag","result","multiSelect","singleSelect","handlePopoverBlur","handleCancelButtonClick","cancel","state","selectedRowIndex","conf","isCacheable","refType","refName","placeholder","queryGridUrl","columnConfig","name","code","isHasDisabledData","onChange","value","console","log"],"sourceRoot":""}
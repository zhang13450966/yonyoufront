/*! @ncctag {"date":"2022/7/15 下午3:05:20"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("nc-lightapp-front"),require("uap/common/components/NCUploader/index")):"function"==typeof define&&define.amd?define(["react","nc-lightapp-front","uap/common/components/NCUploader/index"],t):"object"==typeof exports?exports["ufoc/account/dxVouch/card/index"]=t(require("react"),require("nc-lightapp-front"),require("uap/common/components/NCUploader/index")):e["ufoc/account/dxVouch/card/index"]=t(e.React,e["nc-lightapp-front"],e["uap/common/components/NCUploader/index"])}(window,(function(e,t,r){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=83)}({0:function(t,r){t.exports=e},1:function(e,r){e.exports=t},11:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJumpParam=t.isWriteRequire=t.queryIndividualRegSet=t.toCardAddFn=t.pushTo=t.advSearchClearEve=t.setCardFormDefaultValue=t.cardDidMount=t.deleteVouchs=t.AbandonVouchs=t.queryCardData=t.keyWordMapFun=t.queryKeyword=t.reBodyCountOrgStrusFun=t.clickSearchBtnFn=void 0;var o,a,n,c,s,p,u,i,d,l,f,h,m,b,y,v=t.clickSearchBtnFn=(o=A(regeneratorRuntime.mark((function e(t){var r,o,a,n,c,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $nccStore.getDef(w.STORE.getListKeymap)||$nccStore.setDef(w.STORE.getListKeymap,$nccStore.getDef(w.STORE.queryKeyword)["00000000000000000000"]),e.next=3,k(w.LIST_CONFIGS.searchCode,w.STORE.keyWordRefInfo,$nccStore.getDef(w.STORE.getListKeymap)).then((function(e){$nccStore.setDef(w.STORE.queryKeyword,N(e))}));case 3:return F(r=$appRoot.props.search.getQueryInfo(w.LIST_CONFIGS.searchCode),w.STORE.keyWordRefInfo,w.STORE.keyWordRefInfo_val,"list"),o=$appRoot.props.getSearchParam("c"),a=o+"_list",n=$appRoot.props.table.getTablePageInfo(w.LIST_CONFIGS.tableCode),c=$nccStore.getDef(w.STORE.queryKeyword),a&&(r.pageCode=a),n&&(r.pageInfo=n),r.userdefObj={},c&&(r.userdefObj.keymap=c),r.userdefObj.vouch_type=w.STORE.vouch_type,r.userdefObj.pk_hbscheme=$nccStore.getDef(w.STORE.pk_hbscheme),e.next=17,$nccUtil.promiseAjax(w.URL.queryVouch,r);case 17:(s=e.sent).success&&(p=_.get(s,"data."+w.LIST_CONFIGS.tableCode)||{rows:[]},"Refresh"!==t&&(p.allpks?$nccUtil.toast($appRoot.state.json["183004012-000031"].replace("{count}",p.allpks.length),$nccConst.spell.success):$nccUtil.toast($appRoot.state.json["183004012-000033"],$nccConst.spell.warning)),$appRoot.props.table.setAllTableData(w.LIST_CONFIGS.tableCode,p),(0,T.buttonUpdate)("default"));case 20:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),R=t.reBodyCountOrgStrusFun=(a=A(regeneratorRuntime.mark((function e(t,r,o){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="",$nccStore.getDef(w.STORE.card_keyWordRefInfo).map((function(e){"date"==e.code&&(a=e.pk_keyword)})),n={queryCondition:{pk_rcs:t,pk_periodkey:a,pk_hbscheme:r,period:o,filterType:"userPermission"}},$appRoot.props.renderItem("table",w.CARD_CONFIGS.tableCode,"pk_countorg",React.createElement($nccRefer.RcsMemberVersionTreeRef,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)}),k=t.queryKeyword=(n=A(regeneratorRuntime.mark((function e(t,r,o){var a,n,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((a=$appRoot.props.search.getQueryInfo(t).querycondition.conditions).map((function(e){if("date"==e.field){var t=$appRoot.props.search.getSearchValByField(w.LIST_CONFIGS.searchCode,"date"),r=$nccUtil.ACCPeriodUtils.parseDate(t);e.display=r}})),n=new Map,c=function(e){$nccStore.getDef(r).map((function(t){t.code==a[e].field&&("corp"!=t.code?"date"==t.code||"date_begin"==t.code||"date_end"==t.code?n.set(t.pk_keyword,a[e].display):n.set(t.pk_keyword,a[e].value.firstvalue):n.set(t.pk_keyword,o))}))},s=0;s<a.length;s++)c(s);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)}),S=t.keyWordMapFun=(c=A(regeneratorRuntime.mark((function e(t){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new Map,o=0;o<t.length;o++)a={display:t[o].display,value:t[o].value.firstvalue},r.set(t[o].field,a);return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)}),C=t.queryCardData=(s=A(regeneratorRuntime.mark((function e(t){var r,o,a,n,c,s,p,u,i,d,l,f,h,m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$nccStore.getDef(w.STORE.jumpType),o=$nccStore.getDef(w.STORE.pk_vouchhead),t&&(o=t),o){e.next=5;break}return e.abrupt("return");case 5:return a=$appRoot.props.getSearchParam("c")+"_card",n={pk_vouchhead:o,pagecode:a,areacode:w.CARD_CONFIGS.formCode,tablecode:w.CARD_CONFIGS.tableCode},"Copy"===r&&(n.iscopy=!0),e.next=10,$nccUtil.promiseAjax(w.URL.queryVouchVOByPk,n);case 10:return(c=e.sent).success&&$nccStore.setDef(w.STORE.pk_vouchhead,o),s=c.data,p=s.head,u=s.body,i=s.userjson,d=p.cardHead.rows[0].values,m||$nccPlatform.cardCache.updateCache(w.LIST_CONFIGS.pk_vouchhead,o,void 0,w.PAGE_CONST.head,w.LIST_CONFIGS.dataSource,d),$appRoot.props.form.setAllFormValue({cardHead:p.cardHead}),$nccStore.setDef(w.STORE.card_pk_keygroup,JSON.parse(i).pk_keygroup),$nccStore.setDef(w.STORE.card_pk_hbscheme,JSON.parse(i).pk_hbscheme),$nccStore.setDef(w.STORE.card_pk_repmanastru,JSON.parse(i).pk_repmanastru),$nccStore.setDef(w.STORE.card_pk_svid,JSON.parse(i).pk_svid),$nccStore.setDef(w.STORE.getCardKeymap,JSON.parse(i).keyMap.corp.value),$appRoot.props.cardTable.setTableData(w.CARD_CONFIGS.tableCode,u.cardBody),l=i?{userjson:i,pk_keygroup:JSON.parse(i).pk_keygroup,pk_accperiodscheme:JSON.parse(i).pk_accperiodscheme,filterType:"userPermission",insertIndex:5}:"",f={refpk:JSON.parse(i).pk_hbscheme},e.next=26,(0,I.getKeyWordGroups)(w.CARD_CONFIGS.formCode,f,!1,"form",l).then((function(e){e.list&&$nccStore.setDef(w.STORE.card_keyWordRefInfo_val,e.list),e.data&&$nccStore.setDef(w.STORE.card_keyWordRefInfo,e.data.keyWordRefInfo)}));case 26:"Copy"==r&&(setTimeout((function(){$appRoot.props.form.setFormItemFocus(w.CARD_CONFIGS.formCode,"pk_hbscheme")}),500),V()),c.data.head.cardHead=$appRoot.props.form.getAllFormValue("cardHead"),h=JSON.stringify(c.data),$nccStore.setDef(w.STORE.cardData,h);case 30:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),g=(t.AbandonVouchs=(p=A(regeneratorRuntime.mark((function e(t,r){var o,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={pks_vouchhead:t,cancelstate:r},!t.length){e.next=9;break}return e.next=4,$nccUtil.promiseAjax(w.URL.AbandonVouch,o);case 4:if(a=e.sent,n=a.data,!a.success){e.next=9;break}return n&&n.errMsg?(0,x.toast)({color:n.PopupWindowStyle||"warning",TextArr:[$appRoot.state.json["183004012-000027"],$appRoot.state.json["183004012-000028"],$appRoot.state.json["183004012-000029"]],content:n.message,groupOperationMsg:n.errMsg}):(0,x.toast)({color:"success",content:n.message}),e.abrupt("return",n.pks);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)}),t.deleteVouchs=(u=A(regeneratorRuntime.mark((function e(t){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={pks_vouchhead:t},!t.length){e.next=9;break}return e.next=4,$nccUtil.promiseAjax(w.URL.DelVouch,r);case 4:if(o=e.sent,a=o.data,!o.success){e.next=9;break}return a&&a.errMsg?(0,x.toast)({color:a.PopupWindowStyle||"warning",TextArr:[$appRoot.state.json["183004012-000027"],$appRoot.state.json["183004012-000028"],$appRoot.state.json["183004012-000029"]],content:a.message,groupOperationMsg:a.errMsg}):(0,x.toast)({color:"success",content:a.message}),e.abrupt("return",a.pks);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)}),t.cardDidMount=(i=A(regeneratorRuntime.mark((function e(){var t,r,o,a,n,c,s,p,u,i,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=$nccStore.getDef(w.STORE.jumpType),e.t0=t,e.next="clickId"===e.t0?4:"Edit"===e.t0?12:"Add"===e.t0?19:"Copy"===e.t0?21:"FixError"===e.t0?32:"AddList"===e.t0?39:41;break;case 4:return e.next=6,C();case 6:return r=$nccStore.getDef(w.STORE.cardData),o=JSON.parse(r),P((a=o.head)?a.cardHead.rows[0].values:null),e.abrupt("break",42);case 12:return e.next=14,C();case 14:return n=$nccStore.getDef(w.STORE.cardData),c=JSON.parse(n),s=c.head?c.head.cardHead.rows[0].values:null,j(t,s),e.abrupt("break",42);case 19:return O(),e.abrupt("break",42);case 21:return e.next=23,C(null,!0);case 23:return g(),$appRoot.props.cardTable.setColValue(w.CARD_CONFIGS.tableCode,"pk_vouchhead",{display:"",value:""}),$appRoot.props.cardTable.setColValue(w.CARD_CONFIGS.tableCode,"pk_detail",{display:"",value:""}),p=$nccStore.getDef(w.STORE.cardData),u=JSON.parse(p),(i=u.head?u.head.cardHead.rows[0].values:null)&&(i.vouch_type.value=3),j(t,i),e.abrupt("break",42);case 32:return e.next=34,C();case 34:return d=$nccStore.getDef(w.STORE.cardData),l=JSON.parse(d),f=l.head?l.head.cardHead.rows[0].values:null,j(t,f),e.abrupt("break",42);case 39:return P(),e.abrupt("break",42);case 41:return e.abrupt("break",42);case 42:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),t.setCardFormDefaultValue=(d=A(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={vouch_type:{display:$appRoot.state.json["183004012-000030"],value:3}},$appRoot.props.form.setFormItemsValue(w.CARD_CONFIGS.formCode,t);case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})),O=(t.advSearchClearEve=(l=A(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=$appRoot.props.meta.getMeta())[t].items=r[t].items.filter((function(e){return e.hasOwnProperty("isfixedcondition")})),$appRoot.props.meta.setMeta(r),$appRoot.props.search.setDisabledByField(w.PAGE_CONST.searchId,"pk_dxrela",!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)}),t.pushTo=(f=A(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?$appRoot.props.pushTo(w.PAGE_CONST.cardPath,{pk:t}):$appRoot.props.pushTo(w.PAGE_CONST.cardPath);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)}),t.toCardAddFn=(h=A(regeneratorRuntime.mark((function e(){var t,r,o,a,n,c,s,p,u,i,d,l,f,h,m,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($appRoot.props.form.EmptyAllFormValue(w.CARD_CONFIGS.formCode),$appRoot.props.cardTable.setTableData(w.CARD_CONFIGS.tableCode,{rows:[]}),(0,I.clearHbSchemeFuns)(w.CARD_CONFIGS.formCode,"pk_hbscheme.pk_dxscheme","form"),$appRoot.props.form.setFormItemsValue(w.CARD_CONFIGS.formCode,{"pk_hbscheme.pk_dxscheme.pk_dxscheme":{}}),!(t=$nccStore.getDef(w.STORE.card_AddData))){e.next=19;break}return r=t.head,o=t.userjson,$appRoot.props.form.setAllFormValue({cardHead:r.cardHead}),$nccStore.setDef(w.STORE.card_pk_keygroup,JSON.parse(o).pk_keygroup),$nccStore.setDef(w.STORE.card_pk_hbscheme,JSON.parse(o).pk_hbscheme),$nccStore.setDef(w.STORE.card_pk_repmanastru,JSON.parse(o).pk_repmanastru),$nccStore.setDef(w.STORE.getCardKeymap,JSON.parse(o).keyMap.corp.value),a={userjson:o,pk_keygroup:JSON.parse(o).pk_keygroup,pk_repmanastru:JSON.parse(o).pk_repmanastru,pk_accperiodscheme:JSON.parse(o).pk_accperiodscheme,filterType:"userPermission",insertIndex:5},n={refpk:JSON.parse(o).pk_hbscheme},e.next=16,(0,I.getKeyWordGroups)(w.CARD_CONFIGS.formCode,n,!1,"form",a).then((function(e){e.list&&$nccStore.setDef(w.STORE.card_keyWordRefInfo_val,e.list),e.data&&$nccStore.setDef(w.STORE.card_keyWordRefInfo,e.data.keyWordRefInfo)}));case 16:R(JSON.parse(o).pk_repmanastru,JSON.parse(o).pk_hbscheme,JSON.parse(o).keyMap.date.display),e.next=46;break;case 19:return e.next=21,D();case 21:if(!(c=e.sent)){e.next=34;break}s={pk_hbscheme:c.pk_hbschemeObj,"pk_hbscheme.pk_dxscheme":c.pk_dxscheme,"pk_hbscheme.pk_dxscheme.pk_dxscheme":{value:c.pk_dxscheme.value},"pk_hbscheme.pk_dxscheme.isaddvouch":{value:c.isaddvouch}},$appRoot.props.form.setFormItemsValue(w.CARD_CONFIGS.formCode,s),$nccStore.setDef(w.STORE.card_pk_hbscheme,c.pk_hbscheme),$nccStore.setDef(w.STORE.card_pk_keygroup,c.pk_keygroup),$nccStore.setDef(w.STORE.card_pk_repmanastru,c.pk_repmanastru),$nccStore.setDef(w.STORE.card_pk_svid,c.pk_svid),$nccStore.setDef(w.STORE.card_keyWordRefInfo,c.keyWordRefInfo),$nccStore.setDef(w.STORE.card_keyWordRefInfo_val,c.keyWordRefInfo_val),$nccStore.setDef(w.STORE.getCardKeymap,c.corpString),e.next=38;break;case 34:return e.next=36,$();case 36:(p=e.sent)?(u={pk_hbscheme:p.pk_hbschemeObj,"pk_hbscheme.pk_dxscheme":p.pk_dxscheme,"pk_hbscheme.pk_dxscheme.pk_dxscheme":{value:p.pk_dxscheme.value},"pk_hbscheme.pk_dxscheme.isaddvouch":{value:p.isaddvouch}},$appRoot.props.form.setFormItemsValue(w.CARD_CONFIGS.formCode,u),$nccStore.setDef(w.STORE.card_pk_hbscheme,p.pk_hbscheme),$nccStore.setDef(w.STORE.card_pk_keygroup,p.pk_keygroup),$nccStore.setDef(w.STORE.card_pk_repmanastru,p.pk_repmanastru),$nccStore.setDef(w.STORE.card_pk_svid,p.pk_svid),$nccStore.setDef(w.STORE.card_keyWordRefInfo,p.keyWordRefInfo),$nccStore.setDef(w.STORE.card_keyWordRefInfo_val,p.keyWordRefInfo_val),$nccStore.setDef(w.STORE.pk_accperiodscheme,p.pk_accperiodscheme),$nccStore.setDef(w.STORE.getCardKeymap,p.corpString)):$nccStore.setDef(w.STORE.card_keyWordRefInfo,null);case 38:if(!$nccStore.getDef(w.STORE.card_keyWordRefInfo)){e.next=46;break}if(i={keyWordRefInfo:$nccStore.getDef(w.STORE.card_keyWordRefInfo)},d={pk_hbscheme:$nccStore.getDef(w.STORE.card_pk_hbscheme),pk_keygroup:$nccStore.getDef(w.STORE.card_pk_keygroup),pk_repmanastru:$nccStore.getDef(w.STORE.card_pk_repmanastru),pk_accperiodscheme:$nccStore.getDef(w.STORE.pk_accperiodscheme),filterType:"userPermission",insertIndex:5},l=$nccStore.getDef(w.STORE.card_keyWordRefInfo_val)){for(f={},h=0;h<l.length;h++)f[l[h][0]]=l[h][1];d.userjson=JSON.stringify({keyMap:f})}return e.next=45,(0,I.doKeywordGroup)(w.CARD_CONFIGS.formCode,i,!1,"form",d);case 45:R($nccStore.getDef(w.STORE.card_pk_repmanastru),$nccStore.getDef(w.STORE.card_pk_hbscheme),JSON.parse(d.userjson).keyMap.date.display);case 46:m=$appRoot.props.form.getAllFormValue(w.CARD_CONFIGS.formCode),_=m.rows[0].values,V(),j("Add",_),g();case 51:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})),$=t.queryIndividualRegSet=(m=A(regeneratorRuntime.mark((function e(){var t,r,o,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(w.URL.individual_reg_set_query);case 2:return t=e.sent,r=t.data.individual,o=null,r&&r.length>0&&(o={},a=[],n=[],r.forEach((function(e){if("pk_hbscheme"==e.code){o.pk_hbschemeObj=e.m_strKeyVal,o.pk_hbscheme=e.m_strKeyVal.value,o.pk_keygroup=e.pk_keyword;var t=JSON.parse(e.note);o.pk_repmanastru=t.pk_rcs.value,o.pk_svid=t.pk_rcsmember,o.pk_dxscheme=t.pk_dxscheme,o.isaddvouch=t.isaddvouch,o.pk_accperiodscheme=t.pk_accperiodscheme?t.pk_accperiodscheme.value:""}else if(a.push(e),n.push([e.code,e.m_strKeyVal]),"corp"==e.code){var r=JSON.parse(e.note);o.corpString=[r.pk_org].toString()}})),o.keyWordRefInfo=a,o.keyWordRefInfo_val=n),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),D=(t.isWriteRequire=(b=A(regeneratorRuntime.mark((function e(){var t,r,o,a,n,c,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mergeFlowMonitor"!=$appRoot.props.getUrlParam("jumpType")){e.next=19;break}for(o in t=new Map,delete(r=_.cloneDeep(JSON.parse($appRoot.props.getUrlParam("searchVal")))).pk_hbscheme,r)t.set(o,r[o]);if(a={keyWordRefInfo:JSON.parse($appRoot.props.getUrlParam("keyWordRefInfo"))},n={pk_hbscheme:JSON.parse($appRoot.props.getUrlParam("searchVal")).pk_hbscheme.value,pk_keygroup:$appRoot.props.getUrlParam("pk_keygroup"),pk_repmanastru:$appRoot.props.getUrlParam("pk_repmanastru"),pk_accperiodscheme:$appRoot.props.getUrlParam("pk_accperiodscheme"),filterType:"userPermission",insertIndex:2},$nccStore.setDef(w.STORE.pk_keygroup,$appRoot.props.getUrlParam("pk_keygroup")),$nccStore.setDef(w.STORE.keyWordRefInfo,JSON.parse($appRoot.props.getUrlParam("keyWordRefInfo"))),$nccStore.setDef(w.STORE.keyWordRefInfo_val,Array.from(t)),$nccStore.setDef(w.STORE.pk_hbscheme,JSON.parse($appRoot.props.getUrlParam("searchVal")).pk_hbscheme.value),$nccStore.setDef(w.STORE.pk_repmanastru,$appRoot.props.getUrlParam("pk_repmanastru")),c=Array.from(t)){for(s={},p=0;p<c.length;p++)s[c[p][0]]=c[p][1],"corp"==c[p][0]&&$nccStore.setDef(w.STORE.getListKeymap,$appRoot.props.getUrlParam("pk_org"));n.userjson=JSON.stringify({keyMap:s})}return $appRoot.props.search.setSearchValByField(w.LIST_CONFIGS.searchCode,"pk_hbscheme",JSON.parse($appRoot.props.getUrlParam("searchVal")).pk_hbscheme),$appRoot.props.search.setSearchValByField(w.LIST_CONFIGS.searchCode,"pk_hbscheme.pk_dxscheme",JSON.parse($appRoot.props.getUrlParam("pk_dxscheme"))),e.next=18,(0,I.doKeywordGroup)(w.LIST_CONFIGS.searchCode,a,!0,"search",n);case 18:v();case 19:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)}),t.getJumpParam=(y=A(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,r=$appRoot.props.getUrlParam("searchVal"))for(o in t={},r=_.cloneDeep(JSON.parse(r)),t.pk_hbschemeObj=r.pk_hbscheme,t.pk_hbscheme=r.pk_hbscheme.value,delete r.pk_hbscheme,t.pk_keygroup=$appRoot.props.getUrlParam("pk_keygroup"),t.pk_repmanastru=$appRoot.props.getUrlParam("pk_repmanastru"),t.pk_svid=$appRoot.props.getUrlParam("pk_svid"),t.pk_dxscheme=JSON.parse($appRoot.props.getUrlParam("pk_dxscheme")),t.isaddvouch=$appRoot.props.getUrlParam("isaddvouch"),t.corpString=$appRoot.props.getUrlParam("pk_org"),t.keyWordRefInfo=JSON.parse($appRoot.props.getUrlParam("keyWordRefInfo")),t.keyWordRefInfo_val=[],r)t.keyWordRefInfo_val.push([o,r[o]]);return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}));t.createObj=N,t.reManastruFunLocal=function(e,t,r,o,a,n,c,s){var p=$appRoot.props.search,u={busidate:p.getSearchValByField(e,"date").display,list:t,company:s?s.company:p.getSearchValByField(e,"corp").value.firstvalue,pk_hbscheme:r,pk_svid:o,getListKeymap:a,status:s&&s.status?"auto":null};(0,I.reManastrusFun)(n,c,e,u,"search","userPermission").then((function(e){void 0!==e&&($nccStore.setDef(w.STORE.getListKeymap,e.pk_org),$nccStore.setDef(w.STORE.pk_svid,e.pk_svid))}))},t.saveSearchKeyword=F,t.ishide=function(){$nccStore.getDef(w.STORE.hide)&&$appRoot.props.button.setButtonVisible({show:!1,hide:!0})},t.recoveDefault=function(){(0,T.buttonUpdate)("default");var e=$appRoot.props.table.getCheckedRows(w.LIST_CONFIGS.tableCode);1==e.length?e[0]&&0==e[0].data.values.cancelstate.value?$appRoot.props.button.setButtonDisabled(["Delete","abandonaction","Attachment","Export","Print","OutPut"],!1):$appRoot.props.button.setButtonDisabled(["Delete","Del","Attachment","Export","Print","OutPut"],!1):e.length>1?$appRoot.props.button.setButtonDisabled(["Delete","Del","abandonaction","Attachment","Export","Print","OutPut"],!1):$appRoot.props.button.setButtonDisabled(["Del","abandonaction"],!0)},t.cardBrowseType=P,t.cardEditType=j,t.clearFormValue=V,t.recoveCardTableDefault=function(){$appRoot.props.cardTable.selectAllRows(w.CARD_CONFIGS.tableCode,!1),$appRoot.props.cardTable.getCheckedRows(w.CARD_CONFIGS.tableCode).length>0?$appRoot.props.button.setButtonDisabled({DelLine:!1,CopyLine:!1}):$appRoot.props.button.setButtonDisabled({DelLine:!0,CopyLine:!0})};var w=r(9),T=r(18),I=r(3),x=r(1),E=r(36);function A(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function o(a,n){try{var c=t[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}function N(e){var t=new Object;return e.forEach((function(e,r,o){t[r]=e})),t}function F(e,t,r,o){var a=e,n=$nccStore.getDef(t),c=[],s=[];a.querycondition.conditions.map((function(e){if("date"==e.field){var t=$appRoot.props.search.getSearchValByField(w.LIST_CONFIGS.searchCode,"date"),r=$nccUtil.ACCPeriodUtils.parseDate(t);e.display=r}}));for(var p=function(e){a.querycondition.conditions.map((function(t){t.field!=n[e].code?c.push(t):s.push(t)}))},u=0;u<n.length;u++)p(u);return S(s).then((function(e){$nccStore.setDef(r,Array.from(e))})),c}function P(e){$appRoot.changeStateFn({needCallBack:!0}),$appRoot.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0}),$appRoot.props.form.setFormStatus(w.CARD_CONFIGS.formCode,"browse"),$appRoot.props.cardTable.setStatus(w.CARD_CONFIGS.tableCode,"browse");var t={cancelstate:!1,error:!1};e?(e.checker.value?(0,T.cardButtonUpdate)("checker"):1==e.cancelstate.value?(Object.assign(t,{cancelstate:!0}),(0,T.cardButtonUpdate)("abandon")):1==e.errorstate.value?(Object.assign(t,{error:!0}),e["pk_hbscheme.pk_dxscheme.isaddvouch"]&&"Y"===e["pk_hbscheme.pk_dxscheme.isaddvouch"].value?(0,T.cardButtonUpdate)("error"):(0,T.cardButtonUpdate)("isBrowseAddVouch")):e["pk_hbscheme.pk_dxscheme.isaddvouch"]&&"Y"===e["pk_hbscheme.pk_dxscheme.isaddvouch"].value?(0,T.cardButtonUpdate)("ordinary"):(0,T.cardButtonUpdate)("isBrowseAddVouch"),$appRoot.props.cardPagination.setCardPaginationVisible(w.CARD_CONFIGS.cardPagination,!0)):((0,T.cardButtonUpdate)("AddList"),$appRoot.props.cardPagination.setCardPaginationVisible(w.CARD_CONFIGS.cardPagination,!1)),$appRoot.props.form.setFormItemsVisible(w.CARD_CONFIGS.formCode,t),(0,E.isShow)()}function j(e,t){$appRoot.changeStateFn({needCallBack:!1}),$appRoot.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1}),$appRoot.props.form.setFormStatus(w.CARD_CONFIGS.formCode,"edit"),$appRoot.props.cardTable.setStatus(w.CARD_CONFIGS.tableCode,"browse");var r=$appRoot.props.meta.getMeta();r[w.CARD_CONFIGS.formCode].items.map((function(e){e.visible&&("pk_hbscheme"==e.attrcode||e.isdynamic)&&(e.disabled=!1)})),r[w.CARD_CONFIGS.tableCode].items.map((function(e){e.visible&&"pk_synmeasure"!=e.attrcode&&(e.disabled=!1)}));var o={cancelstate:!1,error:!1};t?(1==t.cancelstate.value?Object.assign(o,{cancelstate:!0}):1==t.errorstate.value&&Object.assign(o,{error:!0}),t["pk_hbscheme.pk_dxscheme.isaddvouch"]&&"Y"===t["pk_hbscheme.pk_dxscheme.isaddvouch"].value&&($appRoot.props.cardTable.setStatus(w.CARD_CONFIGS.tableCode,"edit"),"Add"==e&&(e="Edit"),$appRoot.props.cardTable.getNumberOfRows(w.CARD_CONFIGS.tableCode)<=0&&$nccUtil.cardTable.addRow(w.CARD_CONFIGS.tableCode)),"3"!=t.vouch_type.value&&(r[w.CARD_CONFIGS.formCode].items.map((function(e){e.visible&&(e.disabled=!0)})),r[w.CARD_CONFIGS.tableCode].items.map((function(e){e.visible&&"digest"!=e.attrcode&&(e.disabled=!0)})),e="isEditAddVouch"),(0,T.cardButtonUpdate)(e)):(0,T.cardButtonUpdate)(e),$appRoot.props.meta.setMeta(r),$appRoot.props.form.setFormItemsVisible(w.CARD_CONFIGS.formCode,o),$appRoot.props.cardPagination.setCardPaginationVisible(w.CARD_CONFIGS.cardPagination,!1),(0,E.isShow)()}function V(){var e=$appRoot.props.form.getAllFormValue(w.CARD_CONFIGS.formCode);e.rows[0].values&&(e.rows[0].values.pk_vouchhead={},e.rows[0].values.error={},e.rows[0].values.checkdate={},e.rows[0].values.checker={},e.rows[0].values.creationtime={},e.rows[0].values.creator={},e.rows[0].values.pk_user={},e.rows[0].values.input_date={},e.rows[0].values.iorder={},e.rows[0].values.modifiedtime={},e.rows[0].values.modifier={},e.rows[0].values.errorstate={},e.rows[0].values.cancelstate={},$appRoot.props.form.setAllFormValue({cardHead:e}))}},14:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,o=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(a=0===n.indexOf("//")?n:0===n.indexOf("/")?r+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},16:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vouchPrint=function(e,t,r,o,a){var n={type:e};n=JSON.stringify(n),$nccPlatform.print("pdf",a||"/nccloud/ufoc/print/vouchPrint.do",{appcode:o,funcode:o,nodekey:t,oids:r,userjson:n})},t.vouchOutput=function(e,t,r,o,a){var n={type:e};n=JSON.stringify(n),$nccPlatform.output({url:a||"/nccloud/ufoc/print/vouchPrint.do",data:{appcode:o,funcode:o,nodekey:t,oids:r,userjson:n,outputType:"output"}})}},18:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonUpdate=function(e){var t=$appRoot.props.button,r=t.setButtonDisabled,o=t.setButtonVisible;o(["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],!1);var a=[],n={Add:!1,Delete:!1,Del:!1,abandonaction:!1,Import:!1,Export:!1,Print:!1,OutPut:!1,Refresh:!1,EditInner:!1,DeleteInner:!1,CopyInner:!1,FixerrorInner:!1,DelInner:!1,AbandonactionInner:!1,AttachmentInner:!1,ExportInner:!1};"ordinary"==e?(a=["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],Object.assign(n,{abandonaction:!0})):"error"==e?(a=["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],Object.assign(n,{Del:!0,abandonaction:!0})):"Invalid"==e?(a=["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],Object.assign(n,{Del:!0})):"selectRows"==e?(a=["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],Object.assign(n,{})):"checker"==e?(a=["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],Object.assign(n,{Delete:!0,Del:!0,abandonaction:!0})):"default"==e&&(a=["Add","Delete","Del","abandonaction","Import","Export","Print","OutPut","Refresh","EditInner","DeleteInner","CopyInner","FixerrorInner","DelInner","AbandonactionInner","AttachmentInner","ExportInner"],Object.assign(n,{Delete:!0,Del:!0,abandonaction:!0,Attachment:!0,Export:!0,Print:!0,OutPut:!0}));o(a,!0),r(n)},t.cardButtonUpdate=function(e){var t=$appRoot.props.button,r=t.setButtonDisabled,o=t.setButtonVisible;o(["Save","SaveAdd","Cancel","ComAdjVouchRefer","show","hide","AddLine","insertLine","DelLine","CopyLine","paste","Add","Edit","Delete","Copy","FixError","cancelcopy","Del","abandonaction","Attachment","Print","OutPut","Refresh","ImportBill","up","down","pasterow"],!1);var a=[],n={Save:!1,SaveAdd:!1,Cancel:!1,ComAdjVouchRefer:!1,show:!1,hide:!1,AddLine:!1,insertLine:!1,DelLine:!1,CopyLine:!1,paste:!1,cancelcopy:!1,Add:!1,Edit:!1,Delete:!1,Copy:!1,FixError:!1,Del:!1,abandonaction:!1,Attachment:!1,Print:!1,OutPut:!1,Refresh:!1,ImportBill:!1,up:!1,down:!1,pasterow:!1};"Add"==e?(a=["Save","SaveAdd","Cancel","ComAdjVouchRefer","show","AddLine","DelLine","CopyLine"],Object.assign(n,{ComAdjVouchRefer:!0,DelLine:!0,CopyLine:!0,AddLine:!0})):"AddList"==e?(a=["Add","Refresh"],Object.assign(n,{})):"Edit"==e||"FixError"==e||"Copy"==e?(a=["Save","Cancel","ComAdjVouchRefer","show","AddLine","insertLine","DelLine","CopyLine","up","down","SaveAdd"],Object.assign(n,{DelLine:!0,CopyLine:!0})):"error"==e?(a=["show","Add","Delete","Copy","FixError","Attachment","ImportBill","Print","OutPut","Refresh"],Object.assign(n,{AddLine:!0,insertLine:!0,DelLine:!0,CopyLine:!0,paste:!0,cancelcopy:!0})):"ordinary"==e?(a=["show","Add","Edit","Delete","Copy","Del","Attachment","Print","OutPut","Refresh","ImportBill"],Object.assign(n,{AddLine:!0,insertLine:!0,DelLine:!0,CopyLine:!0,paste:!0,cancelcopy:!0})):"abandon"==e?(a=["show","Add","Delete","Copy","abandonaction","Attachment","Print","OutPut","Refresh","ImportBill"],Object.assign(n,{AddLine:!0,insertLine:!0,DelLine:!0,CopyLine:!0,paste:!0,cancelcopy:!0})):"checker"==e?(a=["show","Add","Copy","Attachment","Print","OutPut","Refresh","ImportBill"],Object.assign(n,{AddLine:!0,insertLine:!0,DelLine:!0,CopyLine:!0,paste:!0,cancelcopy:!0})):"copyLine"==e?(a=["Save","SaveAdd","Cancel","ComAdjVouchRefer","paste","cancelcopy","pasterow"],Object.assign(n,{})):"isBrowseAddVouch"==e?(a=["show","Add","Delete","Copy","Del","Attachment","Print","OutPut","Refresh","ImportBill"],Object.assign(n,{AddLine:!0,insertLine:!0,DelLine:!0,CopyLine:!0,paste:!0,cancelcopy:!0})):"isEditAddVouch"==e?(a=["Save","Cancel","ComAdjVouchRefer","show","AddLine","DelLine","CopyLine","SaveAdd"],Object.assign(n,{ComAdjVouchRefer:!0,insertLine:!0,DelLine:!0,CopyLine:!0,up:!0,down:!0,AddLine:!0})):"isEditCopyAddVouch"==e&&(a=["Save","Cancel","ComAdjVouchRefer","paste","cancelcopy","cancelcopy"],Object.assign(n,{ComAdjVouchRefer:!0,paste:!0,cancelcopy:!0}));o(a,!0),r(n)}},3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeSearchCase=t.getNaturalTimeTypeLastDate=t.reManastrusFun=t.doKeywordGroup=t.getKeyWordGroups=void 0;var o,a,n,c,s,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},u=(t.getKeyWordGroups=(o=h(regeneratorRuntime.mark((function e(t,r,o,a,n,c){var s,p,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={pk_hbscheme:r.refpk},n.pk_hbscheme=r.refpk,e.next=4,$nccUtil.promiseAjax("/nccloud/ufoc/keyword/keyWordRefCreateBase.do",s);case 4:return p=e.sent,i=p.data,e.next=8,u(t,i,o,a,n,c);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r,a,n,c){return o.apply(this,arguments)}),t.doKeywordGroup=(a=h(regeneratorRuntime.mark((function e(t,r,o,a,n){var c,s,p,u,i,d,h,m,b,y,v,R,k,S,C,g,O=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Map,p=[],u=[],i="",d=[],h=n.notRenderKeyWordCodes,m=void 0===h?[]:h,r.keyWordRefInfo.forEach((function(e,r){if(!m.includes(e.code)){var o={attrcode:e.code,isdrag:!1,isfixedcondition:!1,isnotmeta:!0,label:e.name,placeholder:e.name,refcode:e.refPath,refname:e.name,refpk:e.code,required:!0,visible:e.isVisible,isdynamic:!0,onlyOne:!0},n={attrcode:e.code,initialvalue:{display:"",value:""},isExtend:!1,isconverttimezones:void 0,isfixedcondition:!1,label:e.name,refpk:e.code,remove:!1,visible:e.isVisible,required:!0,isnotmeta:!0,isdynamic:!0,onlyOne:!0};"1"==e.type?(o.itemtype="input",o.queryOperateType="=@>@>=@<@<=@like@",n.itemtype="input",n.operationSign="=@>@>=@<@<=@like@"):"2"==e.type||"4"==e.type?(o.itemtype="refer",o.queryOperateType="=@",n.itemtype="refer",n.operationSign="=@"):"3"==e.type&&($appRoot.props.renderItem(a,t,e.code,null),o.itemtype="datepicker",o.queryOperateType="=@>@>=@<@<=@like@",n.itemtype="datepicker",n.operationSign="=@>@>=@<@<=@like@"),"date"==e.code&&(i=e.pk_keyword),p.push(_.cloneDeep(o)),u.push(_.cloneDeep(n)),s.set(e.code,e.m_strKeyVal),d.push(e.code)}})),b=Array.from(s),(y=$appRoot.props.meta.getMeta())[t].items=y[t].items.filter((function(e,t){return!0!==e.isdynamic||(d.push(e.attrcode),!1)})),v=-1,n.insertIndex?v=n.insertIndex:(y[t].items.forEach((function(e,t){v=-1==v&&e.isnextrow?t:v})),v=-1==v?y[t].items.length:v),(c=y[t].items).splice.apply(c,[v,0].concat(p)),e.next=15,$appRoot.props.meta.setMeta(y);case 15:return"search"==a&&(1==(R=_.cloneDeep($appRoot.props.search.getSearchSnap(t))).length&&"root"==R[0].attrcode?(R[0].children=R[0].children.filter((function(e){return-1==d.indexOf(e.attrcode)})),S=0,n.insertIndex?S=n.insertIndex:R[0].children.map((function(e,t){S=e.isfixedcondition?t+1:S})),(k=R[0].children).splice.apply(k,[S,0].concat(u))):(R=R.filter((function(e){return-1==d.indexOf(e.attrcode)})),g=0,n.insertIndex?g=n.insertIndex:R.map((function(e,t){g=e.isfixedcondition?t+1:g})),(C=R).splice.apply(C,[g,0].concat(u))),$appRoot.props.search.setSearchSnap(t,R)),p.forEach((function(e){var r=e.attrcode;if("corp"==r){var c={queryCondition:{pk_rcs:n.pk_repmanastru,chooseMore:o,pk_periodkey:i,pk_hbscheme:n.pk_hbscheme,defaultIncludeChildren:O}};if("search"==a)if(n.userjson&&JSON.parse(n.userjson).keyMap.date&&JSON.parse(n.userjson).keyMap.date.display)c.queryCondition.period=JSON.parse(n.userjson).keyMap.date.display;else{var p=s.get("date");p&&p.display&&(c.queryCondition.period=p.display)}else if("form"==a)if(n.userjson)c.queryCondition.period=JSON.parse(n.userjson).keyMap.date.display;else{var u=s.get("date");u&&u.display&&(c.queryCondition.period=u.display)}n.filterType&&(c.queryCondition.filterType=n.filterType),$appRoot.props.renderItem(a,t,r,l.default.createElement($nccRefer.RcsMemberVersionTreeRef,c))}if("datepicker"!=e.itemtype&&("date"==r||"date_begin"==r||"date_end"==r)){var d={queryCondition:{pk_keygroup:n.pk_keygroup||n,pk_accperiodscheme:n.pk_accperiodscheme||""}};$appRoot.props.renderItem(a,t,r,l.default.createElement($nccRefer.AccPeriodUFOERef,d))}"search"==a?n.userjson?$appRoot.props.search.setSearchValByField(t,r,JSON.parse(n.userjson).keyMap[r]):$appRoot.props.search.setSearchValByField(t,r,s.get(r)):"form"==a&&(n.userjson?$appRoot.props.form.setFormItemsValue(t,f({},r,JSON.parse(n.userjson).keyMap[r])):$appRoot.props.form.setFormItemsValue(t,f({},r,s.get(r))))})),e.abrupt("return",{list:b,data:r});case 18:case"end":return e.stop()}}),e,this)}))),function(e,t,r,o,n){return a.apply(this,arguments)}));t.reManastrusFun=(n=h(regeneratorRuntime.mark((function e(t,r,o,a,n,c){var s,p,u,i,d,f,h,m,_,b,y,v,R,k=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s="",a.list.map((function(e){"date"==e.code&&(s=e.pk_keyword)})),p={queryCondition:{pk_rcs:t,chooseMore:r,pk_periodkey:s,pk_hbscheme:a.pk_hbscheme,period:a.busidate,defaultIncludeChildren:k}},c&&(p.queryCondition.filterType=c),u=$appRoot.props.meta.getMeta(),i=!0,d=!1,f=void 0,e.prev=8,h=(u[o].items||[])[Symbol.iterator]();case 10:if(i=(m=h.next()).done){e.next=19;break}if("corp"!==(_=m.value).attrcode||!_.queryCondition){e.next=16;break}return _.queryCondition=p.queryCondition,$appRoot.props.meta.setMeta(u),e.abrupt("break",19);case 16:i=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),d=!0,f=e.t0;case 25:e.prev=25,e.prev=26,!i&&h.return&&h.return();case 28:if(e.prev=28,!d){e.next=31;break}throw f;case 31:return e.finish(28);case 32:return e.finish(25);case 33:if($appRoot.props.renderItem(n,o,"corp",l.default.createElement($nccRefer.RcsMemberVersionTreeRef,p)),b={},a.status&&null!=a.status){e.next=46;break}if(""===a.company){e.next=44;break}return y={pk_periodkey:s,pk_hbscheme:a.pk_hbscheme,pk_svid:a.pk_svid,period:a.busidate,pk_orgs:a.getListKeymap},(a.isSelectLeaf||!1===a.isSelectLeaf)&&(y.isSelectLeaf=a.isSelectLeaf),e.next=41,$nccUtil.promiseAjax("/nccloud/ufoc/reportcombinestru/checkRcsVersionChange.do",y);case 41:v=e.sent,1==(R=v.data).ischange?("form"==n?$appRoot.props.form.setFormItemsValue(o,{corp:R.pk_orgs}):$appRoot.props.search.setSearchValByField(o,"corp",R.pk_orgs),b.pk_org=R.pk_orgs?R.pk_orgs.pk_org:"",b.pk_svid=R.pk_orgs?R.pk_orgs.pk_svid:null):(R.dzDataQuery&&("form"==n?$appRoot.props.form.setFormItemsValue(o,{corp:R.pk_orgs}):$appRoot.props.search.setSearchValByField(o,"corp",R.pk_orgs)),b.pk_org=a.getListKeymap,b.pk_svid=a.pk_svid);case 44:e.next=48;break;case 46:b.pk_org=a.getListKeymap,b.pk_svid=a.pk_svid;case 48:return e.abrupt("return",b);case 49:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))),function(e,t,r,o,a,c){return n.apply(this,arguments)}),t.getNaturalTimeTypeLastDate=(c=h(regeneratorRuntime.mark((function e(t,r,o){var a,n,c,s,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&p.keyWordRefInfo&&p.pk_keygroup){e.next=2;break}return e.abrupt("return",o);case 2:if(a=p.keyWordRefInfo.find((function(e){return"date"===e.code})),n=_.get(a,"periodCode"),!a||!["year","halfyear","quarter","month","tendays","week"].includes(n)){e.next=18;break}return c={pk_keygroup:p.pk_keygroup,date:o},e.next=8,$nccUtil.promiseAjax("/nccloud/ufoc/keyword/KeyWordTimeEndDate.do",c);case 8:if(!(s=e.sent).success){e.next=18;break}if(o=s.data,"search"!=r){e.next=16;break}return e.next=14,$appRoot.props.search.setSearchValByField(t,"date",{value:o,display:o});case 14:e.next=18;break;case 16:return e.next=18,$appRoot.props.form.setFormItemsValue(t,{date:{value:o,display:o}});case 18:return e.abrupt("return",o);case 19:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)}),t.changeSearchCase=(s=h(regeneratorRuntime.mark((function e(t,r,o,a){var n,c,s,p,i,d,l,f,h,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,c=new Map,t&&t.conditionobj4web&&t.conditionobj4web.public){e.next=10;break}if(s=null,1==(p=_.cloneDeep($appRoot.props.search.getSearchSnap(o))).length&&"root"==p[0].attrcode?p[0].children.forEach((function(e){"pk_hbscheme"==e.attrcode&&(s=_.get(e,"initialvalue.value"))})):p&&!p.item?p.forEach((function(e){"pk_hbscheme"==e.attrcode&&(s=_.get(e,"initialvalue.value"))})):p&&p.item&&p.item.forEach((function(e){"pk_hbscheme"==e.attrcode&&(s=_.get(e,"initialvalue.value"))})),s&&null!=s&&""!=s){e.next=10;break}return $nccPlatform.toast({color:"warning",content:$appRoot.state.json["public_lang-000299"]}),e.abrupt("return");case 10:if(t.conditionobj4web.public.conditions.forEach((function(e){"pk_hbscheme"==e.field&&(n=e.value.firstvalue),"date"==e.field||e.logic?(c.set(e.field,e.display),e.display):c.set(e.field,e.value.firstvalue)})),n){e.next=13;break}return e.abrupt("return");case 13:return i={pk_hbscheme:n,keymap:Object.fromEntries(c)},e.next=16,$nccUtil.promiseAjax("/nccloud/ufoc/queryscheme/querySchemeInfoGet.do",i,a.defaultIncludeChildren);case 16:return d=e.sent,l=d.data,f={keyWordRefInfo:l.keyWordRefInfo},h={pk_hbscheme:l.pk_hbscheme,pk_keygroup:l.pk_keygroup,pk_repmanastru:l.pk_repmanastru,pk_accperiodscheme:l.pk_accperiodscheme,filterType:a.filterType,insertIndex:a.insertIndex},m={},t.conditionobj4web.public.conditions.forEach((function(e){l.keyWordRefInfo.forEach((function(t){t.code==e.field&&(m[t.code]={value:e.value.firstvalue,display:e.display},"date"==t.code&&(m[t.code]={value:e.display,display:e.display}))}))})),h.userjson=JSON.stringify({keyMap:m}),e.next=25,u(o,f,a.chooseMore,r,h);case 25:return b=new Map,t.conditionobj4web.public.conditions.forEach((function(e){l.keyWordRefInfo.forEach((function(t){t.code==e.field&&(b.set(t.code,{value:e.value.firstvalue,display:e.display}),"date"==t.code&&b.set(t.code,{value:e.display,display:e.display}))}))})),l.keyWordRefInfo_val=Array.from(b),e.abrupt("return",l);case 29:case"end":return e.stop()}}),e,this)}))),function(e,t,r,o){return s.apply(this,arguments)});t.clearHbSchemeFuns=function(e,t,r){var o=$appRoot.props.meta.getMeta(),a=[];if(o[e].items=o[e].items.filter((function(e){return!0!==e.isdynamic||(a.push(e.attrcode),!1)})),$appRoot.props.meta.setMeta(o),"form"==r)$appRoot.props.form.setFormItemsValue(e,f({},t,{}));else{var n=_.cloneDeep($appRoot.props.search.getSearchSnap(e));1==n.length&&"root"==n[0].attrcode?n[0].children=n[0].children.filter((function(e){return-1==a.indexOf(e.attrcode)})):n=n.filter((function(e){return-1==a.indexOf(e.attrcode)})),$appRoot.props.search.setSearchSnap(e,n),$appRoot.props.search.setSearchValByField(e,t,{})}},t.confirmTitle=function(e,t,r,o,a,n,c,s){e[t].items.forEach((function(e){e.renderStatus="customer";var t=e.label;"pk_dxrela"!=e.attrcode&&"pk_dxrelation"!=e.attrcode||(e.render=function(e,r,a){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:c?"ufoc_beforeClass filter_unUse":"ufoc_beforeClass filter_use"},t," | "),l.default.createElement($nccRefer.DxRelationHeadGridRef,p({foolValue:a,isMultiSelectedEnabled:s,noPlaceholder:!0,disabled:n.pk_dxrela,className:"ufoc_refer_class",onChange:function(t){if(t.length>1){var o=[],a=[];t.forEach((function(e){o.push(e.refpk),a.push(e.refname)})),e(r,{value:o.toString(),display:a.toString()})}else e(r,{value:t[0]?t[0].refpk:t.refpk,display:t[0]?t[0].refname:t.refname})}},o?p({},o):null)))}),"pk_dxrelation.type"!=e.attrcode&&"pk_dxrela.type"!=e.attrcode||(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:c?"ufoc_beforeClass filter_unUse":"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_class",disabled:n.pk_dxrela_type,value:o.value||void 0,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},a&&a.length>0?a.map((function(e){return l.default.createElement(b,{key:e.value,value:e.value},e.display)})):null))}),"bingoType"==e.attrcode&&(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:c?"ufoc_beforeClass filter_unUse":"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_class",value:o.value||void 0,disabled:n.bingoType,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},l.default.createElement(b,{key:"0",value:"0"}," "),l.default.createElement(b,{key:"1",value:"1"},$appRoot.state.json["public_lang-000295"]),l.default.createElement(b,{key:"2",value:"2"},$appRoot.state.json["public_lang-000296"])))}),"ismeetable"==e.attrcode&&(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:c?"ufoc_beforeClass filter_unUse":"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_class",value:o.value||void 0,disabled:n.ismeetable,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},l.default.createElement(b,{key:"0",value:"0"}," "),l.default.createElement(b,{key:"1",value:"1"},$appRoot.state.json["public_lang-000297"]),l.default.createElement(b,{key:"2",value:"2"},$appRoot.state.json["public_lang-000298"])))}),"commit_state"==e.attrcode&&(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_class",value:o.value||void 0,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},l.default.createElement(b,{key:"21",value:"21"},"未上报"),l.default.createElement(b,{key:"22",value:"22"},"已退回"),l.default.createElement(b,{key:"23",value:"23"},"已上报")))}),"flag_hasten"==e.attrcode&&(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_shot_class",value:o.value||void 0,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},l.default.createElement(b,{key:"Y",value:"Y"},"是"),l.default.createElement(b,{key:"N",value:"N"},"否")))}),"flag_request"==e.attrcode&&(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_class",value:o.value||void 0,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},l.default.createElement(b,{key:"Y",value:"Y"},"是"),l.default.createElement(b,{key:"N",value:"N"},"否")))}),"flag_late"==e.attrcode&&(e.render=function(e,r,o){return l.default.createElement("div",{className:"ufoc_refer_beforeClass"},l.default.createElement("span",{className:"ufoc_beforeClass filter_use"},t," | "),l.default.createElement(m,{className:"ufoc_select_shot_class",value:o.value||void 0,onSelect:function(t,o){e(r,{value:t,display:o?o.children:void 0})}},l.default.createElement(b,{key:"Y",value:"Y"},"是"),l.default.createElement(b,{key:"N",value:"N"},"否")))})}))};var i,d=r(0),l=(i=d)&&i.__esModule?i:{default:i};function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function o(a,n){try{var c=t[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var m=r(1).base.NCSelect,b=m.NCOption},36:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a,n=(o=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$appRoot.props.cardTable.getCheckedRows(c.CARD_CONFIGS.tableCode),!_.isEmpty(t)){e.next=3;break}return e.abrupt("return",$nccUtil.toast($appRoot.state.json["183004012-000019"],$nccConst.spell.warning));case 3:r=t.map((function(e){return e.index})),$nccUtil.cardTable.delRow(c.CARD_CONFIGS.tableCode,r),(0,p.recoveCardTableDefault)();case 6:case"end":return e.stop()}}),e,this)})),a=function(){var e=o.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var c=e[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(){return a.apply(this,arguments)});t.isShow=function(){var e=$nccStore.getDef(c.STORE.hide);e&&1==e?($appRoot.props.cardTable.showColByKey(c.CARD_CONFIGS.tableCode,"pk_synmeasure"),$appRoot.props.button.setButtonVisible({show:!1,hide:!0})):($appRoot.props.cardTable.hideColByKey(c.CARD_CONFIGS.tableCode,"pk_synmeasure"),$appRoot.props.button.setButtonVisible({show:!0,hide:!1}))},t.tableButtonEvent=function(e,t){u[t].call(this)};var c=r(9),s=r(18),p=r(11);var u={AddLine:function(){$nccUtil.cardTable.addRow(c.CARD_CONFIGS.tableCode),$appRoot.props.cardTable.selectAllRows(c.CARD_CONFIGS.tableCode,!1)},DelLine:n,CopyLine:function(){var e=$appRoot.props.cardTable.getCheckedRows(c.CARD_CONFIGS.tableCode);if(_.isEmpty(e))return $nccUtil.toast($appRoot.state.json["183004012-000020"],$nccConst.spell.warning);$nccStore.setDef(c.STORE.copyCheckedRows,_.cloneDeep(e)),(0,s.cardButtonUpdate)("copyLine"),$nccStore.setDef(c.STORE.copyRowState,!0),$appRoot.props.cardTable.setAllCheckboxAble(c.CARD_CONFIGS.tableCode,!1)},paste:function(){$nccStore.setDef(c.STORE.copyRowState,!1),$nccUtil.cardTable.pasteToLastRow(c.CARD_CONFIGS.tableCode,["pk_detail"],$nccStore.getDef(c.STORE.copyCheckedRows)),(0,s.cardButtonUpdate)("Edit"),(0,p.ishide)(),(0,p.recoveCardTableDefault)(),$appRoot.props.cardTable.selectAllRows(c.CARD_CONFIGS.tableCode,!1),$appRoot.props.cardTable.setAllCheckboxAble(c.CARD_CONFIGS.tableCode,!0)},cancelcopy:function(){(0,s.cardButtonUpdate)("Edit"),(0,p.ishide)(),(0,p.recoveCardTableDefault)(),$appRoot.props.cardTable.selectAllRows(c.CARD_CONFIGS.tableCode,!1),$appRoot.props.cardTable.setAllCheckboxAble(c.CARD_CONFIGS.tableCode,!0)},show:function(){$appRoot.props.cardTable.showColByKey(c.CARD_CONFIGS.tableCode,"pk_synmeasure"),$appRoot.props.button.setButtonVisible({show:!1,hide:!0}),$nccStore.setDef(c.STORE.hide,!0)},hide:function(){$appRoot.props.cardTable.hideColByKey(c.CARD_CONFIGS.tableCode,"pk_synmeasure"),$appRoot.props.button.setButtonVisible({show:!0,hide:!1}),$nccStore.setDef(c.STORE.hide,!1)}}},4:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var a=(c=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+" */"),n=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[r].concat(n).concat([a]).join("\n")}var c;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},a=0;a<this.length;a++){var n=this[a][0];"number"==typeof n&&(o[n]=!0)}for(a=0;a<e.length;a++){var c=e[a];"number"==typeof c[0]&&o[c[0]]||(r&&!c[2]?c[2]=r:r&&(c[2]="("+c[2]+") and ("+r+")"),t.push(c))}},t}},40:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileManages=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=c(r(0)),n=c(r(67));function c(e){return e&&e.__esModule?e:{default:e}}t.FileManages=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this;return a.default.createElement("div",null,a.default.createElement(n.default,{billId:this.props.billid,onHide:function(){e.props.changeShowUploader()}}))}}]),t}(a.default.Component)},5:function(e,t,r){var o,a,n={},c=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=o.apply(this,arguments)),a}),s=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}((function(e){return document.querySelector(e)})),p=null,u=0,i=[],d=r(14);function l(e,t){for(var r=0;r<e.length;r++){var o=e[r],a=n[o.id];if(a){a.refs++;for(var c=0;c<a.parts.length;c++)a.parts[c](o.parts[c]);for(;c<o.parts.length;c++)a.parts.push(y(o.parts[c],t))}else{var s=[];for(c=0;c<o.parts.length;c++)s.push(y(o.parts[c],t));n[o.id]={id:o.id,refs:1,parts:s}}}}function f(e,t){for(var r=[],o={},a=0;a<e.length;a++){var n=e[a],c=t.base?n[0]+t.base:n[0],s={css:n[1],media:n[2],sourceMap:n[3]};o[c]?o[c].parts.push(s):r.push(o[c]={id:c,parts:[s]})}return r}function h(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=i[i.length-1];if("top"===e.insertAt)o?o.nextSibling?r.insertBefore(t,o.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),i.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=i.indexOf(e);t>=0&&i.splice(t,1)}function _(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),h(e,t),t}function b(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function y(e,t){var r,o,a,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var c=u++;r=p||(p=_(t)),o=k.bind(null,r,c,!1),a=k.bind(null,r,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),h(e,t),t}(t),o=C.bind(null,r,t),a=function(){m(r),r.href&&URL.revokeObjectURL(r.href)}):(r=_(t),o=S.bind(null,r),a=function(){m(r)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=c()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return l(r,t),function(e){for(var o=[],a=0;a<r.length;a++){var c=r[a];(s=n[c.id]).refs--,o.push(s)}e&&l(f(e,t),t);for(a=0;a<o.length;a++){var s;if(0===(s=o[a]).refs){for(var p=0;p<s.parts.length;p++)s.parts[p]();delete n[s.id]}}}};var v,R=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function k(e,t,r,o){var a=r?"":o.css;if(e.styleSheet)e.styleSheet.cssText=R(t,a);else{var n=document.createTextNode(a),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(n,c[t]):e.appendChild(n)}}function S(e,t){var r=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function C(e,t,r){var o=r.css,a=r.sourceMap,n=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||n)&&(o=d(o)),a&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var c=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(c),s&&URL.revokeObjectURL(s)}},67:function(e,t){e.exports=r},83:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(0),p=(a=s)&&a.__esModule?a:{default:a};r(84);var u=r(86),i=r(88),d=r(89),l=r(9),f=r(11),h=r(90),m=r(91),b=r(40),y=r(92);var v=$nccPlatform.createPage({orderOfHotKey:["cardHead","pk_hbscheme"]})(o=$nccUtil.AppWrapper({lang:{resources:[{domainName:"ufoc",moduleId:"183004012"}]},use:{form:[l.CARD_CONFIGS.formCode,l.CARD_CONFIGS.formInfoCode],cardTable:[l.CARD_CONFIGS.tableCode],table:[l.CARD_CONFIGS.comVouchHead]},changeFields:{},pageId:"dxVouch_card"})(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.changeStateFn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];r.setState(e,(function(){_.isFunction(t)&&t()}))},r.changeShowUploader=function(){r.setState({showUploader:!r.state.showUploader})},r.initData(),r.state={showUploader:!1,billid:null,json:{},needCallBack:!0,title:""},r}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"initData",value:(r=regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.initTemplate.call(this);case 2:(t=this.props.getUrlParam(l.STORE.jumpType))?$nccStore.setDef(l.STORE.jumpType,t):t=$nccStore.getDef(l.STORE.jumpType),t||(t="AddList"),(r=this.props.getUrlParam(l.STORE.pk_vouchhead))&&$nccStore.setDef(l.STORE.pk_vouchhead,r),$nccStore.setDef(l.STORE.currentPage,"card"),$appRoot.changeStateFn=this.changeStateFn,(0,f.cardDidMount)(),o=$appRoot.props.getSearchParam("n"),this.setState({title:o});case 12:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var c=e[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){var e={BillHeader:p.default.createElement(y.BillHead,null),cardPagination:p.default.createElement(u.CardPagination,null),refResh:p.default.createElement(u.RefreshBtn,null),Button:p.default.createElement(u.HeadButtonArea,n({},this.props,{changeStateFn:this.changeStateFn})),Form:p.default.createElement(i.FormArea,this.props),TableOne:p.default.createElement(d.TableArea,this.props),modals:p.default.createElement("div",null,p.default.createElement(m.CommonVouchModal,this.props))};return p.default.createElement("div",null,p.default.createElement($nccCom.NcBillCard,{pageConfig:e}),this.state.showUploader&&p.default.createElement("div",null,p.default.createElement(b.FileManages,n({},this.props,this.state,{changeShowUploader:this.changeShowUploader}))))}}]),t}(p.default.Component))||o)||o;t.default=v},84:function(e,t,r){var o=r(85);"string"==typeof o&&(o=[[e.i,o,""]]);var a={transform:void 0};r(5)(o,a);o.locals&&(e.exports=o.locals)},85:function(e,t,r){(e.exports=r(4)(!1)).push([e.i,".table_arae {\n  height: 100%;\n  position: relative;\n}\n.table_arae .button-app-wrapper {\n  position: absolute;\n  right: 50px;\n  top: 7px;\n  z-index: 1;\n}\n.callbtn > div {\n  position: relative;\n  -webkit-transform: translate(0px, 5px);\n          transform: translate(0px, 5px);\n  padding-bottom: 8px;\n  padding-right: 8px;\n}\n.u-modal-title {\n  width: 94%;\n}\n.modal-refresh {\n  float: right;\n  width: 26px !important;\n  min-width: 26px !important;\n  font-size: 23px !important;\n  border: 0 !important;\n  -webkit-box-shadow: 0 0 0 0 !important;\n          box-shadow: 0 0 0 0 !important;\n}\n.modal-refresh:hover {\n  float: right;\n  width: 26px !important;\n  min-width: 26px !important;\n  font-size: 23px !important;\n  border: 0 !important;\n  background-color: #dedede !important;\n  -webkit-box-shadow: 0 0 0 0 !important;\n          box-shadow: 0 0 0 0 !important;\n  border-radius: 50%;\n}\n.comVouchHead-modal-content {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n",""])},86:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshBtn=t.CardPagination=t.HeadButtonArea=void 0;var o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=r(0),c=(o=n)&&o.__esModule?o:{default:o},s=r(9),p=r(87),u=r(11);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.HeadButtonArea=function(e){function t(e){i(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.props=e,r}return l(t,e),a(t,[{key:"render",value:function(){return c.default.createElement("div",null,$appRoot.props.button.createButtonApp({area:s.CARD_CONFIGS.buttonsCode,onButtonClick:p.headButtonEvent,buttonLimit:3}))}}]),t}(c.default.Component),t.CardPagination=function(e){function t(e){var r=this;i(this,t);var o,a,n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePageInfoChange=(o=regeneratorRuntime.mark((function e(t,o,a){var n,c,p,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $nccStore.setDef(s.STORE.jumpType,"PageTurn"),e.next=3,(0,u.queryCardData)(o);case 3:n=$nccStore.getDef(s.STORE.cardData),c=JSON.parse(n),p=c.head,i=p?p.cardHead.rows[0].values:null,(0,u.cardBrowseType)(i);case 8:case"end":return e.stop()}}),e,r)})),a=function(){var e=o.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var c=e[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(e,t,r){return a.apply(this,arguments)}),n}return l(t,e),a(t,[{key:"render",value:function(){return $appRoot.props.cardPagination.createCardPagination({handlePageInfoChange:this.handlePageInfoChange,dataSource:s.PAGE_CONST.dataSource,urlPkname:s.STORE.pk_vouchhead})}}]),t}(c.default.Component),t.RefreshBtn=function(e){function t(e){return i(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),a(t,[{key:"render",value:function(){return $appRoot.props.button.createButtonApp({area:s.CARD_CONFIGS.refReshBtn,onButtonClick:p.headButtonEvent,buttonLimit:4})}}]),t}(c.default.Component)},87:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteOldData=void 0;var o,a,n,c,s,p,u,i,d,l,f,h,m,_,b,y,v,R=(o=L(regeneratorRuntime.mark((function e(){var t,r,o,a,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($appRoot.props.cardTable.filterEmptyRows(P.CARD_CONFIGS.tableCode),$appRoot.props.validatePageToToast([{type:"form",name:[P.CARD_CONFIGS.formCode]},{type:"cardTable",name:[P.CARD_CONFIGS.tableCode]}]).allPassed){e.next=4;break}return e.abrupt("return");case 4:if(t=$appRoot.props.cardTable.getAllRows(P.CARD_CONFIGS.tableCode),r=Number(0),o=Number(0),a=!1,t.map((function(e){if(e.values.debitamount.value&&e.values.creditamount.value)return $nccUtil.toast($appRoot.state.json["183004012-000010"],$nccConst.spell.fail),void(a=!0);r=$nccPlatform.sum(r,e.values.debitamount.value?e.values.debitamount.value:Number(0)),o=$nccPlatform.sum(o,e.values.creditamount.value?e.values.creditamount.value:Number(0))})),!a){e.next=10;break}return e.abrupt("return");case 10:if(r===o){e.next=14;break}$nccPlatform.promptBox({color:"warning",content:$appRoot.state.json["183004012-000011"],beSureBtnClick:function(){var e=L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:case"end":return e.stop()}}),e,n)})));return function(){return e.apply(this,arguments)}}()}),e.next=16;break;case 14:return e.next=16,k();case 16:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),k=(a=L(regeneratorRuntime.mark((function e(){var t,r,o,a,n,c,s,p,u,i,d,l,f,h,m,_,b,y,v,R,k,S,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},r=$appRoot.props.form.getAllFormValue(P.CARD_CONFIGS.formCode).rows[0].values,o=$appRoot.props.getSearchParam("c"),(a=$appRoot.props.createMasterChildData(o,P.CARD_CONFIGS.formCode,P.CARD_CONFIGS.tableCode)).pagecode=o+"_card",a.tablecode=P.CARD_CONFIGS.tableCode,n=$nccStore.getDef(P.STORE.jumpType),$nccStore.getDef(P.STORE.card_keyWordRefInfo).map((function(e){r[e.code]&&("corp"==e.code?t[e.pk_keyword]=$nccStore.getDef(P.STORE.getCardKeymap):"date"==e.code||"date_begin"==e.code||"date_end"==e.code?t[e.pk_keyword]=r[e.code].display:t[e.pk_keyword]=r[e.code].value)})),a.keymap=t,"Edit"!=n&&"FixError"!=n){e.next=27;break}return a.fixError=!1,"FixError"==n&&(a.fixError=!0),e.next=15,$nccUtil.promiseAjax(P.URL.updateVouch,a);case 15:c=e.sent,s=c.data,p=s.head,u=s.body,i=s.userjson,$appRoot.props.form.setAllFormValue({cardHead:p.cardHead}),$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,u.cardBody),d=p.cardHead.rows[0].values,$nccPlatform.cardCache.updateCache(P.LIST_CONFIGS.pk_vouchhead,d.pk_vouchhead.value,void 0,P.PAGE_CONST.head,P.LIST_CONFIGS.dataSource,d),$nccStore.setDef(P.STORE.card_pk_keygroup,JSON.parse(i).pk_keygroup),$nccStore.setDef(P.STORE.card_pk_hbscheme,JSON.parse(i).pk_hbscheme),l=JSON.stringify(c.data),$nccStore.setDef(P.STORE.cardData,l),e.next=42;break;case 27:return a.head.cardHead.rows[0].values.vouch_type.value=3,e.next=30,$nccUtil.promiseAjax(P.URL.saveVouch,a);case 30:f=e.sent,h=f.data,m=h.head,_=h.body,b=h.userjson,y=m.cardHead.rows[0].values,$appRoot.props.form.setAllFormValue({cardHead:m.cardHead}),$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,_.cardBody),$nccPlatform.cardCache.addCache(y.pk_vouchhead.value,void 0,P.PAGE_CONST.table,P.LIST_CONFIGS.dataSource,y),$nccStore.setDef(P.STORE.card_pk_keygroup,JSON.parse(b).pk_keygroup),$nccStore.setDef(P.STORE.card_pk_hbscheme,JSON.parse(b).pk_hbscheme),$appRoot.props.cardPagination.setCardPaginationId({id:y.pk_vouchhead.value}),v=JSON.stringify(f.data),$nccStore.setDef(P.STORE.cardData,v),"Add"==n&&$nccStore.setDef(P.STORE.card_AddData,f.data);case 42:a=$appRoot.props.createMasterChildData(o,P.CARD_CONFIGS.formCode,P.CARD_CONFIGS.tableCode),R=a.head.cardHead.rows[0].values.pk_vouchhead.value,$nccStore.setDef(P.STORE.pk_vouchhead,R),1==$nccStore.getDef(P.STORE.isAddSave)?((0,j.clearFormValue)(),(0,j.setCardFormDefaultValue)(),k=$appRoot.props.form.getAllFormValue(P.CARD_CONFIGS.formCode).rows[0].values,(0,j.cardEditType)("Add",k),$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,{rows:[]}),$nccStore.setDef(P.STORE.isAddSave,!1),$nccStore.setDef(P.STORE.jumpType,"SaveAdd"),$nccUtil.toast($appRoot.state.json["183004012-000034"],$nccConst.spell.success)):(S=a.head,C=S?S.cardHead.rows[0].values:null,(0,j.cardBrowseType)(C),$nccUtil.toast($appRoot.state.json["183004012-000012"],$nccConst.spell.success));case 46:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),S=(n=L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $nccStore.setDef(P.STORE.isAddSave,!0),e.next=3,R();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),C=(c=L(regeneratorRuntime.mark((function e(t){var r,o,a,n,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$nccStore.getDef(P.STORE.pk_vouchhead),o={pks_vouchhead:[r],cancelstate:t},e.next=4,$nccUtil.promiseAjax(P.URL.AbandonVouch,o);case 4:return e.sent,e.next=7,(0,j.queryCardData)(r);case 7:a=$nccStore.getDef(P.STORE.cardData),n=JSON.parse(a),c=n.head,s=c?c.cardHead.rows[0].values:null,(0,j.cardBrowseType)(s);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)}),g=(s=L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $nccStore.setDef(P.STORE.jumpType,"Del"),e.next=3,C("true");case 3:$nccUtil.toast("作废成功",$nccConst.spell.success);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),O=(p=L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $nccStore.setDef(P.STORE.jumpType,"abandonaction"),e.next=3,C("false");case 3:$nccUtil.toast("取消作废成功",$nccConst.spell.success);case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)}),$=(u=L(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$nccStore.setDef(P.STORE.jumpType,"Copy"),(0,j.clearFormValue)(),(0,j.setCardFormDefaultValue)(),$appRoot.props.cardTable.setColValue(P.CARD_CONFIGS.tableCode,"pk_vouchhead",{display:"",value:""}),$appRoot.props.cardTable.setColValue(P.CARD_CONFIGS.tableCode,"pk_detail",{display:"",value:""}),t=$appRoot.props.form.getAllFormValue(P.CARD_CONFIGS.formCode),r=t.rows[0].values,(0,j.cardEditType)("Copy",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),D=(i=L(regeneratorRuntime.mark((function e(){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$nccStore.setDef(P.STORE.jumpType,"FixError"),t=$nccStore.getDef(P.STORE.cardData),r=JSON.parse(t),o=r.head,a=o?o.cardHead.rows[0].values:null,(0,j.cardEditType)("FixError",a);case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),w=(d=L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$nccStore.setDef(P.STORE.jumpType,"Add"),(0,j.toCardAddFn)();case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)}),T=(t.DeleteOldData=(l=L(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=$appRoot.props.form.getAllFormValue("cardHead")).rows[0].values.pk_vouchhead={},r.rows[0].values.vouch_type.value=3,r.rows[0].values.cancelstate={display:$appRoot.state.json["183004012-000013"],value:!1},r.rows[0].values.errorstate={display:$appRoot.state.json["183004012-000013"],value:!1},r.rows[0].values.checkdate={},r.rows[0].values.checker={},r.rows[0].values.creationtime={},r.rows[0].values.creator={},r.rows[0].values.error={},r.rows[0].values.pk_user={},r.rows[0].values.input_date={},r.rows[0].values.iorder={},r.rows[0].values.modifiedtime={},r.rows[0].values.modifier={},$appRoot.props.form.setAllFormValue({cardHead:r}),"Copy"!==t&&$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,{rows:[]});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)}),f=L(regeneratorRuntime.mark((function e(){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$nccStore.setDef(P.STORE.jumpType,"Edit"),t=$nccStore.getDef(P.STORE.cardData),r=JSON.parse(t),o=r.head,a=o?o.cardHead.rows[0].values:null,(0,j.cardEditType)("Edit",a);case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)}),I=(h=L(regeneratorRuntime.mark((function e(){var t,r,o,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$appRoot.props.getSearchParam("c"),r=$appRoot.props.createMasterChildData(t,P.CARD_CONFIGS.formCode,P.CARD_CONFIGS.tableCode),o=r.head.cardHead.rows[0].values,a={pk_dxscheme:o["pk_hbscheme.pk_dxscheme.pk_dxscheme"].value,pk_org:$nccStore.getDef(P.STORE.getCardKeymap),pageCode:t+"_card",templetid:r.templetid},e.next=6,$nccUtil.promiseAjax(P.URL.queryCommonVouch,a);case 6:(n=e.sent).data?($nccStore.setDef(P.STORE.comVouchBody,n.data.comVouchBody.comVouchBody),$appRoot.props.table.setAllTableData(P.CARD_CONFIGS.comVouchHead,n.data.comVouchHead.comVouchHead)):$appRoot.props.table.setAllTableData(P.CARD_CONFIGS.comVouchHead,{rows:[]}),$appRoot.props.modal.show(P.CARD_CONFIGS.modalCV);case 9:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),x=(m=L(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$nccStore.setDef(P.STORE.jumpType,"delete"),t=$nccStore.getDef(P.STORE.pk_vouchhead),$nccPlatform.promptBox({title:$appRoot.state.json["183004012-000014"],color:"warning",content:$appRoot.state.json["183004012-000015"],beSureBtnClick:function(){var e=L(regeneratorRuntime.mark((function e(){var o,a,n,c,s,p,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={pks_vouchhead:[t]},e.next=3,$nccUtil.promiseAjax(P.URL.DelVouch,a);case 3:if($nccUtil.toast($appRoot.state.json["183004012-000002"],$nccConst.spell.success),$nccStore.setDef((G(o={},P.STORE.pk_vouchhead,null),G(o,P.STORE.cardData,null),G(o,P.STORE.card_pk_keygroup,null),G(o,P.STORE.card_pk_hbscheme,null),G(o,P.STORE.card_keyWordRefInfo_val,null),G(o,P.STORE.card_keyWordRefInfo,null),o)),n=$nccPlatform.cardCache.getNextId(t,P.LIST_CONFIGS.dataSource),e.t0=n,!e.t0){e.next=10;break}return e.next=10,(0,j.queryCardData)(n);case 10:$nccPlatform.cardCache.deleteCacheById(P.LIST_CONFIGS.pk_vouchhead,t,P.LIST_CONFIGS.dataSource),n?(c=$nccStore.getDef(P.STORE.cardData),s=JSON.parse(c),p=s.head,u=p?p.cardHead.rows[0].values:null,(0,j.cardBrowseType)(u)):($appRoot.props.form.EmptyAllFormValue(P.CARD_CONFIGS.formCode),$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,{rows:[]}),(0,j.cardBrowseType)());case 12:case"end":return e.stop()}}),e,r)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),E=(_=L(regeneratorRuntime.mark((function e(){var t,r,o,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($nccStore.setDef(P.STORE.jumpType,"Refresh"),!(t=$appRoot.props.form.getAllFormValue(P.CARD_CONFIGS.formCode).rows[0].values).pk_vouchhead||!t.pk_vouchhead.value){e.next=7;break}return e.next=5,(0,j.queryCardData)(t.pk_vouchhead.value);case 5:(r=$nccStore.getDef(P.STORE.cardData))&&(o=JSON.parse(r),a=o.head,n=a?a.cardHead.rows[0].values:null,(0,j.cardBrowseType)(n));case 7:$nccUtil.toast($appRoot.state.json["183004012-000007"],$nccConst.spell.success);case 8:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)}),A=(b=L(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=$nccStore.getDef(P.STORE.pk_vouchhead),$appRoot.setState({showUploader:!0,billid:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)}),N=(y=L(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=$nccStore.getDef(P.STORE.pk_vouchhead),r=[t],(0,V.vouchPrint)("vouch_card","autovouchcard_ufoc",r,"183004008A");case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}),F=(v=L(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=$nccStore.getDef(P.STORE.pk_vouchhead),r=[t],(0,V.vouchOutput)("vouch_card","autovouchcard_ufoc",r,"183004008A");case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)});t.headButtonEvent=function(e,t){U[t].call(this)};var P=r(9),j=r(11),V=r(16),B=r(3);function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function o(a,n){try{var c=t[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var U={Del:g,Copy:$,Edit:T,Add:w,Save:R,SaveAdd:S,Cancel:function(){var e,t=this;$nccPlatform.promptBox({title:$appRoot.state.json["183004012-000016"],color:"warning",content:$appRoot.state.json["183004012-000017"],beSureBtnClick:(e=L(regeneratorRuntime.mark((function e(){var r,o,a,n,c,s,p,u,i,d,l,f,h,m,_,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($appRoot.props.form.EmptyAllFormValue(P.CARD_CONFIGS.formCode),$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,{rows:[]}),"Add"!=(r=$nccStore.getDef(P.STORE.jumpType))&&"SaveAdd"!=r&&"Copy"!=r){e.next=16;break}if("Copy"==r&&$nccStore.setDef(P.STORE.jumpType,"Click"),!(o=$nccPlatform.cardCache.getCurrentLastId(P.LIST_CONFIGS.dataSource))){e.next=13;break}return $appRoot.props.cardPagination.setCardPaginationId({id:o}),e.next=10,(0,j.queryCardData)(o);case 10:$nccStore.getDef(P.STORE.cardData)?(a=$nccStore.getDef(P.STORE.cardData),n=JSON.parse(a),c=n.head,s=c?c.cardHead.rows[0].values:null,(0,j.cardBrowseType)(s)):(0,j.cardBrowseType)(),e.next=14;break;case 13:(0,j.cardBrowseType)();case 14:e.next=33;break;case 16:if(!(p=$nccStore.getDef(P.STORE.cardData))){e.next=30;break}u=JSON.parse(p),i=u.head,d=u.body,l=u.userjson,$appRoot.props.form.setAllFormValue({cardHead:i.cardHead}),$nccStore.setDef(P.STORE.card_pk_keygroup,JSON.parse(l).pk_keygroup),$nccStore.setDef(P.STORE.card_pk_hbscheme,JSON.parse(l).pk_hbscheme),f={userjson:l,pk_keygroup:JSON.parse(l).pk_keygroup,pk_accperiodscheme:JSON.parse(l).pk_accperiodscheme,filterType:"userPermission",insertIndex:5},h={refpk:JSON.parse(l).pk_hbscheme},(0,B.getKeyWordGroups)(P.CARD_CONFIGS.formCode,h,!1,"form",f).then((function(e){e.list&&$nccStore.setDef(P.STORE.card_keyWordRefInfo_val,e.list),e.data&&$nccStore.setDef(P.STORE.card_keyWordRefInfo,e.data.keyWordRefInfo)})),d&&$appRoot.props.cardTable.setTableData(P.CARD_CONFIGS.tableCode,d.cardBody),(0,j.cardBrowseType)(i.cardHead.rows[0].values),e.next=33;break;case 30:return e.next=32,(0,j.queryCardData)();case 32:$nccStore.getDef(P.STORE.cardData)?(m=$nccStore.getDef(P.STORE.cardData),_=m.head,b=_?_.cardHead.rows[0].values:null,(0,j.cardBrowseType)(b)):(0,j.cardBrowseType)();case 33:case"end":return e.stop()}}),e,t)}))),function(){return e.apply(this,arguments)})})},FixError:D,abandonaction:O,ComAdjVouchRefer:I,Delete:x,Refresh:E,Attachment:A,Print:N,OutPut:F}},88:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormArea=void 0;var o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=r(0),c=(o=n)&&o.__esModule?o:{default:o},s=r(9),p=r(18),u=r(3),i=r(11);t.FormArea=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o,a,n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onAfterEditSearch=(o=regeneratorRuntime.mark((function e(t,o,a,n){var c,d,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next="pk_hbscheme"===e.t0?3:"corp"===e.t0?35:"date"===e.t0?37:46;break;case 3:if(!n.values){e.next=22;break}return $appRoot.props.cardTable.setStatus(s.CARD_CONFIGS.tableCode,"edit"),c=n.values.pk_dxscheme,d=$nccStore.getDef(s.STORE.copyRowState),n.values.isaddvouch&&"Y"===n.values.isaddvouch.value?(d?(0,p.cardButtonUpdate)("copyLine"):(0,p.cardButtonUpdate)("Edit"),$appRoot.props.cardTable.getNumberOfRows(s.CARD_CONFIGS.tableCode)<=0&&$nccUtil.cardTable.addRow(s.CARD_CONFIGS.tableCode)):($appRoot.props.cardTable.setStatus(s.CARD_CONFIGS.tableCode,"browse"),d?(0,p.cardButtonUpdate)("isEditCopyAddVouch"):(0,p.cardButtonUpdate)("isEditAddVouch")),$appRoot.props.form.setFormItemsValue(s.CARD_CONFIGS.formCode,{"pk_hbscheme.pk_dxscheme.isaddvouch":{value:n.values.isaddvouch?n.values.isaddvouch.value:null}}),$appRoot.props.form.setFormItemsValue(s.CARD_CONFIGS.formCode,{"pk_hbscheme.pk_dxscheme":c}),$appRoot.props.form.setFormItemsValue(s.CARD_CONFIGS.formCode,{"pk_hbscheme.pk_dxscheme.pk_dxscheme":{value:c.value}}),$nccStore.setDef(s.STORE.card_pk_keygroup,n.values.pk_keygroup.value),$nccStore.setDef(s.STORE.card_pk_hbscheme,n.refpk),$nccStore.setDef(s.STORE.card_pk_repmanastru,n.values.pk_repmanastru.value),l={pk_keygroup:n.values.pk_keygroup.value,pk_repmanastru:n.values.pk_repmanastru.value,pk_accperiodscheme:n.values.pk_accperiodscheme.value,filterType:"userPermission",insertIndex:5},e.next=17,(0,u.getKeyWordGroups)(s.CARD_CONFIGS.formCode,n,!1,"form",l).then((function(e){e.list&&$nccStore.setDef(s.STORE.card_keyWordRefInfo_val,e.list),e.data&&$nccStore.setDef(s.STORE.card_keyWordRefInfo,e.data.keyWordRefInfo)}));case 17:(0,i.reBodyCountOrgStrusFun)(n.values.pk_repmanastru.value,n.refpk,$appRoot.props.form.getFormItemsValue(s.CARD_CONFIGS.formCode,"date").display),$nccStore.setDef(s.STORE.getCardKeymap,null),$nccStore.setDef(s.STORE.card_pk_svid,null),e.next=34;break;case 22:$appRoot.props.cardTable.setStatus(s.CARD_CONFIGS.tableCode,"browse"),(0,u.clearHbSchemeFuns)(s.CARD_CONFIGS.formCode,"pk_hbscheme.pk_dxscheme","form"),$appRoot.props.form.setFormItemsValue(s.CARD_CONFIGS.formCode,{"pk_hbscheme.pk_dxscheme.pk_dxscheme":{value:pk_dxscheme.value}}),$nccStore.setDef(s.STORE.card_pk_hbscheme,null),$nccStore.setDef(s.STORE.card_pk_keygroup,null),$nccStore.setDef(s.STORE.card_pk_repmanastru,null),$nccStore.setDef(s.STORE.card_keyWordRefInfo_val,null),$nccStore.setDef(s.STORE.card_keyWordRefInfo,null),$nccStore.setDef(s.STORE.getCardKeymap,null),$nccStore.setDef(s.STORE.card_pk_svid,null),$nccStore.getDef(s.STORE.copyRowState)?(0,p.cardButtonUpdate)("isEditCopyAddVouch"):(0,p.cardButtonUpdate)("isEditAddVouch");case 34:return e.abrupt("break",47);case 35:return n.values?($nccStore.setDef(s.STORE.getCardKeymap,n.values.pk_org.value),$nccStore.setDef(s.STORE.card_pk_svid,n.values.pk_svid.value),1==n.values.isorigleaf.value&&($nccUtil.toast($appRoot.state.json["183004012-000009"],$nccConst.spell.warning),$appRoot.props.form.setFormItemsValue(s.CARD_CONFIGS.formCode,{corp:{display:"",value:""}}),$nccStore.setDef(s.STORE.getCardKeymap,null),$nccStore.setDef(s.STORE.card_pk_svid,null))):($nccStore.setDef(s.STORE.getCardKeymap,null),$nccStore.setDef(s.STORE.card_pk_svid,null)),e.abrupt("break",47);case 37:if(!n||!n.value||""===n.value){e.next=42;break}return f={keyWordRefInfo:$nccStore.getDef(s.STORE.card_keyWordRefInfo),pk_keygroup:$nccStore.getDef(s.STORE.card_pk_keygroup)},e.next=41,(0,u.getNaturalTimeTypeLastDate)(s.CARD_CONFIGS.formCode,"form",n.value,f);case 41:n.value=e.sent;case 42:return h={busidate:n.refname?n.refname:n.value,company:$nccStore.getDef(s.STORE.getCardKeymap),pk_hbscheme:$nccStore.getDef(s.STORE.card_pk_hbscheme),pk_svid:$nccStore.getDef(s.STORE.card_pk_svid),list:$nccStore.getDef(s.STORE.card_keyWordRefInfo),getListKeymap:$nccStore.getDef(s.STORE.getCardKeymap),isSelectLeaf:!1},(0,u.reManastrusFun)($nccStore.getDef(s.STORE.card_pk_repmanastru),!1,s.CARD_CONFIGS.formCode,h,"form","userPermission").then((function(e){$nccStore.setDef(s.STORE.getCardKeymap,e.pk_org),$nccStore.setDef(s.STORE.card_pk_svid,e.pk_svid)})),(0,i.reBodyCountOrgStrusFun)($nccStore.getDef(s.STORE.card_pk_repmanastru),$nccStore.getDef(s.STORE.card_pk_hbscheme),n.display),e.abrupt("break",47);case 46:return e.abrupt("break",47);case 47:case"end":return e.stop()}}),e,r)})),a=function(){var e=o.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var c=e[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(e,t,r,o){return a.apply(this,arguments)}),n.props=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){return $appRoot.props.form.createForm(s.CARD_CONFIGS.formCode,{setVisibleByForm:!0,onAfterEvent:this.onAfterEditSearch,showAdvBtn:!1})}}]),t}(c.default.Component)},89:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableArea=void 0;var o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=r(0),c=(o=n)&&o.__esModule?o:{default:o},s=r(9),p=r(36);t.TableArea=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.Selected=function(e,t,r,o,a){var n=$appRoot.props.form.getAllFormValue(s.CARD_CONFIGS.formCode).rows[0].values;n["pk_hbscheme.pk_dxscheme.isaddvouch"]&&"Y"===n["pk_hbscheme.pk_dxscheme.isaddvouch"].value&&"3"==n.vouch_type.value&&($appRoot.props.cardTable.getCheckedRows(s.CARD_CONFIGS.tableCode).length>0?$appRoot.props.button.setButtonDisabled({DelLine:!1,CopyLine:!1}):$appRoot.props.button.setButtonDisabled({DelLine:!0,CopyLine:!0}))},r.SelectedAll=function(){var e=$appRoot.props.form.getAllFormValue(s.CARD_CONFIGS.formCode).rows[0].values;e["pk_hbscheme.pk_dxscheme.isaddvouch"]&&"Y"===e["pk_hbscheme.pk_dxscheme.isaddvouch"].value&&"3"==e.vouch_type.value&&($appRoot.props.cardTable.getCheckedRows(s.CARD_CONFIGS.tableCode).length>0?$appRoot.props.button.setButtonDisabled({DelLine:!1,CopyLine:!1}):$appRoot.props.button.setButtonDisabled({DelLine:!0,CopyLine:!0}))},r.props=e,r.tableButtonEvent=p.tableButtonEvent.bind(r),$appRoot.card_table_area=r,r}var r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"onAfterEvented",value:(r=regeneratorRuntime.mark((function e(t,r,o,a,n,c,p){var u,i,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o,e.next="pk_measure"===e.t0?3:"debitamount"===e.t0?10:"creditamount"===e.t0?12:14;break;case 3:return u={pk_project:a.value,pk_hbscheme:$nccStore.getDef(s.STORE.card_pk_hbscheme)},e.next=6,$nccUtil.promiseAjax(s.URL.report_measure_name_query,u);case 6:return i=e.sent,d=i.data,$appRoot.props.cardTable.setValByKeyAndIndex(r,c,"pk_synmeasure",{value:d.measureName,display:d.measureName}),e.abrupt("break",14);case 10:return a&&$appRoot.props.cardTable.setValByKeyAndIndex(r,c,"creditamount",{value:null,display:null}),e.abrupt("break",14);case 12:return a&&$appRoot.props.cardTable.setValByKeyAndIndex(r,c,"debitamount",{value:null,display:null}),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var c=e[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(e,t,r,a,n,c,s){return o.apply(this,arguments)})},{key:"render",value:function(){return c.default.createElement("div",{className:"table_arae flex-container",style:{height:"100%"}},$appRoot.props.button.createButtonApp({area:s.CARD_CONFIGS.tableButtonsCode,onButtonClick:this.tableButtonEvent,buttonLimit:5}),c.default.createElement("div",{className:"flex-container",style:{flex:"auto"}},$appRoot.props.cardTable.createCardTable(s.CARD_CONFIGS.tableCode,{noTotalCol:["digest","pk_measure","pk_measure"],showTotal:!0,adaptionHeight:!0,showIndex:!0,showCheck:!0,hideSwitch:function(){return!1},onAfterEvent:this.onAfterEvented,onSelected:this.Selected,onSelectedAll:this.SelectedAll})))}}]),t}(n.Component)},9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIST_CONFIGS={ExportModal:"ExportModal",buttons:"head",searchCode:"searchArea",tableInner:"tableInner",tableCode:"tableArea",dataSource:"ufoc.pages.dxVouch.cacheKey",pk_vouchhead:"pk_vouchhead"},t.PAGE_CONST={vouch_type:"3",headArea:"head",importArea:"importArea",modalAttachMent:"attachmentArea",head:"head",table:"table",body:"body",leftTreeId:"leftTreeId",rightTreeId:"rightTreeId",modalExport:"modalExport",modalImport:"modalImport",importTable:"importTable",cardPath:"/card",listPath:"/list",footerpk:"GLOBLE00000000000111",dataSource:"ufoc.pages.dxVouch.cacheKey",pk_vouchhead:"pk_vouchhead"},t.CARD_CONFIGS={refReshBtn:"head_r",buttonsCode:"head",tableButtonsCode:"body",tableBtnCode:"",formCode:"cardHead",formInfoCode:"cardHeadInfo",tableCode:"cardBody",cardTableOne:"computedDetail",cardTableTwo:"statisticalInformation",bottomTable:"bottomTable",comVouchHead:"comVouchHead",modalCV:"modalCV"},t.URL={queryVouch:"/nccloud/ufoc/vouchpub/queryVouchList.do",DelVouch:"/nccloud/ufoc/vouchpub/deleteVouch.do",AbandonVouch:"/nccloud/ufoc/vouchpub/abandonVouch.do",queryVouchVOByPk:"/nccloud/ufoc/vouchpub/queryVouchByPk.do",updateVouch:"/nccloud/ufoc/vouchpub/updateVouch.do",saveVouch:"/nccloud/ufoc/vouchpub/saveVouch.do",importVouch:"/nccloud/uapdr/trade/excelimport.do",ExportVouch:"/nccloud/uapdr/trade/excelexport.do",queryCommonVouch:"/nccloud/ufoc/commonvouch/commonVouchQueryBySchemePK.do",queryVouchVOTree:"/nccloud/ufoc/vouchpub/vouchTreeQuery.do",VouchSearchBypks:"/nccloud/ufoc/vouchpub/queryVouchListByPks.do",report_measure_name_query:"/nccloud/ufoc/hbproject/hbProjectMeasureNameQuery.do",export_produce:"/nccloud/uapdr/trade/excelexportproduce.do",individual_reg_set_query:"/nccloud/ufoc/individual/queryIndividualRegSet.do"},t.STORE={templetid:"templetid",oldKey:"oldKey",cardData:"cardData",modalType:"modalType",jumpType:"jumpType",pk_vouchhead:"pk_vouchhead",nodeType:"nodeType",tableData:"tableData",cardBtnName:"cardBtnName",importData:"importData",currentPage:"currentPage",listData:"listData",title:"title",tzCorpString:"tzCorpString",keyWordRefInfo_val:"keyWordRefInfo_val",card_keyWordRefInfo_val:"card_keyWordRefInfo_val",keyWordRefInfo:"keyWordRefInfo",busi_date:"busi_date",card_pk_org:"card_pk_org",KeywordMap:"KeywordMap",queryKeyword:"queryKeyword",pk_keyCompany:"pk_keyCompany",pk_hbscheme:"pk_hbscheme",pk_hbscheme_display:"pk_hbscheme_display",pk_keygroup:"pk_keygroup",buttonUpdate:"buttonUpdate",pk_vouchheadList:"pk_vouchheadList",autoModuleId:"autoModuleId",getListKeymap:"getListKeymap",hide:!1,vouch_type:["3"],comVouchBody:"comVouchBody",keywordMap:"keywordMap",alone_id:"alone_id",getCardKeymap:"getCardKeymap",card_keyWordRefInfo:"card_keyWordRefInfo",pk_repmanastru:"pk_repmanastru",pk_accperiodscheme:"pk_accperiodscheme",isAddSave:"isAddSave",pk_svid:"pk_svid",copyRowState:"copyRowState",copyCheckedRows:"copyCheckedRows",card_pk_keygroup:"card_pk_keygroup",card_pk_hbscheme:"card_pk_hbscheme",card_pk_repmanastru:"card_pk_repmanastru",card_pk_svid:"card_pk_svid",isback:"isback",currentPageLastPk:"currentPageLastPk",card_AddData:"card_AddData",openPara:"openPara",isRuningPlanEve:"isRuningPlanEve"}},90:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;t.initTemplate=(o=u(regeneratorRuntime.mark((function e(){var t,r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getPageCode(),r=_.replace(t,"_list","_card"),e.next=4,this.getTemplate({pagecode:r});case 4:return o=e.sent,a=o.template,c=o.button,o.context,e.next=10,n.call(this,a);case 10:i.call(this,c);case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)});var o,a,n=(a=u(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.renderItem("cardHead",c.CARD_CONFIGS.formCode,"pk_hbscheme",React.createElement($nccRefer.HbSchemeGridRef,null)),t[c.CARD_CONFIGS.tableCode].items.push({itemtype:"customer",attrcode:"opr",visible:!0,disabled:!1,fixed:"right",label:$appRoot.state.json["183004012-000018"],required:!1,width:"200px",render:function(){var e,t=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2];return $appRoot.props.button.createOprationButton(["insertLine","up","down","pasterow"],{area:"body_row",buttonLimit:3,onButtonClick:(e=u(regeneratorRuntime.mark((function e(){var a,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.length<=1?void 0:n[1],e.next="insertLine"===e.t0?3:"up"===e.t0?7:"down"===e.t0?9:"pasterow"===e.t0?11:18;break;case 3:return a=_.get(t,"values.digest.value"),$nccUtil.cardTable.insertRow(c.CARD_CONFIGS.tableCode,o),$appRoot.props.cardTable.setValByKeyAndIndex(c.CARD_CONFIGS.tableCode,o,"digest",{display:a,value:a}),e.abrupt("break",19);case 7:return $nccUtil.cardTable.upRow(c.CARD_CONFIGS.tableCode,o),e.abrupt("break",19);case 9:return $nccUtil.cardTable.downRow(c.CARD_CONFIGS.tableCode,o),e.abrupt("break",19);case 11:return $nccUtil.cardTable.pasteRow(c.CARD_CONFIGS.tableCode,o,["pk_detail"]),(0,s.cardButtonUpdate)("Edit"),$nccStore.setDef(c.STORE.copyRowState,!1),(0,p.ishide)(),$appRoot.props.cardTable.selectAllRows(c.CARD_CONFIGS.tableCode,!1),$appRoot.props.cardTable.setAllCheckboxAble(c.CARD_CONFIGS.tableCode,!0),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:(0,p.recoveCardTableDefault)();case 20:case"end":return e.stop()}}),e,r)}))),function(){return e.apply(this,arguments)})})}}),t.gridrelation[c.CARD_CONFIGS.comVouchHead].destBrowseAreaCode=c.CARD_CONFIGS.comVouchHead,this.props.meta.setMeta(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),c=r(9),s=r(18),p=r(11);function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function o(a,n){try{var c=t[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.props.button.setButtons(e),(0,s.cardButtonUpdate)("AddList")}},91:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonVouchModal=void 0;var o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=r(0),c=(o=n)&&o.__esModule?o:{default:o},s=r(9);function p(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function o(a,n){try{var c=t[a](n),s=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}var u=$nccPlatform.base.NCButton;t.CommonVouchModal=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.beSureBtnClickCV=p(regeneratorRuntime.mark((function e(){var t,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$nccStore.getDef(s.STORE.comVouchBody),o=$appRoot.props.table.getCheckedRows(s.CARD_CONFIGS.comVouchHead),!_.isEmpty(o)){e.next=4;break}return e.abrupt("return",$nccUtil.toast($appRoot.state.json["183004012-000006"],$nccConst.spell.warning));case 4:$appRoot.props.cardTable.setTableData(s.CARD_CONFIGS.tableCode,{rows:[]}),a=0,o.forEach((function(e){t.rows.forEach((function(t){t.values.pk_detail.value=null,e.data.values.pk_comvouch_head.value===t.values.pk_comvouch_head.value&&($appRoot.props.cardTable.addRow(s.CARD_CONFIGS.tableCode,a,t.values,!0),a++)}))})),$appRoot.props.modal.close(s.CARD_CONFIGS.modalCV);case 8:case"end":return e.stop()}}),e,r)}))),o.commonVouchRefresh=p(regeneratorRuntime.mark((function e(){var t,o,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$appRoot.props.getSearchParam("c"),o=$appRoot.props.createMasterChildData(t,s.CARD_CONFIGS.formCode,s.CARD_CONFIGS.tableCode),a={pk_dxscheme:o.head.cardHead.rows[0].values["pk_hbscheme.pk_dxscheme.pk_dxscheme"].value,pk_org:$nccStore.getDef(s.STORE.getCardKeymap),pageCode:t+"_card",templetid:o.templetid},e.next=5,$nccUtil.promiseAjax(s.URL.queryCommonVouch,a);case 5:(n=e.sent).data?($nccStore.setDef(s.STORE.comVouchBody,n.data.comVouchBody.comVouchBody),$appRoot.props.table.setAllTableData(s.CARD_CONFIGS.comVouchHead,n.data.comVouchHead.comVouchHead)):($nccStore.setDef(s.STORE.comVouchBody,null),$appRoot.props.table.setAllTableData(s.CARD_CONFIGS.comVouchHead,{rows:[]})),$nccUtil.toast($appRoot.state.json["183004012-000007"],$nccConst.spell.success);case 8:case"end":return e.stop()}}),e,r)}))),o.cancelBtnClickCV=function(){$appRoot.props.modal.close(s.CARD_CONFIGS.modalCV)},o.props=e,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this;return $appRoot.props.modal.createModal(s.CARD_CONFIGS.modalCV,{title:c.default.createElement("div",null,c.default.createElement(i,null),c.default.createElement(u,{onClick:e.commonVouchRefresh,className:"dnd-cancel modal-refresh",fieldid:"commonvouchrefresh_btn"},c.default.createElement("i",{class:"iconfont refreshIcon icon-shuaxin1"}))),content:c.default.createElement("div",{className:"comVouchHead-modal-content"},$appRoot.props.table.createSimpleTable(s.CARD_CONFIGS.comVouchHead,{showCheck:!0,showIndex:!0,adaptionHeight:!0})),beSureBtnClick:this.beSureBtnClickCV,cancelBtnClick:this.cancelBtnClickCV,noFooter:!1,hasCloseBtn:!1,userControl:!0,size:"lg",bodyHeight:"484px",width:911})}}]),t}(n.Component);function i(e){return c.default.createElement("span",null,$appRoot.state.json["183004012-000008"])}},92:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillHead=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=r(9);t.BillHead=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.backBtnClick=function(){$nccStore.setDef(a.STORE.isback,!0),$appRoot.props.pushTo(a.PAGE_CONST.listPath),$nccStore.setDef(a.STORE.hide,!1)},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),o(t,[{key:"render",value:function(){var e=$appRoot.props.getSearchParam("n");return $appRoot.props.BillHeadInfo.createBillHeadInfo({title:e,backBtnClick:this.backBtnClick,initShowBackBtn:!0})}}]),t}()}})}));
//# sourceMappingURL=index.67dd534a.js.map
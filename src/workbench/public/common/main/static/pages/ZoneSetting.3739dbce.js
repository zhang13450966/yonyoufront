(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1064:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a(26)),r=w(a(5)),o=w(a(8)),l=w(a(6)),i=w(a(7)),s=w(a(440));a(436);var c=a(1),d=w(c),u=a(38);a(1208);var p=w(a(1319)),f=w(a(1328)),g=w(a(1369)),m=w(a(1390)),h=a(20),b=a(252),v=a(404),y=a(1084),k=a(1186),C=w(a(23)),S=w(a(32));function w(e){return e&&e.__esModule?e:{default:e}}s.default.Step;var x=C.default.DragWithCom,E=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.queryLanguage=function(e,t){(0,S.default)({url:"/nccloud/platform/appregister/querylanguagevos.do",info:{action:(0,h.langCheck)("ZoneSetting-000351",!0,e),name:(0,h.langCheck)("ZoneSetting-000044",!0,e)},success:function(e){var a=e.data.data;if(a&&a.length>0){var n=a.map((function(e,t){var a=++t,n={index:"",languageType:"zh",languageCode:"simpchn"};return n.index=a>1?n.index+a:"",n.languageType=e.locallang,n.languageCode=e.langcode,n.languageMain="1"==e.langseq,n}));t(n)}}})},a.urlRequestObj=(0,h.GetQuery)(a.props.location.search),a.state={templetid:a.urlRequestObj.templetid,status:a.urlRequestObj.status,pcode:a.urlRequestObj.pcode,appcode:a.urlRequestObj.appcode,json:{},isLang:!1,isImplement:"templateSetting"===a.urlRequestObj.status||"templateSetting-unit"===a.urlRequestObj.status,ismobile:"mobile"===a.urlRequestObj.templettype,isreport:"true"===a.urlRequestObj.isreport,ts:null,multiOptions:[]},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentWillMount",value:function(){var e=this;(0,b.getMulti)({moduleId:["ZoneSetting","102202APP"],domainName:"workbench",callback:function(t){window.multiZoneSettingLang=t,e.props.setJson(t),e.queryLanguage(t,(function(a){e.setState({json:t,isLang:!0,multiOptions:a})}))}}),this.props.setImplementFlag(this.state.isImplement),this.props.setMobileFlag(this.state.ismobile),this.props.setReportFlag(this.state.isreport)}},{key:"componentDidMount",value:function(){var e=this,t=(0,h.GetQuery)(this.props.location.search);this.props.setZoneTempletid(t.templetid),v.queryAllArea.call(this).then((function(t){e.setState({ts:t.ts}),v.queryTemplateProperty.call(e)}))}},{key:"render",value:function(){var e=this.state,t=(e.json,e.isImplement),a=this.props.leftSiderShow;return d.default.createElement("div",{className:"template-setting-page"},d.default.createElement(p.default,{templetid:this.state.templetid,status:this.state.status,pcode:this.state.pcode,appcode:this.state.appcode,json:this.state.json,ts:this.state.ts,multiOptions:this.state.multiOptions}),d.default.createElement("div",{className:"template-setting-container "+(a?"":"hide-drag-line")},t?d.default.createElement(x,{defLeftWid:a?"279px":"0px",leftMinWid:a?"279px":"0px",leftDom:d.default.createElement(m.default,{json:this.state.json,status:this.state.status,show:a,multiOptions:this.state.multiOptions}),rightDom:d.default.createElement(d.default.Fragment,null,d.default.createElement(f.default,{templetid:this.state.templetid,status:this.state.status,json:this.state.json,multiOptions:this.state.multiOptions}),this.state.isLang?d.default.createElement(g.default,{json:this.state.json,status:this.state.status,multiOptions:this.state.multiOptions}):null)}):d.default.createElement(d.default.Fragment,null,d.default.createElement(m.default,{json:this.state.json,status:this.state.status,show:a,templettype:(0,h.GetQuery)(this.props.location.search)&&(0,h.GetQuery)(this.props.location.search).templettype,multiOptions:this.state.multiOptions}),d.default.createElement(f.default,{templetid:this.state.templetid,status:this.state.status,json:this.state.json,pcode:this.state.pcode,appcode:this.state.appcode,multiOptions:this.state.multiOptions}),this.state.isLang?d.default.createElement(g.default,{multiOptions:this.state.multiOptions,json:this.state.json,status:this.state.status}):null)))}}]),t}(c.Component);t.default=(0,u.connect)((function(e){return{isImplement:e.zoneSettingData.isImplement,leftSiderShow:e.zoneSettingData.leftSiderShow}}),{setJson:k.setJson,setZoneData:k.setZoneData,setZoneTempletid:k.setZoneTempletid,setZoneDataFun:y.setZoneDataFun,updateAreaList:y.updateAreaList,setImplementFlag:y.setImplementFlag,setServerData:y.setServerData,setMobileFlag:y.setMobileFlag,setReportFlag:y.setReportFlag})(E)},1084:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setReportFlag=t.setMobileFlag=t.onToggleLeftSider=t.updateSearchBox=t.setMetaTreeNodes=t.setAreaHide=t.setServerData=t.setTabLayModalVisible=t.setAreaItemVisible=t.setImplementFlag=t.updateAreaValidate=t.updateSaveFlag=t.setZoneDataFun=t.setCurrentBatchCell=t.updateBatchSource=t.setFormulaInfo=t.toggleFormula=t.clearData=t.updatePreviewData=t.updateSelectArea=t.updateAreaList=t.updateSelectCard=t.setZoneData=void 0;var n,r=a(3),o=(n=r)&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(430));t.setZoneData=function(e){return{type:l.ZONESETTING,data:e}},t.updateSelectCard=function(e){return{type:l.UPDATESELECTCARD,selectCard:e}},t.updateAreaList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];return a&&a(e),{type:l.UPDATEAREALIST,areaList:e,init:t}},t.updateSelectArea=function(e){return{type:l.UPDATESELECTAREA,selectedArea:e}},t.updatePreviewData=function(e){return{type:l.PREVIEWDATA,previewData:e}},t.clearData=function(){return{type:l.CLEARDATA}},t.toggleFormula=function(e,t){return{type:l.TOGGLEFORMULA,formula:(0,o.default)({},e,t||{visible:!1,value:""})}},t.setFormulaInfo=function(e){return{type:l.SETFORMULAINFO,formulaInfo:e}},t.updateBatchSource=function(e){return{type:l.UPDATEBATCHSOURCE,batchSource:e}},t.setCurrentBatchCell=function(e){return{type:l.SETCURRENTBATCHCELL,currentBatchCell:e}},t.setZoneDataFun=function(e){return{type:l.SETZONEFORMFUN,getFromData:e}},t.updateSaveFlag=function(e){return{type:l.UPDATESAVEFLAG,isSave:e}},t.updateAreaValidate=function(e){return{type:l.SETAREAVALIDATE,validate:e}},t.setImplementFlag=function(e){return{type:l.SETIMPLEMENTFLAG,isImplement:e}},t.setAreaItemVisible=function(e){return{type:l.SETAREAVISIBLE,areaVisible:e}},t.setTabLayModalVisible=function(e){return{type:l.TABLAYMODALVISIBLE,showTabLaySetModal:e}},t.setServerData=function(e){return{type:l.SETSEVERDATA,serverData:e}},t.setAreaHide=function(e){return{type:l.SETAREAHIDE,areaHide:e}},t.setMetaTreeNodes=function(e){return{type:l.SET_META_TREE_NODES,data:e}},t.updateSearchBox=function(e){return{type:l.UPDATE_SEARCH_BOX,boxStatus:e}},t.onToggleLeftSider=function(e){return{type:l.ONTOGGLELEFTSIDER,leftSiderShow:e}},t.setMobileFlag=function(e){return{type:l.SETMOBILEFLAG,ismobile:e}},t.setReportFlag=function(e){return{type:l.SETREPORTFLAG,isreport:e}}},1086:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutRight=t.PageLayoutLeft=t.PageLayoutHeader=t.PageScrollLayout=t.PageLayout=void 0;var n=u(a(26)),r=u(a(5)),o=u(a(8)),l=u(a(6)),i=u(a(7)),s=a(1),c=u(s),d=u(a(0));function u(e){return e&&e.__esModule?e:{default:e}}a(1087);var p=u(a(23)).default.base.NCDiv,f=!1,g=function(e){function t(e){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,o.default)(t,[{key:"handleMouseUp",value:function(){f=!1}},{key:"handleMouseMove",value:function(e){if(f){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,r=parseInt(t-n)+3;r<200||(a.style.width=r+"px")}}},{key:"render",value:function(){return c.default.createElement("div",{className:"nc-workbench-page nc-workbench-page-userinfo"},this.props.header?this.props.header:null,c.default.createElement("div",{onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+(this.props.className||"")},this.props.children))}}]),t}(s.Component),m=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={suck:!1},a.initScrollContainerTop,a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"handleMouseUp",value:function(){f=!1}},{key:"handleMouseMove",value:function(e){if(f){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,r=parseInt(t-n)+3;r<200||(a.style.width=r+"px")}}},{key:"handleScroll",value:function(e){var t=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;if(t==this.initScrollContainerTop&&this.setState({suck:!1}),t<this.initScrollContainerTop){if(this.state.suck)return;this.containerWidthChange(),this.setState({suck:!0})}}},{key:"containerWidthChange",value:function(){var e=this.refs.ncWorkbenchPageOwnpage.getBoundingClientRect().width;document.getElementsByClassName("nc-workbench-page-header")[0].style.width=e+"px",document.getElementById("suckTableHeader")&&(document.getElementById("suckTableHeader").style.width=e+"px")}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.containerWidthChange);var e=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;this.initScrollContainerTop=e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.containerWidthChange)}},{key:"render",value:function(){var e=this.state.suck;return c.default.createElement("div",{className:"nc-workbench-page-scroll",onScroll:this.handleScroll.bind(this)},c.default.createElement("div",{className:"nc-workbench-page"},c.default.createElement("div",{className:"nc-workbench-page-container "+(e?"nc-workbench-suck":""),ref:"ncWorkbenchPageScroll"},this.props.header?this.props.header:null,c.default.createElement("div",{onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),ref:"ncWorkbenchPageOwnpage",className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+(this.props.className||"")},this.props.children))))}}]),t}(s.Component),h=function(e){function t(e){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,o.default)(t,[{key:"handleMouseDown",value:function(){f=!0}},{key:"render",value:function(){return c.default.createElement("div",{id:"layoutLeft",className:"nc-workbench-ownpage-left "+(this.props.className||""),style:this.props.style?this.props.style:{background:"#f6f6f6"}},c.default.createElement("span",{className:"layout-drag-block",onMouseDown:this.handleMouseDown.bind(this)}),this.props.children)}}]),t}(s.Component),b=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleBindKey=a.handleBindKey.bind(a),a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleBindKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleBindKey,!1)}},{key:"handleBindKey",value:function(e){var t=e||window.event||arguments.callee.caller.arguments[0];t&&t.keyCode&&t.shiftKey&&27==t.keyCode&&this.props.pageback&&this.props.pageback()}},{key:"render",value:function(){return c.default.createElement(p,{areaCode:p.config.HEADER,className:"nc-workbench-page-header "+(this.props.className||"")},this.props.children)}}]),t}(s.Component),v=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"nc-workbench-ownpage-right "+(this.props.className||"")},this.props.children)}}]),t}(s.Component);g.propTypes={children:d.default.any.isRequired},h.propTypes={children:d.default.any.isRequired},v.propTypes={children:d.default.any.isRequired},t.PageLayout=g,t.PageScrollLayout=m,t.PageLayoutHeader=b,t.PageLayoutLeft=h,t.PageLayoutRight=v},1087:function(e,t,a){var n=a(1088);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1088:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,'.nc-workbench-page{position:absolute;top:0;z-index:10;height:100%;width:100%;padding:0;display:flex;flex-direction:column}.nc-workbench-page .nc-workbench-page-header{flex:0 0 45px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;border-radius:3px 3px 0 0;background:#fff;padding:0 20px}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn{display:flex;align-items:center;font-size:16px;color:#111;font-weight:700}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont{margin-right:16px;border-radius:50%;font-size:16px;padding:0 4px;font-weight:400;line-height:24px;cursor:pointer}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont:hover{background:#e8e8e8}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn img{margin-right:10px}.nc-workbench-page .nc-workbench-page-header .header_in_icon{display:flex;font-weight:700;font-size:16px;color:#111;line-height:24px}.nc-workbench-page .nc-workbench-page-header .header_in_icon span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-ownpage{min-width:800px;height:calc(100% - 45px);border-radius:0 0 3px 3px}.nc-workbench-page .nc-workbench-ownpage-all{display:flex;justify-content:flex-start;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nc-workbench-page .nc-workbench-ownpage-left{position:relative;height:100%;min-width:280px}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block{position:absolute;right:-3px;z-index:10;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:block;padding:0 3px;height:100%;border-radius:3px;cursor:w-resize}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:after{content:"";display:block;width:1px;height:100%;background:#d9d9d9}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:hover:after{width:2px;background:rgba(0,0,0,.54)}.nc-workbench-page .nc-workbench-ownpage-right{min-width:50%;flex:1}.nc-workbench-page-scroll{height:100%;width:100%;overflow-y:auto}.nc-workbench-page-scroll .nc-workbench-page-container{margin-top:0;min-height:100%;background:#fff;border-radius:3px}.nc-workbench-page-scroll .nc-workbench-page-container .nc-workbench-page-header{position:static;transition:top .7s ease;height:46px}.nc-workbench-page-scroll .nc-workbench-page-container .suck-table-header{position:static;transition:top .7s ease}.nc-workbench-page-scroll .nc-workbench-suck{padding-top:80px}.nc-workbench-page-scroll .nc-workbench-suck .nc-workbench-page-header{position:fixed;z-index:1;top:44px}.nc-workbench-page-scroll .nc-workbench-suck .suck-table-header{position:fixed;z-index:1;top:94px}@media screen and (min-width:1280px){.nc-workbench-page{padding:0}}@media screen and (min-width:1440px){.nc-workbench-page{padding:0}}@media screen and (min-width:1600px){.nc-workbench-page{padding:0}}',""])},1090:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(1)),r=a(31),o=i(a(23)),l=i(a(408));function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.appIcons;t.default=function(e){var t=e.appCode,a=(0,r.getStore)("APPICONSSTORE"),o=(0,r.getStore)("nccIcon")||"";o=o.length?o+"_":o;var i=a&&a[t],c=s&&s[o+i]?s[o+i]:l.default[o]?l.default[o]:l.default.defaultIcon;return n.default.createElement("div",{style:{width:"24px",height:"24px",marginRight:"10px",background:"url("+c+") no-repeat 0px 0px",backgroundSize:"contain"}})}},1093:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1037),o=a(1039),l=(n=o)&&n.__esModule?n:{default:n};t.default=(0,r.DragDropContext)(l.default)},1095:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processClass=function(e){return String(e).replace(/\.|\&|\#/g,"-")}},1096:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(a(2)),r=u(a(1038)),o=u(a(26)),l=u(a(5)),i=u(a(8)),s=u(a(6)),c=u(a(7)),d=(u(a(1212)),u(a(1187)));function u(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,i.default)(t,[{key:"getMetaTreeData",value:function(){var e=this.getRoot(),a=t.serialize(this).nodes.reverse(),o=new r.default;return a.forEach((function(e){var t=e.data,a=e.children;a&&a.length>0?(a=a.map((function(e){return o.get(e.data.myUniqID)})),o.set(t.myUniqID,(0,n.default)({},t,{children:a}))):o.set(t.myUniqID,t)})),o.get(e.data.myUniqID)}}],[{key:"createBigTree",value:function(e,a,n){if(!e||0===e.length)return console.error(new Error("Cannot create tree")),null;a&&n||console.error(new Error("getMainKeyFn, getParentKeyFn cannot be undefined"));var o=new r.default,l=null,i=null;return e.forEach((function(e){if(n(e)){var r=new d.default(e);o.set(a(e),r)}else l=new t(e),i=l.getRoot(),o.set(a(e),i)})),o.forEach((function(e,t,r){var o=a(e.data),l=n(e.data);if(o!==a(i.data)){var s=r.get(l);e.parent=s,s.children.push(e)}})),l}}]),t}(u(a(1213)).default);t.default=p},1186:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setJson=t.clearZoneData=t.setTemplateDataFun=t.setZoneDataFun=t.setNewList=t.setZoneState=t.setZoneTempletid=t.setZoneData=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(429));t.setZoneData=function(e){return{type:n.SETZONEDATA,data:e}},t.setZoneTempletid=function(e){return{type:n.ZONETEMPLATID,data:e}},t.setZoneState=function(e){return{type:n.ZONESTATE,data:e}},t.setNewList=function(e){return{type:n.SETNEWLIST,data:e}},t.setZoneDataFun=function(e){return{type:n.ZONEDATAFUN,getFromData:e}},t.setTemplateDataFun=function(e){return{type:n.SETTEMPLATEFUN,getTemplateFromData:e}},t.clearZoneData=function(){return{type:n.CLEARDATA}},t.setJson=function(e){return{type:n.JSON,data:e}}},1187:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(5),o=(n=r)&&n.__esModule?n:{default:n};t.default=function e(t){(0,o.default)(this,e),this.data=t,this.parent=null,this.children=[]}},1188:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(1038)),r=f(a(2)),o=f(a(22)),l=f(a(97));t.asyncQueryMetaPro=function(e){var t=this.props.json;return new l.default((function(a,n){(0,i.default)({url:"/nccloud/platform/templet/querymetapro.do",info:{name:(0,s.langCheck)("ZoneSetting-000017","pages",t),action:(0,s.langCheck)("ZoneSetting-000020","pages",t)},data:{metaid:e},success:function(e){if(e){var n=e.data,r=n.data,o=n.success;o&&r&&r.rows&&r.rows.length>0?a(r):(0,u.default)({status:"warning",msg:(0,s.langCheck)("ZoneSetting-000021","pages",t)})}}})}))},t.queryMetaTreeData=function(e,t){var a=this.props.json;return new l.default((function(n,r){(0,i.default)({url:"/nccloud/platform/templet/searchmeta.do",data:{metaid:e,text:t},info:{name:(0,s.langCheck)("ZoneSetting-000017","pages",a),action:(0,s.langCheck)("ZoneSetting-000020","pages",a)},success:function(e){var t=e.data.data;n(t)}})}))},t.createMetaTreeIns=function(e,t){var a=[],r=new n.default,o=[],l=e,i=null;o.push(l);for(;o.length>0;){var s=l,d=(s.pid,s.refcode,s.refpk,s.childs),u=l.children?l.children:d;if(l.children=u,i=g.call(this,l,r,t),r.set(i.myUniqID,i),u&&u.length>0)for(var p=u.length-1;p>=0;p--)u[p].pUniqID=i.myUniqID,o.push(u[p]);l=o.pop()}return r.forEach((function(e){a.push(e)})),r.clear(),c.default.createBigTree(a,(function(e){return e.myUniqID}),(function(e){return e.pUniqID}))},t.appendMetaTreeNodes=function(e,t,a){var n=this.props.targetAreaType,o=a.getNode((function(e){return e.data.myUniqID===t})),l=o.data,i=(l.children,l.refpk,l.myUniqID),s=l.notSearchAreaCode,c=l.datatype,u=(l.dataRef,[]),p=e.map((function(e){var a=(0,r.default)({},e,{title:e.refcode+" "+e.refname,key:i+"."+e.refcode,pUniqID:t,myUniqID:i+"."+e.refcode,isLeaf:e.isleaf});"0"!==n&&s&&(a.notSearchAreaCode=s+"."+e.refcode),"0"!==n&&"205"===c&&(a.notSearchAreaCode=""+e.refcode);var l=new d.default(a);return l.parent=o,u.push(l),a}));return o.data.children=p,o.children=u,a},t.queryMetaPropByKeyWords=function(e,t,a){var l=t.getRoot(),i=c.default.serialize(t).nodes.reverse(),s=new n.default;i.forEach((function(e){return s.set(e.data.myUniqID,e)}));var d=p.default.filter(i,(function(t){return t.data.title.indexOf(e)>-1})),u=[],f=void 0;for(;d.length>0;){var g=(f=d.pop()).data.pUniqID;g&&function(){var e=s.get(g);e&&("0"===e.data.myUniqID||p.default.find(d,(function(t){return t.data.myUniqID===e.data.myUniqID}))||d.unshift(e),!e.data.isLeaf&&a.indexOf(g)<0&&a.push(g),!f.data.isLeaf&&f.children.length>0&&!p.default.find(d,(function(e){return e.data.pUniqID===f.data.myUniqID}))&&a.push(f.data.myUniqID))}(),u.push(f.data)}if(0===(u=p.default.filter(u,(function(e){return"0"!==e.myUniqID}))).length){var m=l.data,h=(m.children,(0,o.default)(m,["children"])),b=(0,r.default)({},h,{children:[]});u.unshift(b)}else u.unshift(l.data);return c.default.createBigTree(u,(function(e){return e.myUniqID}),(function(e){return e.pUniqID}))};var i=f(a(32)),s=a(20),c=(f(a(1213)),f(a(1096))),d=f(a(1187)),u=f(a(59)),p=f(a(68));function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t,a){var n=void 0,l=e.children,i=(0,o.default)(e,["children"]),s=i.refcode,c=i.refname,d=i.pid,u=i.refpk,p=i.isleaf,f=i.pUniqID,g=(i.datatype,t.get(f));return d?(n=(0,r.default)({},i,{children:l,title:s+" "+c,key:("0"===g.myUniqID?"":g.myUniqID+".")+s,pUniqID:g.myUniqID,myUniqID:("0"===g.myUniqID?"":g.myUniqID+".")+s,level:g.level+1,isLeaf:p}),"0"!==a&&g.notSearchAreaCode&&(n.notSearchAreaCode=g.notSearchAreaCode+"."+s),"0"!==a&&"205"===g.datatype&&(n.notSearchAreaCode=""+s)):n=(0,r.default)({},i,{children:l,title:"",key:u,pUniqID:null,myUniqID:"0",level:0,isLeaf:p}),n}},1189:function(e,t,a){var n=a(1367);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1208:function(e,t,a){var n=a(1317);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1209:function(e,t,a){var n=a(1327);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1210:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(254));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={refType:"grid",refName:(0,l.langCheck)("0000PUB-000061"),placeholder:(0,l.langCheck)("0000PUB-000061"),refCode:"uapbd.refer.userdef.DefdocListGridRef",queryGridUrl:"/nccloud/uapbd/userdef/DefdocListGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:[(0,l.langCheck)("0000PUB-000062"),(0,l.langCheck)("0000PUB-000063")],code:["code","name"]}]};return r.default.createElement(s,(0,n.default)(t,e))};var r=i(a(1)),o=a(253),l=a(20);function i(e){return e&&e.__esModule?e:{default:e}}var s=o.high.Refer},1211:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=C(a(51)),l=C(a(26)),i=C(a(5)),s=C(a(8)),c=C(a(6)),d=C(a(7)),u=C(a(2)),p=C(a(29)),f=C(a(1)),g=a(38),m=a(1037),h=C(a(23)),b=a(1084),v=a(1095),y=C(a(1354)),k=a(405);function C(e){return e&&e.__esModule?e:{default:e}}var S=h.default.base,w=S.NCButton,x=S.NCTabs,E=x.NCTabPane,T=function(e,t,a){return e.renderCard({item:t,cardIndex:a,areaType:e.type})},M=function(e){return f.default.createElement("ul",{className:"area-item-content",fieldid:"content",style:{display:e.isShow?"block":"none"}},f.default.createElement("div",{className:"search-area-content"},f.default.createElement("div",{className:"query-btn-area"},f.default.createElement(w,{colors:"primary",fieldid:"search"},f.default.createElement("i",{className:"iconfont icon-sousuo"}))),e.listWithBlank.map((function(t,a){return T(e,t,a)}))))},A=(0,m.DropTarget)("area",{drop:function(e,t,a){"card"===t.getItem().type&&e.onTabPaneDrop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=(0,y.default)("form")(n=function(e){function t(){var e,a,n,r;(0,i.default)(this,t);for(var s=arguments.length,d=Array(s),u=0;u<s;u++)d[u]=arguments[u];return a=n=(0,c.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(d))),n.getAllTabs=function(){return[n.props.areaItem].concat(n.props.areaItem.formTabs)},n.formTabChange=function(e,t){n.props.onTabChange&&n.props.onTabChange(e),n.props.updateSearchBox({isHighlight:!0}),n.props.onAreaClick(void 0,t)},n.renderTabCard=function(e,t,a){var r=n.props.areaList.findIndex((function(e){return e.pk_area===t.pk_area}));return n.props.renderCard({item:e,cardIndex:a,areaType:"form",areaIndex:r,shouldHideGray:n.props.areaVisible[t.pk_area]||!1})},n.renderTabsFormArea=function(){var e=n.props,t=e.areaItem,a=e.activeTabKey,r=e.connectDropTarget,l=(e.areaHide,n.getAllTabs()),i=function(e){var t,a=(t=e,l.find((function(e){return e.code===t})));n.props.onTabChange&&n.props.onTabChange(e),n.props.updateSearchBox({isHighlight:!0}),n.props.onAreaClick(void 0,a)};return r(f.default.createElement("div",{className:"table-tabs-container",onClick:function(e){return e.stopPropagation()},"data-searchcodes":(0,o.default)(l.map((function(e){return e.code})))},f.default.createElement(x,{activeKey:a||t.code,tabBarStyle:"simple",extraContent:n.props.tabsExtraArea,onChange:i,onTabClick:i,onPrevClick:function(e){console.log("onPrevClick",e)},onNextClick:function(e){console.log("onNextClick",e)}},l.map((function(e){var t=[].concat((0,p.default)(e.queryPropertyList),[{blank:!0,areaid:e.pk_area,code:"blank"}]).map((function(t,a){return n.renderTabCard(t,e,a)})),a=(0,k.getMultiLangText)(e,"name",n.props.multiOptions);return f.default.createElement(E,{tab:a,key:e.code},n.renderFormArea(t,e))})))))},n.renderFormArea=function(e,t){var a=n.props,r=a.areaItem,o=a.children,l=t?t.code:r.code,i=e||n.props.listWithBlank.map((function(e,t){return T(n.props,e,t)}));return f.default.createElement("ul",{className:"area-item-content",fieldid:"content",style:{display:n.props.isShow?"block":"none"}},f.default.createElement("div",{className:"form-area-content drag-mask-content-"+(r?(0,v.processClass)(l):"")},i),o&&o(t))},n.renderArea=function(){return Array.isArray(n.props.areaItem.formTabs)?n.renderTabsFormArea():n.renderFormArea()},r=a,(0,c.default)(n,r)}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return this.renderArea()}}]),t}(f.default.Component))||n)||n,_=(0,m.DropTarget)("area",{drop:function(e,t,a){"card"===t.getItem().type&&e.onTabPaneDrop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(r=(0,y.default)("table")(r=function(e){function t(){var e,a,n,r;(0,i.default)(this,t);for(var s=arguments.length,d=Array(s),u=0;u<s;u++)d[u]=arguments[u];return a=n=(0,c.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(d))),n.hasTabs=function(){return n.props.areaItem.tabs&&n.props.areaItem.tabs.length>0},n.getAreaIndexByPk=function(e){if(e){var t=void 0;return n.props.areaList.map((function(a,n){a.pk_area===e.pk_area&&(t=n)})),t}},n.getAllTabs=function(){return[n.props.areaItem].concat(n.props.areaItem.tabs)},n.renderTableContent=function(e,t){var a=t?t.code:n.props.areaItem.code,r=e||n.props.listWithBlank.map((function(e,t){return T(n.props,e,t)})),o=t?t.isShow:n.props.isShow;return f.default.createElement("ul",{className:"area-item-content search-area-"+(String(a).replace(/\.|\&|\#/g,"")||"unknow"),fieldid:"content",style:{display:o?"block":"none"}},f.default.createElement("div",{className:"table-area-content "+(n.props.isTile?"tile-view":"")+" drag-mask-content-"+(0,v.processClass)(a)},r),n.props.children&&n.props.children(t))},n.renderTabCard=function(e,t,a){var r=n.getAreaIndexByPk(t);return n.props.renderCard({item:e,cardIndex:a,areaType:"table",areaIndex:r,shouldHideGray:n.props.areaVisible[t.pk_area]||!1})},n.renderTabsTableArea=function(){var e=n.props,t=e.areaItem,a=e.activeTabKey,r=e.connectDropTarget,l=e.areaHide,i=n.getAllTabs(),s=function(e){var t,a=(t=e,i.find((function(e){return e.code===t})));n.props.onTabChange&&n.props.onTabChange(e),n.props.updateSearchBox({isHighlight:!0}),n.props.onAreaClick(void 0,a)};return r(f.default.createElement("div",{className:"table-tabs-container",onClick:function(e){return e.stopPropagation()},"data-searchcodes":(0,o.default)(i.map((function(e){return e.code})))},f.default.createElement(x,{activeKey:a||t.code,tabBarStyle:"simple",extraContent:n.props.tabsExtraArea,onChange:s,onTabClick:s,onPrevClick:function(e){console.log("onPrevClick",e)},onNextClick:function(e){console.log("onNextClick",e)}},i.map((function(e){var t=[].concat((0,p.default)(e.queryPropertyList),[{blank:!0,areaid:e.pk_area,code:"blank"}]).map((function(t,a){return n.renderTabCard(t,e,a)})),a=(0,k.getMultiLangText)(e,"name",n.props.multiOptions);return!l[e.pk_area]&&f.default.createElement(E,{tab:a,key:e.code},n.renderTableContent(t,e))})))))},n.renderTableArea=function(){return n.hasTabs()?n.renderTabsTableArea():n.renderTableContent()},r=a,(0,c.default)(n,r)}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return this.renderTableArea()}}]),t}(f.default.Component))||r)||r;t.default=(0,g.connect)((function(e){return{areaList:e.zoneSettingData.areaList,areaVisible:e.zoneSettingData.areaVisible,areaHide:e.zoneSettingData.areaHide,newAreaList:e.zoneSettingData.newAreaList}}),{updateSelectArea:b.updateSelectArea,updateSearchBox:b.updateSearchBox})((function(e){return f.default.createElement(f.default.Fragment,null,e.renderHeader,function(){var t=void 0;switch(e.listWithBlank=[].concat((0,p.default)(e.areaItem.queryPropertyList),[{blank:!0,code:"blank",areaid:e.areaItem.pk_area}]),e.areaItem.areatype){case"0":t=f.default.createElement(M,(0,u.default)({type:"search"},e));break;case"1":t=f.default.createElement(A,(0,u.default)({type:"form"},e));break;case"2":t=f.default.createElement(_,(0,u.default)({type:"table"},e))}return t}())}))},1212:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(5)),r=l(a(8)),o=l(a(1187));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(t){(0,n.default)(this,e),this._root=t instanceof o.default?t:this.initNode(t)}return(0,r.default)(e,[{key:"initNode",value:function(e){return new o.default(e)}},{key:"traverseDF",value:function(e){var t=[],a=[],n=this._root;if(n)for(a.push(n);0!=a.length;){n=a.pop(),t.push(n);for(var r=n.children,o=r.length-1;o>=0;o--)a.push(r[o])}t.forEach((function(t){e(t)}))}},{key:"traverseBF",value:function(e){var t=[];t.unshift(this._root);for(var a=t.pop();a;){for(var n=0,r=a.children.length;n<r;n++)t.unshift(a.children[n]);e(a),a=t.pop()}}},{key:"contains",value:function(e,t){t.call(this,e)}},{key:"add",value:function(e,t,a){var n=this.initNode(e),r=null;if(this.contains((function(e){e.data===t&&(r=e)}),a),!r)throw new Error("Cannot add node to a non-existent parent.");return r.children.push(n),n.parent=r,n}},{key:"remove",value:function(e,t,a){var n=null,r=void 0;if(this.contains((function(e){e.data===t&&(n=e)}),a),!n)throw new Error("Parent does not exist.");if(!((r=n.children.findIndex((function(t){return t.data===e})))>-1))throw new Error("Node to remove does not exist.");return n.children.splice(r,1)}},{key:"getRoot",value:function(){return this._root}}]),e}();t.default=i},1213:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(1038)),r=p(a(1066)),o=p(a(26)),l=p(a(5)),i=p(a(8)),s=p(a(6)),c=p(a(7)),d=p(a(1212)),u=p(a(1187));function p(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,i.default)(t,[{key:"getNode",value:function(e,t){var a=null;return t||(t=this.traverseDF),this.contains((function(t){e(t)&&(a=t)}),t),a}},{key:"before",value:function(e,t,a){a||(a=this.traverseDF);var n=this.getNode((function(t){return t.data===e}),a),o=this.getNode((function(e){return e.data===t}),a),l=null,i=null,s=null,c=null,d=-1,p=-1,f=null;if(null===o)throw new Error("Target Node is not in the tree");return p=(c=(i=o.parent).children).findIndex((function(e){return e.data===t})),null===n?(n=new u.default(e),i.children=(0,r.default)(c.slice(0,p),n,c.slice(p)),n.parent=i):(d=(s=(l=n.parent).children).findIndex((function(t){return t.data===e})),l===i?(p=d<p?p-1:p,f=c.splice(d,1),i.children=(0,r.default)(c.slice(0,p),f,c.slice(p))):(f=s.splice(d,1),i.children=(0,r.default)(c.slice(0,p),f,c.slice(p)),n.parent=i),f=null),n}},{key:"after",value:function(e,t,a){a||(a=this.traverseDF);var n=this.getNode((function(t){return t.data===e}),a),o=this.getNode((function(e){return e.data===t}),a),l=null,i=null,s=null,c=null,d=-1,p=-1,f=null;if(null===o)throw new Error("Target Node is not in the tree");return p=(c=(i=o.parent).children).findIndex((function(e){return e.data===t})),null===n?(n=new u.default(e),i.children=(0,r.default)(c.slice(0,p+1),n,c.slice(p+1)),n.parent=i):(d=(s=(l=n.parent).children).findIndex((function(t){return t.data===e})),l===i?(p=d<p?p-1:p,f=c.splice(d,1),i.children=(0,r.default)(c.slice(0,p+1),f,c.slice(p+1))):(f=s.splice(d,1),i.children=(0,r.default)(c.slice(0,p+1),f,c.slice(p+1)),n.parent=i),f=null),n}},{key:"append",value:function(e,t,a){a||(a=this.traverseDF);var n=this.getNode((function(t){return t.data===e}),a),r=this.getNode((function(e){return e.data===t}),a),o=null,l=-1;if(null===r)throw new Error("Target Node is not in the tree");return null===n?n=this.add(e,t,this.traverseDF):(l=(o=n.parent.children).findIndex((function(t){return t.data===e})),o.splice(l,1),r.children.push(n),n.parent=r,null),n}}],[{key:"serialize",value:function(e,a){var n={isDF:!0===a,nodes:[]};if(e instanceof t!=!0)return console.error(new Error("it it not instanceof TreeModel")),n;return(!0===a?e.traverseDF:e.traverseBF).call(e,(function(e){n.nodes.push(e)})),n}},{key:"createTree",value:function(e,a,r){if(!e||0===e.length)return console.error(new Error("Cannot create tree")),null;a&&r||console.error(new Error("getMainKeyFn, getParentKeyFn cannot be undefined"));var o=new n.default,l=null;return e.forEach((function(e){if(o.set(a(e),e),r(e)){var n=o.get(r(e));l.add(e,n,l.traverseBF)}else l=new t(e)})),l}}]),t}(d.default);t.default=f},1214:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(22)),r=d(a(118)),o=a(1),l=d(o),i=a(38),s=d(a(32)),c=a(20);function d(e){return e&&e.__esModule?e:{default:e}}var u=d(a(23)).default.base,p=u.NCCheckbox,f=u.NCSelect,g=f.NCOption;t.default=(0,i.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard}}))((function(e){var t=e.selectCard,a=e.dataSource,i=e.json,d=e.referData,u=(0,o.useState)([]),m=(0,r.default)(u,2),h=m[0],b=m[1],v=(0,o.useRef)();(0,o.useEffect)((function(){d.pk&&(y(),v.current&&v.current!==d.pk&&C(""),v.current=d.pk)}),[d.pk]);var y=function(){d.pk;var e=(0,n.default)(d,["pk"]);(0,s.default)({url:"/nccloud/platform/templet/queryDataPowerUsageScenarios.do",data:e,info:{name:(0,c.langCheck)("ZoneSetting-000356","pages",i),action:(0,c.langCheck)("ZoneSetting-000200","pages",i)},success:function(e){var t=e.data,a=t.success,n=t.data.resMapList;a&&b(void 0===n?[]:n)}})},k=function(t){e.onUsedSceneChange(t)},C=function(t){e.onDataPowerEnableChange(t),t?y():k("")};return!v.current&&!t.isdatapowerenable||0===h.length?null:l.default.createElement("div",{className:"mdcontent"},l.default.createElement("div",{className:"mdcontentItem"},l.default.createElement("span",{className:"refer_label"},(0,c.langCheck)("ZoneSetting-000355","pages",i)),l.default.createElement(p,{checked:Boolean(a.isdatapowerenable),onChange:C})),a.isdatapowerenable?l.default.createElement("div",{className:"mdcontentItem"},l.default.createElement("span",{className:"refer_label"},(0,c.langCheck)("ZoneSetting-000356","pages",i)),l.default.createElement("span",{style:{display:"inline-block"}},l.default.createElement(f,{style:{width:220},showClear:!1,value:a.datapoweroperationcode,notFoundContent:(0,c.langCheck)("ZoneSetting-000278","pages",i),onChange:k},h.map((function(e,t){return l.default.createElement(g,{key:""+e.value+t,value:e.value},e.display)}))))):null)}))},1215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return React.createElement(o,{value:e.value,style:{width:250},showSearch:!0,supportSearch:!0,optionFilterProp:"children",onChange:e.onChange},e.optionData.map((function(e){return React.createElement(l,{value:e.value},e.display)})))};var n,r=a(23);var o=((n=r)&&n.__esModule?n:{default:n}).default.base.NCSelect,l=o.NCOption},1216:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(26)),r=d(a(5)),o=d(a(8)),l=d(a(6)),i=d(a(7)),s=a(1),c=d(s);function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.renderChildren=function(){var e=a.props,t=e.children,n=e.onDragItemClick;return c.default.Children.map(t,(function(e){return c.default.cloneElement(e,{onDragItemClick:n&&n.bind(a,e.props)})}))},a.state={},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.headerTitle,a=e.renderHeader;return c.default.createElement("div",{className:"side-panel"},c.default.createElement("div",{className:"panel-header"},a||c.default.createElement("span",{className:"title"},t)),c.default.createElement("div",{className:"panel-content clearfix"},this.renderChildren()))}}]),t}(s.Component);t.default=u},1317:function(e,t,a){var n=a(426);(e.exports=a(16)(!1)).push([e.i,'.reset-antd-checkbox .ant-checkbox-checked .ant-checkbox-inner,.reset-antd-checkbox .ant-checkbox-indeterminate .ant-checkbox-inner{background-color:#e14c46;border-color:#e14c46}.reset-antd-checkbox .ant-checkbox-input:focus+.ant-checkbox-inner,.reset-antd-checkbox .ant-checkbox-wrapper:hover .ant-checkbox-inner,.reset-antd-checkbox .ant-checkbox:hover .ant-checkbox-inner{border-color:#e14c46}.reset-antd-select .ant-select-selection:hover{border-color:#40a9ff}.reset-antd-select .ant-select-selection:focus{border-color:#007ace}.empty-area-style{color:#9b9b9b}.empty-area-style .iconfont{color:#f0871a;font-size:13px;margin-right:2px}.hover-property{background:#2797ff;left:-2px}.hover-property,.hover-property-after{content:"";position:absolute;width:2px;top:0;bottom:0;z-index:10}.hover-property-after{background:#f7c1c1;left:0}.template-setting-page{width:100%;height:100%;padding:7px 8px 0}.template-setting-page .ant-input-sm{height:24px}.template-setting-page .template-setting-steps{margin:8px 30px;background:#fff;height:54px;display:flex;justify-content:center;align-items:center;padding:0 20px}.template-setting-page .template-setting-steps .ant-steps-item-process .ant-steps-item-title:after{background-color:#ccc}.template-setting-page .template-setting-steps .ant-steps{margin:0 19%}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-finish .ant-steps-item-icon{height:20px;line-height:20px;width:20px;background:#e14c46;border:1px solid #e14c46;margin-top:1px}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-finish .ant-steps-item-icon span{color:#fff}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-finish .ant-steps-item-content .ant-steps-item-title:after{background:#e14c46}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-process .ant-steps-item-icon{height:20px;line-height:20px;width:20px;background:#fff;border:1px solid #e14c46;margin-top:1px}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-process .ant-steps-item-icon span{color:#e14c46}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-wait .ant-steps-item-icon{height:20px;line-height:20px;width:20px;background:#fff;border:1px solid #bfbfbf;margin-top:1px}.template-setting-page .template-setting-steps .ant-steps .ant-steps-item-wait .ant-steps-item-icon span{color:#bfbfbf}.template-setting-page .display_none{display:none}.template-setting-page .template-setting-header{align-items:center;background:#fff;display:flex;height:45px;justify-content:space-between;padding-left:20px;padding-right:20px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom:1px solid #e0e0e0}.template-setting-page .template-setting-header .header-name{display:flex;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;font-style:normal;align-items:center}.template-setting-page .template-setting-header .header-name .iconfont{margin-right:6px;border-radius:50%;font-size:16px;padding:0 4px;font-weight:400;line-height:24px;cursor:pointer}.template-setting-page .template-setting-header .header-name .iconfont:hover{background:#e8e8e8}.template-setting-page .template-setting-header .header-name span{font-size:16px;color:#111;font-weight:700}.template-setting-page .template-setting-container{position:relative;display:flex;flex-flow:row;background:#fff;min-height:calc(100vh - 178px);border-bottom-left-radius:3px;border-bottom-right-radius:3px}.template-setting-page .template-setting-container .plat-def{height:30px!important;line-height:30px!important}.template-setting-page .template-setting-container .plat-def .refer{width:88%!important;left:6%!important}.template-setting-page .template-setting-container .dragWidthCom_right{display:flex;width:100%}.template-setting-page .template-setting-container .dragWidthCom_left{position:relative;overflow:unset;max-width:440px}.template-setting-page .template-setting-container .dragWidthCom_line:active,.template-setting-page .template-setting-container .dragWidthCom_line:hover,.template-setting-page .template-setting-container .dragWidthCom_line:visited{background:rgba(0,0,0,.54)}.template-setting-page .template-setting-container .template-setting-left-sider-container{border-right:1px solid #eaeaea}.template-setting-page .template-setting-container .template-setting-left-sider-container:hover .toggle-left-btn{display:block}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-tab{height:42px;background:#fff;display:flex;justify-content:space-around;color:rgba(85,85,85,.65);border-bottom:1px solid #e8e8e8}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-tab div{height:100%;line-height:42px;font-weight:500;cursor:pointer}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-tab div.active{border-bottom:2px solid #e14c46;color:#e14c46}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree{display:flex;flex-direction:column;height:100%;overflow:hidden;padding:6px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-contianer{overflow:auto;width:100%;flex:1}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-contianer .wui-tree{padding-left:10px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-contianer .wui-tree li span.wui-tree-iconEle{height:26px;line-height:26px;margin:0 12px 0 3px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-contianer .wui-tree.wui-tree-show-line li:not(:last-child)>.wui-tree-switcher-noop{background-position:-56px -13px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-contianer .wui-tree li .wui-tree-node-content-wrapper{padding:0}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tip{font-size:12px;margin-left:6px;color:#111}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tip .iconfont{color:#f0871a;font-size:13px;margin-right:2px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .checkbox-hotkey-wrapper,.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search{margin-left:12px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search .ant-select-sm{height:33px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search .ant-select-selection .ant-select-selection__rendered{height:28px;overflow:hidden}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search .ant-select-selection .ant-select-selection__rendered ul{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:flex-start}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search .ant-select-selection .ant-select-selection__rendered ul li.ant-select-selection__choice{height:22px;line-height:22px;max-width:50%}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search .ant-select-selection .ant-select-selection__rendered ul .ant-select-selection__choice.ant-select-selection__choice__disabled{min-width:57px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .left-tree-search .ant-select-selection .ant-select-selection__rendered ul li.ant-select-search input{height:22px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-feature-container{z-index:1;width:100%}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-feature-container .ant-input-suffix{right:8px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-feature-container .ant-input-suffix .st-icon-sousuo{font-size:16px;display:block;cursor:pointer}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-feature-container .ant-input-suffix .st-icon-sousuo:before{color:#878b94}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .tree-feature-container .ant-input-suffix .ant-input-search-icon{display:none}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .check-all-tree{margin-bottom:10px}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .moved-tree-node>.wui-tree-line>.wui-tree-node-content-wrapper.wui-tree-node-selected{background:unset}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .moved-tree-node>.wui-tree-line>.wui-tree-node-content-wrapper>.wui-tree-title{color:#999;cursor:not-allowed}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree li.drag-over-gap-top>.wui-tree-node-content-wrapper[draggable]{border-top:unset}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree li.drag-over-gap-bottom>.wui-tree-node-content-wrapper[draggable]{border-bottom:unset}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .wui-tree li .wui-tree-node-content-wrapper .iconfont{color:#ffcf31}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .wui-tree li .wui-tree-node-content-wrapper .wui-tree-title{background:inherit}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .nc-tree.wui-tree li.moved-tree-node>.wui-tree-node-content-wrapper:hover{background:unset}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .not-have-meta-data{position:absolute;top:180px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:#888;font-size:14px;text-align:center}.template-setting-page .template-setting-container .template-setting-left-sider-container .left-side-meta-tree .not-have-meta-data img{display:block;width:80px;height:80px;margin-bottom:10px}.template-setting-page .template-setting-container .template-setting-left-sider{width:279px;padding:5px;height:calc(100vh - 110px);overflow-y:auto;border-bottom-left-radius:3px}.template-setting-page .template-setting-container .template-setting-left-sider.implement{height:calc(100vh - 140px)}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel{padding:6px}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-header .title{font-size:13px;font-weight:500}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-header .tip{font-size:12px;margin:0 2px 16px 12px;color:#9b9b9b;color:#111}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-header .tip .iconfont{color:#f0871a;font-size:13px;margin-right:2px}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content{display:flex;margin-top:10px;flex-wrap:wrap}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item-wrapper{display:flex;cursor:move;background:#fff;color:#111;width:48%;min-height:35px;padding:6px 12px;margin-right:4%;margin-bottom:8px;border:1px solid #d9d9d9;border-radius:3px;justify-content:left;align-items:center;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item-wrapper:hover{border-color:#0c88fe}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item-wrapper:active{border-color:#0c88fe;color:#0073e1}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item-wrapper:nth-child(2n){margin-right:0}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item{line-height:16px}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item .name{font-size:13px;vertical-align:middle}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item .iconfont{font-size:16px;margin-right:4px;vertical-align:middle}.template-setting-page .template-setting-container .template-setting-left-sider .side-panel .panel-content .drag-item svg{width:16px;height:16px;margin-right:4px;vertical-align:middle}.template-setting-page .template-setting-container .template-setting-right-sider{border-left:1px solid #dddfe1;width:256px;background:#fafafa;border-bottom-right-radius:5px;min-height:calc(100vh - 178px)}.template-setting-page .template-setting-container .template-setting-right-sider .ant-tabs-tabpane{height:calc(100vh - 190px);overflow-y:auto}.template-setting-page .template-setting-container .template-setting-right-sider .basic-property{display:flex;flex-wrap:wrap;padding:0 10px;color:#2b3441;align-items:center;max-height:calc(100vh - 150px)}.template-setting-page .template-setting-container .template-setting-right-sider .basic-property li:nth-child(odd){list-style-type:none;width:35%;display:inline-block;line-height:1.3;text-align:right;padding:0 6px 6px 0}.template-setting-page .template-setting-container .template-setting-right-sider .basic-property li:nth-child(2n){list-style-type:none;width:65%;display:inline-block;line-height:30px;padding-bottom:6px}.template-setting-page .template-setting-container .template-setting-right-sider .basic-property .metapath{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.template-setting-page .template-setting-container .template-setting-right-sider .attachmentSearch .ant-input-suffix .anticon-search{display:none}.template-setting-page .template-setting-container .template-setting-right-sider .attachmentSearch .icon-danchuang{font-size:13px;color:rgba(0,0,0,.45);cursor:pointer;transition:all .3s;display:inline-block;font-style:normal;vertical-align:-.125em;text-align:center;text-transform:none;line-height:1;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}.template-setting-page .template-setting-container .from-card{padding:10px 10px 0;border-radius:0 0 3px 3px}.template-setting-page .template-setting-container .from-card .ant-row{display:flex;flex-direction:column}.template-setting-page .template-setting-container .from-card .ant-row div{flex-direction:row}.template-setting-page .template-setting-container .from-card .ant-row .ant-col-lg-12,.template-setting-page .template-setting-container .from-card .ant-row .ant-col-md-24,.template-setting-page .template-setting-container .from-card .ant-row .ant-col-xl-8{width:100%;max-width:100%;padding:0!important}.template-setting-page .template-setting-container .from-card .ant-row .ant-col-lg-12 .ant-form-item,.template-setting-page .template-setting-container .from-card .ant-row .ant-col-md-24 .ant-form-item,.template-setting-page .template-setting-container .from-card .ant-row .ant-col-xl-8 .ant-form-item{margin:0 0 3px}.template-setting-page .template-setting-container .from-card .ant-form-item{display:flex}.template-setting-page .template-setting-container .from-card .ant-form-item .ant-input{font-size:13px}.template-setting-page .template-setting-container .from-card .ant-form-item-control-wrapper{flex:1}.template-setting-page .template-setting-container .from-card .ant-form-item-control-wrapper .ant-form-item-children{width:100%}.template-setting-page .template-setting-container .from-card .ant-form-item-label{min-width:96px;line-height:34px}.template-setting-page .template-setting-container .from-card .ant-form-item-label label:after{content:" ";margin-right:6px}.template-setting-page .template-setting-container .toggle-left-btn{display:none;position:absolute;cursor:pointer;background-color:#737b8d;top:50%;left:300px;width:15px;text-align:center;line-height:40px;-webkit-transform:translateY(-50%);transform:translateY(-50%);border-top-right-radius:3px;border-bottom-right-radius:3px;z-index:21}.template-setting-page .template-setting-container .toggle-left-btn .iconfont{font-size:12px;color:#cbd0dc}.template-setting-page .template-setting-container .toggle-left-btn:hover{background-color:#8499c3}.template-setting-page .template-setting-container .toggle-left-btn.show{display:block}.template-setting-page .template-setting-container .toggle-left-btn.show .iconfont{display:inline-block;-webkit-transform:scaleX(-1);transform:scaleX(-1)}.template-setting-page .template-setting-container .toggle-left-btn.hide{display:none}.template-setting-page .template-setting-container .toggle-left-btn.implement{left:unset;right:-14px}.template-setting-page .template-setting-container .spread-height .toggle-left-btn.implement{right:-5px}.template-setting-page .template-setting-container .template-setting-left-sider.implement{width:100%}.template-setting-page .template-setting-container .template-setting-left-sider-container.spread-height{height:calc(100vh - 140px)}.template-setting-page .template-setting-container .wui-tree-searchable-filter{color:#e14c46;transition:all .3s ease}.template-setting-page .template-setting-container .nc-select-wrapper{line-height:100%}.template-setting-page .template-setting-content{height:calc(100vh - 110px);overflow-y:auto;flex:1;padding:12px 10px 10px;scroll-behavior:smooth}.template-setting-page .template-setting-content .content-area-template-name{font-size:14px;color:#2b2c42;font-weight:500}.template-setting-page .template-setting-content .area-item{background:#fff;border-radius:3px;border:1px solid #ccc;margin-top:15px;box-shadow:0 0 5px -2px #c8c8c8;position:relative}.template-setting-page .template-setting-content .area-item.active{border:1px solid #0073e1;box-shadow:0 0 0 2px #8ac6ff}.template-setting-page .template-setting-content .area-item:hover{border-color:#0073e1}.template-setting-page .template-setting-content .area-item.active .area-item-button,.template-setting-page .template-setting-content .area-item.card-active .area-item-button,.template-setting-page .template-setting-content .area-item:hover .area-item-button{display:flex}.template-setting-page .template-setting-content .area-item .area-item-header{position:relative;cursor:move;background:#fff;height:40px;padding:0 10px;border-radius:3px}.template-setting-page .template-setting-content .area-item .area-item-header .area-item-name-wrapper{cursor:pointer;flex:1}.template-setting-page .template-setting-content .area-item .area-item-header .ant-checkbox-inner{width:14px;height:14px}.template-setting-page .template-setting-content .area-item .area-item-header.hide{display:none}.template-setting-page .template-setting-content .area-item .area-item-name{font-size:14px}.template-setting-page .template-setting-content .area-item .area-item-name .area-name{font-weight:500;padding-left:8px;color:#111;vertical-align:middle;line-height:40px}.template-setting-page .template-setting-content .area-item .area-item-name .iconfont{font-size:12px;color:#999696;vertical-align:middle}.template-setting-page .template-setting-content .area-item .area-item-name .expand.tab{position:absolute;left:10px;bottom:-30px;z-index:1}.template-setting-page .template-setting-content .area-item .area-item-button{display:none;align-items:center}.template-setting-page .template-setting-content .area-item .area-item-button .base-checkbox-wrapper{display:flex}.template-setting-page .template-setting-content .area-item .area-item-button .base-checkbox-wrapper label{font-size:12px;margin-right:16px}.template-setting-page .template-setting-content .area-item .area-item-button a{font-size:12px;margin-right:16px;line-height:1.5}.template-setting-page .template-setting-content .area-item .area-item-button a.disabled{color:#b9b9b9}.template-setting-page .template-setting-content .area-item .area-item-button .link,.template-setting-page .template-setting-content .area-item .area-item-button a{color:#555}.template-setting-page .template-setting-content .area-item .area-item-button a:not(.disabled):hover{color:#0073e1}.template-setting-page .template-setting-content .area-item .area-item-button .opr-btn:hover{color:#e14c46}.template-setting-page .template-setting-content .area-item .area-item-button .opr-btn:hover:not(.icon-btn){border:1px solid #e14c46}.template-setting-page .template-setting-content .area-item .area-item-button.float{position:absolute;top:-16px;right:-4px;height:28px;background:#f6f6f6;border-radius:3px;padding:2px 5px;box-shadow:0 1px 3px 0 hsla(0,0%,46.3%,.5);z-index:1}.template-setting-page .template-setting-content .area-item .nc-input{border:none}.template-setting-page .template-setting-content .area-item .opr-btn{display:inline-block;cursor:pointer;background:#fff;width:30px;height:30px;line-height:30px;text-align:center;margin-right:0;border:1px solid #d0d0d0;border-radius:3px;vertical-align:middle}.template-setting-page .template-setting-content .area-item .opr-btn .iconfont{font-size:20px}.template-setting-page .template-setting-content .area-item .opr-btn .icon-shanchu,.template-setting-page .template-setting-content .area-item .opr-btn .icon-xinzengfenzu{font-size:16px}.template-setting-page .template-setting-content .area-item .opr-btn .iconfont.disabled{color:#b9b9b9}.template-setting-page .template-setting-content .area-item .opr-btn.icon-btn{border:none;background:transparent;width:22px;height:24px;line-height:24px}.template-setting-page .template-setting-content .area-item .opr-btn.icon-btn .iconfont{font-size:18px}.template-setting-page .template-setting-content .area-item .btn-group>span{display:inline-block}.template-setting-page .template-setting-content .area-item .btn-group>.opr-btn:not(.icon-btn){border-radius:0;border-right:0}.template-setting-page .template-setting-content .area-item .btn-group>.opr-btn:not(.icon-btn):hover{border-right:0}.template-setting-page .template-setting-content .area-item .btn-group>.opr-btn:not(.icon-btn):hover:last-child{border-right:1px solid #e14c46}.template-setting-page .template-setting-content .area-item .btn-group .opr-btn:not(.icon-btn)+.opr-btn:hover,.template-setting-page .template-setting-content .area-item .btn-group>.opr-btn:not(.icon-btn):hover+.opr-btn{border-left:1px solid #e14c46}.template-setting-page .template-setting-content .area-item .btn-group .opr-btn:not(.icon-btn):first-child:not(:last-child){border-top-left-radius:3px;border-bottom-left-radius:3px}.template-setting-page .template-setting-content .area-item .btn-group .opr-btn:not(.icon-btn):last-child:not(:first-child){border-top-right-radius:3px;border-bottom-right-radius:3px}.template-setting-page .template-setting-content .area-item .btn-group .opr-btn:first-child:last-child{border-radius:3px}.template-setting-page .template-setting-content .area-item .btn-group .opr-btn:not(.icon-btn):last-child{border-right:1px solid #d0d0d0}.template-setting-page .template-setting-content .area-item .area-item-content{position:relative;min-height:73px}.template-setting-page .template-setting-content .area-item .area-item-content .property-item{transition:all .2s ease-out;position:relative;width:25%;padding:1px;display:inline-block;vertical-align:top;cursor:move}.template-setting-page .template-setting-content .area-item .area-item-content .property-item.disabled-card .item-content{position:relative}.template-setting-page .template-setting-content .area-item .area-item-content .property-item.disabled-card .item-content:after{content:"";position:absolute;width:100%;top:0;left:0;bottom:0;z-index:5}.template-setting-page .template-setting-content .area-item .area-item-content .property-item .item-content .item-wrapper{position:relative}.template-setting-page .template-setting-content .area-item .area-item-content .property-item .item-content .item-wrapper .nc-date-picker{width:100%}.template-setting-page .template-setting-content .area-item .area-item-content .property-item .item-content .item-wrapper:after{content:"";position:absolute;width:calc(100% - 30px);height:30px;left:0;top:0;z-index:2}.template-setting-page .template-setting-content .area-item .area-item-content .property-item .item-content .icon-danchuang{background:#fff;border-radius:3px;border:1px solid #ccc}.template-setting-page .template-setting-content .area-item .area-item-content .property-item .hidden-tag{position:absolute;background:url('+n(a(1318))+') no-repeat;background-size:contain;width:20px;height:18px;top:3px;right:2px;z-index:2}.template-setting-page .template-setting-content .area-item .area-item-content .property-item.table-content{margin:0;padding:0;width:auto;border-radius:0}.template-setting-page .template-setting-content .area-item .area-item-content .property-item.table-content .hidden-tag{top:0;right:-1px}.template-setting-page .template-setting-content .area-item .area-item-content .property-item:hover .delete-card,.template-setting-page .template-setting-content .area-item .area-item-content .property-item:hover .move-card-selection{display:inline-block}.template-setting-page .template-setting-content .area-item .area-item-content .property-item:not(.table-content).hover:before{content:"";position:absolute;width:2px;background:#2797ff;left:-2px;top:0;bottom:0;z-index:10}.template-setting-page .template-setting-content .area-item .area-item-content .property-item:not(.table-content).hover:after{content:"";position:absolute;width:2px;background:#f7c1c1;left:0;top:0;bottom:0;z-index:10}.template-setting-page .template-setting-content .area-item .area-item-content .property-item.card-checkbox .card-item{justify-content:flex-start}.template-setting-page .template-setting-content .area-item .area-item-content .control-icon-show .delete-card,.template-setting-page .template-setting-content .area-item .area-item-content .control-icon-show .move-card-selection{display:inline-block}.template-setting-page .template-setting-content .area-item .area-item-content .card-item{display:flex;transition:all .2s ease-out;color:#474d54;text-overflow:ellipsis;min-height:32px;width:100%;padding:2px;align-items:center;justify-content:space-around}.template-setting-page .template-setting-content .area-item .area-item-content .card-item .item-name{width:80px;padding-right:4px;text-align:right;line-height:1.2;word-break:break-word}.template-setting-page .template-setting-content .area-item .area-item-content .card-item .item-content{width:100%;line-height:12px;white-space:normal;border:1px solid transparent}.template-setting-page .template-setting-content .area-item .area-item-content .card-item .title{position:relative}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content .required-card .card-item .title:after,.template-setting-page .template-setting-content .area-item .area-item-content .search-area-content .required-card .card-item:after,.template-setting-page .template-setting-content .area-item .area-item-content .table-area-content .required-card .item-name:after{position:absolute;content:"*";color:red;height:20px;top:50%;left:6px;margin-top:-10px;z-index:10}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content .required-card .card-item .title:after{left:-8px}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content .property-item.select-card .card-item,.template-setting-page .template-setting-content .area-item .area-item-content .search-area-content .property-item.select-card .card-item{border-radius:3px;background-color:#b6dcff}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content{padding:5px;border-top:1px solid #e4e4e4;position:relative}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content .property-item .card-item .item-content{width:calc(100% - 84px)}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content .property-item .card-item .item-content .base-checkbox-wrapper+.base-checkbox-wrapper{margin-left:0}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-content .property-item.is-blank-dom{height:38px;cursor:default;width:0;position:absolute}.template-setting-page .template-setting-content .area-item .area-item-content .search-area-content{padding:5px 10px;border-top:1px solid #e4e4e4}.template-setting-page .template-setting-content .area-item .area-item-content .search-area-content .property-item{width:16.6%}.template-setting-page .template-setting-content .area-item .area-item-content .search-area-content .property-item.is-blank-dom{height:39px;cursor:default;background:unset;border-bottom:unset;width:0;position:absolute}.template-setting-page .template-setting-content .area-item .area-item-content .table-area-content .property-item.select-card .item-name{background-color:#b6dcff}.template-setting-page .template-setting-content .area-item .area-item-content .card-item.normal-card:hover{background-color:rgba(0,153,255,.14901961)}.template-setting-page .template-setting-content .area-item .area-item-content .table-area-content .normal-card:hover .item-name{background-color:#fff}.template-setting-page .template-setting-content .area-item .area-item-content .move-card-selection{position:absolute;right:23px;top:0;height:18px;width:18px;line-height:8px;color:#fff;border-radius:50%;text-align:center;font-size:17px;cursor:pointer;z-index:9;display:none}.template-setting-page .template-setting-content .area-item .area-item-content .delete-card{position:absolute;right:0;top:0;width:18px;height:18px;line-height:15px;text-align:center;border-radius:50%;display:none;color:#fff;cursor:pointer;z-index:9}.template-setting-page .template-setting-content .area-item .area-item-content .delete-card,.template-setting-page .template-setting-content .area-item .area-item-content .move-card-selection{background:#a7adb6}.template-setting-page .template-setting-content .area-item .area-item-content .delete-card:hover,.template-setting-page .template-setting-content .area-item .area-item-content .move-card-selection:hover{background:#878e9a}.template-setting-page .template-setting-content .area-item .area-item-content .search-card .delete-card,.template-setting-page .template-setting-content .area-item .area-item-content .search-card .move-card-selection{top:-10px}.template-setting-page .template-setting-content .area-item .area-item-content .search-card .card-checkbox-container{position:absolute;right:0;z-index:9}.template-setting-page .template-setting-content .area-item .area-item-content .table-item{position:relative;min-width:120px}.template-setting-page .template-setting-content .area-item .area-item-content .table-item .item-name{position:relative;background-color:#f0f4fb;border-top:1px solid #e4e4e4;border-bottom:1px solid #e4e4e4;white-space:nowrap;font-weight:700}.template-setting-page .template-setting-content .area-item .area-item-content .table-item .item-name .title{display:inline-block;padding:6px 15px}.template-setting-page .template-setting-content .area-item .area-item-content .table-item .item-content{min-height:40px;padding:5px;line-height:12px;background:#fff;text-align:center}.template-setting-page .template-setting-content .area-item .area-item-content .table-item .item-content .refer-wrapper .refer:hover{padding-right:20px!important}.template-setting-page .template-setting-content .area-item .area-item-content .table-item .card-checkbox-container{margin-top:5px}.template-setting-page .template-setting-content .area-item .area-item-content .query-btn-area{float:right;margin-right:20px}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group{position:relative}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group.active .form-area-content{background-color:rgba(221,236,250,.5)}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group.active .area-item-button,.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group:hover .area-item-button{display:flex}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .area-item-header{border-top:1px solid #ccc}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header{position:relative;display:flex;color:#555;margin:6px 14px 0;height:24px}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .form-group-title{line-height:24px}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .form-group-title .iconfont{cursor:pointer;font-size:12px;padding-right:4px}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .group-name{padding:0 7px 0 14px;cursor:pointer}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .group-btns{position:absolute;right:0;top:-14px}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .group-btns .btn-group>.opr-btn:hover+.opr-btn{border-left:0}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .group-btns .opr-btn:hover{border:none;color:#e14c46}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .group-btns .opr-btn:last-child{border-right:0}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .dashed-line{flex-grow:1}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-group-header .dashed-line:after{content:"";position:relative;display:block;height:1px;top:50%;border-top:1px dashed #c7c6c6}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .form-area-content{min-height:48px;border-top:0}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .empty-area{text-align:center;padding:10px;font-size:13px;color:#9b9b9b}.template-setting-page .template-setting-content .area-item .area-item-content .form-area-group .empty-area .iconfont{color:#f0871a;font-size:13px;margin-right:2px}.template-setting-page .template-setting-content .area-item .table-area-content{display:flex;overflow-x:auto;white-space:nowrap;min-height:73px;position:relative}.template-setting-page .template-setting-content .area-item .table-area-content .property-item.hover .table-item:before{content:"";position:absolute;width:2px;background:#2797ff;left:-2px;top:0;bottom:0;z-index:10}.template-setting-page .template-setting-content .area-item .table-area-content .property-item.hover .table-item:after{content:"";position:absolute;width:2px;background:#f7c1c1;left:0;top:0;bottom:0;z-index:10}.template-setting-page .template-setting-content .area-item .table-area-content.tile-view{display:block;white-space:normal}.template-setting-page .template-setting-content .area-item .table-area-content.tile-view .property-item.table-content{width:16.6%}.template-setting-page .template-setting-content .area-item .table-area-content .card-checkbox{text-align:center}.template-setting-page .template-setting-content .area-item .table-area-content .property-item.is-blank-dom{height:73px}.template-setting-page .template-setting-content .area-item .table-area-content .property-item.is-blank-dom.hover:before{content:"";position:absolute;width:2px;background:#2797ff;left:-2px;top:0;bottom:0;z-index:10}.template-setting-page .template-setting-content .area-item .table-area-content .property-item.is-blank-dom.hover:after{content:"";position:absolute;width:2px;background:#f7c1c1;left:0;top:0;bottom:0;z-index:10}.template-setting-page .template-setting-content .area-item .table-tabs-container .tab-opr-more{cursor:pointer;width:21px;height:21px;line-height:21px;color:#7c7c7c;background:#fff;border-radius:3px;border:1px solid #bcbcbc;box-shadow:0 1px 3px 0 rgba(163,156,156,.5);text-align:center;margin-top:10px;margin-right:10px}.template-setting-page .template-setting-content .area-item .table-tabs-container .tab-opr-more .iconfont{display:block;-webkit-transform:scale(.8);transform:scale(.8);color:#666}.template-setting-page .template-setting-content .area-item .table-tabs-container .tab-opr-more:hover{background:#efefef}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-bar{padding:0 0 0 20px;height:auto}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top{border-radius:3px}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-container{padding-left:10px!important;padding-right:64px!important}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-container .wui-tabs-tab-next-icon,.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-container .wui-tabs-tab-prev-icon{width:20px;height:20px;line-height:20px;border-radius:50%;background-color:#dedddd}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-container .wui-tabs-tab-btn-disabled{color:#b1b1b1}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-container .wui-tabs-tab-btn-disabled .wui-tabs-tab-next-icon,.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-container .wui-tabs-tab-btn-disabled .wui-tabs-tab-prev-icon{background-color:#ececec}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-tab-prev{width:20px;left:auto;right:34px}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-wrap .wui-tabs-tab{height:42px;line-height:42px}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-wrap .wui-tabs-tab:first-child{margin-left:-10px!important}.template-setting-page .template-setting-content .area-item .table-tabs-container .wui-tabs-top .wui-tabs-nav-wrap .wui-tabs-tab:hover{background:none}.template-setting-page .template-setting-content .table-fold-area{position:relative}.template-setting-page .template-setting-content .table-fold-area.card-active .area-item-button{display:flex}.template-setting-page .template-setting-content .empty-content{position:relative;text-align:center;top:50%;-webkit-transform:translateY(-70%);transform:translateY(-70%)}.template-setting-page .template-setting-content .empty-content img{width:120px;margin-bottom:16px}.template-setting-page .template-setting-content .empty-content p{color:#888;font-size:14px;line-height:1.5;margin:0}.template-setting-page .ant-drawer{width:auto;right:auto}.template-setting-page .ant-drawer .ant-drawer-mask{width:auto}.template-setting-page .ant-drawer .ant-drawer-content-wrapper{top:96px;height:calc(100vh - 110px)}.template-setting-page .ant-drawer .ant-drawer-mask,.template-setting-page .ant-drawer.ant-drawer-open .ant-drawer-content-wrapper{top:96px;right:272px}.template-setting-page .ant-drawer .drawer-content{height:100%;padding:0;overflow-x:hidden}.template-setting-page .ant-drawer .drawer-content .table-side-area .area-item-header{position:absolute;cursor:auto;top:0;left:0;width:100%;z-index:20}.template-setting-page .ant-drawer .drawer-content .table-side-area .area-item-header .area-item-button{display:flex}.template-setting-page .ant-drawer .drawer-content .table-side-area .area-item-header .drawer-close-btn{cursor:pointer;width:25px;margin-left:26px}.template-setting-page .ant-drawer .drawer-content .table-side-area .area-item-header .drawer-close-btn .iconfont{font-size:18px}.template-setting-page .ant-drawer .drawer-content .table-side-area .area-item-header .drawer-close-btn:hover{color:#e14c46}.template-setting-page .ant-drawer .drawer-content .area-item.side-area{border:0;margin:0;padding-top:40px}.template-setting-page .ant-drawer .drawer-content .area-item .area-item-content .form-area-content{border-top:0}.template-setting-page .ant-drawer .drawer-content .area-item .area-item-content .form-area-content .property-item{width:33.33333%}.template-setting-page .ant-drawer .drawer-content .area-item .area-item-content .form-area-content .is-blank-dom{width:unset}.template-setting-page .ant-drawer .drawer-content .grandson-content{border-top:1px solid #e4e4e4;padding:0 20px 5px}.template-setting-page .ant-drawer .drawer-content .grandson-content .area-item,.template-setting-page .ant-drawer .drawer-content .grandson-content .area-item .area-item-header{cursor:move}.template-setting-page .ant-drawer .drawer-content .grandson-content .area-item .table-area-content.tile-view .property-item.table-content{width:20%}.template-setting-page .ant-popover{z-index:220}.template-setting-page .ant-checkbox-checked .ant-checkbox-inner,.template-setting-page .ant-checkbox-indeterminate .ant-checkbox-inner{background-color:#e14c46;border-color:#e14c46}.template-setting-page .ant-checkbox-input:focus+.ant-checkbox-inner,.template-setting-page .ant-checkbox-wrapper:hover .ant-checkbox-inner,.template-setting-page .ant-checkbox:hover .ant-checkbox-inner{border-color:#e14c46}.template-setting-page .ant-select-selection:hover{border-color:#40a9ff}.template-setting-page .ant-select-selection:focus{border-color:#007ace}.template-setting-page .hide-drag-line .dragWidthCom{overflow:visible}.template-setting-page .hide-drag-line .dragWidthCom .dragWidthCom_line,.template-setting-page .hide-drag-line .dragWidthCom .dragWidthCom_lines{display:none}.template-setting-color-select{display:flex;align-items:center}.template-setting-color-select .color-select-color{margin-left:5px;width:15px;height:15px;display:inline-block}.realate-meta-modal .nc-workbench-page{position:static;height:100%;padding:0;margin:0}.realate-meta-modal .nc-workbench-page .sider-list{height:100%;overflow-y:auto;overflow-x:hidden;margin-right:20px;border-radius:4px}.realate-meta-modal .nc-workbench-page .sider-list table,.realate-meta-modal .nc-workbench-page .sider-list td,.realate-meta-modal .nc-workbench-page .sider-list th{border:1px solid #ccc}.realate-meta-modal .nc-workbench-page .sider-list table .close-and-text,.realate-meta-modal .nc-workbench-page .sider-list td .close-and-text,.realate-meta-modal .nc-workbench-page .sider-list th .close-and-text{display:flex;align-items:center}.realate-meta-modal .nc-workbench-page .sider-list td,.realate-meta-modal .nc-workbench-page .sider-list th{padding-left:5px}.realate-meta-modal .nc-workbench-page .sider-list table{width:100%}.realate-meta-modal .nc-workbench-page .sider-list tbody tr:hover{background-color:#e6f7ff}.realate-meta-modal .nc-workbench-page .sider-list tbody tr.select{background-color:#bae7ff}.realate-meta-modal .nc-workbench-page .sider-list tbody i{font-size:18px;cursor:pointer}.realate-meta-modal .nc-workbench-page .sider-tree{height:100%;overflow:auto;border:1px solid #d9d9d9;border-radius:4px;margin-right:15px}.Formula{overflow:auto!important}.template-setting-sider .ant-form-item-label label{color:#2b3441}.template-setting-sider .sider-content.meta-tree{position:relative}.template-setting-sider .sider-content .sider-search{text-align:center}.template-setting-sider .sider-content .sider-search input{border-top:none;border-right:none;border-left:none}.template-setting-sider .sider-content .sider-search input:focus,.template-setting-sider .sider-content .sider-search input:hover{box-shadow:none}.template-setting-sider .sider-content .sider-search span.ant-input-group-addon{cursor:pointer;background:#fff;border:1px solid #d9d9d9;border-radius:16px;padding:0 8px}.template-setting-sider .sider-content .sider-search span.ant-input-group-addon:hover{border-color:#40a9ff}.template-setting-sider .sider-content .sider-tab{text-align:center}.template-setting-sider .sider-content .sider-tab .rightTemplate .required:before{color:#f5222d;content:"*";display:inline-block;font-family:SimSun;font-size:14px;line-height:1;margin-right:4px}.template-setting-sider .sider-content .sider-tab .rightTemplate li .refer-wrapper{margin-top:7px}.template-setting-sider .sider-content .sider-tab .rightTemplate .isgrandsonRadio>div{text-align:left}.template-setting-sider .sider-content .sider-tab .wui-tabs-bar{display:flex;justify-content:center}.template-setting-sider .meta-tree .sider-tree .wui-tree .wui-tree-node-content-wrapper .iconfont{color:#ffcf31}.template-setting-sider .meta-tree .sider-tree .wui-tree .wui-tree-node-content-wrapper .wui-tree-searchable-filter{color:#e14c46;transition:all .3s ease}.add-not-meta-data .wui-modal-body .code-div span{margin-right:16px}.add-not-meta-data .wui-modal-body .code-div:before{color:#f5222d;content:"*";display:inline-block;font-family:SimSun;font-size:14px;line-height:1;margin-right:4px}.add-not-meta-data .wui-modal-body .not-code span{margin-right:16px}.add-not-meta-data .wui-modal-body .not-code:before{color:#f5222d;content:"*";display:inline-block;font-family:SimSun;font-size:14px;line-height:1;margin-right:4px}.add-not-meta-data .wui-modal-body .nc-hotkeys-wrapper,.add-not-meta-data .wui-modal-body input{width:300px}.add-not-meta-data .wui-modal-body input.has-error,.add-not-meta-data .wui-modal-body input.has-error:focus{border-color:red;box-shadow:none}.add-not-meta-data .wui-modal-body .form-explain{color:red;margin-left:5px}.zonesetting-moneyModal .descrip_label{padding:10px;margin-bottom:10px;border-bottom:1px solid #eee;font-weight:700}.zonesetting-moneyModal .mdcontent{display:flex}.zonesetting-moneyModal .mdcontent div .money-label{margin:0 10px 0 20px}.zonesetting-referModal .descrip_label{padding:10px;margin-bottom:10px;border-bottom:1px solid #eee;font-weight:700;background:#f3f3f3;border-radius:3px 3px 0 0}.zonesetting-referModal .mdcontent{display:flex;flex-direction:column;margin:20px 0}.zonesetting-referModal .mdcontent .mdcontentItem{margin-bottom:10px}.zonesetting-referModal .mdcontent .mdcontentItem .refer_label{min-width:150px;display:inline-block;margin-right:10px;text-align:right}.zonesetting-referModal .mdcontent .mdcontentItem .radio-group-hotkey-wrapper{display:inline-block}.zonesetting-referModal .mdcontent .mdcontentItem .radio-group-hotkey-wrapper .wui-radio-label{min-width:50px}.zonesetting-referModal .ant-input{max-width:60%;margin-right:20px}.zonesetting-customModal .wui-modal-body{padding:20px!important}.zonesetting-customModal .wui-modal-body .mdcontent{display:flex;flex-direction:column;margin-top:10px}.zonesetting-customModal .wui-modal-body .mdcontent .mdcontentItem{margin-top:10px}.zonesetting-customModal .wui-modal-body .mdcontent .mdcontentItem .refer_label{min-width:150px;display:inline-block;margin-right:10px;text-align:right}.zonesetting-customModal .wui-modal-body .mdcontent .radio-group-hotkey-wrapper{display:inline-block}.zonesetting-customModal .wui-modal-body .mdcontent .radio-group-hotkey-wrapper .wui-radio-label{min-width:50px}.zonesetting-customModal .wui-modal-body .def-refer{width:80%;margin:0 auto}.custom-filter-dropdown input.ant-input.ant-input-sm{height:24px;margin-right:8px}.custom-filter-dropdown button{margin-right:8px}.ant-select-sm .ant-select-selection.ant-select-selection--single{height:24px}.ant-select-sm .ant-select-selection.ant-select-selection--single .ant-select-selection__rendered{line-height:22px}.zonesetting-batch-setting-modal.ant-modal{padding-bottom:0}.zonesetting-batch-setting-modal .ant-modal-content{height:100%}.zonesetting-batch-setting-modal .ant-modal-body{padding:12px 16px 0 15px}.zonesetting-batch-setting-modal .ant-modal-body .ant-table-fixed-header .ant-table-scroll .ant-table-header{padding-bottom:0}.zonesetting-batch-setting-modal .ant-table-thead .nc-checkbox.wui-checkbox .wui-checkbox-label{white-space:normal}.zonesetting-batch-setting-modal .ant-checkbox-checked .ant-checkbox-inner,.zonesetting-batch-setting-modal .ant-checkbox-indeterminate .ant-checkbox-inner{background-color:#e14c46;border-color:#e14c46}.zonesetting-batch-setting-modal .ant-checkbox-input:focus+.ant-checkbox-inner,.zonesetting-batch-setting-modal .ant-checkbox-wrapper:hover .ant-checkbox-inner,.zonesetting-batch-setting-modal .ant-checkbox:hover .ant-checkbox-inner{border-color:#e14c46}.zonesetting-batch-setting-modal .batch-setting-table .ant-table-body{height:calc(100vh - 190px)}.zonesetting-batch-setting-modal .batch-setting-table .ant-input{height:26px}.zonesetting-batch-setting-modal .base-modal-title{display:flex;align-items:center}.ant-modal-wrap{overflow:hidden}.ant-spin-container .ant-table .ant-table-content .ant-table-scroll .ant-table-header{overflow:hidden;margin-bottom:0!important;padding-bottom:0!important}.wui-modal-dialog{-webkit-transform:translateY(0)!important;transform:translateY(0)!important}.meta-add-modal .wui-modal-header .customer-header{padding-left:20px;font-weight:400;line-height:30px}.meta-add-modal .wui-modal-header .custom-title{display:inline;font-weight:700;margin-right:25px}.meta-add-modal .ant-checkbox-checked .ant-checkbox-inner,.meta-add-modal .ant-checkbox-indeterminate .ant-checkbox-inner{background-color:#e14c46;border-color:#e14c46}.meta-add-modal .ant-checkbox-input:focus+.ant-checkbox-inner,.meta-add-modal .ant-checkbox-wrapper:hover .ant-checkbox-inner,.meta-add-modal .ant-checkbox:hover .ant-checkbox-inner{border-color:#e14c46}.meta-add-modal .ant-tree li .ant-tree-checkbox.ant-tree-checkbox-checked .ant-tree-checkbox-inner{background-color:#e14c46;border-color:#e14c46}.meta-add-modal .ant-tree li .ant-tree-checkbox.ant-tree-checkbox-checked .ant-tree-checkbox-inner:hover{border-color:#e14c46}.wui-modal-open .meta-add-modal.wui-modal .wui-modal-dialog .wui-modal-content .customer-header{position:relative;z-index:2;width:90%;height:40px;background-color:#fff}.setting-header-left{display:flex}.zonesetting-batch-setting-modal .base-modal-body{padding:0 12px}.zonesetting-batch-setting-modal .base-modal-body .batch-setting-tabs{margin-bottom:2px}.move-card-menu{background:#fff;text-align:center;box-shadow:0 2px 4px 2px rgba(0,0,0,.16)}.move-card-menu ul{min-width:80px;min-height:64px}.move-card-menu ul li{padding:5px;cursor:pointer;font-size:12px}.move-card-menu ul li:hover{background:#f3f3f3}.test-hide-item .wui-dropdown-menu{max-height:345px;overflow:auto;z-index:1000}.batch-setting-tabs .wui-tabs.wui-tabs-top.wui-tabs-simple.lightapp-component-tabs .wui-tabs-bar .wui-tabs-nav-container{padding-left:32px!important}.batch-setting-tabs .wui-tabs .wui-tabs-tab-next-icon,.batch-setting-tabs .wui-tabs .wui-tabs-tab-prev-icon{width:24px;height:24px;background-color:#dedddd;line-height:24px;border-radius:12px;text-align:center;font-size:14px;padding-left:2px}.batch-setting-tabs .wui-tabs .wui-tabs-tab-next-icon:hover,.batch-setting-tabs .wui-tabs .wui-tabs-tab-prev-icon:hover{background-color:#c4c3c3}.batch-setting-tabs .wui-tabs .wui-tabs-tab-next-icon{padding-left:2px}.batch-setting-tabs .wui-tabs .wui-tabs-tab-btn-disabled .wui-tabs-tab-next-icon,.batch-setting-tabs .wui-tabs .wui-tabs-tab-btn-disabled .wui-tabs-tab-prev-icon{background-color:#ececec}.tree-node-layer{position:fixed;pointer-events:none;z-index:200;left:0;top:0;min-width:100px;height:24px;background:#fff;box-shadow:0 0 4px 1px #3b79b5;border:1px solid #4da8ff;font-size:15px;color:#111;padding:auto 5px;text-align:center}.tree-node-layer span{margin:auto 5px}.dragging-meta-tree .area-item.area-can-drop-meta{border:1px solid #0073e1;box-shadow:0 0 0 2px #8ac6ff}.dragging-meta-tree .mask{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;border-radius:3px}.dragging-meta-tree .mask.mask-bg-color{background:rgba(255,218,218,.3);box-shadow:0 0 0 2px #ffaab7;border:1px solid red}.metatree-search-input{position:relative;margin:10px 5px 8px}.metatree-search-input .ant-input-affix-wrapper{width:250px;height:26px}.metatree-search-input .ant-input-affix-wrapper .ant-input{height:26px}.metatree-search-input .wui-form-control{padding-right:30px}.metatree-search-input:hover .icon-qingkong{display:block}.metatree-search-input .icon-qingkong{position:absolute;display:none;color:#999;font-size:16px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:30px;cursor:pointer}.multabs-menu-list .mutitabs-menu{left:30px;top:-50px;max-height:300px;overflow-y:auto}.multabs-menu-list .mutitabs-menu .wui-dropdown-menu-item{padding:5px 0 7px 20px;font-size:13px;line-height:18px;height:30px;min-width:110px}.areahide-menu .wui-dropdown-menu-item{padding:0!important;height:42px!important}.areahide-menu .wui-dropdown-menu-item .checkbox-hotkey-wrapper{display:block;padding:0;height:inherit}.areahide-menu .wui-dropdown-menu-item .checkbox-hotkey-wrapper label.nc-checkbox{display:block;margin:0;padding:0 5px;height:inherit}.areahide-menu .wui-dropdown-menu-item .checkbox-hotkey-wrapper label.nc-checkbox .wui-checkbox-label{display:block;position:relative;height:100%;margin:0;line-height:42px;padding:0 0 0 20px;vertical-align:middle}.areahide-menu .wui-dropdown-menu-item .checkbox-hotkey-wrapper label.nc-checkbox .wui-checkbox-label:after,.areahide-menu .wui-dropdown-menu-item .checkbox-hotkey-wrapper label.nc-checkbox .wui-checkbox-label:before{top:14px}',""])},1318:function(e,t,a){e.exports=a.p+"images/hiddenProperty.png"},1319:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=O(a(3)),r=O(a(2)),o=O(a(29)),l=O(a(254)),i=O(a(97)),s=O(a(51)),c=O(a(407)),d=O(a(179)),u=O(a(118)),p=O(a(26)),f=O(a(5)),g=O(a(8)),m=O(a(6)),h=O(a(7)),b=a(1),v=O(b),y=a(38),k=O(a(32)),C=O(a(59)),S=O(a(1090)),w=a(85),x=O(a(1320)),E=a(20),T=(a(123),a(1323),O(a(1324))),M=O(a(403)),A=a(1186),_=a(1084),D=a(404),I=O(a(68)),N=O(a(23)),L=O(a(1326)),P=a(405);function O(e){return e&&e.__esModule?e:{default:e}}var Z=N.default.metaCache,j=(N.default.pageTo,N.default.PubSub),V=Z.getMetaCache,F=Z.removeMetaCache,q=N.default.base,z=q.NCDiv,R=q.NCButton,B=q.NCDropdown,H=q.NCMenu,K=q.NCCheckbox,U=H.Item,G=H.NCSubMenu,W=function(e){function t(e){(0,f.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.urlRequestObj=(0,E.GetQuery)(a.props.location.search),a.state={previewVisibel:!1,backModalShow:!1,areaItemVisible:{},isSaveBtnLoading:!1},a.handleBindKey=a.handleBindKey.bind(a),a.setPreviewModalVisibel=a.setPreviewModalVisibel.bind(a),a.validateEmptyArea=a.validateEmptyArea.bind(a),a.validateCode=a.validateCode.bind(a),a.setAreaListValidate=a.setAreaListValidate.bind(a),a.saveTemplate=a.saveTemplate.bind(a),a.saveZoneData=a.saveZoneData.bind(a),a.saveData=a.saveData.bind(a),a.toggleBackModal=a.toggleBackModal.bind(a),a.handleBack=a.handleBack.bind(a),a.setDefault=a.setDefault.bind(a),a.back=a.back.bind(a),a.handleSaveBack=a.handleSaveBack.bind(a),a.handleNotSaveBack=a.handleNotSaveBack.bind(a),a.handleCancelBack=a.handleCancelBack.bind(a),a.handleTabSettingModal=a.handleTabSettingModal.bind(a),a.getPreviewData=a.getPreviewData.bind(a),a.showTabLayoutBtn=a.showTabLayoutBtn.bind(a),a.getAreaHideproperty=a.getAreaHideproperty.bind(a),a}return(0,h.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleBindKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleBindKey,!1)}},{key:"handleBindKey",value:function(e){var t=e||window.event||arguments.callee.caller.arguments[0];t&&t.keyCode&&t.shiftKey&&27==t.keyCode&&this.handleBack()}},{key:"setPreviewModalVisibel",value:function(e){this.setState({previewVisibel:e})}},{key:"trim",value:function(e){if("string"==typeof e)return e.trim()}},{key:"validateEmptyArea",value:function(){var e=this.props,t=e.json,a=e.areaList,n=e.newAreaList,r=I.default.cloneDeep(a),o=!0,l=(0,E.langCheck)("102202APP-000038","pages",t),i=(0,E.langCheck)("102202APP-000039","pages",t),s=[],p=a.filter((function(e){return!e.code||!e.name})),f=n.filter((function(e){return null!==e}));return p&&p.length>0&&(f.forEach((function(e,a){if(!e.code||!e.name){var r=g(e,""+(0,E.langCheck)("ZoneSetting-000046","pages",t)+(a+1));s.push(r)}f.length!==n.length&&function(e){var a={groups:(0,E.langCheck)("ZoneSetting-000208","pages",t),sides:{edit:(0,E.langCheck)("ZoneSetting-000222","pages",t),browse:(0,E.langCheck)("ZoneSetting-000215","pages",t)},grandsons:(0,E.langCheck)("ZoneSetting-000223","pages",t)},n=function(a,n){var r=f.findIndex((function(t){return t.pk_area===e.pk_area}))+1,l=(0,E.langCheck)("ZoneSetting-000046","pages",t);a in e&&e[a].forEach((function(e,t,i){if(!e.code||!e.name){var c="sides"===a?""+n[e.areastatus]:""+n+(t+1),d=g(e,""+l+r+"-"+c);s.push(d),o=!1}}))},r=!0,l=!1,i=void 0;try{for(var p,m=(0,d.default)((0,c.default)(a));!(r=(p=m.next()).done);r=!0){var h=p.value,b=(0,u.default)(h,2),v=b[0],y=b[1];n(v,y)}}catch(e){l=!0,i=e}finally{try{!r&&m.return&&m.return()}finally{if(l)throw i}}}(e)})),o=!1),o||((0,C.default)({status:"error",TextArr:[(0,E.langCheck)("ZoneSetting-000012","pages",t),(0,E.langCheck)("ZoneSetting-000011","pages",t),(0,E.langCheck)("ZoneSetting-000224","pages",t)],content:(0,E.langCheck)("102202APP-000012","pages",t),groupOperation:!0,groupOperationMsg:s}),this.setAreaListValidate(r,p),this.props.updateAreaList(r),this.props.updateAreaValidate(o)),o;function g(e,t){var a="";return e.code||e.name?e.code?e.name||(a=t+"："+i):a=t+"："+l:a=t+"："+[l,i].join(),a}}},{key:"validateCode",value:function(e){var t=this.props.json,a=I.default.cloneDeep(e),n=!0,r=(0,D.findRepeatItemsByCode)(e),o=this.validateEmptyArea();if(!1===o)return o;if(r&&r.length>0){var l=r.map((function(e){return e.name}));(0,C.default)({status:"error",msg:""+(0,E.langCheck)("ZoneSetting-000046","pages",t)+(0,s.default)(l)+(0,E.langCheck)("102202APP-000011","pages",t)}),n=!1,this.setAreaListValidate(a,r),this.props.updateAreaList(a),this.props.updateAreaValidate(n)}return n}},{key:"setAreaListValidate",value:function(e,t){e.forEach((function(a,n){a.validate=!0,t.forEach((function(t){a.pk_area===t.pk_area&&(e[n].validate=!1)}))}))}},{key:"saveTemplate",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new i.default((function(a){e.saveZoneData(t).then((function(n){e.saveData({newAreaData:n&&n.area,newTempletid:n.templetid,refresh:t}).then(a),e.props.zoneFormData.isdefault&&e.setDefault(n&&n.templetid)}))}))}},{key:"validateTableAreasPageSize",value:function(){var e,t=this.props,a=(t.areaList,t.newAreaList),n=t.json,r=(a.filter((function(e){return null!==e&&"2"===e.type})),[]),o=[],l=[],i="";return a.forEach((function(e){if(e){var t=e.areatype,a=e.pagesize,n=e.code;return e&&"2"===t&&(a||r.push(n),a=parseFloat(a),I.default.isInteger(a)?(a>5e3||a<1)&&o.push(n):l.push(n)),null}})),(e=0===r.length&&0===o.length&&0===l.length)||(r.length>0&&(i=""+r.join(", ")+(0,E.langCheck)("ZoneSetting-000353","pages",n)+"\n"),(o.length>0||l.length>0)&&(o=""+o.concat(l).join(", ")+(0,E.langCheck)("ZoneSetting-000354","pages",n)),(0,C.default)({status:"warning",msg:""+i+o})),e}},{key:"saveZoneData",value:function(e){var t=this;return new i.default((function(a,n){var r=t.props,o=r.json,i=r.areaList,s=r.zoneDatas,c=(0,E.GetQuery)(t.props.location.search),d=void 0;var u=t.props.zoneFormData;if(!i.some((function(e){return"0"!==e.areatype}))||u.headcode)if(u&&u.code&&t.trim(u.code)&&t.trim(u.name))if(!i||i.length<=0)(0,C.default)({status:"warning",msg:(0,E.langCheck)("102202APP-000019","pages",o)});else{var p=t.validateCode(i),f=t.validateTableAreasPageSize(),g=I.default.cloneDeep(i);g.map((function(e,t){e.newArea&&e.pk_area&&delete e.pk_area,e.formPropertyList=[],e.queryPropertyList=[],e.position=t+1+""})),d={pk_page_templet:s.pk_page_templet,pagecode:s.pagecode||c.pcode,pageid:s.pageid||c.pid,parentid:s.parentid||"root",areaList:g,isdefault:u.isdefault,appcode:c.appcode||s.appcode,mateid:s.mateid,ts:t.ts||t.props.ts},d=(0,l.default)(u,d),p&&f&&(0,k.default)({url:"/nccloud/platform/templet/settempletarea.do",data:d,info:{name:(0,E.langCheck)("102202APP-000013","pages",o),action:(0,E.langCheck)("102202APP-000014","pages",o)},success:function(n){var r=n.data;r.success&&r.data&&(r.data.templetid||(0,C.default)({status:"error",msg:r.data.msg}),e&&D.queryAllArea.call(t,r.data.templetid),a(r.data))},error:function(e){n(),console.log(e.data)}})}else(0,C.default)({status:"warning",msg:(0,E.langCheck)("102202APP-000063","pages",o)});else(0,C.default)({status:"warning",msg:(0,E.langCheck)("102202APP-000073","pages",o)})}))}},{key:"saveData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.newAreaData,n=t.refresh,r=t.newTempletid;return new i.default((function(t){var o=!0,l=e.props,i=l.areaList,s=l.pcode,c=l.appcode,d=l.json,u=e.props.templetid||r;if(I.default.forEach(i,(function(t,a){"0"===t.areatype&&I.default.forEach(t.queryPropertyList,(function(e,a){"204"!==e.datatype||"-99"!==e.refname&&""!==e.refname&&null!==e.refname&&void 0!==e.refname||((0,C.default)({status:"typeError",msg:(0,E.langCheck)("ZoneSetting-000046","pages",d)+' "'+t.name+'" '+(0,E.langCheck)("ZoneSetting-000047","pages",d)+' "'+e.label+'" '+(0,E.langCheck)("ZoneSetting-000048","pages",d)+' "'+(0,E.langCheck)("ZoneSetting-000030","pages",d)+'" '+(0,E.langCheck)("ZoneSetting-000049","pages",d)+"，"+(0,E.langCheck)("ZoneSetting-000050","pages",d)+"。"}),o=!1)})),"1"==t.areatype&&I.default.forEach(t.queryPropertyList,(function(a,n){a.colnum<0&&((0,C.default)({status:"typeError",msg:(0,E.langCheck)("ZoneSetting-000046","pages",d)+' "'+t.name+'" '+(0,E.langCheck)("ZoneSetting-000047","pages",d)+' "'+a.label+'" '+(0,E.langCheck)("ZoneSetting-000048","pages",d)+' "'+(0,E.langCheck)("ZoneSetting-000031","pages",d)+'" '+(0,E.langCheck)("ZoneSetting-000051","pages",d)+"，"+(0,E.langCheck)("ZoneSetting-000050","pages",d)+"。"}),o=!1),e.props.ismobile&&"300"===a.datatype&&("photo"===a.itemtype?(I.default.isInteger(+a.uploadquantity)?I.default.isInteger(+a.uploadquantity)&&+a.uploadquantity<1&&((0,C.default)({status:"typeError",msg:(0,E.langCheck)("ZoneSetting-000321","pages",d)+" "}),o=!1):((0,C.default)({status:"typeError",msg:(0,E.langCheck)("ZoneSetting-000320","pages",d)+" "}),o=!1),""!=a.uploadquantity&&(a.uploadquantity=+a.uploadquantity)):"attachment"===a.itemtype&&(""===a.uploadquantity||!I.default.isNaN(+a.uploadquantity)&&I.default.isInteger(+a.uploadquantity)||((0,C.default)({status:"typeError",msg:(0,E.langCheck)("ZoneSetting-000320","pages",d)+" "}),o=!1)),1===a.watermarktype&&I.default.isNumber(a.watermarkalpha)&&(a.watermarkalpha=a.watermarkalpha/100))}))})),!o)return!1;var p=[],f=[];I.default.forEach(i,(function(e,t){I.default.forEach(e.queryPropertyList,(function(e){e.pk_query_property&&-1!==e.pk_query_property.indexOf("new")&&(e.pk_query_property="")}))})),I.default.forEach(i,(function(e,t){if(e.newArea){var n=a&&a.find((function(t){return t.code===e.code}));e.queryPropertyList.map((function(e){e.areaid=n&&n.pk_area}))}"0"===e.areatype?f=f.concat(e.queryPropertyList):p=p.concat(e.queryPropertyList)}));var g={};g.templetid=u,g.formPropertyList=p,g.queryPropertyList=f,g.ismobile=e.props.ismobile,g.varyId=e.state.varyId,e.setState({isSaveBtnLoading:!0}),(0,k.default)({url:"/nccloud/platform/templet/setareaproperty.do",info:{name:(0,E.langCheck)("ZoneSetting-000017","pages",d),action:(0,E.langCheck)("ZoneSetting-000033","pages",d)},data:g,loading:!0,success:function(a){var r=a.data,o=r.data,l=r.success;l?((0,C.default)({status:"success",msg:o.msg}),V(c,s)&&F(c,s),n&&D.queryTemplateProperty.call(e,u),j.publish(D.pubSubAction.isSave),e.props.updateSelectCard({}),e.setState({isSaveBtnLoading:!1}),e.ts=o.ts,t()):(0,C.default)({status:"error",msg:o})},error:function(){e.setState({isSaveBtnLoading:!1})}})}))}},{key:"toggleBackModal",value:function(e){this.setState({backModalShow:e})}},{key:"handleBack",value:function(){this.props.isSave?this.handleNotSaveBack():this.toggleBackModal(!0)}},{key:"setDefault",value:function(e){(0,k.default)({url:"/nccloud/platform/templet/setdefaulttemplet.do",info:{name:(0,E.langCheck)("102202APP-000074","pages",this.props.langJson),action:(0,E.langCheck)("102202APP-000117","pages",this.props.langJson)},data:{pagecode:this.props.zoneDatas.pagecode,appcode:this.props.zoneDatas.appcode,templetid:e},success:function(){}})}},{key:"back",value:function(){window.history.go(-1)}},{key:"handleSaveBack",value:function(){this.saveTemplate(!1).then(this.back),this.toggleBackModal(!1)}},{key:"handleNotSaveBack",value:function(){this.back()}},{key:"handleCancelBack",value:function(){this.toggleBackModal(!1)}},{key:"handleTabSettingModal",value:function(){this.props.setTabLayModalVisible(!0)}},{key:"getPreviewData",value:function(){var e=I.default.cloneDeep(this.props.areaList);return e.forEach((function(e){e.formPropertyList=[].concat((0,o.default)(e.queryPropertyList)),e.formPropertyList.forEach((function(e){e.position=e.position&&e.position+""})),e.queryPropertyList.forEach((function(e){e.position=e.position&&e.position+""}))})),e}},{key:"countAllChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!0;return e.map((function(e){t[e.pk_area]||(a=!1)})),a}},{key:"showTabLayoutBtn",value:function(){var e=this.props.newAreaList,t=e.find((function(e){return e&&"1"===e.areatype&&e.formTabs})),a=t&&t.formTabs.length>1;return e.filter((function(e){return e&&(e.tabs||e.tabheadcode||a||e.grandsons)})).length>0}},{key:"getAreaHideproperty",value:function(){var e=this,t=this.props,a=t.areaVisible,o=t.json,l=t.areaHide,i=t.multiOptions,s=I.default.cloneDeep(this.props.areaList),c=s.filter((function(e){return e.areahide})),d=s.map((function(e){return e.pk_area})),u=c.map((function(e){return e.pk_area})),p={},f={};return v.default.createElement(H,{className:"areahide-menu",onSelect:function(e,t,a){console.log(e,t,a)},selectable:!1,style:{width:"150px"},mode:"vertical"},v.default.createElement(G,{key:"hide-item",title:(0,E.langCheck)("ZoneSetting-000248","pages",o),popupClassName:"test-hide-item"},v.default.createElement(U,{key:"hide-item-all"},v.default.createElement(K,{onChange:function(t){d.forEach((function(e){return p[e]=t})),e.props.setAreaItemVisible(p)},checked:this.countAllChecked(s,a)},(0,E.langCheck)("ZoneSetting-000250","pages",o))),s.map((function(t){return v.default.createElement(U,{key:t.pk_area},v.default.createElement(K,{checked:a[t.pk_area]||!1,onChange:function(a){e.props.setAreaItemVisible((0,r.default)({},e.props.areaVisible,(0,n.default)({},t.pk_area,a)))}},(0,P.getMultiLangText)(t,"name",i)))}))),v.default.createElement(G,{key:"hide-area",title:(0,E.langCheck)("ZoneSetting-000249","pages",o),disabled:!c.length,popupClassName:"test-hide-item"},v.default.createElement(U,{key:"hide-area-all"},v.default.createElement(K,{onChange:function(t){u.forEach((function(e){return f[e]=t})),e.props.setAreaHide(f),t&&e.props.updateSelectArea({})},checked:this.countAllChecked(c,l)},(0,E.langCheck)("ZoneSetting-000250","pages",o))),c.map((function(t,a){return v.default.createElement(U,{key:t.code},v.default.createElement(K,{checked:l[t.pk_area]||!1,onChange:function(a){if(e.props.setAreaHide((0,r.default)({},e.props.areaHide,(0,n.default)({},t.pk_area,a))),t.associatedtab&&(0,D.setActiveTabKey)({activeKey:t.associatedtab,areaCode:t.associatedtab}),a&&"edit"==t.areastatus&&"1"==t.areatype){var o=document.querySelector(".search-area-"+(String(t.code).replace(/\.|\&|\#/g,"")||"unknow")),l=o&&o.querySelector(".drawer-close-btn");l&&l.click()}a&&e.props.updateSelectArea({})}},t.name))}))))}},{key:"render",value:function(){var e=this,t=this.state.previewVisibel,a=this.props,n=a.json,r=a.zoneDatas,o=a.newAreaList,l=a.areaHide,i=a.areaVisible,s=(0,E.GetQuery)(window.location.hash),c=s.c,d=s.hideback,u={pagecode:r.pagecode,appcode:r.appcode,templetid:this.props.templetid};return v.default.createElement(z,{className:"template-setting-header",areaCode:z.config.HEADER},v.default.createElement("div",{className:"setting-header-left"},v.default.createElement("div",{className:"header-name"},!d&&v.default.createElement("i",{className:"iconfont icon-danjufanhuiicon",onClick:this.handleBack}),v.default.createElement(S.default,{appCode:c}),v.default.createElement(z,{fieldid:(0,E.langCheck)("ZoneSetting-000035","pages",n),areaCode:z.config.Title},(0,E.langCheck)("ZoneSetting-000035","pages",n))),v.default.createElement(L.default,{sourceData:o,ts:(new Date).getTime(),areaHide:l,areaVisible:i,json:n,multiOptions:this.props.multiOptions})),v.default.createElement("div",{className:"button-list"},v.default.createElement(R,{colors:"primary",fieldid:"save",loading:this.state.isSaveBtnLoading,onClick:function(){return e.props.showVaryModal()}},(0,E.langCheck)("ZoneSetting-000038","pages",n)),this.props.isImplement?v.default.createElement(B,{trigger:["click"],overlay:this.getAreaHideproperty(),animation:"slide-up",overlayClassName:"drop-more"},v.default.createElement(R,{fieldid:"hide"},(0,E.langCheck)("ZoneSetting-000252","pages",n))):null,this.showTabLayoutBtn()&&v.default.createElement(R,{fieldid:"tabSetting",onClick:this.handleTabSettingModal},(0,E.langCheck)("ZoneSetting-000259","pages",n)),v.default.createElement(R,{fieldid:"preview",onClick:function(){e.setPreviewModalVisibel(!0)}},(0,E.langCheck)("ZoneSetting-000039","pages",n))),t&&v.default.createElement(x.default,{previewVisibel:t,setModalVisibel:this.setPreviewModalVisibel,templetData:u,requestUrl:"/nccloud/platform/templet/previewtemplet.do",requestData:this.getPreviewData()}),v.default.createElement(M.default,{mask:!0,closable:!1,title:(0,E.langCheck)("ZoneSetting-000207","pages",n),visible:this.state.backModalShow,maskClosable:!1,size:"sm",className:"prompt-box-project",fieldid:"back",footer:[v.default.createElement(R,{colors:"primary",fieldid:"save",onClick:this.handleSaveBack},(0,E.langCheck)("ZoneSetting-000038","pages",n)," "),v.default.createElement(R,{fieldid:"unsave",onClick:this.handleNotSaveBack},(0,E.langCheck)("ZoneSetting-000206","pages",n)," "),v.default.createElement(R,{fieldid:"cancel",onClick:this.handleCancelBack},(0,E.langCheck)("ZoneSetting-000006","pages",n)," ")]},v.default.createElement("p",{className:"prompt-title"},v.default.createElement("i",{className:"icon iconfont icon-zhuyi1 warning"}),v.default.createElement("span",null,(0,E.langCheck)("ZoneSetting-000204","pages",n))," "),v.default.createElement("p",{className:"prompt-content"},(0,E.langCheck)("ZoneSetting-000205","pages",n))," "))}}]),t}(b.Component);W=(0,T.default)((function(e,t){t.setState({varyId:e},t.saveTemplate)}))(W),t.default=(0,y.connect)((function(e){var t=e.zoneSettingData,a=t.areaList,n=t.newAreaList,r=t.zoneFormData,o=t.isSave,l=t.areaVisible,i=t.isImplement,s=t.serverData,c=t.areaHide,d=t.ismobile;return{areaList:a,zoneFormData:r,zoneDatas:e.zoneRegisterData.zoneDatas,isSave:o,newAreaList:n,areaVisible:l,isImplement:i,serverData:s,areaHide:c,ismobile:d}}),{setZoneData:A.setZoneData,updateAreaList:_.updateAreaList,updateSaveFlag:_.updateSaveFlag,setZoneDataFun:_.setZoneDataFun,updateAreaValidate:_.updateAreaValidate,setAreaItemVisible:_.setAreaItemVisible,setServerData:_.setServerData,setAreaHide:_.setAreaHide,setTabLayModalVisible:_.setTabLayModalVisible,updateSelectArea:_.updateSelectArea,updateSelectCard:_.updateSelectCard})((0,w.withRouter)(W))},1320:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(407)),r=S(a(179)),o=S(a(69)),l=S(a(118)),i=S(a(411)),s=S(a(26)),c=S(a(5)),d=S(a(8)),u=S(a(6)),p=S(a(7)),f=a(1),g=S(f),m=a(38),h=a(1084),b=a(253),v=S(a(32)),y=a(20),k=a(252),C=S(a(403));function S(e){return e&&e.__esModule?e:{default:e}}function w(e,t){var a=this,n=this.props,r=n.requestUrl,o=n.requestData,l=n.templetData,i=l.pagecode,s=l.appcode,c=l.templetid,d=r||"/nccloud/platform/templet/querypage.do",u=o||{pagecode:i,appcode:s,templetid:c};Array.isArray(u)&&0==u.length||(0,v.default)({url:d,data:u,loading:!0,info:{name:(0,y.langCheck)("ZoneSetting-000028","pages",e),action:(0,y.langCheck)("ZoneSetting-000029","pages",e)},success:function(e){var n=e.data.data;n&&(a.registerComponent(n),a.props.meta.setMeta(n),o&&o.forEach((function(e){n[e.code]&&(n[e.code].position=e.position)})),a.props.updatePreviewData(n),a.setState({reRender:!0},(function(){return t(n)})))}})}a(1321);var x=function(e){function t(e){(0,c.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.afterInitTemplate=function(e){if(e){var t=e,s=[],c=a.getTabGirdRelationCode(t),d=t.formrelation,u=t.containerrelation,p=t.formassociatedrelation,f=[],g=[];c&&(0,i.default)(c).forEach((function(e){f=f.concat(e)})),p&&(0,i.default)(p).forEach((function(e){g=g.concat(e.formtabs)}));var m=function(e,t){var n=t.moduletype,r=t.code;"table"!==n&&"form"!==n&&"search"!==n||"form"===n&&d&&t.relationcode in d||"form"===n&&p&&g.includes(e)||(u&&c&&(0,i.default)(u).length&&(0,o.default)(c).includes(e)?s.push({id:r,name:t.name,myAreaType:n,position:t.position,tabGirdRelationCode:c[e],srcAreaCode:e}):f.includes(e)||s.push({id:r,name:t.name,myAreaType:n,position:t.position})),"form"===n&&a.props.form.setFormStatus(r,"edit"),"table"===n&&setTimeout((function(){0==a.props.editTable.getNumberOfRows(r)&&a.props.editTable.addRow(r)}),10)},h=!0,b=!1,v=void 0;try{for(var y,k=(0,r.default)((0,n.default)(t));!(h=(y=k.next()).done);h=!0){var C=y.value,S=(0,l.default)(C,2);m(S[0],S[1])}}catch(e){b=!0,v=e}finally{try{!h&&k.return&&k.return()}finally{if(b)throw v}}s[0]&&s[0].position&&s.sort((function(e,t){return e.position-t.position})),a.setState({all_keys:s})}},a.getTabGirdRelationCode=function(e){var t={},a=!0,o=!1,i=void 0;try{for(var s,c=(0,r.default)((0,n.default)(e));!(a=(s=c.next()).done);a=!0){var d=s.value,u=(0,l.default)(d,2),p=u[0],f=u[1];if("containerrelation"===p){var g=function(e,a){e&&(t.hasOwnProperty(e)||(t[e]=[]),a.map((function(a){t[e]=t[e].concat(a)})))},m=!0,h=!1,b=void 0;try{for(var v,y=(0,r.default)((0,n.default)(f));!(m=(v=y.next()).done);m=!0){var k=v.value,C=(0,l.default)(k,2);g(C[0],C[1])}}catch(e){h=!0,b=e}finally{try{!m&&y.return&&y.return()}finally{if(h)throw b}}}}}catch(e){o=!0,i=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw i}}return t},a.registerComponent=function(e){var t=a.getTabGirdRelationCode(e),n=(0,i.default)(e).filter((function(e){return e&&"form"===e.moduletype})).map((function(e){return e.code})),r=(0,i.default)(e).filter((function(e){return e&&"table"===e.moduletype})).map((function(e){return e.code})),l=(0,i.default)(e).filter((function(e){return e&&"search"===e.moduletype})).map((function(e){return e.code})),s=t&&(0,o.default)(t)||[];s.length&&t&&(0,i.default)(t).forEach((function(e){r=_.differenceBy(r,e)})),n.length&&a.props.use.form.apply(null,n),r.length&&a.props.use.editTable.apply(null,r),s.length&&a.props.use.cardTable.apply(null,s),l.length&&a.props.use.search.apply(null,l)},a.showModalHidden=function(){a.props.setModalVisibel(!1)},a.createDom=function(){var e=a.props,t=e.editTable,n=e.form,r=e.search,o=e.cardTable,l=n.createForm,i=t.createEditTable,s=r.NCCreateSearch,c=o.createCardTable,d=a.state.all_keys,u=[];return d.length&&d.map((function(e,t){switch(e.myAreaType){case"form":u.push(g.default.createElement("div",{className:"viewTemplateArea",key:"form"+t},g.default.createElement("div",{className:"descrip"},g.default.createElement("span",{key:"forms"+t}," ▼ "),""+e.name),l(e.id)));break;case"table":e.tabGirdRelationCode?u.push(g.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},g.default.createElement("div",{className:"descrip"},g.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),c(e.srcAreaCode,{cancelCustomRightMenu:!0}))):u.push(g.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},g.default.createElement("div",{className:"descrip"},g.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),i(e.id,{cancelCustomRightMenu:!0})));break;case"search":u.push(g.default.createElement("div",{className:"viewTemplateArea",key:"search"+t},g.default.createElement("div",{className:"descrip"},g.default.createElement("span",{key:"searchs"+t}," ▼ "),""+e.name),s(e.id,{useCache:!1})))}})),u},a.state={all_keys:[],json:{},reRender:!1},a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,k.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t}),w.call(e,t,e.afterInitTemplate)}})}},{key:"render",value:function(){var e=this.state,t=e.json,a=e.reRender;return g.default.createElement(C.default,{maskClosable:!1,customHeader:(0,y.langCheck)("ZoneSetting-000121","pages",t),visible:this.props.previewVisibel,onOk:this.onOkDialog,onCancel:this.showModalHidden,width:"98%",className:"viewPageTem",footer:null,fieldid:"preview"},a&&this.createDom())}}]),t}(f.Component);x=(0,b.createPage)({})(x),t.default=(0,m.connect)((function(e){return{areaList:e.zoneSettingData.areaList,previewData:e.zoneSettingData.previewData}}),{updatePreviewData:h.updatePreviewData})(x)},1321:function(e,t,a){var n=a(1322);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1322:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".viewPageTem .base-modal-body{overflow:auto;padding:20px 0}.viewPageTem .base-modal-body .printContent{padding:20px}.viewPageTem .viewTemplateArea{padding:0 20px}",""])},1323:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APP_INFO={AppRegister:{appcode:"102202APP",pagecode:"102202APP_PAGE",url:"/workbenchsetting/pages/developmentconfig/AppRegister/index.html"},TemplateSetting:{appcode:"10180TM",pagecode:"10180TM_PAGE",url:"/workbenchsetting/pages/customizeconfig/TemplateSetting/index.html"},TemplateSettingUnit:{appcode:"10181TM",pagecode:"10181TM_PAGE",url:"/workbenchsetting/pages/customizeconfig/TemplateSetting-unit/index.html"}}},1324:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(2)),r=u(a(26)),o=u(a(5)),l=u(a(8)),i=u(a(6)),s=u(a(7));t.default=function(e){return function(t){return function(a){function u(t){(0,o.default)(this,u);var a=(0,i.default)(this,(u.__proto__||(0,r.default)(u)).call(this,t));return a.showVaryModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pagetemplate",t=arguments[1];a.setState({showVaryModal:!0,flag:e,operate:t})},a.onConfirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"function"==typeof e&&e(t,a.component,a.state.operate)},a.state={showVaryModal:!1,flag:"pagetemplate"},a}return(0,s.default)(u,a),(0,l.default)(u,[{key:"render",value:function(){var e=this,a=(0,n.default)({showVaryModal:this.showVaryModal},this.props);return c.default.createElement(c.default.Fragment,null,c.default.createElement(t,(0,n.default)({ref:function(t){return e.component=t}},a)),this.state.showVaryModal&&c.default.createElement(d.default,{flag:this.state.flag,close:function(){return e.setState({showVaryModal:!1})},confirm:this.onConfirm}))}}]),u}(c.default.Component)}};var c=u(a(1)),d=u(a(1325));function u(e){return e&&e.__esModule?e:{default:e}}},1325:function(e,t,a){"use strict";(function(e){var n,r,o,l=g(a(254)),i=g(a(427)),s=g(a(26)),c=g(a(428)),d=g(a(1065)),u=g(a(260)),p=g(a(140)),f=g(a(36));function g(e){return e&&e.__esModule?e:{default:e}}!function(l,i){"object"==(0,f.default)(t)&&"object"==(0,f.default)(e)?e.exports=i(a(253),a(1),a(10)):(r=[a(253),a(1),a(10)],void 0===(o="function"==typeof(n=i)?n.apply(t,r):n)||(e.exports=o))}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||(0,p.default)(e,t,{enumerable:!0,get:n})},a.r=function(e){void 0!==u.default&&d.default&&(0,p.default)(e,d.default,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":(0,f.default)(e))&&e&&e.__esModule)return e;var n=(0,c.default)(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=1)}([function(t,a){t.exports=e},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,p.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(2),o=g(r),l=(g(a(3)),a(0)),d=g(a(4)),u=a(5);function g(e){return e&&e.__esModule?e:{default:e}}var m=l.base.NCModal,h=l.base.NCButton,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":(0,f.default)(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.callBack=function(){a.props.confirm(a.state.VaryID.refpk),a.props.close(a.state.VaryID.refpk)},a.onChange=function(e){a.setState({VaryID:e})},a.onClose=function(){a.props.close("close")},a.componentWillMount=function(){var e=a;(0,u.ctmsCheckClickCanUsed)(a.props.flag,null)?(0,l.ajax)({data:{code:a.props.flag},loading:!0,url:"/nccloud/riasm/change/ctmsconfig.do",success:function(t){t.data<0&&(e.props.confirm("undefined"),e.props.close("undefined")),e.setState({show:!0})},error:function(e){(0,l.toast)({color:"warning",content:e.message})}}):e.props.close("undefined")},a.state={VaryID:{},show:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,f.default)(t)));e.prototype=(0,c.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement(m,{show:this.state.show},o.default.createElement(m.Header,null,o.default.createElement(m.Title,null,"选择变更号")),o.default.createElement(m.Body,null,o.default.createElement(d.default,{value:this.state.VaryID,onChange:this.onChange})),o.default.createElement(m.Footer,null,o.default.createElement(h,{onClick:this.onClose},"关闭"),o.default.createElement(h,{onClick:this.callBack,color:"primary"},"确认"))))}}]),t}(r.Component);t.default=b},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=l.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},refType:"grid",refName:"变更号",placeholder:"变更号",queryGridUrl:"/nccloud/riasm/change/varyidref.do",isHasDisabledData:!1,columnConfig:[{name:["1880000025-000002","1880000025-000003"],code:["refcode","refname"]}]};return React.createElement(r,n({},t,e))};var r=a(0).high.Refer},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.ctmsCheckAppEnvIsProduct=t.ctmsCheckClickCanUsed=void 0;var n=a(0);t.ctmsCheckClickCanUsed=function(e,t){var a=!0;return(0,n.ajax)({loading:!0,url:"/nccloud/riasm/ctmsconfig/qrycurrentappcanused.do",data:e,async:!1,success:function(e){return 0==e.data.result&&(null==t||""==t?(0,n.toast)({color:"warning",content:e.data.msg}):(0,n.toast)({color:"warning",content:t}),a=!1),a},error:function(e){(0,n.toast)({color:"danger",content:e})}}),a},t.ctmsCheckAppEnvIsProduct=function(){var e=!1;return(0,n.ajax)({loading:!0,url:"/nccloud/riasm/ctmsconfig/systemtype.do",data:null,async:!1,success:function(t){return"product"==t.data&&(e=!0),e},error:function(e){(0,n.toast)({color:"danger",content:e.message})}}),e}}])}))}).call(this,a(184)(e))},1326:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=w(a(182)),l=w(a(179)),i=w(a(29)),s=w(a(51)),c=w(a(2)),d=w(a(22)),u=w(a(26)),p=w(a(5)),f=w(a(8)),g=w(a(6)),m=w(a(7)),h=a(1),b=w(h),v=a(38),y=a(1084),k=a(20),C=w(a(23)),S=a(68);function w(e){return e&&e.__esModule?e:{default:e}}var x=C.default.getLangCode;a(1209);var E=C.default.base,T=E.NCSelect,M=E.NCFormControl,A=T.NCOption,D=function(e){return String(e).toLocaleLowerCase()},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\.|\&|\#/g,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return String(e).replace(t,a)},N=function(e,t){var a=String(e).match(new RegExp(""+t,"ig"));return a?a[0]:""},L=function(e,t){if(!e)return null;for(var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!a.call(e,t);)e=e.parentElement;return e},P="search-units-selected",O="search-units-active",Z="search-units-nolabel",j=function(e,t){return V(e)+F(t)+q()},V=function(e){return" .search-area-"+I(e)+" "},F=function(e){return" .search-unit-"+I(e)+" "},q=function(){return" .search-unit-label "},z=(r=n=function(e){function t(e){(0,p.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));a.lockService=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;a.lock=!0,setTimeout((function(){a.lock=!1,e&&e()}),t)},a.isRepeat=function(e){var t=a.props.areaList.find((function(t){return t.code===e}));if(t){var n=(0,S.uniqBy)(t.queryPropertyList,"code");return t.queryPropertyList.length!==n.length}return!1},a.handleChange=function(e){a.search(e),a.setState({key:e})},a.clear=function(){a.clearAllHightLight(),a.setState({highlights:[],key:"",current:0,total:0})},a.prev=function(){a.moveSearch("prev")},a.next=function(){a.moveSearch("next")};var n=e.sourceData,r=void 0===n?[]:n,o=(0,d.default)(e,["sourceData"]);return a.state=(0,c.default)({},o),a.sourceData=r,a.lock=!1,a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.handleSourceData(),t=e.selectOptions,a=void 0===t?[]:t,n=e.relations;this.relations=n,this.setState({selectOptions:a})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.sourceData,n=void 0===a?[]:a,r=e.boxStatus,o=void 0===r?{}:r,l=e.areaHide,i=void 0===l?{}:l,c=e.areaVisible,d=void 0===c?{}:c,u=e.areaList,p=void 0===u?[]:u,f=this.state,g=f.areaCode,m=void 0===g?{}:g,h=f.areaVisible,b=void 0===h?{}:h,v=f.areaHide,y=f.areaVisible,k=f.showSide,C=(0,s.default)(m)!==(0,s.default)(i)||(0,s.default)(b)!==(0,s.default)(d)||(0,s.default)(p)!==(0,s.default)(this.areaList||[])||o.reset;this.areaList=JSON.parse((0,s.default)(p)),this.sourceData=n;var S=this.handleSourceData({areaHide:i,areaVisible:d}),w=S.selectOptions,x=void 0===w?[]:w,E=S.relations;this.relations=E,this.setState({selectOptions:x,areaHide:i,areaVisible:d,showSide:o.showSide},(function(){(o.showSide&&o.showSide!==k||o.isHighlight||i&&i!=v||d&&d!==y)&&t.highlight(),o.isHighlight&&t.props.updateSearchBox({isHighlight:!1}),o.reset&&t.props.updateSearchBox({reset:!1}),C&&(t.reset=!0),o.isLayout}))}},{key:"handleSourceData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.areaHide,n=void 0===a?{}:a,r=t.areaVisible,o=void 0===r?{}:r,l=this.sourceData,i={__side:{},__associatedtab:{}},s=[],d=[];return l.forEach((function(e){e&&(d.push(e),e.tabs&&(d=d.concat(e.tabs||[])))})),d.forEach((function(t){var a=t.code,r=t.name,l=t.associatedtab,d=t.pk_area,u=t.groups,p=void 0===u?[]:u,f=t.sides,g=void 0===f?[]:f,m=t.grandsons,h=void 0===m?[]:m;n[d]||(r=e.getMultiLangName(t,"name"),l&&(i.__associatedtab[a]=l),s.push({code:a,name:r}),i[a]={sides:[],groups:[],grandsons:[],master:[(0,c.default)({areaVisible:o[d],classify:"master"},t)]},p&&p.forEach((function(e){i[a].groups.push((0,c.default)({areaVisible:o[e.pk_area],classify:"group"},e))})),g&&g.forEach((function(e){"edit"===e.areastatus?(i.__side[a]=e.code,i[a].sides.push((0,c.default)({areaVisible:o[e.pk_area],classify:"side"},e))):i[a].groups.push((0,c.default)({areaVisible:o[e.pk_area],classify:"group"},e))})),h&&h.forEach((function(e){i[a].grandsons.push((0,c.default)({areaVisible:o[e.pk_area],classify:"grandson"},e))})))})),s=this.handleSelectOptions(s,i),{relations:i,selectOptions:s}}},{key:"handleSelectOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.__associatedtab,n={},r=JSON.parse((0,s.default)(e))||[];return r.forEach((function(e,t){var o=e.code,l=a[o];l&&(!n[l]&&(n[l]=[]),n[l].push(e),r.splice(t,1))})),r.forEach((function(e,t){var a=e.code;n[a]&&r.splice.apply(r,[t+1,0].concat((0,i.default)(n[a])))})),r}},{key:"active",value:function(e){var t=document.querySelector("."+P),a=e.querySelector("."+O);a&&(t&&(t.className=t.className.replace(new RegExp(""+P,"g"),"")),a.className+=" "+P,this.focus(a))}},{key:"focus",value:function(e){setTimeout((function(){e.scrollIntoView()}),10)}},{key:"clearSide",value:function(e,t){var a=this.state,n=a.curentSide,r=a.showSide,o=n.code,l=n.relationcode,i=n.isgrandson,s=(n.classify,e.area),c=(s.code,s.relationcode),d=(s.areastatus,s.isgrandson,s.classify),u=this.relations;if(o&&r&&("master"==d||"group"==d||"side"==d&&l!=c||"grandson"==d&&l!=c)){var p=i?u.__side[l]:o,f=document.querySelector(V(p)),g=f&&f.querySelector(".drawer-close-btn");g&&g.click(),this.setState({curentSide:{},showSide:!1}),this.lockService(t)}else t()}},{key:"positionAreaUnit",value:function(e,t){var a=this,n=t.unitCode,r=t.areaCode,o=t.relationcode,l=t.isgrandson,i=t.areastatus,s=t.areatype,c=t.associatedtab,d=t.classify,u=null;if("side"==d||"grandson"==d){var p=e.getAttribute("searchinside"),f=e.querySelector(".search-action-side");this.setState({curentSide:{code:r,relationcode:o,isgrandson:l,classify:d},showSide:!0}),f&&"true"!=p&&f.click(),this.lockService((function(){if(l){a.highlight();var e=document.querySelector(".search-area-"+I(r)+" .area-item-content"),t=document.querySelector(".search-area-"+I(r)+" .search-area-header");e&&"none"==e.style.display&&t&&t.click(),u=document.querySelector(j(r,n))}else"edit"==i&&(a.highlight(),u=document.querySelector(j(r,n)));u&&a.active(u)}))}else{var g=document.querySelector(V(r)),m=e.querySelector(".area-item-content"),h=e.querySelector(".search-area-header"),b=e.querySelector(".form-area-group"),v=e.querySelector(".search-action-fold");m&&"none"==m.style.display&&h&&h.click(),b&&"none"==b.style.display&&v&&"browse"==i&&v.click(),this.lockService((function(){if("browse"==i&&c&&(g=document.querySelector(V(o)+V(r))),"0"==s){u=g&&g.querySelector(F(n));var e=document.querySelector("."+P);u&&(e&&(e.className=e.className.replace(new RegExp(""+P,"g"),"")),u.className+=" "+P,a.focus(u))}else(u=g&&g.querySelector(F(n)+q()))&&a.active(u)}))}}},{key:"position",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this.state.highlights,n=this.relations,r=a[t-1];if(a&&r){var o=r.area,l=o.code,i=o.relationcode,s=o.isgrandson,c=o.areastatus,d=o.areatype,u=o.classify,p=r.unit.code,f=n.__associatedtab[i||l],g=l;f?g=f:"group"!=u&&"side"!=u&&"grandson"!=u||(g=i);var m=document.querySelector(V(g));m&&this.clearSide(r,(function(){if(f){var t=m.querySelector(".table-tabs-container")||L(m,".table-tabs-container"),a=JSON.parse(t.getAttribute("data-searchcodes")||"[]").indexOf(i||l),n=t.querySelector(".wui-tabs-tab.wui-tabs-tab-active"),r=t.querySelectorAll(".wui-tabs-tab")[a];r&&n!==r?(r.click(),e.lockService((function(){e.highlight(),e.positionAreaUnit(m,{unitCode:p,areaCode:l,relationcode:i,isgrandson:s,areastatus:c,areatype:d,associatedtab:f,classify:u})}))):e.positionAreaUnit(m,{unitCode:p,areaCode:l,relationcode:i,isgrandson:s,areastatus:c,areatype:d,associatedtab:f,classify:u})}else e.positionAreaUnit(m,{unitCode:p,areaCode:l,relationcode:i,isgrandson:s,areastatus:c,areatype:d,associatedtab:f,classify:u})}))}}},{key:"highlight",value:function(){var e=this,t=this.state.highlights,a=void 0===t?[]:t,n=function(t){var a=t.unit,n=a.key,r=a.label,o=a.code,l=t.area,s=l.code,c=l.areatype,d=(l.areastatus,l.relationcode),u=(l.associatedtab,l.isgrandson,l.classify),p=null,f=null;if(!(p="0"==c?V(s)+F(o):"group"==u?V(d)+j(s,o):j(s,o)))return"continue";if(f=document.querySelector(p),e.isRepeat(s)){var g=document.querySelectorAll(p);[].concat((0,i.default)(g)).length>1&&[].concat((0,i.default)(g)).forEach((function(e){-1!=e.innerText.search(n)&&(f=e)}))}if(!f)return"continue";"0"==c?(f.setAttribute("tabindex",0),f.className+=" "+O+" "+Z):f.innerHTML=String(r).replace(n,'<span tabindex="0" class="'+O+'">'+n+"</span>")},r=!0,o=!1,s=void 0;try{for(var c,d=(0,l.default)(a);!(r=(c=d.next()).done);r=!0)n(c.value)}catch(e){o=!0,s=e}finally{try{!r&&d.return&&d.return()}finally{if(o)throw s}}}},{key:"clearAllHightLight",value:function(){var e=document.querySelectorAll("."+O);e&&(0,o.default)(e).forEach((function(e){e.className=e.className.replace(new RegExp(""+O,"g"),""),e.className=e.className.replace(new RegExp(""+P,"g"),"")}))}},{key:"getHighlights",value:function(e){var t=this,a=[],n=this.state,r=(n.showSide,n.select),o=n.selectOptions,i=[],s=this.relations;if(r&&"All"!=r)a=[].concat(s[r].master,s[r].groups,s[r].sides,s[r].grandsons);else{var c=[],d=!0,u=!1,p=void 0;try{for(var f,g=(0,l.default)(o);!(d=(f=g.next()).done);d=!0){var m=f.value;c=c.concat(s[m.code].master,s[m.code].groups,s[m.code].sides,s[m.code].grandsons)}}catch(e){u=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(u)throw p}}a=c}return e&&a.forEach((function(a){var n=a.relationcode,r=a.code,o=a.areastatus,l=a.name,s=a.queryPropertyList,c=a.isgrandson,d=a.areatype,u=a.classify,p=a.associatedtab,f=a.areaVisible;s.forEach((function(a){var s=a.label,g=void 0===s?"":s,m=a.code,h=a.visible;if(!f||h){var b=t.getMultiLangName(a,"label");"-1"==D(g).indexOf(D(e))&&-1===D(b).indexOf(D(e))||i.push({area:{relationcode:n,code:r,areastatus:o,name:l,isgrandson:c,areatype:d,classify:u,associatedtab:p},unit:{code:m,key:N(b,e),label:b}})}}))})),console.log("search for",i),i}},{key:"search",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getHighlights(e);this.setState({highlights:n,current:a,total:n.length,key:e},(function(){t.clearAllHightLight(),t.highlight(),t.position(a),t.reset=!1}))}},{key:"moveSearch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",a=this.state,n=a.highlights,r=a.current,o=a.total,l=void 0===o?-1:o,i=a.key;if(this.reset||!(l<=0||!n.length||this.lock)){if(this.reset){var c=JSON.parse((0,s.default)(n[r-1]||{area:{},unit:{}})),d=JSON.parse((0,s.default)(n||[]));"prev"==t?d.splice(r,d.length):d.splice(0,r-1),n=this.getHighlights(i);var u=0,p=!0;if("prev"==t)for(var f=function(e){var t=n[e];if(d.some((function(e){return e.area.code===t.area.code&t.unit.code==e.unit.code})))return u=t.area.code==c.area.code&&t.unit.code==c.unit.code?e+1:e+2,"break"},g=n.length-1;g>=0;g--){var m=f(g);if("break"===m)break}else n.forEach((function(e,t){d.some((function(t){return t.area.code===e.area.code&e.unit.code==t.unit.code}))&&p&&(u=e.area.code==c.area.code&&e.unit.code==c.unit.code?t+1:t,p=!1)}));l=n.length,r=u||("prev"==t?2:0),this.reset=!1}r="prev"==t?r>l||1==r?l:r-1:r>=l?1:r+1,1==l&&1==r?this.position(r):this.setState({current:r,total:l,highlights:n},(function(){e.clearAllHightLight(),e.highlight(),e.position(r)}))}}},{key:"componentWillUnmount",value:function(){this.sourceData=[],this.areaList=[]}},{key:"getMultiLangName",value:function(e,t){var a=this.props.multiOptions,n=x("langCode"),r="",o="",l="";return a?(a.forEach((function(a){var i=a.languageMain,s=a.index,c=a.languageCode;l=""+t+s,c===n&&(r=_.get(e,l)),!0===i&&(o=_.get(e,l))})),r&&r.length>0?r:o):_.get(e,name,"")}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.total,r=t.selectOptions,o=t.key,l=t.select,i=t.selectFocus;return b.default.createElement("div",{className:"search-box search-box-header"},b.default.createElement(T,{className:"st-select "+(i?"st-select-focus":""),value:l,showClear:!1,fieldid:"searchProperty",onFocus:function(){e.setState({selectFocus:!0})},onBlur:function(){e.setState({selectFocus:!1})},onSelect:function(t){e.setState({select:t},(function(){e.search(o)}))}},b.default.createElement(A,{value:"All"},(0,k.langCheck)("ZoneSetting-000282","pages",this.props.json)||"全部"),r.map((function(e){return b.default.createElement(A,{value:e.code},b.default.createElement("span",{title:e.name},e.name))}))),b.default.createElement(M,{className:"st-input "+(i?"st-input-border-left":""),placeholder:(0,k.langCheck)("ZoneSetting-000281","pages",this.props.json)||"搜索字段名称",onChange:this.handleChange,prefix:b.default.createElement("i",{className:"icon iconfont icon-sousuo st-icon-sousuo"}),value:o,fieldid:"searchCon"}),o&&b.default.createElement("div",{className:"st-count"},(n?a:0)+"/"+n),o&&b.default.createElement("div",{className:"st-icon"},b.default.createElement("i",{className:"icon iconfont icon-qingkong st-icon-close",onClick:this.clear}),b.default.createElement("i",{className:"icon iconfont icon-jiantoushang1 st-icon-up",onClick:this.prev}),b.default.createElement("i",{className:"icon iconfont icon-jiantouxia1 st-icon-down",onClick:this.next})))}}]),t}(h.Component),n.defaultProps={select:"All",key:"",current:0,total:0,selectOptions:[],highlights:[],curentSide:{},showSide:!1,areaHide:{},areaVisible:{}},r);t.default=(0,v.connect)((function(e){var t=e.zoneSettingData,a=t.areaList,n=t.boxStatus;t.newAreaList;return{areaList:a,boxStatus:n}}),{updateSearchBox:y.updateSearchBox})(z)},1327:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".search-box{display:flex;position:relative;margin-left:40px}.search-box .st-select{min-width:140px}.search-box .base-form-control-wrapper{border-radius:0 3px 3px 0!important}.search-box .nc-select,.search-box .nc-select-wrapper.base-form-control-wrapper{border-radius:3px 0 0 3px!important}.search-box .nc-select .wui-select-selector{border-right:none;border-radius:3px 0 0 3px!important}.search-box .formcontrol-hotkey-wrapper{min-width:280px}.search-box .base-form-control-wrapper .base-input{width:100%;padding-right:120px;padding-left:15px;height:26px;position:relative}.search-box .st-icon-sousuo{position:absolute;top:50%;left:5px;font-size:14px;line-height:26px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.search-box .st-icon-sousuo:before{color:#878b94}.search-box .st-count{right:93px;font-size:13px;font-family:PingFangHK-Regular,PingFangHK;font-weight:400}.search-box .st-count,.search-box .st-icon{position:absolute;line-height:26px;height:26px;top:0;z-index:100}.search-box .st-icon{font-weight:500;right:0;cursor:pointer}.search-box .st-icon .st-icon-close{font-size:17px;display:inline-block;width:33px;text-align:center}.search-box .st-icon .st-icon-down,.search-box .st-icon .st-icon-up{border-left:1px solid #d0d0d0;width:30px;display:inline-block;border-right:none;text-align:center}.search-units-active:not(.search-units-nolabel){background:#fff085}.search-units-selected:not(.search-units-nolabel){background:#ffc8a6}.search-same-input .nc-date-picker .base-form-control-wrapper,.search-same-input .nc-date-picker .base-input,.search-same-input .nc-date-picker input,.search-same-input .refer .base-form-control-wrapper,.search-same-input .refer .base-input,.search-same-input .refer input,.search-units-active.search-units-nolabel .nc-date-picker .base-form-control-wrapper,.search-units-active.search-units-nolabel .nc-date-picker .base-input,.search-units-active.search-units-nolabel .nc-date-picker input,.search-units-active.search-units-nolabel .refer .base-form-control-wrapper,.search-units-active.search-units-nolabel .refer .base-input,.search-units-active.search-units-nolabel .refer input{background:transparent!important}.search-units-active.search-units-nolabel .base-form-control-wrapper,.search-units-active.search-units-nolabel .base-input,.search-units-active.search-units-nolabel .nc-date-picker,.search-units-active.search-units-nolabel .nc-select.wui-select-disabled .wui-select-selector,.search-units-active.search-units-nolabel .refer,.search-units-active.search-units-nolabel .refer-input-common,.search-units-active.search-units-nolabel .wui-select-disabled,.search-units-active.search-units-nolabel .wui-select-selector,.search-units-active.search-units-nolabel .wui-time-picker-input{background:#fff085!important}.search-units-selected.search-units-nolabel .nc-date-picker .base-form-control-wrapper,.search-units-selected.search-units-nolabel .nc-date-picker .base-input,.search-units-selected.search-units-nolabel .nc-date-picker input,.search-units-selected.search-units-nolabel .refer .base-form-control-wrapper,.search-units-selected.search-units-nolabel .refer .base-input,.search-units-selected.search-units-nolabel .refer input{background:transparent!important}.search-units-selected.search-units-nolabel .base-form-control-wrapper,.search-units-selected.search-units-nolabel .base-input,.search-units-selected.search-units-nolabel .nc-date-picker,.search-units-selected.search-units-nolabel .nc-select.wui-select-disabled .wui-select-selector,.search-units-selected.search-units-nolabel .refer,.search-units-selected.search-units-nolabel .refer-input-common,.search-units-selected.search-units-nolabel .wui-select-disabled,.search-units-selected.search-units-nolabel .wui-select-selector,.search-units-selected.search-units-nolabel .wui-time-picker-input{background:#ffc8a6!important}.search-box-header .base-form-control-wrapper{display:flex!important;align-items:center}.search-box-header .st-select{border-radius:4px 0 0 4px}.search-box-header .st-input-border-left{border-left-color:#007ace!important}.search-box-header .base-form-control-wrapper{margin-left:-2px;border-radius:0 4px 4px 0!important}.search-box-header .base-form-control-wrapper .base-input{border-radius:0 4px 4px 0!important}",""])},1328:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=I(a(2)),o=I(a(29)),l=I(a(69)),i=I(a(26)),s=I(a(5)),c=I(a(8)),d=I(a(6)),u=I(a(7)),p=a(1),f=I(p),g=a(38),m=a(1084),h=a(1186);I(a(32));a(1208);var b=I(a(1093)),v=I(a(1329)),y=I(a(1358)),k=I(a(68)),C=I(a(59)),S=a(1037),w=a(20),x=a(404),E=I(a(1359)),T=I(a(23)),M=I(a(1360)),A=a(1368),_=a(1188),D=I(a(1096));function I(e){return e&&e.__esModule?e:{default:e}}T.default.base.NCDiv;var N={drop:function(e,t,a){var n=t.getItem();n.type&&"area"===n.type&&"grandson"!==n.areaType&&(0,x.addNewAreaItem)(e,{items:{areatype:n.areaCode},isExpand:!0})},canDrop:function(e,t){return"card"!==t.getItem().type}},L=(0,S.DropTarget)("area",N,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}))(n=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.setModalVisible=function(e){a.setState({modalVisible:e})},a.addMetaInArea=function(e,t,n){var r=a.props.json;""!==e&&null!=e?_.queryMetaTreeData.call(a,e,"").then((function(o){if(o&&o.length>0){var l={isleaf:!1,readonly:!1,refpk:e,refcode:"",pid:null,children:o},i=_.createMetaTreeIns.call(a,l,n),s=D.default.serialize(i).nodes,c=[],d=i.getMetaTreeData().children;s.forEach((function(e){"205"===e.data.datatype&&c.push(e.data)})),a.setState({origTree:i,curTree:i,metaTree:d,targetAreaID:t,targetAreaType:n,canSelectTreeNodeList:c}),a.setModalVisible(!0)}else(0,C.default)({status:"warning",msg:(0,w.langCheck)("ZoneSetting-000021","pages",r)})})):(0,C.default)({status:"warning",msg:(0,w.langCheck)("ZoneSetting-000019","pages",r)})},a.updateMetaTreeData=function(e){a.setState({metaTree:e})},a.updateMetaTree=function(e,t){a.setState({origTree:e,curTree:t})},a.addCard=function(e){var t=a.state.targetAreaID,n=a.props.areaList;n=k.default.cloneDeep(n);var r=-1,o="";k.default.forEach(n,(function(e,a){if(t===e.pk_area)return r=a,o=e.metaid,!1})),n[r].queryPropertyList=k.default.uniqBy(n[r].queryPropertyList.concat(e),"code"),k.default.forEach(n[r].queryPropertyList,(function(e,t){e.position=t+1,e.classid=o})),a.props.updateAreaList(n)},a.addCardFromMetaTree=function(e){var t=e.cardList,n=e.targetAreaID,r=e.dropIndex,i=a.props,s=i.areaList,c=i.json;s=k.default.cloneDeep(s);var d=void 0,u=void 0;k.default.forEach(s,(function(e,t){if(n===e.pk_area)return d=t,u=e.metaid,!1}));var p,f=s[d].queryPropertyList,g=(0,A.filterRepeatMeta)(f,t);((0,l.default)(g.errorMsg).length>0&&(0,A.giveRepeatedTips)(g.errorMsg,c),g.cardList.length>0)&&((p=f).splice.apply(p,[r,0].concat((0,o.default)(g.cardList))),f=k.default.uniqBy(f,"code"),k.default.forEach(f,(function(e,t){e.position=t+1,e.classid=u})),a.props.updateAreaList(s))},a.deleteCard=function(e,t){var n=a.props.areaList;(n=k.default.cloneDeep(n))[t].queryPropertyList.splice(e,1),a.props.updateAreaList(n),a.props.updateSelectCard({})},a.addMetaItem=function(e){var t=e.selectedTreeNode,n=e.targetAreaID,r=e.dataRef,o=e.dropIndex,l=a.props,i=l.json,s=(l.newAreaList,l.areaList);A.addMetaItem.call(a,{selectedTreeNode:t,targetAreaID:n,dataRef:r,json:i,areaList:s,dropIndex:o})},a.dragAreaItem=function(e,t){var n=a.props.areaList,r=(n=k.default.cloneDeep(n))[e];n.splice(e,1),n.splice(t,0,r),a.props.updateAreaList(n)},a.moveUp=function(e,t){var n=t-1;if(null===a.props.newAreaList[n]){var r=e.slice(0,n);n=k.default.findLastIndex(r,(function(e){return null!==e}))-1}return a.swapAreaItem(e,t,n)},a.moveDown=function(e,t){var n=t+1;return null===a.props.newAreaList[n]&&(n=e.slice(n).findIndex((function(e){return null!==e}))+n+1),a.swapAreaItem(e,t,n)},a.moveArea=function(e,t,n){t[n];var r=(0,x.getFormHeadCode)(t,a.props.zoneFormData.headcode),o=void 0;if("up"===e)if(t[o=n-1].relationcode===r){var l=t.findIndex((function(e){return e.code===r}));a.moveFormGroup("down",t,l)}else a.moveUp(t,n);else"down"===e&&(t[o=n+1].code===r?a.moveFormGroup("up",t,o):a.moveDown(t,n))},a.moveAreaItem=function(e,t){var n=k.default.cloneDeep(a.props.areaList),r=n[t],o=(0,x.getFormHeadCode)(n,a.props.zoneFormData.headcode);"up"===e&&0===t||"down"===e&&t===n.length-1||(r.code===o?a.moveFormGroup(e,n,t):a.moveArea(e,n,t),a.props.updateAreaList(n))},a.moveFormGroup=function(e,t,n){var r=a.getFormGroupList(t);if("up"===e){var o=n-1;a.insertAreaItem(t,n+r.length,o)}else if("down"===e){var l=n+r.length+1;a.insertAreaItem(t,n,l)}},a.swapAreaItem=function(e,t,a){var n;return n=[e[a],e[t]],e[t]=n[0],e[a]=n[1],n},a.insertAreaItem=function(e,t,a){var n=e.splice(a,1)[0];e.splice(t,0,n)},a.moveFormGroupItem=function(e,t){var n=a.props.areaList,r=(0,x.getFormHeadCode)(n,a.props.zoneFormData.headcode),o=k.default.findLastIndex(n,(function(e){return e.relationcode===r&&"1"===e.areatype}),t-1),l=k.default.findIndex(n,(function(e){return e.relationcode===r&&"1"===e.areatype}),t);a.moveChildrenItem(e,t,o,l)},a.moveGrandsonItem=function(e,t,n){var r=a.props.areaList,o=k.default.findLastIndex(r,(function(e){return e.relationcode===n.relationcode&&!0===e.isgrandson}),t-1),l=k.default.findIndex(r,(function(e){return e.relationcode===n.relationcode&&!0===e.isgrandson}),t);a.moveChildrenItem(e,t,o,l)},a.moveChildrenItem=function(e,t,n,r){var o=k.default.cloneDeep(a.props.areaList);if("up"===e){var l=n<0?0:n;a.insertAreaItem(o,l,t)}"down"===e&&a.insertAreaItem(o,r+1,t),a.props.updateAreaList(o)},a.deleteAreaItem=function(e,t){var n=k.default.cloneDeep(a.props.areaList);k.default.remove(n,(function(t){return t.pk_area===e})),a.props.updateAreaList(n),t&&t()},a.expandArea=function(e,t){var n=k.default.cloneDeep(a.props.areaList);n[e].isShow=t,n.forEach((function(a){a.associatedtab&&a.associatedtab===n[e].code&&(a.isShow=t)})),a.props.updateAreaList(n)},a.getFormGroupList=function(e){var t=[].concat((0,o.default)(e)),n=t.filter((function(e){return e.relationcode})),r=(0,x.getFormHeadCode)(t,a.props.zoneFormData.headcode);return t=n.filter((function(e){return e.relationcode===r}))},a.handleToggleTableView=function(e,t){var n=k.default.cloneDeep(a.props.areaList);n[e]=(0,r.default)({},n[e],{isTile:t}),a.props.updateAreaList(n)},a.state={modalVisible:!1,metaTree:[],origTree:null,curTree:null,targetAreaID:"",targetAreaType:"",canSelectTreeNodeList:[]},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentWillUnmount",value:function(){this.props.clearData(),this.props.clearZoneData()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.json,n=t.canDrop,r=t.connectDropTarget,o=(t.areaList,t.newAreaList),l=t.templetid,i=t.showTabLaySetModal,s=t.multiOptions,c="#f0f2f5";return console.log({newAreaList:o}),n&&(c="rgba(221, 236, 250, 0.3)"),r(f.default.createElement("div",{type:"ncdiv",fieldid:"middle_area",className:"template-setting-content",style:{backgroundColor:c}},this.props.isImplement&&f.default.createElement("div",{className:"content-area-template-name"},this.props.zoneFormData.name),o.length>0?o.map((function(t,n){if(t)return f.default.createElement(v.default,{areaItem:t,key:n,areaListLength:o.length,id:t.pk_area,index:n,areatype:t.areatype,metaid:t.metaid,isShow:t.isShow,deleteCard:e.deleteCard,addMetaInArea:e.addMetaInArea,onDragArea:e.dragAreaItem,onMoveArea:e.moveAreaItem,onMoveFormGroup:e.moveFormGroupItem,onMoveGrandson:e.moveGrandsonItem,onDeleteArea:e.deleteAreaItem,onExpandArea:e.expandArea,onToggleTableView:e.handleToggleTableView,json:a,pageStatus:e.props.status,addMetaItem:e.addMetaItem,pcode:e.props.pcode,appcode:e.props.appcode,templetid:l,multiOptions:s})})):f.default.createElement("div",{className:"empty-content"},!l&&f.default.createElement("div",null,f.default.createElement("img",{src:E.default}),f.default.createElement("p",null,(0,w.langCheck)("ZoneSetting-000199","pages",a)),f.default.createElement("p",null,(0,w.langCheck)("ZoneSetting-000201","pages",a)))),f.default.createElement(y.default,{origTree:this.state.origTree,curTree:this.state.curTree,metaTree:this.state.metaTree,canSelectTreeNodeList:this.state.canSelectTreeNodeList,modalVisible:this.state.modalVisible,targetAreaID:this.state.targetAreaID,targetAreaType:this.state.targetAreaType,targetAreaCardLength:this.state.targetAreaCardLength,setModalVisible:this.setModalVisible,addCard:this.addCard,updateMetaTreeData:this.updateMetaTreeData,json:this.props.json,updateMetaTree:this.updateMetaTree}),i&&f.default.createElement(M.default,{json:a,visible:i,multiOptions:this.props.multiOptions})))}}]),t}(p.Component))||n;t.default=(0,g.connect)((function(e){return{areaList:e.zoneSettingData.areaList,newAreaList:e.zoneSettingData.newAreaList,zoneFormData:e.zoneSettingData.zoneFormData,isImplement:e.zoneSettingData.isImplement,showTabLaySetModal:e.zoneSettingData.showTabLaySetModal}}),{clearData:m.clearData,clearZoneData:h.clearZoneData,updateAreaList:m.updateAreaList,updateSelectArea:m.updateSelectArea,updateSelectCard:m.updateSelectCard,setTabLayModalVisible:m.setTabLayModalVisible})((0,b.default)(L))},1329:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=q(a(407)),o=q(a(83)),l=q(a(254)),i=q(a(97)),s=q(a(411)),c=q(a(69)),d=q(a(3)),u=q(a(2)),p=q(a(29)),f=q(a(51)),g=q(a(26)),m=q(a(5)),h=q(a(8)),b=q(a(6)),v=q(a(7));a(264);var y=a(1),k=q(y),C=a(38),S=q(a(1330)),w=a(1084),x=q(a(1339)),E=q(a(1349)),T=a(1037),M=a(20),A=a(404),_=q(a(59)),D=q(a(1350)),I=q(a(1351)),N=q(a(1352)),L=q(a(1353)),P=q(a(1211)),O=q(a(1355)),Z=q(a(23)),j=a(1095),V=q(a(68)),F=a(405);function q(e){return e&&e.__esModule?e:{default:e}}var z=Z.default.base,R=z.NCDiv,B=z.NCPopconfirm,H=z.NCCheckbox,K=(z.NCButton,Z.default.PubSub),U=function(e){return function(t){return t&&t.stopPropagation(),e&&e()}},G={beginDrag:function(e){return e.isImplement||(e.updateSelectArea(e.areaItem),(0,A.removeSelectCardCls)()),{id:e.id,index:e.index,type:e.type}},canDrag:function(e){return!e.isImplement}},W=(0,T.DragSource)("area",G,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(n=(0,T.DropTarget)("area",{drop:function(e,t,a){var n=t.getItem();if("card"===n.type){if(e.isImplement&&"0"===e.areatype)return;if(a.openAddNotMetaInArea(),t.isOver({shallow:!1})){var r=e.index;if(a.state.tabObj.activeTabKey)r=a.getAreaIndexByPk(a.getCurrentTabArea());a.setState({currentNotMeta:{datatype:n.datatype},realAreaIndex:r})}}else if("left"!==n.from){var o=n.index,l=e.index;if(o===l)return;e.onDragArea(o,l),t.getItem().index=l}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=function(e){function t(e){(0,m.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,g.default)(t)).call(this,e));return a.moveCard=function(e,t,n){var r=a.props.areaList,o=(r=V.default.cloneDeep(r))[n].queryPropertyList,l=o[e];o.splice(e,1),o.splice(t,0,l),V.default.forEach(o,(function(e,t){e.position=t+1})),a.props.updateAreaList(r)},a.deleteCard=function(e,t){a.props.deleteCard(e,t)},a.addMetaInArea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.metaId,n=void 0===t?a.props.areaItem.metaid:t,r=e.areaId,o=void 0===r?a.props.id:r,l=e.areaType,i=void 0===l?a.props.areatype:l;a.props.addMetaInArea(n,o,i)},a.openBatchSetting=function(e){a.props.updateSelectCard({}),a.setModalVisibel(!0,e)},a.setModalVisibel=function(e,t){var n=a.props,r=n.areaList,o=n.index,l=t||o;a.props.updateBatchSource(r[l].queryPropertyList),a.setState({batchSettingModalVisibel:e,realAreaIndex:l})},a.openSyncSetting=function(e){a.setState({syncSettingModalVisible:!0,syncAreaIndex:e})},a.setSyncModalVisible=function(e){a.setState({syncSettingModalVisible:e})},a.openAddNotMetaInArea=function(){a.setAddDataModalVisibel(!0)},a.setAddDataModalVisibel=function(e){a.setState({addDataModalVisibel:e})},a.getAreaIndexByPk=function(e){if(e){var t=void 0;return a.props.areaList.map((function(a,n){a.pk_area===e.pk_area&&(t=n)})),t}},a.showOrHideAreaItem=function(e){var t="boolean"!=typeof e?!a.props.isShow:e;a.props.onExpandArea(a.props.index,t)},a.toggleFormGroup=function(e,t,n){var r=a.state.groupShowArr;n&&n.stopPropagation();var o=r.map((function(a){return a[0]===t&&(a[1][e]=!a[1][e]),a}));a.setState({groupShowArr:o})},a.clearSelectCard=function(){(0,A.removeSelectCardCls)(),a.props.updateSelectCard({})},a.selectAreaItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem;e&&e.stopPropagation();var n=a.props,r=n.selectCard,o=n.selectedArea;V.default.isEmpty(r)||a.clearSelectCard(),o&&t.pk_area!==o.pk_area&&a.props.updateSelectArea(t)},a.checkAreaCodeRepeat=function(e){var t=(0,A.findRepeatItemsByCode)(e);if(t&&t.length>0){var n=t.map((function(e){return e.name}));return(0,_.default)({status:"error",msg:""+(0,M.langCheck)("ZoneSetting-000046","pages",a.props.json)+(0,f.default)(n)+(0,M.langCheck)("102202APP-000011","pages",a.props.json)}),!0}return!1},a.handleAddFormGroup=function(e,t){e.stopPropagation();var n=a.getCurrentTabArea(),r=n.code,o=V.default.findLastIndex(a.props.areaList,(function(e){return e.code===r}))+1;setTimeout((function(){var e=a.addArea(a.props,{items:{areatype:"1",relationcode:r},position:t||o});a.getCurrentTabArea();if(a.setActiveTabKey(r),e&&void 0===t){var l=a["formGroupRef"+(n.groups.length-1)];l&&l.scrollIntoView()}}),0)},a.initFormGroupShowArr=function(){var e=a.props.areaItem,t=e.code,n=e.groups,r=e.formTabs,o=[];return o.push([t,n?[].concat((0,p.default)(n)).fill(!0):[]]),r&&r.length>0&&r.forEach((function(e){o.push([e.code,e.groups?[].concat((0,p.default)(e.groups)).fill(!0):[]])})),o},a.handleHideGray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem,n=t.pk_area||a.props.areaItem.pk_area;a.props.setAreaItemVisible((0,u.default)({},a.props.areaVisible,(0,d.default)({},n,e)))},a.getGroupContentVisible=function(e,t){var n=a.state.groupShowArr.find((function(e){return e[0]===t}));return!n||(n[1][e]||e>=n[1].length)},a.getGrandsonContentVisible=function(e){var t=a.state.grandsonObj.grandsonShowArr;return t[e]||e>=t.length},a.handleSpecialAreaDrop=function(e,t){var n=e.getItem();a.openAddNotMetaInArea(),a.setState({realAreaIndex:t,currentNotMeta:{datatype:n.datatype}})},a.checkAreaIsBeginOrEnd=function(e){var t=e.type,n=e.index,r=e.child,o=a.getCurrentTabArea(),l=a.props.areaList[n],i=a.props.newAreaList.filter((function(e){return null!==e})),d=i[0],u=i[i.length-1],p=r&&(0,c.default)(r)[0],f=r&&(0,s.default)(r)[0],g=p&&o[p];return"begin"===t?f?g&&g[0]&&g[0].pk_area===f.pk_area:d.pk_area===l.pk_area:"end"===t?f?g&&g[g.length-1]&&g[g.length-1].pk_area===f.pk_area:u.pk_area===l.pk_area:void 0},a.handleDeleteArea=function(e){return new i.default((function(t){var n=void 0,r=a.props,o=r.areaItem,l=r.onDeleteArea;o.groups&&o.groups.length>0&&(n=function(){return(0,_.default)({status:"warning",msg:(0,M.langCheck)("ZoneSetting-000210","pages",a.props.json)})}),l(e,n),a.props.updateSelectArea({}),t()}))},a.addArea=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!a.checkAreaCodeRepeat(a.props.areaList)&&A.addNewAreaItem.apply(a,t)},a.handleToggleFoldForm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem,n=a.state.foldObj,r=t.sides&&t.sides.find((function(e){return"browse"===e.areastatus}));a.checkAreaCodeRepeat(a.props.areaList)||(a.props.isImplement||r||(r=a.addArea(a.props,{items:{areatype:"1",areastatus:"browse",relationcode:t.code}}),n.emptyArea=V.default.cloneDeep(r)),n.foldShow=!n.foldShow,a.setState({foldObj:n},(function(){a.state.foldObj.foldShow?a.props.isShow||setTimeout((function(){a.props.onExpandArea(a.props.index,!0)}),0):(!a.props.isImplement&&V.default.isEqual(r,a.state.foldObj.emptyArea)&&a.handleDeleteArea(r.pk_area),a.props.updateSelectArea({}))})),a.selectAreaItem(e,r))},a.handleToggleSideForm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem,n=a.state.sideObj,r=V.default.cloneDeep(a.state.tabObj),o=t.sides&&t.sides.find((function(e){return"edit"===e.areastatus})),l=t.grandsons&&t.grandsons.length>0;if(a.props.isImplement||o||l||(o=a.addArea(a.props,{items:{areatype:"1",areastatus:"edit",relationcode:t.code}}),n.emptyArea=V.default.cloneDeep(o)),o||l){if(o||(o=t),A.checkAreaType.isTableTab(t)&&a.props.areaItem.tabs){var i=a.props.areaItem.tabs.findIndex((function(e){return e.pk_area===t.pk_area})),s=r.sideArr.map((function(e,t){var a=V.default.cloneDeep(e);return t===i&&(a.sideShow=!a.sideShow),a}));r.sideArr=s,a.setState({tabObj:r},c.bind(a,r.sideArr[i]))}else r.sideArr=r.sideArr.map((function(e){return e.sideShow=!1,e})),n.sideShow=!n.sideShow,a.setState({sideObj:n,tabObj:r},c.bind(a,n));a.props.updateSearchBox({showSide:n.sideShow})}function c(t){!0===t.sideShow?this.selectAreaItem(e,o):(!this.props.isImplement&&V.default.isEqual(o,t.emptyArea)&&this.handleDeleteArea(o.pk_area),this.props.updateSelectArea({}))}},a.handleToggleGrandson=function(e){var t=a.state.grandsonObj;t.grandsonShowArr[e]=!t.grandsonShowArr[e],a.setState({grandsonObj:t})},a.handleToggleGransonView=function(e){var t=a.state.grandsonObj;t.isTileArr[e]=!t.isTileArr[e],a.setState({grandsonObj:t})},a.copyArea=function(e){var t=e.copyItem,n=e.position,r=e.areaItem,o=r.templetid,i=r.code,s=r.metaid,c=r.metaname,d=r.queryPropertyList,u={relationcode:i,templetid:o,metaid:s,metaname:c,queryPropertyList:a.copyAreaProperty(d)},p=(0,l.default)(u,t);return a.addArea(a.props,{items:p,position:n})},a.copyAreaProperty=function(e){var t=[];return e.forEach((function(e){var a=V.default.cloneDeep(e);a.pk_form_property="",a.pk_query_property="",a.areaid="",t.push(a)})),t},a.handleCopyFoldArea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem,n=a.state.foldObj,r=a.handleCopyMultiLangValues(t,"name","_01");if(!a.checkAreaCodeRepeat(a.props.areaList))if(t.sides&&t.sides.find((function(e){return"browse"===e.areastatus})))(0,_.default)({status:"warning",msg:(0,M.langCheck)("ZoneSetting-000213","pages",a.props.json)});else{var o=a.copyArea({copyItem:(0,u.default)({areatype:"1",areastatus:"browse",code:t.code+"_01"},r),position:e,areaItem:t});o&&(n.foldShow=!0,a.setState({foldObj:n}))}},a.handleCopySideArea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem,n=a.state.sideObj,r=a.handleCopyMultiLangValues(t,"name","_02");if(t.sides&&t.sides.find((function(e){return"edit"===e.areastatus})))(0,_.default)({status:"warning",msg:(0,M.langCheck)("ZoneSetting-000214","pages",a.props.json)});else{var o=a.copyArea({copyItem:(0,u.default)({areatype:"1",areastatus:"edit",code:t.code+"_02"},r),position:e,areaItem:t});o&&!1===n.sideShow&&(n.sideShow=!0,a.props.updateSearchBox({showSide:!0}),a.setState({sideObj:n}))}},a.handleAddGrandson=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem,n=arguments[2];e.stopPropagation(),a.addArea(a.props,{items:{areatype:"2",relationcode:t.code,isgrandson:!0},position:n})},a.getAreaItemCls=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"area-item";if(e){var n=a.props,r=n.selectedArea,o=n.selectCard,l=e.tabs,i=e.pk_area,s=r.pk_area===i||V.default.findIndex(l,(function(e){return e.pk_area===r.pk_area}))>-1,c=o.areaid===i||V.default.findIndex(l,(function(e){return e.pk_area===o.areaid}))>-1;return r&&!0===s?t+=" active":o&&!0===c&&(t+=" active card-active"),t}},a.copyFold=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem;e.stopPropagation(),t.code&&a.handleCopyFoldArea(a.props.index+1,t)},a.copySide=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem;e.stopPropagation(),t.code&&a.handleCopySideArea(a.props.index+1,t)},a.isTabs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props.areaItem;return t[A.TAB_FLAG[e]]&&t[A.TAB_FLAG[e]].length>0},a.renderHeaderBtns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"area",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.props,r=n.json,l=n.index,i=n.isImplement,s=n.areaItem,c=n.zoneFormData,d=(n.areatype,n.areaList),u=["onAddFormGroup","onCopySideArea","onCopyFoldArea","onMoveDown","onMoveUp","onAddGrandsonTable","onDelete"];i&&u.forEach((function(e){return delete t[e]}));var p="side"===e?"opr-btn":"opr-btn icon-btn",f="group"!==e&&"side"!==e?" float":"",g=t.child,m=t.hasMeta,h=t.foldBtnVisible,b=t.toggleViewBtnVisible,v=t.isTile,y=void 0===v?s.isTile:v,C=t.onHideGray,S=t.onAddMeta,w=t.onBatchSetting,x=t.onSyncSetting,E=t.onAddFormGroup,T=t.onCopySideArea,A=t.onCopyFoldArea,_=t.onMoveDown,D=t.onMoveUp,I=t.onAddGrandsonTable,N=t.onDelete,L=t.onToggleView,P=t.currentPkArea,O=t.onToggleSide,Z=t.onToggleFold,j=d.find((function(e){return e.pk_area==P})),V=a.checkAreaIsBeginOrEnd({type:"begin",index:l,child:g}),F=a.checkAreaIsBeginOrEnd({type:"end",index:l,child:g});return void 0!==g&&(l=a.getAreaIndexByPk(g)),k.default.createElement("span",{className:"area-item-button"+f,onClick:function(e){return e.stopPropagation()}}," ",k.default.createElement(H,{checked:a.props.areaVisible[P]||!1,onChange:C},(0,M.langCheck)("ZoneSetting-000013","pages",r)),i?null:m()?k.default.createElement("a",{onClick:S},(0,M.langCheck)("ZoneSetting-000014","pages",r)):k.default.createElement(o.default,{placement:"top",title:(0,M.langCheck)("ZoneSetting-000203","pages",r)}," ",k.default.createElement("a",{className:"disabled"},(0,M.langCheck)("ZoneSetting-000014","pages",r))," "),k.default.createElement("a",{onClick:w},(0,M.langCheck)("ZoneSetting-000015","pages",r)),i||j&&!j.newArea?x&&k.default.createElement("a",{onClick:x},(0,M.langCheck)("ZoneSetting-000261","pages",r)):x&&k.default.createElement("a",{className:"disabled"},(0,M.langCheck)("ZoneSetting-000261","pages",r)),h&&a.renderTableOperateCol(O,Z),s.code===(c&&c.headcode)&&E&&k.default.createElement("span",{className:p,onClick:E},k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000209","pages",r),className:"iconfont icon-xinzengfenzu"})),T&&A&&k.default.createElement("span",{className:"btn-group"},s.code&&T?k.default.createElement("span",{className:p,onClick:T},k.default.createElement("i",{className:"iconfont icon-fuzhicela",title:(0,M.langCheck)("ZoneSetting-000211","pages",r)})," "):k.default.createElement(o.default,{className:p,placement:"top",title:(0,M.langCheck)("ZoneSetting-000221","pages",r)}," ",k.default.createElement("span",{onClick:T},k.default.createElement("i",{className:"iconfont icon-fuzhicela disabled",title:(0,M.langCheck)("ZoneSetting-000211","pages",r)})," ")),s.code&&A?k.default.createElement("span",{className:p,onClick:A},k.default.createElement("i",{className:"iconfont icon-fuzhikapian",title:(0,M.langCheck)("ZoneSetting-000212","pages",r)})," "):k.default.createElement(o.default,{className:p,placement:"top",title:(0,M.langCheck)("ZoneSetting-000221","pages",r)}," ",k.default.createElement("span",{onClick:A},k.default.createElement("i",{className:"iconfont icon-fuzhikapian disabled",title:(0,M.langCheck)("ZoneSetting-000212","pages",r)})," "))),k.default.createElement("span",{className:"btn-group"},_&&k.default.createElement("span",{className:p,onClick:!F&&_},k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000189","pages",r),className:"iconfont icon-xiangxia "+(F?"disabled":"")})),D&&k.default.createElement("span",{className:p,onClick:!V&&D},k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000188","pages",r),className:"iconfont icon-xiangshang "+(V?"disabled":"")})),I&&k.default.createElement("span",{className:p,onClick:I},k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000218","pages",r),className:"iconfont icon-xinzengsunbiao",style:{fontSize:20}})),N&&k.default.createElement("span",{className:p},k.default.createElement(B,{content:(0,M.langCheck)("ZoneSetting-000191","pages",r),onClose:N,placement:"topRight"},k.default.createElement("i",{className:"iconfont icon-shanchu",title:(0,M.langCheck)("ZoneSetting-000190","pages",r)})))),b&&k.default.createElement("span",{className:p,onClick:L},k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000237","pages",r),className:"iconfont "+(y?"icon-mbpz_pp":"icon-Group")})))},a.typeIsTab=function(e){return"tab"===e},a.renderHeader=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"area",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.props,r=n.json,o=n.areaItem,l=t.headerTitle,i=void 0===l?(0,F.getMultiLangText)(o,"name",a.props.multiOptions):l,s=t.headerVisible,c=void 0===s||s,d=t.contentVisible,u=t.onToggleHeader,p=t.onDrawerToggle,f=t.isGrandson,g=function(){var e=a.getCurrentTabArea();u&&u(),f||a.selectAreaItem(void 0,e)},m=d?k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000011","pages",r),className:"iconfont icon-bottom",onClick:U(g)}):k.default.createElement("i",{title:(0,M.langCheck)("ZoneSetting-000012","pages",r),className:"iconfont icon-right",onClick:U(g)}),h=a.typeIsTab(e)?{height:0}:"side"===e?{display:"flex",alignItems:"center"}:{};return k.default.createElement("div",{className:"area-item-header "+(c?"show":"hide"),fieldid:"header",style:h},k.default.createElement("div",{className:"area-item-name-wrapper search-area-header",onClick:u},k.default.createElement("span",{className:"area-item-name"},u&&k.default.createElement("span",{className:"expand "+(a.typeIsTab(e)?"tab":"")},m),!a.typeIsTab(e)&&k.default.createElement("span",{className:"area-name"},i))),a.renderHeaderBtns(e,t),p&&k.default.createElement("span",{className:"drawer-close-btn",onClick:p},k.default.createElement("i",{className:"iconfont icon-celashouqi"})))},a.renderFormGroupCard=function(e,t,n){var r=a.props.areaVisible[a.props.areaItem.pk_area],o=a.getCurrentTabArea(),l=o.groups&&o.groups[t],i=a.getAreaIndexByPk(l);a.getAreaIndexByPk(o);return r=l&&a.props.areaVisible[l.pk_area]||!1,a.renderCard({item:e,cardIndex:n,areaType:"form",areaIndex:i,shouldHideGray:r})},a.renderTableFoldCard=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.props.areaItem,o=r.sides&&r.sides[t],l=a.getAreaIndexByPk(o);return a.renderCard({item:e,cardIndex:n,areaType:"form",areaIndex:l,shouldHideGray:o&&a.props.areaVisible[o.pk_area]||!1})},a.renderCard=function(e){var t=e.item,n=e.areaIndex,r=void 0===n?a.props.index:n,o=e.cardIndex,l=e.areaType,i=e.shouldHideGray,s=void 0===i?a.props.areaVisible[a.props.areaItem.pk_area]||!1:i,c=e.groupBelongToFormAreaIndex;return k.default.createElement(S.default,{index:o,areaItem:a.props.areaItem,areaIndex:r,key:t.pk_query_property,shouldHideGray:s,id:t.pk_query_property,name:(0,F.getMultiLangText)(t,"label",a.props.multiOptions),areaid:a.props.areaItem.pk_area,visible:t.visible,color:t.color,required:t.required,moveCard:a.moveCard,deleteCard:function(e){return a.deleteCard(e,r)},cardInfo:t,areaType:l,json:a.props.json,addMetaItem:a.props.addMetaItem,handleCheckCard:a.handleCheckCard,showCardCheckboxController:a.state.showCardCheckboxController,setCardCheckboxState:a.setCardCheckboxState,checkAllCard:a.checkAllCard,checkedCards:a.state.checkedCards,clearCheckedCard:a.clearCheckedCard,revertThisAction:a.revertThisAction,batchMoveCard:a.batchMoveCard,openAddNotMetaInArea:a.openAddNotMetaInArea,getCurrentTabArea:a.getCurrentTabArea,setRealAreaIndexAndNotMetaData:a.setRealAreaIndexAndNotMetaData,activeTabKey:a.state.tabObj.activeTabKey,setBlankDomWidth:a.setBlankDomWidth,groupBelongToFormAreaIndex:c,getAreaIndexByPk:a.getAreaIndexByPk})},a.renderGroupHeader=function(e,t,n){var r=a.getGroupContentVisible(t,e.relationcode);return k.default.createElement("div",{className:"form-group-header"},k.default.createElement("span",{className:"form-group-title"},k.default.createElement("span",{className:"group-name"},(0,F.getMultiLangText)(e,"name",a.props.multiOptions)),k.default.createElement("i",{className:"iconfont "+(r?"icon-ncc-zk":"icon-ncc-sq"),onClick:function(n){return a.toggleFormGroup(t,e.relationcode,n)}})),k.default.createElement("div",{className:"dashed-line"}),k.default.createElement("div",{className:"group-btns"},n))},a.renderTabTableHeader=function(){var e=a.props,t=e.areaItem,n=e.index,r=e.onMoveArea,o=a.getCurrentTabArea(),l=a.getAreaIndexByPk(o);return a.renderHeader("tab",{headerVisible:!0,contentVisible:a.props.isShow,foldBtnVisible:!0,toggleViewBtnVisible:!0,hasMeta:function(){return o.metaid},onToggleHeader:a.showOrHideAreaItem,onHideGray:function(e){return a.handleHideGray(e,o)},onAddMeta:function(){return a.addMetaInArea({metaId:o.metaid,areaId:o.pk_area,areaType:o.areatype})},onBatchSetting:function(){return a.openBatchSetting(l)},onSyncSetting:function(){return a.openSyncSetting(l,o)},onCopySideArea:function(e){return a.copySide(e,o)},onCopyFoldArea:function(e){return a.copyFold(e,o)},onMoveDown:function(){return r("down",n)},onMoveUp:function(){return r("up",n)},onDelete:function(){return a.handleDeleteArea(o.pk_area)},onToggleView:function(){return a.props.onToggleTableView(n,!t.isTile)},onToggleSide:function(){return a.handleToggleSideForm(void 0,o)},onToggleFold:function(){return a.handleToggleFoldForm(void 0,o)},currentPkArea:o.pk_area})},a.renderTabFormHeader=function(){var e=a.props,t=e.index,n=e.onMoveArea,r=a.getCurrentTabArea(),o=a.getAreaIndexByPk(r);return a.renderHeader("tab",{headerVisible:!0,contentVisible:a.props.isShow,hasMeta:function(){return r.metaid},onToggleHeader:a.showOrHideAreaItem,onHideGray:function(e){return a.handleHideGray(e,r)},onAddMeta:function(){return a.addMetaInArea({metaId:r.metaid,areaId:r.pk_area,areaType:r.areatype})},onBatchSetting:function(){return a.openBatchSetting(o)},onSyncSetting:function(){return a.openSyncSetting(o,r)},onAddFormGroup:a.handleAddFormGroup.bind(a),onMoveDown:function(){return n("down",t)},onMoveUp:function(){return n("up",t)},onDelete:function(){return a.handleDeleteArea(r.pk_area)},currentPkArea:r.pk_area})},a.renderAreaHeader=function(){var e=a.props,t=e.areaItem,n=e.areatype,r=e.id,o=e.index,l=e.onMoveArea;if(a.isTabs("table"))return a.renderTabTableHeader();if(a.isTabs("form"))return a.renderTabFormHeader();return a.renderHeader("area",{headerVisible:!0,contentVisible:a.props.isShow,foldBtnVisible:"2"===n,toggleViewBtnVisible:"2"===n,hasMeta:function(){return t.metaid},onToggleHeader:a.showOrHideAreaItem,onHideGray:a.handleHideGray,onAddMeta:function(){return a.addMetaInArea()},onBatchSetting:function(){return a.openBatchSetting()},onSyncSetting:"2"===n&&function(){return a.openSyncSetting(o)},onAddFormGroup:"1"===n&&a.handleAddFormGroup.bind(a),onCopySideArea:"2"===n&&a.copySide,onCopyFoldArea:"2"===n&&a.copyFold,onMoveDown:function(){return l("down",o)},onMoveUp:function(){return l("up",o)},onDelete:function(){return a.handleDeleteArea(r)},onToggleView:function(){return a.props.onToggleTableView(o,!t.isTile)},currentPkArea:t.pk_area,onToggleSide:function(e){return a.handleToggleSideForm(e)},onToggleFold:function(e){return a.handleToggleFoldForm(e)}})},a.getCurrentTabArea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.areaItem,t="1"===e.areatype?"form":"2"===e.areatype?"table":"",n=e[A.TAB_FLAG[t]]||[],r=[e].concat(n);return r.find((function(e){return e.code===a.state.tabObj.activeTabKey}))||e},a.renderFormGroup=function(e,t){var n=a.props.selectedArea&&a.props.selectedArea.pk_area===e.pk_area,r=a.getAreaIndexByPk(e),o=a.state.groupShowArr,l=a.isTabs("form")?a.getCurrentTabArea(e):e,i=(a.getAreaIndexByPk(l),a.renderHeaderBtns("group",{child:{groups:l},headerVisible:n,hasMeta:function(){return e.metaid},onToggleHeader:function(){return a.toggleFormGroup(t,e.relationcode)},onHideGray:function(t){return a.handleHideGray(t,e)},onAddMeta:function(){return a.addMetaInArea({metaId:e.metaid,areaId:e.pk_area,areaType:e.areatype})},onBatchSetting:function(){return a.openBatchSetting(r)},onAddFormGroup:function(e){return a.handleAddFormGroup.call(a,e,r+1)},onMoveDown:function(){return a.props.onMoveFormGroup("down",r)},onMoveUp:function(){return a.props.onMoveFormGroup("up",r)},onDelete:function(){return a.handleDeleteArea(e.pk_area)},currentPkArea:e.pk_area})),s=a.renderGroupHeader(e,t,i);return k.default.createElement("div",{ref:function(e){return a["formGroupRef"+t]=e}},k.default.createElement(D.default,{group:e,groupIndex:t,groupShowArr:o,isActive:n,contentVisible:a.getGroupContentVisible(t,e.relationcode),renderHeader:s,renderCard:function(e,n){return a.renderFormGroupCard(e,t,n)},emptyText:(0,M.langCheck)("ZoneSetting-000226","pages",a.props.json),onClick:function(t){return a.selectAreaItem(t,e)},onDrop:function(e){return a.handleSpecialAreaDrop(e,r)}}))},a.renderTableSide=function(e){var t=e.side,n=e.sideIndex,r=e.onlyGrandson,o=e.relationArea,l=a.state.sideObj.sideShow,i=a.props.selectedArea&&a.props.selectedArea.pk_area===t.pk_area,s=r?n:a.getAreaIndexByPk(t),c=a.renderHeader("side",{headerTitle:(0,F.getMultiLangText)(t,"name",a.props.multiOptions),hasMeta:function(){return t.metaid},onHideGray:function(e){return a.handleHideGray(e,t)},onAddMeta:function(){return a.addMetaInArea({metaId:t.metaid,areaId:t.pk_area,areaType:t.areatype})},onBatchSetting:function(){return a.openBatchSetting(s)},onSyncSetting:function(){return a.openSyncSetting(s)},onAddGrandsonTable:function(e){return a.handleAddGrandson(e,o)},onDelete:function(){a.handleDeleteArea(t.pk_area).then((function(){var e=a.state.sideObj;e.sideShow=!1,a.setState({sideObj:e})}))},onDrawerToggle:function(){return a.handleToggleSideForm(void 0,o)},currentPkArea:t.pk_area}),d=a.props.areaItem.grandsons;if(o&&A.checkAreaType.isTableTab(o)&&a.props.areaItem.tabs){var u=a.props.areaItem.tabs.findIndex((function(e){return e.pk_area===o.pk_area}));d=o.grandsons,l=a.state.tabObj.sideArr[u]&&a.state.tabObj.sideArr[u].sideShow}return k.default.createElement(N.default,{areaClassName:a.getAreaItemCls(t),side:t,isActive:i,sideIndex:n,renderHeader:c,renderCard:function(e,t){return a.renderTableFoldCard(e,n,t,o)},visible:l,onClick:function(e){return a.selectAreaItem(e,t)},onDrop:function(e){return a.handleSpecialAreaDrop(e,s)}},(function(){return k.default.createElement(R,{className:"grandson-content",fieldid:"grandson",areaCode:R.config.Area},d&&d.map((function(e,t){return a.renderGrandsonArea(e,t,o)})))}))},a.renderTableFold=function(e,t,n){var r=a.state.foldObj.foldShow,o=a.props.selectedArea&&a.props.selectedArea.pk_area===e.pk_area,l=a.getAreaIndexByPk(e),i=a.renderHeader("area",{headerTitle:(0,F.getMultiLangText)(e,"name",a.props.multiOptions),contentVisible:r,hasMeta:function(){return e.metaid},onToggleHeader:a.handleToggleFoldForm,onHideGray:function(t){return a.handleHideGray(t,e)},onAddMeta:function(){return a.addMetaInArea({metaId:e.metaid,areaId:e.pk_area,areaType:e.areatype})},onBatchSetting:function(){return a.openBatchSetting(l)},onSyncSetting:function(){return a.openSyncSetting(l)},onDelete:function(){a.handleDeleteArea(e.pk_area).then((function(){var e=a.state.foldObj;e.foldShow=!1,a.setState({foldObj:e})}))},currentPkArea:e.pk_area}),s=a.getAreaItemCls(e,""),c=(0,j.processClass)(e.code)||"unknow";return k.default.createElement(R,{className:"table-fold-area "+s+" search-area-"+(String(e.code).replace(/\.|\&|\#/g,"")||"unknow")+" drag-mask-"+c,fieldid:"table-fold",areaCode:R.config.Area},k.default.createElement(I.default,{fold:e,foldIndex:t,isActive:o,renderHeader:i,renderCard:function(e,r){return a.renderTableFoldCard(e,t,r,n)},visible:r,onClick:function(t){return a.selectAreaItem(t,e)},onDrop:function(e){return a.handleSpecialAreaDrop(e,l)}}))},a.renderGrandsonArea=function(e,t,n){var r=a.props.selectedArea&&a.props.selectedArea.pk_area===e.pk_area,o=a.getAreaIndexByPk(e),l=a.getGrandsonContentVisible(t),i=a.state.grandsonObj.isTileArr[t],s=a.isTabs("table",e),c=s?"tab":"area",d=s?a.getCurrentTabArea(e):e,u=a.renderHeader(c,{child:{grandsons:e},headerTitle:(0,F.getMultiLangText)(d,"name",a.props.multiOptions),hasMeta:function(){return d.metaid},contentVisible:l,toggleViewBtnVisible:!0,isTile:i,onToggleHeader:function(){return a.handleToggleGrandson(t)},onHideGray:function(e){return a.handleHideGray(e,d)},onAddMeta:function(){return a.addMetaInArea({metaId:d.metaid,areaId:d.pk_area,areaType:d.areatype})},onBatchSetting:function(){return a.openBatchSetting(a.getAreaIndexByPk(d))},onAddGrandsonTable:s?void 0:function(e){return a.handleAddGrandson(e,n,o+1)},onMoveDown:function(){return a.props.onMoveGrandson("down",o,e)},onMoveUp:function(){return a.props.onMoveGrandson("up",o,e)},onDelete:function(){return a.handleDeleteArea(d.pk_area)},onToggleView:function(){a.handleToggleGransonView(t),a.props.onToggleTableView(o,!e.isTile)},currentPkArea:d.pk_area,isGrandson:!0});return k.default.createElement(L.default,{areaClassName:a.getAreaItemCls(e),grandson:e,grandsonIndex:o,isActive:r,isTile:i,contentVisible:l,activeTabKey:a.state.tabObj.activeTabKey,renderHeader:u,renderCard:function(e){var t=e.item,n=e.cardIndex,r=a.getAreaIndexByPk(d);return a.renderCard({item:t,cardIndex:n,areaType:"table",areaIndex:r,shouldHideGray:a.props.areaVisible[d.pk_area]||!1})},onClick:function(t){return a.selectAreaItem(t,e)},onDrop:function(e){return a.handleSpecialAreaDrop(e,o)},onDragArea:a.props.onDragArea,onTabChange:a.setActiveTabKey,onAreaClick:a.selectAreaItem,onTabPaneDrop:a.handleTabTableDrop,multiOptions:a.props.multiOptions})},a.renderSubArea=function(e){var t=a.props.areaItem,n=null;switch(t.areatype){case"1":var r=a.isTabs("form")?e:t;n=a.renderFormSubArea(r);break;case"2":var o=a.isTabs("table")?e:t;n=a.renderTableSubArea(o)}return n},a.renderTableSubArea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.areaItem,t=e.sides&&[].concat((0,p.default)(e.sides));return e.grandsons&&(t=[].concat((0,p.default)(t),(0,p.default)(e.grandsons))),t&&t.map((function(n,r){var o=t.find((function(e){return"edit"===e.areastatus&&!0!==e.isgrandson}));if(!0===n.isgrandson){if(!o)return a.renderTableSide({side:e,sideIndex:a.props.index,onlyGrandson:!0})}else{if("browse"===n.areastatus)return a.renderTableFold(n,r,e);if("edit"===n.areastatus)return a.renderTableSide({side:n,sideIndex:r,relationArea:e})}}))},a.renderFormSubArea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.areaItem;return e.groups&&e.groups.map((function(e,t){return a.renderFormGroup(e,t)}))},a.renderTableOperateCol=function(e,t){var n=a.props,r=n.json,l=n.isImplement,i=n.areaHide,s=a.getCurrentTabArea(),c=a.state.foldObj.foldShow?(0,M.langCheck)("ZoneSetting-000217","pages",r):(0,M.langCheck)("ZoneSetting-000215","pages",r),d=null,u=null;return a.hideTableOprCol()?null:[(d=s.sides&&s.sides.find((function(e){return"edit"===e.areastatus})),u=d&&d.pk_area,!l||!s.sides||s.sides.find((function(e){return"edit"===e.areastatus}))||s.grandsons&&0!==s.grandsons.length?s.code?l&&i[u]?k.default.createElement(o.default,{placement:"top",title:(0,M.langCheck)("ZoneSetting-000258","pages",r)}," ",k.default.createElement("a",{className:"disabled"},(0,M.langCheck)("ZoneSetting-000216","pages",r))):k.default.createElement("span",null,k.default.createElement("a",{className:"search-action-side",onClick:e},(0,M.langCheck)("ZoneSetting-000216","pages",r))):k.default.createElement(o.default,{placement:"top",title:(0,M.langCheck)("ZoneSetting-000221","pages",r)}," ",k.default.createElement("a",{className:"disabled"},(0,M.langCheck)("ZoneSetting-000216","pages",r))):null),(d=s.sides&&s.sides.find((function(e){return"browse"===e.areastatus})),u=d&&d.pk_area,l&&s.sides&&!s.sides.find((function(e){return"browse"===e.areastatus}))?null:s.code?l&&i[u]?k.default.createElement(o.default,{placement:"top",title:(0,M.langCheck)("ZoneSetting-000257","pages",r)}," ",k.default.createElement("a",{className:"disabled"},(0,M.langCheck)("ZoneSetting-000215","pages",r))):k.default.createElement("span",null,k.default.createElement("a",{className:"search-action-fold",onClick:t},c)," "):k.default.createElement(o.default,{placement:"top",title:(0,M.langCheck)("ZoneSetting-000221","pages",r)}," ",k.default.createElement("a",{className:"disabled"},c)))]},a.hideTableOprCol=function(){var e=a.props,t=e.areaItem,n=e.isImplement;return!(t.grandsons&&t.grandsons.length>0)&&(n&&(!t.sides||t.sides&&0===t.sides.length))},a.setActiveTabKey=function(e,t){var n=a.state.tabObj;n.activeTabKey=e,console.log(a.props.selectedArea),e!==a.props.selectedArea.code?a.showOrHideAreaItem(!0):a.showOrHideAreaItem(t),a.setState({tabObj:n})},a.handleTabTableDrop=function(e){if(e.isOver({shallow:!1})){var t=a.getAreaIndexByPk(a.getCurrentTabArea());a.handleSpecialAreaDrop(e,t)}},a.handleCheckCard=function(e,t){var n=a.state.checkedCards[t.areaid];if(e){n?n.push(t.code):n=[t.code];var r=(0,u.default)({},a.state.checkedCards,(0,d.default)({},t.areaid,n));a.setState({checkedCards:r})}else{var o=n.findIndex((function(e){return e===t.code}));n.splice(o,1);var l=(0,u.default)({},a.state.checkedCards,(0,d.default)({},t.areaid,n));a.setState({checkedCards:l})}},a.setCardCheckboxState=function(e){var t=a.state.showCardCheckboxController,n=(a.props.areaItem,(0,u.default)({},t,(0,d.default)({},e.areaid,!t[e.areaid])));a.setState({showCardCheckboxController:n})},a.checkAllCard=function(e){var t=a.props.areaList.find((function(t){return t.pk_area===e.areaid})),n=t&&t.queryPropertyList.map((function(e){return e.code}));a.setState({checkedCards:(0,u.default)({},a.state.checkedCards,(0,d.default)({},e.areaid,n))})},a.clearCheckedCard=function(e){a.setState({checkedCards:(0,u.default)({},a.state.checkedCards,(0,d.default)({},e.areaid,[]))})},a.revertThisAction=function(e){var t=a.state,n=t.showCardCheckboxController,r=t.checkedCards,o=(a.props.areaItem,(0,u.default)({},n,(0,d.default)({},e.areaid,!1)));a.setState({checkedCards:(0,u.default)({},r,(0,d.default)({},e.areaid,[])),showCardCheckboxController:o})},a.batchMoveCard=function(e,t){var n=a.props.areaList,r=a.state.checkedCards,o=e.code,l=e.areaid,i=(n=V.default.cloneDeep(n)).findIndex((function(t){return t.pk_area===e.areaid})),s=n[i].queryPropertyList,c=[];if(r[l].includes(o)){var d=r[l].indexOf(o);r[l].splice(d,1)}for(var u=0;u<s.length;u++){var p=s[u];r[l].includes(p.code)&&(s.splice(u,1),c.push(p),u--)}var f=void 0;s.forEach((function(e,t){e.code===o&&(f=t)})),f="front"===t?f:f+1,s.splice.apply(s,[f,0].concat(c)),s.forEach((function(e,t){e.position=t+1})),a.props.updateAreaList(n)},a.setRealAreaIndexAndNotMetaData=function(e){var t=e.currentNotMeta,n=e.realAreaIndex;a.setState({currentNotMeta:t,realAreaIndex:n})},a.setBlankDomWidth=function(){var e=a.areaItemDom&&a.areaItemDom.querySelector(".property-item.is-blank-dom");e&&(e.style.width="0px")},a.defaultState={sideObj:{sideShow:!1,emptyArea:{}}},a.state={batchSettingModalVisibel:!1,addDataModalVisibel:!1,currentNotMeta:{},realAreaIndex:e.index,groupShowArr:a.initFormGroupShowArr(),foldObj:e.areaItem.sides?{foldShow:!1,emptyArea:{}}:{},sideObj:e.areaItem.sides?V.default.clone(a.defaultState.sideObj):{},grandsonObj:{grandsonShowArr:e.areaItem.grandsons?[].concat((0,p.default)(e.areaItem.grandsons)).fill(!0):[],isTileArr:e.areaItem.grandsons?[].concat((0,p.default)(e.areaItem.grandsons)).fill(!1):[]},tabObj:{activeTabKey:e.selectedArea?e.selectedArea.code:"",sideArr:e.areaItem.tabs?[].concat((0,p.default)(e.areaItem.tabs)).fill(V.default.clone(a.defaultState.sideObj)):[]},checkedCards:(0,d.default)({},e.id,[]),showCardCheckboxController:(0,d.default)({},e.id,!1),syncSettingModalVisible:!1},a.setBlankDomWidth=a.setBlankDomWidth.bind(a),a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this;1==this.props.areaListLength&&this.showOrHideAreaItem(!0),this.pubsub=(0,A.subscribeSetActiveKey)(this.props.areaItem,this.setActiveTabKey),this.savepubsub=K.subscribe(A.pubSubAction.isSave,(function(){e.state.sideObj.sideShow&&e.handleToggleSideForm()}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.areaItem.tabs?this.props.areaItem.tabs.length:0;if(e.areaItem.tabs&&Array.isArray(e.areaItem.tabs)&&e.areaItem.tabs.length>t){var a=this.state.tabObj;a.sideArr=[].concat((0,p.default)(e.areaItem.tabs)).fill(V.default.clone(this.defaultState.sideObj)),this.setState({tabObj:a})}}},{key:"componentWillUnmount",value:function(){K.unsubscribe(this.pubsub),K.unsubscribe(this.savepubsub),this.areaItemDom=null}},{key:"handleCopyMultiLangValues",value:function(e,t,a){var n=this.props.multiOptions,o=(0,F.getMultiLangValues)(e,t,n);return o=(0,r.default)(o).map((function(e){return[e[0],V.default.get(e[1],"value")]})),o=V.default.map(o,(function(e){return[e[0],""+e[1]+a]})),Object.fromEntries(o)}},{key:"render",value:function(){var e=this,t=this.props,a=t.connectDragSource,n=t.connectDropTarget,r=t.areaList,o=t.index,l=t.areaItem,i=t.areaHide,s=this.state.syncSettingModalVisible,c=this.getAreaItemCls(l),d=r[o]&&!1===r[o].validate?{borderColor:"#f5222d"}:{},u=(0,j.processClass)(l.code)||"unknow",p=this.isTabs("1"===l.areatype?"form":"2"===l.areatype?"table":"")?"":"drag-mask-"+u;return!i[l.pk_area]&&a(n(k.default.createElement("div",{type:"ncdiv",fieldid:l.code+"_area",className:c+" search-area-"+(String(l.code).replace(/\.|\&|\#/g,"")||"unknow")+" "+p,searchinside:String(this.state.sideObj.sideShow),onClick:this.selectAreaItem,style:d,ref:function(t){return e.areaItemDom=t}},k.default.createElement(P.default,{isShow:this.props.isShow,isTile:l.isTile,areaItem:this.props.areaItem,renderHeader:this.renderAreaHeader(),renderCard:this.renderCard,activeTabKey:this.state.tabObj.activeTabKey,onAreaClick:this.selectAreaItem,onTabChange:this.setActiveTabKey,onTabPaneDrop:this.handleTabTableDrop,multiOptions:this.props.multiOptions},(function(t){return e.renderSubArea(t)})),this.state.batchSettingModalVisibel&&k.default.createElement(x.default,{batchSettingModalVisibel:this.state.batchSettingModalVisibel,areaIndex:this.state.realAreaIndex,setModalVisibel:this.setModalVisibel,json:this.props.json,multiOptions:this.props.multiOptions}),k.default.createElement(E.default,{areatype:this.props.areatype,addDataModalVisibel:this.state.addDataModalVisibel,areaIndex:this.state.realAreaIndex,setAddDataModalVisibel:this.setAddDataModalVisibel,json:this.props.json,propperty:this.state.currentNotMeta,pcode:this.props.pcode,appcode:this.props.appcode,templetid:this.props.templetid,zoneFormData:this.props.zoneFormData,multiOptions:this.props.multiOptions}),s&&k.default.createElement(O.default,{show:s,areaIndex:this.state.syncAreaIndex,close:this.setSyncModalVisible,json:this.props.json,multiOptions:this.props.multiOptions}))))}}]),t}(y.Component))||n)||n;t.default=(0,C.connect)((function(e){return{selectedArea:e.zoneSettingData.selectedArea,areaList:e.zoneSettingData.areaList,newAreaList:e.zoneSettingData.newAreaList,selectCard:e.zoneSettingData.selectCard,zoneFormData:e.zoneSettingData.zoneFormData,isImplement:e.zoneSettingData.isImplement,areaVisible:e.zoneSettingData.areaVisible,areaHide:e.zoneSettingData.areaHide}}),{updateSelectCard:w.updateSelectCard,updateSelectArea:w.updateSelectArea,updateBatchSource:w.updateBatchSource,updateSearchBox:w.updateSearchBox,updateAreaList:w.updateAreaList,setAreaItemVisible:w.setAreaItemVisible})(W)},1330:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=T(a(69)),o=T(a(2)),l=T(a(26)),i=T(a(5)),s=T(a(8)),c=T(a(6)),d=T(a(7)),u=a(1037),p=a(1),f=T(p),g=a(38),m=a(1084),h=a(1331),b=a(404),v=a(20),y=T(a(59)),k=T(a(68)),C=T(a(1332)),S=T(a(23)),w=a(1336),x=a(1337),E=a(1338);function T(e){return e&&e.__esModule?e:{default:e}}var M=S.default.base.NCCheckbox,A=S.default.PubSub,_={hover:function(e,t,a){t.getItem().index,e.index},drop:function(e,t,a){var n=t.getItem(),r=e.index;if(n.areaIndex=n.metaTree?(0,w.findMetaTreeIndex)(e.areaList,n.targetAreaID):n.areaIndex,n.notMetaData){if(e.isImplement&&"0"===e.areatype)return;return e.openAddNotMetaInArea(),void e.setRealAreaIndexAndNotMetaData({currentNotMeta:{datatype:n.datatype,dropIndex:r},realAreaIndex:e.areaIndex})}if(e.areaIndex=e.groupBelongToFormAreaIndex?e.groupBelongToFormAreaIndex:e.areaIndex,!t.didDrop()&&n.index!==r&&n.areaIndex===e.areaIndex)return n.metaTree?(e.addMetaItem({selectedTreeNode:n.selectedNodes,dataRef:n.dataRef,targetAreaID:e.cardInfo.areaid,dropIndex:e.index}),{result:!0}):void(n.index<r?e.moveCard(n.index,r-1,e.areaIndex):e.moveCard(n.index,r,e.areaIndex))}},D=(0,u.DropTarget)("card",_,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=(0,u.DragSource)("card",{canDrag:function(e){return!e.cardInfo.blank},beginDrag:function(e){return{id:e.id,index:e.index,areaIndex:e.areaIndex}},isDragging:function(e,t){return t.getItem().id===e.id}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(n=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.deleteCard=function(e){e.stopPropagation();var t=(0!==a.props.areaItem.formPropertyList.length?a.props.areaItem.formPropertyList:a.props.areaItem.queryPropertyList||"").filter((function(e){return void 0!==e.refcondition})),n=a.props.cardInfo.code,r=[];0!==t.length&&t.map((function(e){e.refcondition=Array.isArray(e.refcondition)?e.refcondition:JSON.parse(e.refcondition),e.refcondition.map((function(t){t.value==n&&r.push({name:e.label,code:e.code})}))}));var o=a.props.areaList[a.props.areaIndex].queryPropertyList[a.props.index];if(a.props.isImplement&&1==o.isfixedcondition)(0,y.default)({status:"warning",msg:(0,v.langCheck)("ZoneSetting-000231","pages",a.props.json)});else if(0!==r.length){var l=[];r.forEach((function(e){l.push(""+e.name+e.code)})),(0,y.default)({status:"warning",msg:""+l.toString()+(0,v.langCheck)("ZoneSetting-000348","pages",a.props.json)})}else a.props.deleteCard(a.props.index),a.setState({menuVisible:!1})},a.selectThisCard=function(e){if(e.stopPropagation(),a.props.cardInfo.blank)return!1;a.updateThisCard(e),k.default.isEmpty(a.props.selectedArea)||a.props.updateSelectArea({});var t=a.props,n=t.areaList,r=t.areaIndex,o=t.index,l=n[r].queryPropertyList[o];"204"===l.datatype&&l.refname?b.queryOrgAuthority.call(a,l.refname,(function(e){return A.publish("SELECT_CARD",e)})):A.publish("SELECT_CARD",!1)},a.updateThisCard=function(e){var t=a.props,n=t.areaList,r=t.areaIndex,o=t.index,l=n[r].queryPropertyList[o];a.updateActiveCardCls(),a.props.updateSelectCard(l)},a.updateActiveCardCls=function(){(0,b.removeSelectCardCls)(),a.cardDom&&a.cardDom.classList.add("select-card")},a.getCardClassName=function(){var e=a.props,t=e.selectCard,n=e.required,r=e.id,o=e.areaid,l=e.cardInfo,i=e.isOver?" hover":"",s="search"===e.areaType?"search-card":"",c=1==l.disabled?" disabled-card":"",d="";return n&&(d=" required-card"),""+(d=t.pk_query_property===r&&t.areaid===o?"select-card"+d:"normal-card"+d)+i+c+" "+s},a.perceptionMenuVisible=function(e){setTimeout((function(){var e=a.cardDom&&a.cardDom.querySelector(".move-card-selection");e&&0===e.clientWidth&&!0===a.state.menuVisible&&a.setState({menuVisible:!1})}),100)},a.toggleMenuVisible=function(e){e&&e.stopPropagation(),a.setState({menuVisible:!a.state.menuVisible})},a.handleIconShow=function(e){a.setState({controlIconShow:e})},a.handleCheckCard=function(e){var t=a.props.cardInfo;a.props.handleCheckCard(e,t)},a.showItemTypeCom=function(){var e=a.props,t=e.showCardCheckboxController,n=e.areaType,r=e.cardInfo;return"search"===n||!t[r.areaid]},a.renderCard=function(e){e.opacity;var t=e.showName,n=a.props,r=n.areaType,l=n.color,i=n.cardInfo,s=n.visible,c=(n.selectCard,n.isOver,n.json),d=n.areaList,u=n.isDragging,p=a.getCardClassName(),g="table"!==r?"card":r,m=(0,o.default)({},i,{onClick:a.selectThisCard}),b={},v=String(i.code).replace(/\.|\&|\#/g,""),y=a.props.showCardCheckboxController[i.areaid]&&"card-checkbox";"table"!==r||isNaN(i.width)||+i.width>120&&!a.props.areaItem.isTile&&(b.minWidth=+i.width);var k=a.state.controlIconShow?"control-icon-show":"",S=i.blank?"is-blank-dom":"",w=d[a.props.areaIndex].queryPropertyList;return f.default.createElement("li",{className:"property-item "+g+"-content "+p+" search-unit-"+v+" "+k+" "+y+" "+S,fieldid:i.code,onClick:a.selectThisCard,onMouseLeave:a.perceptionMenuVisible,ref:function(e){return a.cardDom=e},style:{minWidth:(0,x.calculateBlankCardWidth)(i,w,r,a.cardDom,u)}},!0!==i.blank&&f.default.createElement("div",{className:g+"-item",title:t,style:(0,o.default)({color:l},b)},"search"!==r&&f.default.createElement("div",{className:"item-name"},f.default.createElement("span",{className:"title search-unit-label"},t)),a.showItemTypeCom()&&f.default.createElement("div",{className:"item-content"},h.getItemTypeCom.call(a,m,r,c,t)),f.default.createElement(C.default,{className:"card-menu-"+v,visible:a.state.menuVisible,toggleMenuVisible:a.toggleMenuVisible,handleIconShow:a.handleIconShow,cardDom:a.cardDom,index:a.props.index,addMetaItem:a.props.addMetaItem,setCardCheckboxState:a.props.setCardCheckboxState,checkAllCard:a.props.checkAllCard,showCardCheckboxController:a.props.showCardCheckboxController,clearCheckedCard:a.props.clearCheckedCard,revertThisAction:a.props.revertThisAction,batchMoveCard:a.props.batchMoveCard,cardInfo:i,handleCheckCard:a.handleCheckCard,json:a.props.json}),f.default.createElement("span",{className:"delete-card",onClick:a.deleteCard}," x "),!s&&f.default.createElement("span",{className:"hidden-tag"}),(0,E.perceptionCheckboxShow)(a.props)&&f.default.createElement("div",{className:"card-checkbox-container"},f.default.createElement(M,{checked:a.props.checkedCards[i.areaid].includes(i.code),onChange:a.handleCheckCard}))))},a.state={radioSelectedValue:"",passwordValue:"",menuVisible:!1,controlIconShow:!1},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props.areaItem;return e.areaItem.queryPropertyList.length!==a.queryPropertyList.length||!((0,r.default)(e.selectCard).length>0&&!k.default.isEqual(e.selectCard,this.props.selectCard))&&(e.shouldHideGray!==this.props.shouldHideGray||(e.areaItem.areatype,this.props.areaItem.areatype),!0)}},{key:"componentWillUnmount",value:function(){this.cardDom=null}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.visible,n=e.shouldHideGray,r=e.isDragging,o=e.connectDragSource,l=e.connectDropTarget,i=r?.3:a?1:.6,s=k.default.isEmpty(t)?String.fromCharCode(160):t;return!0===n&&!1===a?null:o(l(this.renderCard({opacity:i,showName:s})))}}]),t}(p.Component))||n)||n;t.default=(0,g.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard,selectedArea:e.zoneSettingData.selectedArea,areaList:e.zoneSettingData.areaList,isImplement:e.zoneSettingData.isImplement}}),{updateSelectArea:m.updateSelectArea,updateSelectCard:m.updateSelectCard})(D)},1331:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(22)),r=m(a(26)),o=m(a(5)),l=m(a(8)),i=m(a(6)),s=m(a(7)),c=m(a(2));t.getItemTypeCom=function(e,t,a,n){var r=this,o=e.disabled,l=(e.label,e.onClick),i=e.disabled,s="32"===e.datatype?[a["ZoneSetting-000229"]+"=Y",a["ZoneSetting-000230"]+"=N"]:e.showdataval&&e.showdataval.split(","),d={disabled:o,placeholder:"search"===t&&n,onClick:l},p={input:u.default.createElement(v,(0,c.default)({onChange:function(){}},d)),residtxt:u.default.createElement(v,(0,c.default)({onChange:function(){}},d)),password:u.default.createElement(y,(0,c.default)({value:this.state.passwordValue,onChange:function(e){return r.setState({passwordValue:e.split("").fill("●").join("")})}},d)),label:u.default.createElement(y,(0,c.default)({isViewMode:!0},d)),number:"between"===e.queryOperateType?u.default.createElement(T,{start:{scale:Number(-1),max:e.max,min:e.min,placeholder:"起始"},end:{scale:Number(-1),max:e.max,min:e.min,placeholder:"结束"}}):u.default.createElement(E,(0,c.default)({max:e.max,min:e.min,suffix:e.suffix,scale:Number(-1),formNumber:!0},d)),textarea:u.default.createElement(M,(0,c.default)({style:{resize:"none"}},d)),radio:(g=u.default.createElement(k,{color:"info",disabled:i}),s&&s.length>0&&(g=s.map((function(e,t){var a=e.indexOf("=")>0?e.split("="):[];return u.default.createElement(k,{color:"info",disabled:i,value:a[1],key:t},a[0])}))),u.default.createElement(Z,{selectedValue:r.state.radioSelectedValue,onChange:function(e){return r.setState({radioSelectedValue:e})}},g)),checkbox_switch:u.default.createElement(C,{className:"single-checkbox",disabled:i,colors:"primary",type:"switch"}),checkbox:s?s&&s.map((function(e,t){var a=e.indexOf("=")>0?e.split("="):[];return u.default.createElement(C,{disabled:i,colors:"primary",key:t},a[0])})):u.default.createElement(C,{className:"single-checkbox",disabled:i,colors:"primary"}),NCTZDatePickerStart:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(A,d)),NCTZDatePickerRangeDay:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(_,(0,c.default)({format:e.format||"YYYY-MM-DD HH:mm:ss"},d))),NCTZDatePickClientHourTime:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(D,(0,c.default)({format:e.format||"YYYY-MM-DD HH:mm:ss"},d))),datetimepicker:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(I,d)),timepicker:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(N,(0,c.default)({format:"HH:mm:ss"},d))),NCTZDatePickerEnd:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(L,d)),datePickerNoTimeZone:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(P,d)),rangepicker:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(O,d)),select:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(S,(0,c.default)({multiple:!!e.isMultiSelectedEnabled,labelInValue:!0},d),s&&s.map((function(e,t){var a=e.indexOf("=")>0?e.split("="):[];return u.default.createElement(j,{title:a[0],value:a[1],key:t},a[0])})))),datepicker:u.default.createElement("div",{className:"item-wrapper"},u.default.createElement(x,d)),switch_browse:u.default.createElement(w,{disabled:i}),switch:u.default.createElement(w,{disabled:i}),refer:u.default.createElement(V,(0,c.default)({item:e},d)),attachment:u.default.createElement("i",{className:"iconfont icon-danchuang"})},f="search"===t&&["radio","checkbox_switch","checkbox","switch_browse","switch"].includes(e.itemtype)?"select":e.itemtype;var g;return p[f]};var d=a(1),u=m(d),p=m(a(23)),f=m(a(1210)),g=a(405);function m(e){return e&&e.__esModule?e:{default:e}}var h=p.default.base,b=p.default.high,v=h.NCInput,y=h.NCFormControl,k=h.NCRadio,C=h.NCCheckbox,S=h.NCSelect,w=h.NCSwitch,x=h.NCDatePicker,E=h.NCNumber,T=h.NCBetweenNum,M=h.NCTextArea,A=h.NCTZDatePickerStart,_=h.NCTZDatePickerRangeDay,D=h.NCTZDatePickClientHourTime,I=h.NCTZDatePickClientTime,N=h.NCTimepicker,L=h.NCTZDatePickerEnd,P=h.NCDatePickerNoTimeZone,O=h.NCRangePicker,Z=(b.Refer,k.NCRadioGroup),j=S.NCOption;var V=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.renderRefer=function(){var e=a.props,t=e.item,r=(0,n.default)(e,["item"]),o=a.props.item.refcode;if("57"===t.datatype)return u.default.createElement(f.default,(0,c.default)({placeholder:"",showHistory:!1},r));if(a.state["myRefDom"+o]){var l=a.state["myRefDom"+o];return u.default.createElement(l,(0,c.default)({foolValue:a.state.defaultvalueObj,onChange:function(e,t){a.setState({defaultvalueObj:t})},showHistory:!1},r))}g.createScript.call(a,""+o)},a.renderFakeRefer=function(){return u.default.createElement("div",{className:"refer-wrapper "+(a.props.disabled?"refer-wrapper-disabled":""),onMouseEnter:a.renderRefer},u.default.createElement("div",{className:"refer",style:{backgroundColor:"black"==window.nccColor?"unset":a.props.disabled?"#f3f3f3":"#fff"}},u.default.createElement("div",{className:"base-form-control-wrapper refer-input"},u.default.createElement("input",{type:"text",class:"nc-input wui-input md",placeholder:a.props.placeholder,disabled:a.props.disabled})),u.default.createElement("i",{className:"icon-refer",style:{cursor:"pointer"}})))},a.state={defaultvalueObj:{}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.item,t=void 0;return(t=e.visible?e.refcode?this.renderRefer():this.renderFakeRefer():this.state["myRefDom"+e.refcode]?this.renderRefer():this.renderFakeRefer())||(t=this.renderFakeRefer()),u.default.createElement("div",null,t)}}]),t}(d.PureComponent)},1332:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(1047)),r=v(a(26)),o=v(a(5)),l=v(a(8)),i=v(a(6)),s=v(a(7));a(1044);var c=a(1),d=v(c),u=a(38),p=v(a(23)),f=a(1333),g=v(a(1334)),m=v(a(1335)),h=a(20),b=a(1084);function v(e){return e&&e.__esModule?e:{default:e}}p.default.base.NCDropdown;var y=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.renderMenu=function(){var e=a.props,t=e.metaTreeNodes,n=e.cardInfo,r=e.showCardCheckboxController,o=e.visible,l=e.json;return!1===o?d.default.createElement(c.Fragment,null):d.default.createElement("div",{className:a.props.className+" move-card-menu nc-theme-area-bgc nc-theme-common-font-c",onMouseEnter:a.showCardContentIcon,onMouseLeave:a.handleMouseLeave},(0,f.judgeAddCardMenuShow)(t,n.areaid)?d.default.createElement("ul",null,d.default.createElement("li",{onClick:a.addMetaItemFront},(0,h.langCheck)("ZoneSetting-000266","pages",l)),d.default.createElement("li",{onClick:a.addMetaItemBehind},(0,h.langCheck)("ZoneSetting-000267","pages",l))):d.default.createElement("ul",null,!0!==r[n.areaid]?d.default.createElement(g.default,{showCheckbox:a.showCheckbox,checkAllCard:a.checkAllCard,json:l}):d.default.createElement(m.default,{checkAllCard:a.multiSelectCheckAll,clearCheckedCard:a.clearCheckedCard,revertThisAction:a.revertThisAction,moveCardFront:a.moveCardFront,moveCardBehind:a.moveCardBehind,json:l})))},a.showCardContentIcon=function(e){a.props.handleIconShow(!0)},a.handleMouseLeave=function(e){a.props.handleIconShow(!1),setTimeout((function(e){var t=a.props.cardDom;t&&(0===t.querySelector(".move-card-selection").clientWidth&&a.props.toggleMenuVisible())}),100)},a.addMetaItemFront=function(e){var t=a.props,n=t.addMetaItem,r=t.metaTreeNodes,o=t.index,l=t.cardInfo,i=t.setMetaTreeNodes;e.stopPropagation(),(r[0]&&r[0].props.dataRef.targetAreaID)===l.areaid&&(n({selectedTreeNode:r,targetAreaID:l.areaid,dataRef:{},dropIndex:o}),i([]),a.props.toggleMenuVisible(),a.props.handleIconShow(!1))},a.addMetaItemBehind=function(e){var t=a.props,n=t.addMetaItem,r=t.metaTreeNodes,o=t.index,l=t.cardInfo,i=t.setMetaTreeNodes;e.stopPropagation(),(r[0]&&r[0].props.dataRef.targetAreaID)===l.areaid&&(n({selectedTreeNode:r,targetAreaID:l.areaid,dataRef:{},dropIndex:o+1}),i([]),a.props.toggleMenuVisible(),a.props.handleIconShow(!1))},a.multiSelectCheckAll=function(e){var t=a.props,n=t.checkAllCard,r=t.cardInfo;e.stopPropagation(),n(r)},a.showCheckbox=function(e){var t=a.props.cardInfo;e.stopPropagation(),a.props.setCardCheckboxState(t),a.props.handleIconShow(!1),a.props.toggleMenuVisible(),a.props.handleCheckCard(!0)},a.checkAllCard=function(e){e.stopPropagation();var t=a.props.cardInfo;a.props.setCardCheckboxState(t),a.props.checkAllCard(t),a.props.handleIconShow(!1),a.props.toggleMenuVisible()},a.clearCheckedCard=function(e){var t=a.props.cardInfo;e.stopPropagation(),a.props.toggleMenuVisible(),a.props.clearCheckedCard(t),a.props.handleIconShow(!1)},a.revertThisAction=function(e){var t=a.props.cardInfo;e.stopPropagation(),a.props.toggleMenuVisible(),a.props.revertThisAction(t),a.props.handleIconShow(!1)},a.moveCardFront=function(e){e.stopPropagation();var t=a.props.cardInfo;a.props.batchMoveCard(t,"front"),a.revertThisAction(e)},a.moveCardBehind=function(e){e.stopPropagation();var t=a.props.cardInfo;a.props.batchMoveCard(t,"behind"),a.revertThisAction(e)},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.toggleMenuVisible;return d.default.createElement(d.default.Fragment,null,d.default.createElement(n.default,{placement:"topCenter",overlay:this.renderMenu(),visible:t},d.default.createElement("span",{className:"move-card-selection",onClick:a},"...")))}}]),t}(c.Component);t.default=(0,u.connect)((function(e){return{metaTreeNodes:e.zoneSettingData.metaTreeNodes,selectedArea:e.zoneSettingData.selectedArea}}),{setMetaTreeNodes:b.setMetaTreeNodes})(y)},1333:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.judgeAddCardMenuShow=function(e,t){if(0===e.length)return!1;if(e[0].props.dataRef.targetAreaID===t)return!0}},1334:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.createElement(r.Fragment,null,o.default.createElement("li",{onClick:e.checkAllCard},(0,l.langCheck)("ZoneSetting-000268","pages",e.json)),o.default.createElement("li",{onClick:e.showCheckbox},(0,l.langCheck)("ZoneSetting-000269","pages",e.json)))};var n,r=a(1),o=(n=r)&&n.__esModule?n:{default:n},l=a(20)},1335:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.createElement(r.Fragment,null,o.default.createElement("li",{className:"nc-theme-xrow-bgc",onClick:e.checkAllCard},(0,l.langCheck)("ZoneSetting-000270","pages",e.json)),o.default.createElement("li",{onClick:e.clearCheckedCard},(0,l.langCheck)("ZoneSetting-000271","pages",e.json)),o.default.createElement("li",{onClick:e.moveCardFront},(0,l.langCheck)("ZoneSetting-000272","pages",e.json)),o.default.createElement("li",{onClick:e.moveCardBehind},(0,l.langCheck)("ZoneSetting-000273","pages",e.json)),o.default.createElement("li",{onClick:e.revertThisAction},(0,l.langCheck)("ZoneSetting-000274","pages",e.json)))};var n,r=a(1),o=(n=r)&&n.__esModule?n:{default:n},l=a(20)},1336:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findMetaTreeIndex=function(e,t){return e.findIndex((function(e){return e&&e.pk_area===t}))}},1337:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBlankCardWidth=function(e,t,a,n,r){if(e.blank){if("form"===a){if(0===t.length)return"100%";if("tableSide"===e.renderType){var o=3-t.length%3;return 3===o?"10px":33*o+"%"}var l=4-t.length%4;return 4===l?"10px":25*l+"%"}if("search"===a){if(0===t.length)return"83%";if(t.length<6){var i=5-t.length%5;return 5===i?"7%":16.6*i+"%"}var s=6-(t.length-5)%6;return 6===s?"10px":16.6*s+"%"}if("table"===a&&n&&!1===r){var c=n.parentElement;return c.className.includes("tile-view")&&(n.style.display="none"),setTimeout((function(){if(c.className.includes("tile-view")){var e=(c.childElementCount-1)%6;if(0===e)n.style.width="5px";else{var t=6-e;n.style.width=16.6*t+"%"}n.style.display="inline-block"}else c.scrollWidth===c.clientWidth&&(n.offsetWidth+n.offsetLeft<c.clientWidth?n.style.width=c.clientWidth-n.offsetLeft+"px":n.style.width="5px")})),"5px"}}}},1338:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.perceptionCheckboxShow=function(e){e.areaType;var t=e.cardInfo,a=e.showCardCheckboxController,n=t.areaid;return!!a[n]}},1339:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(407)),r=C(a(179)),o=C(a(118)),l=C(a(26)),i=C(a(5)),s=C(a(8)),c=C(a(6)),d=C(a(7)),u=a(1),p=C(u),f=a(38),g=C(a(403)),m=a(1084),h=C(a(1340)),b=a(20),v=C(a(1346)),y=C(a(23)),k=a(405);function C(e){return e&&e.__esModule?e:{default:e}}var S=y.default.base,w=(S.NCButton,S.NCTabs),x=S.NCLoading,E=w.NCTabPane,T=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setModalVisibel(!1),a.currentPage=1},a.getTotalPageSize=function(e){return Math.ceil(e.length/a.pageSize)},a.onOkDialog=function(){var e=a.props,t=e.areaList,n=(e.areaIndex,a.state.activeKey),r=a.batchSource,o=a.relations;a.relations[n].queryPropertyList=r,t=_.cloneDeep(t),r=_.cloneDeep(r),o=_.cloneDeep(o),t.forEach((function(e){o[e.code].update&&(e.queryPropertyList=o[e.code].queryPropertyList)})),a.props.updateAreaList(t),a.showModalHidden()},a.saveNewSource=function(e,t,n){var r=a.batchSource,o=a.state.activeKey,l=e.concat(r.slice(e.length,r.length));a.relations[o].queryPropertyList=l,a.relations[o].update=!0,"formula"!==n&&(a.setState({newSource:e,reseek:"label"==t}),a.props.updateBatchSource(l))},a.saveAllNewSource=function(e,t,n){var r=a.batchSource,o=a.state.activeKey,l=_.cloneDeep(r);l.map((function(e){return e[t]=n})),a.setState({newSource:e}),a.relations[o].queryPropertyList=l,a.relations[o].update=!0,a.props.updateBatchSource(l)},a.loadNextPage=function(){var e=a.state.newSource,t=e.concat(a.batchSource.slice(e.length,e.length+a.pageSize));a.setCheckedByCheckAll(t),a.setState({isLoading:!0},(function(){setTimeout((function(){a.aleadyScroll=!1,a.setState({newSource:t,isLoading:!1})}),0)}))},a.handleScrollTable=function(){var e=a.batchTableRef&&a.batchTableRef.querySelector(".ant-table-body");!a.aleadyScroll&&e&&e.scrollTop+e.clientHeight>=.8*e.scrollHeight&&a.currentPage<a.totalPage&&(a.aleadyScroll=!0,a.currentPage++,a.loadNextPage())},a.setCheckedByCheckAll=function(e){var t=function(t,a,n){n||e.map((function(e){return e[t]=a}))},l=!0,i=!1,s=void 0;try{for(var c,d=(0,r.default)((0,n.default)(a.checkAllCheckedObj));!(l=(c=d.next()).done);l=!0){var u=c.value,p=(0,o.default)(u,2),f=p[0],g=p[1];t(f,g.checked,g.indeterminate)}}catch(e){i=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw s}}},a.onClear=function(){a.setState({searchActives:{},clear:!1,reseek:!1})},a.onSelect=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a.state.newSource,r=a.batchSource,o=n;t>n.length-1&&(o=n.concat(r.slice(n.length,t+1)),a.setCheckedByCheckAll(o)),a.setState({newSource:o,searchSelect:e,reseek:!1},(function(){var e=document.querySelector(".wbs-search-units-selected");e&&e.scrollIntoView()}))},a.onActive=function(e){a.setState({searchActives:e,reseek:!1})},a.onTabChange=function(e){if(a.state.activeKey!=e){var t=a.relations,n=a.props.areaList,r=t[e]?t[e]:n.filter((function(t){return t.code==e}))[0],o=(r.code,r.areatype),l=r.queryPropertyList;a.batchSource=l||[],a.currentPage=1,a.totalPage=a.getTotalPageSize(a.batchSource);var i=a.batchTableRef&&a.batchTableRef.querySelector(".ant-table-body");i&&i.scroll({top:0,left:0}),a.setState({isLoading:!0},(function(){setTimeout((function(){a.setState({newSource:a.batchSource,activeKey:e,areatype:o,clear:!0,searchActives:{},searchSelect:{},reseek:!1,isLoading:!1}),a.props.updateBatchSource(a.batchSource)}),0)}))}},a.pageSize=30,a.currentPage=1,a.totalPage=a.getTotalPageSize(a.props.batchSource),a.state={newSource:[],searchActives:{},searchSelect:{},reseek:!1,tabOptions:[],activeKey:"",isLoading:!1},a.batchSource=[],a.checkAllCheckedObj={},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.newAreaList,a=e.areaList,n=e.areaIndex,r=e.batchSource,o=r,l=this.handleSourceData(t),i=l.tabOptions,s=l.relations;this.relations=s,this.batchSource=r||[],this.setState({newSource:o,tabOptions:i,activeKey:a[n].code||i[0]&&i[0].code,areatype:a[n].areatype||i[0]&&i[0].code})}},{key:"componentWillReceiveProps",value:function(e){if(!0===e.batchSettingModalVisibel){var t=e.batchSource;this.batchSource=t,this.setState({newSource:t.slice(0,this.state.newSource.length)})}}},{key:"componentWillUnmount",value:function(){this.relations=null,this.batchSource=null}},{key:"handleSourceData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.forEach((function(e){if(e){var r=e.areatype,o=e.code,l=(e.name,e.groups),i=void 0===l?[]:l,s=e.sides,c=void 0===s?[]:s,d=e.grandsons,u=void 0===d?[]:d,p=e.tabs,f=void 0===p?[]:p,g=e.queryPropertyList,m=e.formTabs,h=void 0===m?[]:m,b=u.find((function(e){return e.tabs&&e.tabs.length})),v=h.find((function(e){return e.groups&&e.groups.length})),y=b?[]:u,C=(0,k.getMultiLangText)(e,"name",t.props.multiOptions);a.push({code:o,name:C,areatype:r}),n[o]={code:o,name:C,areatype:r,queryPropertyList:g},[].concat(i,h,c,y).forEach((function(r){e&&(a.push({code:r.code,name:(0,k.getMultiLangText)(r,"name",t.props.multiOptions),areatype:r.areatype}),n[r.code]={code:r.code,name:(0,k.getMultiLangText)(r,"name",t.props.multiOptions),areatype:r.areatype,queryPropertyList:r.queryPropertyList})})),f.length&&t.handleSourceData(f,a,n),b&&t.handleSourceData(u,a,n),v&&t.handleSourceData(h,a,n)}})),{tabOptions:a,relations:n}}},{key:"render",value:function(){var e=this,t=this.props,a=t.json,n=t.batchSource,r=t.multiOptions,o=this.state,l=o.newSource,i=o.searchActives,s=void 0===i?{}:i,c=o.searchSelect,d=void 0===c?{}:c,u=o.reseek,f=o.tabOptions,m=void 0===f?[]:f,y=o.activeKey,k=o.areatype,C=o.clear,S=void 0!==C&&C,T=o.isLoading,M=void 0!==T&&T,A=this.batchSource||n||[];return p.default.createElement(g.default,{closable:!0,className:"zonesetting-batch-setting-modal",style:{margin:0},customTitle:p.default.createElement(v.default,{sourceData:[{code:y,data:A}],onClear:this.onClear,onSelect:this.onSelect,onActive:this.onActive,searchKey:["label"],reseek:u,clear:S,json:a,multiOptions:r}),onResizeStop:function(){e.forceUpdate()},title:(0,b.langCheck)("ZoneSetting-000016","pages",a),maskClosable:!1,visible:this.props.batchSettingModalVisibel,okText:(0,b.langCheck)("ZoneSetting-000005","pages",a),cancelText:(0,b.langCheck)("ZoneSetting-000006","pages",a),onOk:this.onOkDialog,onCancel:this.showModalHidden,destroyOnClose:!0,width:"98%",height:document.body.clientHeight-150+"px",fieldid:"batchSetting"},p.default.createElement("div",{type:"ncdiv",fieldid:"batchSetting_table",ref:function(t){return e.batchTableRef=t},onScrollCapture:this.handleScrollTable,style:{height:"100%"}},p.default.createElement(w,{activeKey:y,className:"batch-setting-tabs",tabBarStyle:"simple",onChange:this.onTabChange,onPrevClick:function(e){},onNextClick:function(e){}},m.map((function(t){return p.default.createElement(E,{tab:t.name,key:t.code},t.code===y&&p.default.createElement(p.default.Fragment,null,p.default.createElement(h.default,{newSource:l,batchSource:e.batchSource,searchActives:s[y],searchSelect:d[y],areatype:k,saveNewSource:e.saveNewSource,saveAllNewSource:e.saveAllNewSource,forwardRef:function(t,a){return e.checkAllCheckedObj[t]=a},multiOptions:r})))}))),p.default.createElement(x,{container:this,show:M})))}}]),t}(u.Component);t.default=(0,f.connect)((function(e){return{areaList:e.zoneSettingData.areaList,batchSource:e.zoneSettingData.batchSource,newAreaList:e.zoneSettingData.newAreaList}}),{updateAreaList:m.updateAreaList,updateBatchSource:m.updateBatchSource})(T)},1340:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a(51)),r=w(a(22)),o=w(a(2)),l=w(a(3)),i=w(a(26)),s=w(a(5)),c=w(a(8)),d=w(a(6)),u=w(a(7)),p=w(a(119));a(178);var f=a(1),g=w(f),m=a(38),h=a(405),b=a(1084),v=a(404),y=w(a(1341)),k=w(a(68)),C=a(1345),S=w(a(23));function w(e){return e&&e.__esModule?e:{default:e}}S.default.getLangCode;var x=S.default.base,E=x.NCCheckbox,T=x.NCTable,M=(p.default.Search,function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleVisibleChange=function(e,t){!1!==e&&a.setState((0,l.default)({},"visible"+t,e))},a.hidePopover=function(e){a.setState((0,l.default)({},"visible"+e,!1))},a.onCellChange=function(e,t,n){return function(r){var l=a.props.newSource,i=(l=k.default.cloneDeep(l))[e];i&&("multilang"===n?l[e]=(0,o.default)({},i,r):i[t]=r,a.props.saveNewSource(l,t,n))}},a.onCheckedChange=function(e,t){return function(n){var r=a.props.newSource,o=(r=k.default.cloneDeep(r))[e];o&&(o[t]=n,a.props.saveNewSource(r))}},a.onAllColCellChange=function(e){return function(t){a.saveAllCellValue(t,e)}},a.saveAllCellValue=function(e,t){var n=a.props.newSource;n=k.default.cloneDeep(n),k.default.forEach(n,(function(a){a[t]=e})),a.props.saveAllNewSource(n,t,e)},a.publicIndeterminate=function(e,t,n){(e=a.props.batchSource.map((function(e){return e[n]}))).some((function(e){return!0===e}))&&!e.every((function(e){return!0===e}))?k.default.forEach(t,(function(e,t){e.property==n&&(e.indeterminate=!0,e.checkAll=!1)})):e.includes(!0)?k.default.forEach(t,(function(e,t){e.property==n&&(e.indeterminate=!1,e.checkAll=!0)})):k.default.forEach(t,(function(e,t){e.property==n&&(e.indeterminate=!1,e.checkAll=!1)})),e=[]},a.addBodyAreaScrollWheelEvent=function(e){var t=e.currentTarget,a=e.deltaX,n=e.deltaY;if(Math.abs(a)<Math.abs(n))try{for(var r=t,o=null;r;)if(r.scrollHeight>r.clientHeight){o=r;break}o&&(e.preventDefault(),o.scrollTop=o.scrollTop+n/2)}catch(e){console.error(e)}},a.FieldidCell=function(e,t,n){var o=a.props,l=(o.fieldid,o.searchActives),i=void 0===l?{}:l,s=o.searchSelect,c=void 0===s?{}:s,d=((0,r.default)(o,["fieldid","searchActives","searchSelect"]),e.code),u="";return i[d]&&"label"===i[d].name&&1===n.dragIndex&&(u+=i[d].activeCls,u+=c[d]?i[d].selectCls:""),u},a.columns=[],a.state={visible:!1},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){}},{key:"scrollEvent",value:function(){var e=document.querySelector(".batch-setting-tabs .ant-table-body");e.scrollHeight>e.clientHeight&&e.addEventListener("wheel",this.addBodyAreaScrollWheelEvent)}},{key:"render",value:function(){var e=this,t=this.props,a=t.newSource,r=t.areatype,l=t.searchActives,i=void 0===l?{}:l,s=t.searchSelect,c=void 0===s?{}:s,d=t.multiOptions;k.default.forEach(a,(function(e,t){e.key=[e.areaid,e.code].join("_")}));var u=[],p=0,f=[];if("0"===r){var m=[],b=[],S=[],w=[],x=[],M=[],A=[],_=[],D=[],I=[],N=[],L=[];f=(0,h.batchSearchData)(),k.default.forEach(a,(function(e,t){m.push(e.isnotmeta),b.push(e.isuse),S.push(e.disabled),w.push(e.visible),x.push(e.ismultiselectedenabled),M.push(e.isfixedcondition),A.push(e.required),_.push(e.isquerycondition),D.push(e.containlower),I.push(e.ischeck),N.push(e.isbeyondorg),L.push(e.usefunc)})),this.publicIndeterminate(m,f,"isnotmeta"),this.publicIndeterminate(b,f,"isuse"),this.publicIndeterminate(S,f,"disabled"),this.publicIndeterminate(w,f,"visible"),this.publicIndeterminate(x,f,"ismultiselectedenabled"),this.publicIndeterminate(M,f,"isfixedcondition"),this.publicIndeterminate(A,f,"required"),this.publicIndeterminate(_,f,"isquerycondition"),this.publicIndeterminate(D,f,"containlower"),this.publicIndeterminate(I,f,"ischeck"),this.publicIndeterminate(N,f,"isbeyondorg"),this.publicIndeterminate(L,f,"usefunc")}else if("1"===r){var P=[],O=[],Z=[],j=[],V=[];f=(0,h.batchFormData)(),k.default.forEach(a,(function(e,t){P.push(e.isrevise),O.push(e.isnextrow),Z.push(e.visible),j.push(e.required),V.push(e.disabled)})),this.publicIndeterminate(P,f,"isrevise"),this.publicIndeterminate(O,f,"isnextrow"),this.publicIndeterminate(Z,f,"visible"),this.publicIndeterminate(j,f,"required"),this.publicIndeterminate(V,f,"disabled")}else{var F=[],q=[],z=[],R=[],B=[];f=(0,h.batchTableData)(),k.default.forEach(a,(function(e,t){F.push(e.isrevise),q.push(e.istotal),z.push(e.visible),R.push(e.required),B.push(e.disabled)})),this.publicIndeterminate(F,f,"isrevise"),this.publicIndeterminate(q,f,"istotal"),this.publicIndeterminate(z,f,"visible"),this.publicIndeterminate(R,f,"required"),this.publicIndeterminate(B,f,"disabled")}k.default.forEach(f,(function(t,n){var r={dataIndex:t.property,width:t.width};switch("label"===r.dataIndex&&(r.fixed="left"),"code"===r.dataIndex&&(r.fixed="left"),p+=t.width,"checkbox"===t.type?r.title=g.default.createElement(E,{onChange:function(a){e.saveAllCellValue(a,t.property)},indeterminate:t.indeterminate,checked:t.checkAll,ref:function(a){return e.props.forwardRef(t.property,{checked:t.checkAll,indeterminate:t.indeterminate})}},t.title):r.title=t.title,t.type){case"multilang":r.render=function(a,n,r){var o=(0,h.getMultiLangValues)(n,t.property,e.props.multiOptions);return g.default.createElement(C.MultiLangCell,{value:o,property:t.property,updateValue:e.onCellChange(r,t.property,t.type),multiOptions:d})};break;case"input":r.render=function(a,n,r){return"width"!==t.property||a||(a="120"),g.default.createElement(C.EditableCell,{value:a,property:t.property,updateValue:e.onCellChange(r,t.property)})};break;case"checkbox":r.render=function(a,n,r){return g.default.createElement(C.EditableCheck,{value:a,property:t.property,onChange:e.onCellChange(r,t.property)})};break;case"select":r.render=function(a,n,r){return g.default.createElement(C.SelectCell,{selectValue:a,property:t.property,selectObj:t.selectObj,onChange:e.onCellChange(r,t.property)})};break;case"text":r.title=t.title;break;case"formula":r.render=function(n,r,o){return g.default.createElement(C.FormulaCell,{value:n,property:t.property,onFormula:function(){e.props.formula[t.property].visible||(v.handleFormula.call(e,a[o]),e.props.toggleFormula(t.property,{visible:!0,value:n})),e.props.setCurrentBatchCell({index:o,code:t.property})},updateValue:e.onCellChange(o,t.property,"formula")})}}u.push(r)}));var H=u.map((function(e){var t=e.dataIndex||e.key;return(0,o.default)({},e,{onCell:function(e){return{fieldid:t,record:e,searchActives:i,searchSelect:c,multiOptions:d}},onHeaderCell:function(e){return{fieldid:t}}})}));return g.default.createElement(T,{className:"batch-setting-table",bordered:!0,data:a,columns:H,scroll:{x:p,y:document.body.clientHeight-110-200+"px"},emptyText:g.default.createElement(y.default,{type:"treeCardTable"}),getCellClassName:this.FieldidCell,lazyload:"{}"===(0,n.default)(i),adaptionHeight:!0,otherAreaHeight:120})}}]),t}(f.Component));t.default=(0,m.connect)((function(e){return{formula:e.zoneSettingData.formula,areaList:e.zoneSettingData.areaList}}),{toggleFormula:b.toggleFormula,setFormulaInfo:b.setFormulaInfo,setCurrentBatchCell:b.setCurrentBatchCell})(M)},1341:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(26)),r=f(a(5)),o=f(a(8)),l=f(a(6)),i=f(a(7)),s=a(1),c=f(s),d=f(a(1342)),u=f(a(431)),p=a(20);function f(e){return e&&e.__esModule?e:{default:e}}a(1343);var g=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.switchImg=function(e,t){switch(e){case"treeCardTable":return c.default.createElement("div",{className:"CoverPosition-content-treeCardTable"},c.default.createElement("img",{src:u.default}),c.default.createElement("span",null,t("0000PUB-000002")));default:return c.default.createElement("div",{className:"CoverPosition-content"},c.default.createElement("img",{src:d.default}),c.default.createElement("span",null,t("0000PUB-000002")))}},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"CoverPosition-container"},this.switchImg(this.props.type,p.langCheck))}}]),t}(s.Component);t.default=g},1342:function(e,t,a){e.exports=a.p+"images/nodata.png"},1343:function(e,t,a){var n=a(1344);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1344:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".CoverPosition-container .CoverPosition-content,.CoverPosition-container .CoverPosition-content-treeCardTable{display:flex;flex-direction:column;justify-content:center;align-items:center}.CoverPosition-container .CoverPosition-content-treeCardTable img{width:25px;height:25px}.CoverPosition-container .CoverPosition-content-treeCardTable span{margin-left:8px;font-size:13px;color:#aeaeae}",""])},1345:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormulaCell=t.SelectCell=t.EditableCheck=t.EditAllCell=t.EditableCell=t.MultiLangCell=void 0;var n=h(a(44)),r=h(a(407)),o=h(a(26)),l=h(a(5)),i=h(a(8)),s=h(a(6)),c=h(a(7)),d=h(a(119));a(122),a(178);var u=a(1),p=h(u),f=h(a(68)),g=a(20),m=a(252);function h(e){return e&&e.__esModule?e:{default:e}}var b=h(a(23)).default.base,v=b.NCCheckbox,y=b.NCSelect,k=b.NCMultiLangText,C=y.NCOption,S=d.default.Search;t.MultiLangCell=function(e){function t(e){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,i.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){this.props,this.state;return this.props.value!==e.value}},{key:"changeMultiLangText",value:function(e,t){console.log(e,t);var a=Object.fromEntries((0,r.default)(e).map((function(e){return[e[0],e[1].value]})));this.props.updateValue(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,n=t.property,r=t.multiOptions;return p.default.createElement(k,{style:{width:100},value:a,onChange:function(t){e.changeMultiLangText(t,n)},onBlur:function(t){e.changeMultiLangText(t,n)},ref:function(t){return e[n+"input"]=t},disabled:!1,fieldid:n,languageMeta:r,attrcode:n})}}]),t}(p.default.Component),t.EditableCell=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleChange=function(e){var t=e.target.value;a.props.updateValue(t)},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){this.props,this.state;return this.props.value!==e.value}},{key:"render",value:function(){var e=this,t=this.props,a=t.value;t.property;return p.default.createElement(d.default,{size:"small",style:{width:100},value:a,onChange:this.handleChange,ref:function(t){return e.input=t}})}}]),t}(p.default.Component),t.EditAllCell=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleClick=function(e){a.props.onChange(a.state.inputValue),a.props.hidePopover()},a.close=function(){a.props.hidePopover()},a.changeValue=function(e){a.setState({inputValue:e.target.value})},a.state={inputValue:"",json:{}},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,m.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this.state.json;return p.default.createElement("div",{className:"custom-filter-dropdown"},p.default.createElement(d.default,{value:this.state.inputValue,size:"small",ref:"customInput",onChange:this.changeValue}),p.default.createElement(n.default,{type:"primary",onClick:this.handleClick},(0,g.langCheck)("ZoneSetting-000005","pages",e)),p.default.createElement(n.default,{onClick:this.close},(0,g.langCheck)("ZoneSetting-000006","pages",e)))}}]),t}(p.default.Component),t.EditableCheck=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleChange=function(e){a.props.onChange(e)},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){this.props,this.state;return this.props.value!==e.value}},{key:"render",value:function(){var e=this.props.value;return p.default.createElement(v,{checked:Boolean(e),onChange:this.handleChange})}}]),t}(p.default.Component),t.SelectCell=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleSelectChange=function(e){a.props.onChange(e)},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){this.props,this.state;return this.props.selectValue!==e.selectValue}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectValue,n=t.selectObj,r=t.property;return p.default.createElement(y,{showClear:!1,value:f.default.isEmpty(a)?n[0].value:a,onChange:function(t){e.handleSelectChange(t)},size:"small",fieldid:r},"color"===r?n.map((function(e,t){return p.default.createElement(C,{key:t,value:e.value},p.default.createElement("span",{className:"template-setting-color-select"},p.default.createElement("span",null,e.name),p.default.createElement("span",{className:"color-select-color",style:{backgroundColor:e.value}})))})):n.map((function(e,t){return p.default.createElement(C,{key:t,value:e.value},e.name)})))}}]),t}(u.Component),t.FormulaCell=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleChange=function(e){var t=e.target.value;a.props.updateValue(t)},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){this.props,this.state;return this.props.value!==e.value&&(this.props.updateValue(e.value),!0)}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.onFormula;return p.default.createElement(S,{size:"small",style:{width:100},value:t,onChange:function(){},onSearch:a})}}]),t}(p.default.Component)},1346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(2)),r=g(a(3)),o=g(a(26)),l=g(a(5)),i=g(a(8)),s=g(a(6)),c=g(a(7)),d=a(1),u=g(d),p=(a(38),a(1186),a(20)),f=(a(1084),g(a(23)));function g(e){return e&&e.__esModule?e:{default:e}}var m=f.default.getLangCode;a(1209),a(1347);var h=f.default.base,b=h.NCSelect,v=h.NCFormControl,y=b.NCOption,k=function(e){return String(e).toLocaleLowerCase()},C=function(e,t){var a=String(e).match(new RegExp(""+t,"ig"));return a?a[0]:""},S=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.select=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=a.props.onSelect,n=a.state.highlights,r=n[e-1];t&&t(r,r?r.index:0)},a.active=function(){var e=a.props.onActive,t=a.state.highlights;e&&e(a.handleHighlights(t))},a.search=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],o=a.sourceData;(a.props.searchKey||[])[0];e&&o.forEach((function(t){var o=t.code;t.data.forEach((function(t,l){var i,s=t.label,c=void 0===s?"":s,d=t.code,u=a.getMultiLangName(t,"label");"-1"==k(c).indexOf(k(e))&&-1===k(u).indexOf(k(e))||n.push((i={},(0,r.default)(i,o,(0,r.default)({},d,{code:d,activeCls:" wbs-search-units-active ",selectCls:" wbs-search-units-selected ",key:C(u,e),name:"label",value:u,index:l})),(0,r.default)(i,"code",o),(0,r.default)(i,"index",l),i))}))})),console.log("wbs search res",n,a.handleHighlights(n)),a.setState({highlights:n,current:t,total:n.length,key:e},(function(){a.clearAllHightLight(),a.active(),a.select(t)}))},a.handleChange=function(e){a.search(e),a.setState({key:e})},a.clear=function(){a.clearAllHightLight(),a.setState({key:"",current:1,total:0})},a.prev=function(){var e=a.state,t=e.highlights,n=e.current,r=e.total,o=void 0===r?-1:r;o<=0||!t.length||a.lock||(n=1===n?o:n-1,a.select(n),a.setState({current:n}))},a.next=function(){var e=a.state,t=e.highlights,n=e.current,r=e.total,o=void 0===r?-1:r;o<=0||!t.length||a.lock||(n=n===o?1:n+1,a.select(n),a.setState({current:n}))},a.onSearchInputKeyDown=(0,p.debounce)((function(e){13===e&&a.next()}),20),a.onSearchInputChange=function(e){a.setState({key:e}),a.handleSearchKey(e)},a.handleSearchKey=(0,p.debounce)((function(e){a.search(e)}),200),a.sourceData=e.sourceData||[],a.state={select:"All",key:"",current:1,total:0,selectOptions:e.selectOptions||[]},a.lock=!1,a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this.handleSourceData(),t=e.selectOptions,a=void 0===t?[]:t,n=e.relations;this.relations=n,this.setState({selectOptions:a})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.sourceData;this.sourceData=a;var n=this.handleSourceData(),r=n.selectOptions,o=void 0===r?[]:r,l=n.relations;this.relations=l,this.setState({selectOptions:o},(function(){e.reseek&&t.search(t.state.key,t.state.current),e.clear&&t.clear()}))}},{key:"componentWillUnmount",value:function(){this.sourceData=[]}},{key:"handleSourceData",value:function(){this.sourceData;return{relations:{},selectOptions:[]}}},{key:"handleHighlights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){var a=e.code;t[a]=(0,n.default)({},t[a]||{},e[a]||{})})),t}},{key:"clearAllHightLight",value:function(){var e=this.props.onClear;this.state.highlights;e&&e()}},{key:"getMultiLangName",value:function(e,t){var a=this.props.multiOptions,n=m("langCode"),r="",o="",l="";return a?(a.forEach((function(a){var i=a.languageMain,s=a.index,c=a.languageCode;l=""+t+s,c===n&&(r=_.get(e,l)),!0===i&&(o=_.get(e,l))})),r&&r.length>0?r:o):_.get(e,name,"")}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.total,r=t.selectOptions,o=t.key,l=t.select,i=t.showSelect,s=void 0!==i&&i;return u.default.createElement("div",{className:"search-box with-batch-setting dnd-cancel"},s&&u.default.createElement(b,{className:"st-select",value:l,showClear:!1,fieldid:"searchProperty",onSelect:function(t){e.setState({select:t},(function(){e.search(o)}))}},u.default.createElement(y,{value:"All"},(0,p.langCheck)("ZoneSetting-000282","pages",this.props.json)||"全部"),r.map((function(e){return u.default.createElement(y,{value:e.code},u.default.createElement("span",{title:e.name},e.name))}))),u.default.createElement(v,{className:"st-input",placeholder:(0,p.langCheck)("ZoneSetting-000281","pages",this.props.json)||"搜索字段名称",onChange:this.onSearchInputChange,prefix:u.default.createElement("i",{className:"icon iconfont icon-sousuo st-icon-sousuo"}),value:o,fieldid:"searchCon",onKeyDown:function(t){e.onSearchInputKeyDown(t.keyCode),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()}}),o&&u.default.createElement("div",{className:"st-count"},(n?a:0)+"/"+n),o&&u.default.createElement("div",{className:"st-icon"},u.default.createElement("i",{className:"icon iconfont icon-qingkong st-icon-close",onClick:this.clear}),u.default.createElement("i",{className:"icon iconfont icon-jiantoushang1 st-icon-up",onClick:this.prev}),u.default.createElement("i",{className:"icon iconfont icon-jiantouxia1 st-icon-down",onClick:this.next})))}}]),t}(d.Component);t.default=S},1347:function(e,t,a){var n=a(1348);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1348:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".search-box.with-batch-setting{display:inline-block;position:relative;margin-left:16px;max-width:500px;font-weight:500}.wbs-same-input input{background:transparent}.wbs-search-units-active .multi-lang-text,.wbs-search-units-active input{background:#fff085}.wbs-search-units-active .multi-lang-text input{background:transparent}.wbs-search-units-selected .multi-lang-text,.wbs-search-units-selected input{background:#ffc8a6}.wbs-search-units-selected .multi-lang-text input{background:transparent}.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .iconfont{display:inline-block;width:14px;margin-right:0;position:absolute;right:auto;font-size:14px;color:rgba(0,0,0,.65)}.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .st-icon-sousuo{left:4px;right:auto;height:26px;line-height:26px}.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .st-count,.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .st-icon{top:0}.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .st-icon .st-icon-close{position:static;top:0;font-size:17px;display:inline-block;height:26px;line-height:26px;width:33px;text-align:center;vertical-align:middle}.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .st-icon .st-icon-down,.wui-modal-open .nc-modal.wui-modal .wui-modal-dialog .wui-modal-content .wui-modal-header .wui-modal-title .search-box.with-batch-setting .st-icon .st-icon-up{position:static;top:0;border-left:1px solid #d0d0d0;width:30px;display:inline-block;height:25px;line-height:26px;border-right:none;text-align:center;vertical-align:middle}.search-box.with-batch-setting .base-form-control-wrapper{display:flex!important;border-radius:3px!important}.search-box.with-batch-setting .base-form-control-wrapper .wui-input.nc-input{border-radius:3px!important}",""])},1349:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(119)),r=S(a(118)),o=S(a(407)),l=S(a(2)),i=S(a(26)),s=S(a(5)),c=S(a(8)),d=S(a(6)),u=S(a(7));a(178);var p=a(1),f=S(p),g=S(a(68)),m=a(38),h=S(a(403)),b=a(1084),v=a(405),y=a(20),k=a(404),C=S(a(23));function S(e){return e&&e.__esModule?e:{default:e}}var w=C.default.getLangCode,x=C.default.base.NCMultiLangText,E=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setAddDataModalVisibel(!1),a.setState({notMetaDataName:{},notMetaDataCode:"",explainForName:"",explainForCode:""})},a.onOkDialog=function(){var e=!0,t=a.state,n=t.notMetaDataName,r=t.notMetaDataCode,o=a.props,i=o.json,s=o.propperty;o.multiOptions;if(a.checkDataCorrect(n).correct&&a.checkDataCorrect(r,"code").correct&&(e=!1),e)return a.checkLocalEmpty(n)&&a.setState({explainForName:(0,y.langCheck)("ZoneSetting-000000","pages",i)}),void(""==r&&a.setState({explainForCode:(0,y.langCheck)("ZoneSetting-000000","pages",i)}));var c=a.props,d=c.areaList,u=c.areaIndex,p=d[u].queryPropertyList,f={},g=a.getCardLabel(),m=(0,v.getItemtypeByDatatype)(s.datatype);"0"===a.props.areatype?f=(0,l.default)({pk_query_property:"newNotMetaData"+(new Date).getTime(),areaid:d[u].pk_area},g,{code:a.state.notMetaDataCode,metapath:null,isnotmeta:!0,isuse:!0,position:""+(p.length+1),opersign:"=@>@>=@<@<=@like@",opersignname:(0,y.langCheck)("ZoneSetting-000001","pages",i),defaultvalue:"",isfixedcondition:!1,required:!1,disabled:!1,visible:!0,ismultiselectedenabled:!1,isquerycondition:!1,datatype:s.datatype||"1",refname:"-99",containlower:!1,ischeck:!1,isbeyondorg:!1,usefunc:!1,showtype:"1",returntype:"refpk",define1:"",define2:"",define3:"",define4:"",define5:"",itemtype:m||"input",visibleposition:"",tablecode:"",querytablename:""}):"300"===(f=(0,l.default)({pk_query_property:"newNotMetaData"+(new Date).getTime(),areaid:d[u].pk_area,code:a.state.notMetaDataCode,datatype:s.datatype||"1"},g,{position:""+(p.length+1),metapath:null,color:(0,v.colorObj)()&&(0,v.colorObj)()[0].value,isrevise:!1,required:!1,disabled:!1,visible:!0,maxlength:"20",defaultvalue:"",hyperlinkflag:!1,defaultvar:"",define1:"",define2:"",define3:"",itemtype:m||"input"})).datatype&&(f.issupportphoto=!1,f.uploadquantity="",f.watermarktype=0,f.watermarktext="",f.watermarkfont="",f.position="",f.watermarkalpha=0,f.isshowtime=!1,f.isshowplace=!1),"1"===a.props.areatype&&(f.colnum="1",f.isnextrow=!1),"2"===a.props.areatype&&(f.width="",f.istotal=!1),""!==s.dropIndex?d[u].queryPropertyList.splice(s.dropIndex,0,f):d[u].queryPropertyList=p.concat(f),a.setState({notMetaDataName:{},notMetaDataCode:"",explainForName:"",explainForCode:""}),a.props.updateAreaList(d),k.selectCardFromOther.call(a,f),a.showModalHidden()},a.isUniqueInQueryList=function(e){var t=a.props,n=t.areaList[t.areaIndex].queryPropertyList,r=!0;return g.default.forEach(n,(function(t){if(t.code===e)return r=!1,!1})),r},a.checkDataCorrect=function(e,t){var n=!0,r="",o=a.props.json;if("code"===t)if(""===e)r=(0,y.langCheck)("ZoneSetting-000000","pages",o),n=!1;else{/[\u4e00-\u9fa5]/.test(e)&&(r=(0,y.langCheck)("ZoneSetting-000002","pages",o),n=!1),a.isUniqueInQueryList(e)||(r=(0,y.langCheck)("ZoneSetting-000003","pages",o),n=!1)}else a.checkLocalEmpty(e)&&(r=(0,y.langCheck)("ZoneSetting-000000","pages",o),n=!1);return{correct:n,errorMsg:r}},a.checkNameAndCodeCorrect=function(){var e=!1,t=a.state,n=t.notMetaDataName,r=t.notMetaDataCode;return a.checkDataCorrect(n).correct&&a.checkDataCorrect(r,"code").correct&&(e=!0),e},a.onPressEnter=function(){a.checkNameAndCodeCorrect()&&a.onOkDialog()},a.changeNotMetaDataName=function(e){var t=g.default.clone(e),n=a.checkDataCorrect(t),r=(n.correct,n.errorMsg);a.setState({notMetaDataName:t,explainForName:r})},a.changeNotMetaDataCode=function(e){a.setState({notMetaDataCode:e.target.value});var t=a.checkDataCorrect(e.target.value,"code"),n=(t.correct,t.errorMsg);a.setState({explainForCode:n})},a.componentWillUpdate=function(e,t){!a.props.addDataModalVisibel&&e.addDataModalVisibel&&setTimeout((function(){a.refs.addNotMetaDataInputDom.focus()}),0)},a.state={notMetaDataName:{},notMetaDataCode:"",explainForName:"",explainForCode:""},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"genDefaultShowFormula",value:function(){var e=this.props,t=e.zoneFormData,a=e.areaList[e.areaIndex],n=a.code,r=(a.metaid,a.areaDataPrimaryFieldName),o=t.code;return"accessorymath("+t.appcode+t.pagecode+"/"+o+n+"/"+r+")"}},{key:"getCardLabel",value:function(){var e=this.state.notMetaDataName,t=(0,o.default)(e).map((function(e){var t=(0,r.default)(e,2),a=t[0],n=t[1];return[a,g.default.get(n,"value")]}));return Object.fromEntries(t)}},{key:"checkLocalEmpty",value:function(e){var t=this.props.multiOptions,a=w("langCode"),n=((0,o.default)(e),"");return t.forEach((function(t){t.languageMain;var r="label"+t.index;t.languageCode===a&&(n=g.default.get(e,r+".value",""))})),0===n.length}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.multiOptions;return f.default.createElement(h.default,{maskClosable:!1,customHeader:(0,y.langCheck)("ZoneSetting-000004","pages",t),wrapClassName:"add-not-meta-data",visible:this.props.addDataModalVisibel,okText:(0,y.langCheck)("ZoneSetting-000005","pages",t),cancelText:(0,y.langCheck)("ZoneSetting-000006","pages",t),onOk:this.onOkDialog,onCancel:this.showModalHidden,fieldid:"addNotMeta",width:600,height:220},f.default.createElement("div",null,f.default.createElement("div",{className:"code-div",ref:"addNotMetaCodeDiv",style:""===this.state.explainForCode?{marginBottom:"19.09px"}:{}},f.default.createElement("span",null,(0,y.langCheck)("ZoneSetting-000007","pages",t)),f.default.createElement(n.default,{className:""===this.state.explainForCode?"":"has-error",ref:"addNotMetaDataInputDom",placeholder:(0,y.langCheck)("ZoneSetting-000008","pages",t),value:this.state.notMetaDataCode,onChange:this.changeNotMetaDataCode,onPressEnter:this.onPressEnter,fieldid:"notMetaCode"}),f.default.createElement("br",null),f.default.createElement("div",{style:{marginLeft:"26%",visibility:""===this.state.explainForCode?"hidden":"visible"},className:"form-explain"},this.state.explainForCode)),f.default.createElement("div",{ref:"addNotMetaNameDiv",className:"not-code",style:""===this.state.explainForName?{marginBottom:"19.09px"}:{}},f.default.createElement("span",null,(0,y.langCheck)("ZoneSetting-000009","pages",t)),f.default.createElement(x,{placeholder:(0,y.langCheck)("ZoneSetting-000010","pages",t),attrcode:"label",value:this.state.notMetaDataName,onChange:this.changeNotMetaDataName,onBlur:this.changeNotMetaDataName,fieldid:"notMetaName",languageMeta:a}),f.default.createElement("br",null),f.default.createElement("div",{style:{marginLeft:"26%",visibility:""===this.state.explainForName?"hidden":"visible"},className:"form-explain"},this.state.explainForName))))}}]),t}(p.Component);t.default=(0,m.connect)((function(e){return{areaList:e.zoneSettingData.areaList}}),{updateAreaList:b.updateAreaList,updateSelectCard:b.updateSelectCard,updateSelectArea:b.updateSelectArea})(E)},1350:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=m(a(29)),o=m(a(26)),l=m(a(5)),i=m(a(8)),s=m(a(6)),c=m(a(7)),d=a(1),u=m(d),p=a(1037),f=a(38),g=a(1095);function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,p.DropTarget)("area",{drop:function(e,t,a){"card"===t.getItem().type&&e.onDrop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.group,a=e.isActive,n=e.contentVisible,o=e.renderCard,l=e.onClick,i=e.renderHeader,s=e.emptyText,c=e.connectDropTarget,d=e.areaHide,p=t.queryPropertyList,f=[].concat((0,r.default)(p),[{blank:!0,pk_form_property:"blank",areaid:t.pk_area}]),m=(0,g.processClass)(t.code)||"unknow";return!d[t.pk_area]&&c(u.default.createElement("div",{type:"ncdiv",fieldid:t.code+"_group",className:"form-area-group "+(a?"active":"")+"  search-area-"+(String(t.code).replace(/\.|\&|\#/g,"")||"unknow")+" drag-mask-"+m,onClick:l},i,u.default.createElement("div",{className:"form-area-content",style:{display:n?"block":"none"}},f.length>0?f.map(o):u.default.createElement("div",{className:"empty-area"},u.default.createElement("i",{className:"iconfont icon-zhuyi1"}),s))))}}]),t}(d.Component))||n;t.default=(0,f.connect)((function(e){return{areaHide:e.zoneSettingData.areaHide}}))(h)},1351:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=g(a(29)),o=g(a(26)),l=g(a(5)),i=g(a(8)),s=g(a(6)),c=g(a(7)),d=a(1),u=g(d),p=a(1037),f=a(38);function g(e){return e&&e.__esModule?e:{default:e}}var m=(0,p.DropTarget)("area",{drop:function(e,t,a){"card"===t.getItem().type&&e.onDrop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.fold,a=e.isActive,n=e.renderCard,o=e.visible,l=e.onClick,i=e.renderHeader,s=e.connectDropTarget,c=e.areaHide,d=[].concat((0,r.default)(t.queryPropertyList),[{blank:!0,areaid:t.pk_area,code:"blank"}]);return!c[t.pk_area]&&s(u.default.createElement("div",{className:"form-area-group "+(a?"active":""),style:{display:o?"block":"none"},onClick:l},i,u.default.createElement("div",{className:"form-area-content",fieldid:"content"},d.map(n))))}}]),t}(d.Component))||n;t.default=(0,f.connect)((function(e){return{areaHide:e.zoneSettingData.areaHide}}))(m)},1352:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=v(a(441)),o=v(a(29)),l=v(a(26)),i=v(a(5)),s=v(a(8)),c=v(a(6)),d=v(a(7));a(432);var u=a(1),p=v(u),f=a(1037),g=v(a(23)),m=a(38),h=a(1095),b=a(404);function v(e){return e&&e.__esModule?e:{default:e}}var y=g.default.base.NCDiv,k=(0,f.DropTarget)("area",{drop:function(e,t,a){"card"===t.getItem().type&&e.onDrop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.areaClassName,a=e.side,n=e.children,l=e.isActive,i=e.renderCard,s=e.visible,c=e.renderHeader,d=e.onClick,u=e.connectDropTarget,f=a.queryPropertyList,g=[].concat((0,o.default)(f),[{blank:!0,areaid:a.pk_area,code:"blank",renderType:"tableSide"}]),m=(0,h.processClass)(a.code)||"unknow";return p.default.createElement(r.default,{getContainer:document.getElementsByClassName("template-setting-content")[0],closable:!1,placement:"right",maskClosable:!1,width:725,visible:s,mask:!0,zIndex:180,destroyOnClose:!0,style:{padding:0,height:"100%"},maskStyle:{left:this.props.leftSiderShow?b.LEFT_SIDER_WIDTH+16:16}},p.default.createElement("div",{className:"drawer-content"},p.default.createElement("div",{className:t+" side-area search-area-"+(String(a.code).replace(/\.|\&|\#/g,"")||"unknow"),style:{position:"static"},onClick:d},p.default.createElement(y,{className:"table-side-area",fieldid:"table-side",areaCode:y.config.Area},c,u(p.default.createElement("div",{className:"area-item-content drag-mask-"+m,fieldid:"content"},p.default.createElement("div",{className:"form-area-group "+(l?"active":"")},p.default.createElement("div",{className:"form-area-content"},g.map(i))))))),n&&n()))}}]),t}(u.Component))||n;t.default=(0,m.connect)((function(e){return{leftSiderShow:e.zoneSettingData.leftSiderShow}}),{})(k)},1353:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=h(a(26)),o=h(a(5)),l=h(a(8)),i=h(a(6)),s=h(a(7)),c=a(1),d=h(c),u=a(38),p=a(1037),f=a(1084),g=a(404),m=h(a(1211));function h(e){return e&&e.__esModule?e:{default:e}}var b=h(a(23)).default.PubSub,v={beginDrag:function(e){return e.isImplement||(e.updateSelectArea(e.grandson),(0,g.removeSelectCardCls)()),{id:e.grandson.pk_area,index:e.grandsonIndex,type:"area",areaType:"grandson"}}},y=(0,p.DragSource)("area",v,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(n=(0,p.DropTarget)("area",{drop:function(e,t,a){var n=t.getItem();if("card"===n.type)e.onDrop(t);else if("left"!==n.from){var r=n.index,o=e.grandsonIndex;if(r===o||e.isImplement)return;e.onDragArea(r,o),t.getItem().index=o}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.pubsub=(0,g.subscribeSetActiveKey)(this.props.grandson,this.props.onTabChange)}},{key:"componentWillUnmount",value:function(){b.unsubscribe(this.pubsub)}},{key:"render",value:function(){var e=this.props,t=e.areaClassName,a=e.grandson,n=(e.isActive,e.isTile),r=e.renderCard,o=e.contentVisible,l=e.renderHeader,i=e.onClick,s=e.connectDragSource,c=e.connectDropTarget;return!e.areaHide[a.pk_area]&&s(c(d.default.createElement("div",{type:"ncdiv",fieldid:a.code+"_area",className:t+" search-area-"+(String(a.code).replace(/\.|\&|\#/g,"")||"unknow"),onClick:i},d.default.createElement(m.default,{isShow:o,isTile:n,areaItem:a,renderHeader:l,renderCard:r,activeTabKey:this.props.activeTabKey,onAreaClick:this.props.onAreaClick,onTabChange:this.props.onTabChange,onTabPaneDrop:this.props.onTabPaneDrop,multiOptions:this.props.multiOptions}))))}}]),t}(c.Component))||n)||n;t.default=(0,u.connect)((function(e){return{isImplement:e.zoneSettingData.isImplement,areaHide:e.zoneSettingData.areaHide}}),{updateSelectArea:f.updateSelectArea})(y)},1354:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(2)),r=f(a(26)),o=f(a(5)),l=f(a(8)),i=f(a(6)),s=f(a(7));t.default=function(e){return function(t){return function(a){function u(){var t,a,n,l;(0,o.default)(this,u);for(var s=arguments.length,f=Array(s),g=0;g<s;g++)f[g]=arguments[g];return a=n=(0,i.default)(this,(t=u.__proto__||(0,r.default)(u)).call.apply(t,[this].concat(f))),n.state={showTabsMoreBtn:!1},n.getAllTabs=function(){var t=n.props.areaItem,a=t[[p.TAB_FLAG[e]]];return a?[t].concat(a):[t]},n.getMoreMenu=function(){var e=n.getAllTabs();return c.default.createElement(h,{className:"mutitabs-menu",onSelect:function(t){var a=t.key,r=e.find((function(e){return e.code===a}))||{};(0,p.setActiveTabKey)({activeKey:a,areaCode:n.props.areaItem.code}),n.props.updateSelectArea(r)}},e.map((function(e){return c.default.createElement(b,{key:e.code},e.name)})))},n.checkShowTabsMoreBtn=function(){setTimeout((function(){var e=(0,d.findDOMNode)(n.component),t=!(!e||!e.querySelector(".wui-tabs-tab-next.wui-tabs-tab-arrow-show"));n.setState({showTabsMoreBtn:t})}),0)},n.renderTabsExtraArea=function(){var e=n.state.showTabsMoreBtn?{}:{display:"none"};return c.default.createElement(m,{trigger:["click"],overlay:n.getMoreMenu(),animation:"slide-up",placement:"topLeft",overlayClassName:"multabs-menu-list"},c.default.createElement("div",{className:"tab-opr-more",style:e},c.default.createElement("i",{className:"iconfont icon-gengduomoban"})))},l=a,(0,i.default)(n,l)}return(0,s.default)(u,a),(0,l.default)(u,[{key:"componentDidMount",value:function(){this.checkShowTabsMoreBtn()}},{key:"componentWillReceiveProps",value:function(e){this.checkShowTabsMoreBtn()}},{key:"render",value:function(){var e=this,a=(0,n.default)({tabsExtraArea:this.renderTabsExtraArea()},this.props);return c.default.createElement(t,(0,n.default)({ref:function(t){return e.component=t}},a))}}]),u}(c.default.Component)}};var c=f(a(1)),d=a(10),u=f(a(23)),p=a(404);function f(e){return e&&e.__esModule?e:{default:e}}var g=u.default.base,m=g.NCDropdown,h=g.NCMenu,b=h.Item},1355:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=k(a(2)),l=k(a(26)),i=k(a(5)),s=k(a(8)),c=k(a(6)),d=k(a(7)),u=a(1),p=k(u),f=k(a(403)),g=a(38),m=a(404),h=a(1084),b=a(20),v=k(a(23)),y=a(405);function k(e){return e&&e.__esModule?e:{default:e}}a(1356);v.default.ajax;var C=v.default.base,S=v.default.high.Transfer,w=C.NCCheckbox,x=(n=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));r.call(a);var n=e.areaIndex,o=e.areaList;return a.state={dataSource:a.transferData(o[n].queryPropertyList),targetKeys:[],isFirst:!1,isSecond:!1},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.transferArea(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.transferArea(e)}},{key:"render",value:function(){var e=this.props,t=e.show,a=(e.areaIndex,e.areaList,e.json),n=e.multiOptions,r=this.state,o=r.dataSource,l=r.targetKeys,i=r.areaOne,s=r.areaTwo,c=r.isFirst,d=r.isSecond,u={dataSource:o,targetKeys:l,rowTitle:"title",rowChildren:"children",treeType:!1,onTargetKeysChange:this.onTargetKeysChange,checkable:!0,className:"sync-transfer",showMoveBtn:!1,showSearch:!0,lazy:{container:"modal"},listRender:function(e){e.item;return e.title},searchPlaceholder:(0,b.langCheck)("ZoneSetting-000276","pages",a)};return p.default.createElement(f.default,{className:"sync-modal",maskClosable:!1,visible:t,onOk:this.handleConfirm,onCancel:this.handleCancel,okText:(0,b.langCheck)("ZoneSetting-000005","pages",a),cancelText:(0,b.langCheck)("ZoneSetting-000006","pages",a),width:"850px",height:"500px",title:(0,b.langCheck)("ZoneSetting-000261","pages",a)},p.default.createElement(S,u),p.default.createElement("div",{className:"sync-checkbox"},p.default.createElement("div",{className:"sync-text"},p.default.createElement("span",null,(0,b.langCheck)("ZoneSetting-000265","pages",a),":")),i.area&&p.default.createElement("div",{className:"sync-checkbox-first"},p.default.createElement(w,{checked:c,onChange:this.handleCheckOne}),p.default.createElement("span",{className:"sync-checkbox-text",onClick:this.handleClickOne},(0,y.getMultiLangText)(i.area,"name",n))),s.area&&p.default.createElement("div",{className:"sync-checkbox-second"},p.default.createElement(w,{checked:d,onChange:this.handleCheckTwo}),p.default.createElement("span",{className:"sync-checkbox-text",onClick:this.handleClickTwo},(0,y.getMultiLangText)(s.area,"name",n)))),p.default.createElement("div",{className:"sync-tooltip"},p.default.createElement("div",{className:"sync-tooltip-text"},p.default.createElement("span",null,(0,b.langCheck)("ZoneSetting-000262","pages",a),":"),p.default.createElement("br",null),p.default.createElement("span",null,"1.",(0,b.langCheck)("ZoneSetting-000263","pages",a),";"),p.default.createElement("br",null),p.default.createElement("span",null,"2.",(0,b.langCheck)("ZoneSetting-000264","pages",a)))))}}]),t}(u.Component),r=function(){var e=this;this.onTargetKeysChange=function(t){e.setState({targetKeys:t},(function(){console.log(e.state.targetKeys)}))},this.handleConfirm=function(){e.syncConfirm(),e.props.close(!1)},this.handleCancel=function(){e.props.close(!1)},this.transferData=function(t){return t.map((function(t){var a=(0,y.getMultiLangText)(t,"label",e.props.multiOptions);return{key:t.code,title:a||""}}))},this.checkAreaType=function(e){var t=m.checkAreaType.isFold,a=m.checkAreaType.isTable,n=m.checkAreaType.isSide;return t(e)?"fold":a(e)?"table":n(e)?"side":void 0},this.transferNewAreaList=function(e){var t=[];return e.forEach((function(e){e&&(t.push(e),Array.isArray(e.tabs)&&(t=t.concat(e.tabs)))})),t},this.transferArea=function(t){t.json;var a=t.newAreaList,n=t.areaList[t.areaIndex],r=e.transferNewAreaList(a),o={},l={};switch(e.checkAreaType(n)){case"table":var i=r.filter((function(e){return e})).find((function(e){return e.pk_area==n.pk_area}));o.area=i&&i.sides&&i.sides.find((function(e){return"edit"==e.areastatus})),o.code="issyncside",l.area=i&&i.sides&&i.sides.find((function(e){return"browse"==e.areastatus})),l.code="issyncfold";break;case"fold":o.area=r.filter((function(e){return e})).find((function(e){return e.code==n.relationcode})),o.code="issynclist",l.area=o.area&&o.area.sides&&o.area.sides.find((function(e){return"edit"==e.areastatus})),l.code="issyncside";break;case"side":o.area=r.filter((function(e){return e})).find((function(e){return e.code==n.relationcode})),o.code="issynclist",l.area=o.area&&o.area.sides&&o.area.sides.find((function(e){return"browse"==e.areastatus})),l.code="issyncfold"}e.setState({areaOne:o,areaTwo:l})},this.handleCheckOne=function(t){e.setState({isFirst:t})},this.handleCheckTwo=function(t){e.setState({isSecond:t})},this.handleClickOne=function(){e.setState({isFirst:!e.state.isFirst})},this.handleClickTwo=function(){e.setState({isSecond:!e.state.isSecond})},this.syncConfirm=function(){var t=e.state,a=t.isFirst,n=t.isSecond,r=t.targetKeys,l=t.areaOne,i=t.areaTwo,s=e.props,c=s.areaList,d=s.updateAreaList,u=s.areaIndex;if(l.area||i.area){c=_.cloneDeep(c);var p=["pk_form_property","pk_query_property","areaid","width","position","isnextrow",l.code,i.code],f=c[u],g=f?f.queryPropertyList:[];g=_.cloneDeep(g);var m=l.area?l.area.queryPropertyList:[];m=_.cloneDeep(m);var h=void 0,b=i.area?i.area.queryPropertyList:[];b=_.cloneDeep(b);var v=void 0;r.forEach((function(e){var t=g.find((function(t){return t.code==e}));if(l.area&&(t[l.code]=a),i.area&&(t[i.code]=n),a){h=m.find((function(t){return t.code==e})),h=_.cloneDeep(h);var r=_.cloneDeep(t);p.forEach((function(e){delete r[e]})),h?h=(0,o.default)({},h,r):(r.areaid=l.area.pk_area,r.pk_query_property="",r.pk_form_property="",h=r)}if(n){v=b.find((function(t){return t.code==e})),v=_.cloneDeep(v);var s=_.cloneDeep(t);p.forEach((function(e){delete s[e]})),v?v=(0,o.default)({},v,s):(s.areaid=i.area.pk_area,s.pk_query_property="",s.pk_form_property="",v=s)}c.forEach((function(r){if(r.pk_area==f.pk_area){var o=r.queryPropertyList.findIndex((function(t){return t.code==e}));r.queryPropertyList[o]=t}if(l.area&&a&&r.pk_area==l.area.pk_area){var s=r.queryPropertyList.findIndex((function(t){return t.code==e}));-1!==s?r.queryPropertyList[s]=h:(h.position=r.queryPropertyList.length+1,r.queryPropertyList.push(h))}if(i.area&&n&&r.pk_area==i.area.pk_area){var c=r.queryPropertyList.findIndex((function(t){return t.code==e}));-1!==c?r.queryPropertyList[c]=v:(v.position=r.queryPropertyList.length+1,r.queryPropertyList.push(v))}}))})),d(c)}}},n);t.default=(0,g.connect)((function(e){return{selectedArea:e.zoneSettingData.selectedArea,areaList:e.zoneSettingData.areaList,templetid:e.zoneRegisterData.templetid,newAreaList:e.zoneSettingData.newAreaList}}),{updateAreaList:h.updateAreaList})(x)},1356:function(e,t,a){var n=a(1357);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1357:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".sync-modal .base-modal-body{padding:15px 35px}.sync-modal .sync-transfer{height:290px}.sync-modal .sync-transfer .wui-transfer .wui-transfer-list{width:350px}.sync-modal .sync-transfer .wui-transfer .wui-transfer-list .wui-transfer-list-body-search-wrapper{width:80%}@media screen and (max-width:1440px){.sync-modal .sync-transfer{height:290px}}.sync-modal .sync-checkbox{margin-top:10px;display:flex}.sync-modal .sync-checkbox .sync-checkbox-first,.sync-modal .sync-checkbox .sync-checkbox-second{margin-left:20px}.sync-modal .sync-checkbox .wui-checkbox{margin:unset}.sync-modal .sync-checkbox .sync-checkbox-text{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.sync-modal .sync-tooltip{display:flex;margin-top:10px;padding:0 20px}.sync-modal .sync-tooltip .sync-tooltip-text{color:#555;font-size:12px;padding-left:2px}",""])},1358:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=I(a(3)),r=I(a(1038)),o=I(a(22)),l=I(a(29)),i=I(a(97)),s=I(a(2)),c=I(a(26)),d=I(a(5)),u=I(a(8)),p=I(a(6)),f=I(a(7)),g=I(a(121)),m=I(a(119));a(180),a(178);var h=a(1),b=I(h),v=I(a(0)),y=I(a(68)),k=I(a(32)),C=a(38),S=I(a(403)),w=a(405),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(w),E=a(20),T=a(404),M=a(1084),A=I(a(23)),_=I(a(1096)),D=a(1188);function I(e){return e&&e.__esModule?e:{default:e}}var N=A.default.base,L=N.NCDiv,P=N.NCCheckbox,O=N.NCTree,Z=(N.NCFormControl,O.NCTreeNode),j=m.default.Search,V=(g.default.Option,function(e){function t(e){(0,d.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.showModalHidden=function(){a.setModalVisible(!1)},a.setModalVisible=function(e){a.setState({selectedKeys:[],checkedKeys:[],selectedNodes:[],checkedNodes:[],needToBeAllSelectNodeList:[],searchValue:"",expandedKeys:[],searchExpandedKeys:[],searchSelectedKeys:[]}),a.props.setModalVisible(e)},a.onOkMoveDialog=function(){var e=a.state.selectedNodes,t=a.props,n=t.targetAreaID,r=t.json,o=[];y.default.forEach(e,(function(e,t){var l=e.props.dataRef,i=l.myUniqID,s=l.datatype,c=l.refname,d=(l.refcode,l.pid,l.refpk),u=l.isLeaf,p=l.modelname,f=l.length,g=l.notSearchAreaCode,m=l.proid,h=l.resid,b=l.readonly,v={};if("0"===a.props.targetAreaType){var y=x.getObjNameByDatatype(s,x.opersignObj),k=x.getObjNameByDatatype(s,(0,w.opersignNameObj)());v={pk_query_property:"newMetaData_"+i,areaid:n,datatype:s,code:i,label:c,metapath:i,isnotmeta:!1,isuse:!0,opersign:y||"=@>@>=@<@<=@like@",opersignname:k||(0,E.langCheck)("ZoneSetting-000001","pages",r),defaultvalue:"",isfixedcondition:!1,required:!1,disabled:!1,visible:"56"!==s,ismultiselectedenabled:!1,isquerycondition:!0,refname:"204"===s?p:"-99",containlower:!u,ischeck:!1,isbeyondorg:!1,usefunc:"34"===s,showtype:"1",returntype:"refpk",define1:"",define2:"",define3:"",define4:"",define5:"",itemtype:"input",myrefpk:d,visibleposition:"",tablecode:"",querytablename:"",maxlength:f}}else v={pk_query_property:"newMetaData_"+i,areaid:n,code:g||i,datatype:s,label:c,metapath:i,color:(0,w.colorObj)()&&(0,w.colorObj)()[0].value,isrevise:!1,required:!1,disabled:!1,visible:"56"!==s,maxlength:f,defaultvalue:"",hyperlinkflag:!1,defaultvar:"",define1:"",define2:"",define3:"",itemtype:"input",myrefpk:d};"1"===a.props.targetAreaType&&(v.colnum="1",v.isnextrow=!1),"2"===a.props.targetAreaType&&(v.width="",v.istotal=!1),"204"===v.datatype&&(v.metaid=d,v.iscode=!1,v.modelname=p),"56"===v.datatype&&(v.isdefined=!0),"31"!==v.datatype&&"52"!==v.datatype||(v.dataval="2,,"),v.itemtype=x.getItemtypeByDatatype(v.datatype),v.proid=m,v.resid=h,!0===b&&(v.disabled=!0),o.push(v)}));var l=[];y.default.forEach(o,(function(e){"203"===e.datatype&&(console.log(e.label),l.push(e.myrefpk))})),l.length>0?(0,k.default)({url:"/nccloud/platform/templet/getEnumValue.do",info:{name:(0,E.langCheck)("ZoneSetting-000017","pages",r),action:(0,E.langCheck)("ZoneSetting-000122","pages",r)},data:l,success:function(e){if(e){var t=e.data,n=t.data,r=t.success;r&&n&&y.default.forEach(n,(function(e){y.default.forEach(o,(function(t){y.default.forEach(e,(function(e){e.id===t.myrefpk&&(y.default.isEmpty(t.dataval)?t.dataval=e.name+"="+e.value:t.dataval=t.dataval+","+e.name+"="+e.value)}))}))})),a.setDatavalForCard(o,!1)}}}):a.setDatavalForCard(o,!1)},a.setDatavalForCard=function(e,t){var n=a.props.json;if("0"!==a.props.targetAreaType){var r=[];y.default.forEach(e,(function(e){"204"===e.datatype&&r.push(e.modelname)})),r.length>0?(0,k.default)({url:"/nccloud/platform/templet/getRefDefaultSel.do",info:{name:(0,E.langCheck)("ZoneSetting-000017","pages",n),action:(0,E.langCheck)("ZoneSetting-000024","pages",n)},data:r,success:function(n){if(n){var r=n.data,o=r.data,l=r.success;l&&o&&y.default.forEach(o,(function(t){y.default.forEach(e,(function(e){t.name===e.modelname&&(e.dataval=t.pk_refinfo+",code=1",e.refname=t.name,e.refcode=t.refpath)}))})),e[0]&&T.selectCardFromOther.call(a,e[0]),a.props.addCard(e),a.setModalVisible(t)}}}):(e[0]&&T.selectCardFromOther.call(a,e[0]),a.props.addCard(e),a.setModalVisible(t))}else e[0]&&T.selectCardFromOther.call(a,e[0]),a.props.addCard(e),a.setModalVisible(t)},a.onSelect=function(e,t){a.setState({checkedKeys:e,selectedKeys:e,selectedNodes:t.selectedNodes,checkedNodes:t.selectedNodes})},a.onCheck=function(e,t){a.setState({selectedKeys:e,checkedKeys:e,checkedNodes:t.checkedNodes,selectedNodes:t.checkedNodes})},a.renderTreeNodes=function(e){return e.map((function(e){var t="fieldid_"+e.refcode+"_node";return e.children?b.default.createElement(Z,{title:e.title,key:e.key,dataRef:e,className:t},a.renderTreeNodes(e.children)):(e.isleaf,b.default.createElement(Z,(0,s.default)({},e,{dataRef:e,className:t})))}))},a.onLoadData=function(e){var t=a.props.json;return new i.default((function(n){e.props.children?n():(0,k.default)({url:"/nccloud/platform/templet/querymetapro.do",info:{name:(0,E.langCheck)("ZoneSetting-000017","pages",t),action:(0,E.langCheck)("ZoneSetting-000020","pages",t)},data:{metaid:e.props.refpk},success:function(t){if(t){var r=t.data,o=r.data,i=r.success;if(i&&o&&o.rows&&o.rows.length>0){var c=[];o.rows.map((function(t,n){var r=(0,s.default)({},t,{title:t.refcode+" "+t.refname,key:e.props.myUniqID+"."+t.refcode,myUniqID:e.props.myUniqID+"."+t.refcode,isLeaf:t.isleaf});"0"!==a.props.targetAreaType&&e.props.notSearchAreaCode&&(r.notSearchAreaCode=e.props.notSearchAreaCode+"."+t.refcode),"0"!==a.props.targetAreaType&&"205"===e.props.datatype&&(r.notSearchAreaCode=""+t.refcode),c.push(r)})),e.props.dataRef.children=[].concat(c),a.props.updateMetaTreeData([].concat((0,l.default)(a.props.metaTree))),n()}}}})}))},a.getContentDom=function(){var e=a.props.metaTree;return b.default.createElement("div",{className:"template-setting-left-sider template-setting-sider"},a.getModalTitleDom(),b.default.createElement("div",{className:"sider-content meta-tree"},b.default.createElement(L,{className:"sider-tree",fieldid:"addMeta",areaCode:L.config.TreeCom},b.default.createElement(O,{checkable:!0,checkStrictly:!0,loadData:a.onLoadData,showLine:!0,multiple:!0,onSelect:a.onSelect,selectedKeys:a.state.selectedKeys,checkedKeys:a.state.checkedKeys,onCheck:a.onCheck,fieldid:"meta"},a.renderTreeNodes(e)))))},a.selectAllTreeNode=function(e,t){var n=a.state,r=n.selectedKeys;n.checkedKeys;r=y.default.cloneDeep(r),e?y.default.forEach(t,(function(e,t){-1===r.indexOf(e.myUniqID)&&"205"!==e.datatype&&(r.push(e.myUniqID),a.state.selectedNodes.push({props:{dataRef:(0,s.default)({},e)}}))})):(y.default.forEach(t,(function(e,t){y.default.remove(r,(function(t){return t===e.myUniqID}))})),y.default.forEach(t,(function(e,t){y.default.remove(a.state.selectedNodes,(function(t){return t.props.dataRef.myUniqID===e.myUniqID}))}))),a.setState({selectedKeys:r,checkedKeys:r})},a.handleChangeSelectTreeNode=function(e){var t=a.props,n=(t.metaTree,t.canSelectTreeNodeList);y.default.forEach(n,(function(t){-1===e.indexOf(t.refcode+" "+t.refname)?null!==t.children&&setTimeout((function(){a.selectAllTreeNode(!1,t.children)}),0):null!==t.children&&setTimeout((function(){a.selectAllTreeNode(!0,t.children)}),0)})),a.setState({needToBeAllSelectNodeList:e})},a.onSearchFieldChange=function(e){var t=a.props,n=(t.origTree,t.searchField,t.updateMetaTree),r=function(e){return function(){var t=a.props.origTree;0===e.length&&(a.setState({searchExpandedKeys:[]}),n(t,t)),a.setState({searchValue:e})}}(e.target.value);(0,E.debounce)(r,300)()},a.onSearchFieldClean=function(e){var t=a.props,n=t.origTree,r=t.updateMetaTree,o=t.searchField;ReactDOM.findDOMNode(o).querySelector(".ant-input").value="",a.setState({searchValue:"",searchExpandedKeys:[],curTree:n}),r(n,n)},a.onSearchMeta=function(e){if(e){var t=a.props,n=t.origTree,r=t.updateMetaTree,o=a.state,l=(o.searchTreeData,o.searchSelectedKeys),i=[],s=D.queryMetaPropByKeyWords.call(a,e,n,i);s.getMetaTreeData().children;s.getRoot().children.length>0?(a.setState({searchExpandedKeys:i,searchSelectedKeys:l}),r(n,s)):a.setState({searchExpandedKeys:[],searchSelectedKeys:[]})}},a.getModalTitleDom=function(){var e=a.props.json,t=a.state.searchValue;return b.default.createElement("div",{className:"customer-header",style:{height:(a.props.canSelectTreeNodeList.length,"40px")}},b.default.createElement("div",{className:"metatree-search-input",style:{width:"250px",display:"inline-block"}},b.default.createElement(j,{ref:function(e){return a.props.searchField=e},className:"dnd-cancel",placeholder:(0,E.langCheck)("ZoneSetting-000322","pages",e),onChange:a.onSearchFieldChange,onSearch:a.onSearchMeta}),t&&b.default.createElement("i",{class:"icon iconfont icon-qingkong",onClick:a.onSearchFieldClean})),b.default.createElement(P,{className:"dnd-cancel",onChange:function(e){a.selectAllTreeNode(e,a.props.metaTree)}},(0,E.langCheck)("ZoneSetting-000125","pages",e)),void a.props.canSelectTreeNodeList.length)},a.onLoadSubTreeData=function(e){var t=a.props,n=t.origTree,r=t.curTree,o=t.updateMetaTree,l=a.state.searchValue,s=e.props,c=s.children,d=s.refpk,u=s.myUniqID,p=(s.datatype,s.dataRef,n.getNode((function(e){return e.data.myUniqID===u})),[]);return new i.default((function(e){c?e():D.asyncQueryMetaPro.call(a,d).then((function(t){var i=n,s=[];l?s=D.appendMetaTreeNodes.call(a,t.rows,u,r):(i=D.appendMetaTreeNodes.call(a,t.rows,u,n),s=D.queryMetaPropByKeyWords.call(a,l,i,p)),o(i,s);var c=i.getMetaTreeData();a.props.updateMetaTreeData(c.children),e()}))}))},a.onSelectTreeNode=function(e,t){a.setState({selectedKeys:e,searchSelectedKeys:e,checkedKeys:e,selectedNodes:t.selectedNodes,checkedNodes:t.selectedNodes})},a.onCheckTreeNode=function(e,t){a.setState({selectedKeys:e,searchSelectedKeys:e,checkedKeys:e,checkedNodes:t.checkedNodes,selectedNodes:t.checkedNodes})},a.onExpandTreeNode=function(e,t,n){var r=t.expanded,o=t.node,l=y.default.result(o,"props.dataRef.myUniqID");!1===r&&(e=y.default.filter(e,(function(e){return-1===e.indexOf(l)}))),"search"===n?a.setState({searchExpandedKeys:e}):a.setState({expandedKeys:e})},a.renderMetaTreeNode=function(e,t){var n=a.state,r=n.searchValue,l=n.expandedKeys,i=e.data,c=(e.parent,e.children),d=(i.children,(0,o.default)(i,["children"])),u=d.refcode,p=d.title,f=(d.proid,d.key),g=d.isLeaf,m="fieldid_"+u+"_node",h=p.search(r),v=p.substr(0,h),y=p.substr(h+r.length),k=h>-1?b.default.createElement("span",null,v,b.default.createElement("span",{className:"wui-tree-searchable-filter"},r),y):b.default.createElement("span",null,p),C=b.default.createElement("span",{className:"icon iconfont "+(l.includes(u)?"icon-wenjianjiadakai":"icon-wenjianjia")}),S=void 0;if(c.length>0){var w=c.map((function(e){return t.get(e)}));S=b.default.createElement(Z,{key:f,dataRef:d,className:""+m,icon:C,title:k},w)}else S=g?b.default.createElement(Z,(0,s.default)({},d,{dataRef:d,className:""+m,title:k})):b.default.createElement(Z,(0,s.default)({},d,{dataRef:d,className:""+m,icon:C,title:k}));return S},a.renderMetaTreeNodes=function(){var e=a.props.curTree;if(!(e instanceof _.default))return null;console.time("RenderMetaTreeNodes"),console.time("SerializeMetaTreeNodes");var t=_.default.serialize(e);console.timeEnd("SerializeMetaTreeNodes");var n=t.nodes.reverse(),o=e.getRoot(),l=new r.default;return n.forEach((function(e){var t=a.renderMetaTreeNode(e,l);l.set(e,t)})),console.timeEnd("RenderMetaTreeNodes"),o.children.map((function(e){return l.get(e)}))},a.renderMetaTree=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=a.props,o=(r.metaTree,r.origTree,r.curTree,a.state),l=o.expandedKeys,i=o.selectedKeys,s=o.checkedKeys,c=o.searchSelectedKeys,d=o.searchExpandedKeys;o.searchValue;return"search"===t&&(i=c,l=d),b.default.createElement(O,(e={fieldid:"meta",checkable:!0,showIcon:!0,checkStrictly:!0},(0,n.default)(e,"checkable",!0),(0,n.default)(e,"showLine",!0),(0,n.default)(e,"multiple",!0),(0,n.default)(e,"selectedKeys",i),(0,n.default)(e,"checkedKeys",s),(0,n.default)(e,"expandedKeys",l),(0,n.default)(e,"loadData",a.onLoadSubTreeData),(0,n.default)(e,"onSelect",a.onSelectTreeNode),(0,n.default)(e,"onCheck",a.onCheckTreeNode),(0,n.default)(e,"onExpand",(function(e,n){a.onExpandTreeNode(e,n,t)})),e),a.renderMetaTreeNodes())},a.state={checkedKeys:[],selectedKeys:[],selectedNodes:[],searchValue:"",needToBeAllSelectNodeList:[],expandedKeys:[],searchExpandedKeys:[],searchSelectedKeys:[]},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderModalContent",value:function(){var e=this.state.searchValue;return b.default.createElement("div",{className:"template-setting-left-sider template-setting-sider"},this.getModalTitleDom(),b.default.createElement("div",{className:"sider-content meta-tree",style:{height:"65vh"}},b.default.createElement(L,{className:"sider-tree",fieldid:"addMeta",areaCode:L.config.TreeCom},this.renderMetaTree(e?"search":"default"))))}},{key:"render",value:function(){var e=this.props.json;return b.default.createElement(S.default,{maskClosable:!1,title:(0,E.langCheck)("ZoneSetting-000124","pages",e),wrapClassName:"meta-add-modal",visible:this.props.modalVisible,okText:(0,E.langCheck)("ZoneSetting-000005","pages",e),cancelText:(0,E.langCheck)("ZoneSetting-000006","pages",e),onOk:this.onOkMoveDialog,onCancel:this.showModalHidden,destroyOnClose:!0,width:"50%",fieldid:"addMeta",titleFieldid:(0,E.langCheck)("ZoneSetting-000124","pages",e)},this.renderModalContent())}}]),t}(h.Component));V.propTypes={origTree:v.default.object,curTree:v.default.object,updateMetaTreeData:v.default.func,updateMetaTree:v.default.func},t.default=(0,C.connect)((function(e){return{}}),{updateSelectCard:M.updateSelectCard,updateSelectArea:M.updateSelectArea})(V)},1359:function(e,t,a){e.exports=a.p+"images/template-empty-content.png"},1360:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(69)),r=C(a(424)),o=C(a(29)),l=C(a(26)),i=C(a(5)),s=C(a(8)),c=C(a(6)),d=C(a(7)),u=a(1),p=C(u),f=a(38),g=a(1084),m=C(a(403)),h=a(20),b=C(a(68)),v=C(a(1361)),y=a(404),k=C(a(1364));function C(e){return e&&e.__esModule?e:{default:e}}a(1189);var S=C(a(23)).default.base.NCTabs,w=S.NCTabPane,x="DEFAULT_TAB_NAME",E=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.initTabList=function(){var e=a.props.newAreaList.filter((function(e){return null!==e})),t=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((function(t){t&&("2"===t.areatype&&t.tabheadcode&&a.push(t.tabheadcode),t.tabs&&e(t.tabs,a))})),[].concat((0,o.default)(new r.default(a)))},n=t(e),l=e.filter((function(e){return a.isGrandsonTab(e)})).map((function(e){return e&&e.code})),i=[x].concat(n.filter((function(e){return e!==n[0]}))).concat(l),s=b.default.cloneDeep(e.filter((function(e){return e.tabs||e.tabheadcode||n.includes(e.code)||e.code===e.headcode||a.isGrandsonTab(e)}))),c=i.map((function(t){var n=e.find((function(e){return e.code===t}));if(t===x)return{name:a.props.zoneFormData.name,code:t};if(n){var r=n.name;if(n.grandsons){var o=n.sides&&n.sides.find((function(e){return y.checkAreaType.isSide(e)}));o&&(r=o.name)}return{name:r,code:t}}})).filter((function(e){return e})),d=function(r){var o={},l=function(e){var t=[],a=e&&e.tabs?"tabs":e.formTabs?"formTabs":"tabs";return e[a]?(t.push(e),e[a].map((function(e){t.push(e)}))):t.push(e),t};return r.forEach((function(r){o[r]=function r(o,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=i!==x&&e.find((function(e){return e.code===i}));return o.forEach((function(e){var o=l(e);if(i===x)"1"!==e.areatype&&e.code!==n[0]&&e.tabheadcode!==n[0]||s.push(a.createLaneItem(o));else if("2"===e.areatype&&e.code!==n[0]&&(e.code===i||e.tabheadcode===i))if(c&&c.grandsons&&c.grandsons.length){if(a.isGrandsonTab(e)){var d=t(e.grandsons),u=e.sides&&e.sides.find((function(e){return y.checkAreaType.isSide(e)}));u&&s.push(a.createLaneItem(u)),r(e.grandsons,d[0],s)}}else s.push(a.createLaneItem(o))})),s}(s,r)})),o}(i);a.setState({activeTabKey:c[0]&&c[0].code,tabKeyArr:c,tabListData:d})},a.isGrandsonTab=function(e){var t;if(!e.tabs)return(t=e)&&t.grandsons&&t.grandsons.find((function(e){return e.tabs||e.tabheadcode}))},a.createLaneItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{checked:!1,data:e=Array.isArray(e)?e:[e]}},a.handleHeadBtnClick=function(e){switch(e){case"checkAll":a.handleCheck("all");break;case"cancelAll":a.handleCheck("cancel");break;case"addFloor":a.addLane();break;case"mergeFloor":a.mergeFloor();break;case"splitFloor":a.splitFloor()}},a.mergeFloor=function(){var e=a.state,t=e.tabListData,n=e.activeTabKey,r=a.getCheckedFloor().filter((function(e){return e.data.length>0})),o=r[0]&&r[0].data[0],l=[];r.forEach((function(e){l=l.concat(e.data)}));var i=t[n].map((function(e){return e.checked&&(e.data[0]&&e.data[0].code===o.code?e.data=l:e=null),e})).filter((function(e){return null!==e}));t[n]=i,a.updateTabListData(t)},a.splitFloor=function(){var e=a.state,t=e.tabListData,n=e.activeTabKey,r=[];t[n].map((function(e){e.checked?e.data.forEach((function(e){r.push(a.createLaneItem(e))})):r.push(e)})),t[n]=r,a.updateTabListData(t)},a.handleTabChange=function(e){a.setState({activeTabKey:e})},a.handleCheck=function(e,t){var n=a.state.tabListData;n[a.state.activeTabKey].map((function(a,n){var r=a.data[0];"all"===e?(a.checked=!0,r&&"1"===r.areatype&&r.code&&r.code===r.headcode&&(a.checked=!1),r&&y.checkAreaType.isSide(r)&&(a.checked=!1)):"cancel"===e?a.checked=!1:t===n&&(a.checked=e)})),a.updateTabListData(n)},a.getCheckedFloor=function(){var e=a.state,t=e.tabListData,r=e.activeTabKey;return 0===(0,n.default)(t).length?[]:t[r].filter((function(e){return e.checked}))},a.updateTabListData=function(e){var t=b.default.cloneDeep(e);a.setState({tabListData:t})},a.renderHeadBtnArea=function(){var e=a.getCheckedFloor(),t=a.state.tabListData[a.state.activeTabKey]||[],n=[{name:(0,h.langCheck)("ZoneSetting-000270","pages",a.props.json),code:"checkAll",isshow:t.length>1?e.length!==t.length-1:0===e.length},{name:(0,h.langCheck)("ZoneSetting-000326","pages",a.props.json),code:"cancelAll",isshow:t.length>1?e.length===t.length-1:e.length===t.length},{name:(0,h.langCheck)("ZoneSetting-000323","pages",a.props.json),code:"addFloor",isshow:!0},{name:(0,h.langCheck)("ZoneSetting-000324","pages",a.props.json),code:"mergeFloor",group:!0,isshow:!0,type:"primary",disabled:e.length<2},{name:(0,h.langCheck)("ZoneSetting-000325","pages",a.props.json),code:"splitFloor",group:!0,isshow:!0,disabled:0===e.length||e.every((function(e){return e.data.length<=1}))}];return p.default.createElement("div",{className:"head-btns"},p.default.createElement(v.default,{dataSource:n,onClick:a.handleHeadBtnClick}))},a.renderLayContent=function(e){return p.default.createElement(k.default,{sourceData:e,onChecked:a.handleCheck,onDeleteLane:a.deleteLane,dropLogic:a.dropLogic,dragLane:a.dragLane,json:a.props.json,multiOptions:a.props.multiOptions})},a.renderModalContent=function(){var e=a.state,t=e.tabKeyArr,n=e.tabListData;if(1===t.length){var r=t[0],o=n[r.code];return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"tls-header"},a.renderHeadBtnArea()),a.renderLayContent(o))}return p.default.createElement("div",{className:"tls-header"},p.default.createElement(S,{activeKey:a.state.activeTabKey,className:"tls-tabs",extraContent:a.renderHeadBtnArea(),onChange:a.handleTabChange},t.map((function(e){return p.default.createElement(w,{tab:e.name,key:e.code},a.renderLayContent(n[e.code]))}))))},a.showOkDialog=function(){a.formatTabListData(),a.hiddenDialog()},a.formatTabListData=function(){var e=a.state.tabListData,t=b.default.cloneDeep(a.props.areaList),n=function(e,t){var a=[],n=b.default.cloneDeep(e);return n&&n.forEach((function(e){var n=e.data.filter((function(e){return e.areatype===t}));e.data=n,n.length>0&&a.push(e)})),a};e=function(e){for(var t in e){var a=e[t].filter((function(e){return e.data.length>0}));e[t]=a}return e}(e);var r=function(a){var r=e[a],o=n(r,"1"),l=n(r,"2"),i=l[0]&&l[0].data[0].code,s=void 0;a===x&&o.length&&(s=o[0]&&o[0].data[0].code),r.forEach((function(e,a){var n=e.data,o=n[0],l=o&&o.code;n.forEach((function(e,c){var d=t.findIndex((function(t){return t.pk_area===e.pk_area})),u=t[d];if(u.code===e.code&&(u.code===i||s&&u.code===s?u.associatedtab="":n.length>1?s&&e.code!==s&&"1"===u.areatype?u.associatedtab=s:e.code===l?u.associatedtab="":u.associatedtab=l:u.associatedtab=""),n.length>1&&o.pk_area!==e.pk_area){var p=t.splice(d,1)[0],f=n[c-1],g=t.findIndex((function(e){return e.pk_area===f.pk_area}));t.splice(g+1,0,p)}else if(a>0){var m=t.splice(d,1)[0],h=r[a-1],b=h&&h.data[h.data.length-1],v=t.findIndex((function(e){return e.pk_area===b.pk_area}));t.splice(v+1,0,m)}}))}))};for(var o in e)r(o);a.props.updateAreaList(t)},a.hiddenDialog=function(){a.props.setTabLayModalVisible(!1)},a.addLane=function(){var e=a.state.tabListData,t=a.createLaneItem();e[a.state.activeTabKey].push(t),a.updateTabListData(e)},a.deleteLane=function(e){var t=a.state.tabListData;t[a.state.activeTabKey].splice(e,1),a.updateTabListData(t)},a.dropLogic=function(e,t){var n=t.dragIndex,r=t.targetIndex,o=t.laneIndex,l=t.targetLaneIndex,i=a.state,s=i.tabListData,c=s[i.activeTabKey],d=c[o]&&c[o].data[n];c[o].data.splice(n,1),"lane"===e?c[l].data.push(d):"tag"===e&&c[l].data.splice(r,0,d),a.updateTabListData(s)},a.dragLane=function(e,t){var n=a.state.tabListData,r=n[a.state.activeTabKey];if(1===Math.abs(e-t)){var o=[r[t],r[e]];r[e]=o[0],r[t]=o[1]}else{var l=r.splice(e,1);n[a.state.activeTabKey]=r.slice(0,t).concat(l,r.slice(t))}a.updateTabListData(n)},a.state={activeTabKey:"",tabKeyArr:[],tabListData:{}},a}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.initTabList()}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.visible;return console.log("tabListData",this.state.tabListData),p.default.createElement("div",{className:"tls-container"},p.default.createElement(m.default,{maskClosable:!1,customHeader:(0,h.langCheck)("ZoneSetting-000246","pages",t),visible:a,onOk:this.showOkDialog,onCancel:this.hiddenDialog,className:"tab-lay-modal",size:"xlg",minHeight:500,okText:(0,h.langCheck)("ZoneSetting-000005","pages",t),cancelText:(0,h.langCheck)("ZoneSetting-000006","pages",t),fieldid:"tabLaySet"},this.renderModalContent()))}}]),t}(u.Component);t.default=(0,f.connect)((function(e){return{newAreaList:e.zoneSettingData.newAreaList,visible:e.zoneSettingData.showTabLaySetModal,areaList:e.zoneSettingData.areaList,zoneFormData:e.zoneSettingData.zoneFormData}}),{setTabLayModalVisible:g.setTabLayModalVisible,updateAreaList:g.updateAreaList})(E)},1361:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(26)),r=d(a(5)),o=d(a(8)),l=d(a(6)),i=d(a(7)),s=a(1),c=d(s);function d(e){return e&&e.__esModule?e:{default:e}}a(1362);var u=d(a(23)).default.base,p=u.NCButtonGroup,f=u.NCButton,g=u.NCMenu,m=u.NCDropdown,h=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.createBtn=function(e){return e.map((function(e){if(e.isshow){if("btn"==e.divide)return c.default.createElement(f,{className:"divide-btn",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,disabled:e.disabled,onClick:function(){a.props.onClick(e.code)}},e.name);if("select"==e.divide){var t=c.default.createElement(g,{onClick:function(){a.props.onClick(e.code)}},c.default.createElement(g.Item,{key:"1",fieldid:e.fieldid||e.code},c.default.createElement("div",null,e.name)));return c.default.createElement(m,{overlay:t,trigger:["click"],fieldid:e.dropdownFieldid},c.default.createElement(f,{className:"margin-left-1",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,is_arrow:!0,style:{minWidth:18}},c.default.createElement("i",{className:"iconfont icon-hangcaozuoxiala1"})))}return c.default.createElement(f,{className:"margin-left-6 "+(e.className?e.className:""),key:e.code,colors:e.type,fieldid:e.fieldid||e.code,disabled:e.disabled,onClick:function(){a.props.onClick(e.code)}},e.name)}return null}))},a.createBtnGroup=function(e){if(e.length>0){var t=e.filter((function(e){return e.isshow})),n=a.createBtn(e);return 1===t.length?n:c.default.createElement(p,null,n)}return null},a.createButton=function(e){var t=e.filter((function(e){return e.group})),n=e.filter((function(e){return!e.group}));return c.default.createElement("div",null,c.default.createElement("div",{style:{marginLeft:6}},a.createBtnGroup(t)),a.createBtn(n))},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"buttons-component "+(this.props.className?this.props.className:"")},this.createButton(this.props.dataSource))}}]),t}(s.Component);t.default=h},1362:function(e,t,a){var n=a(1363);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1363:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".buttons-component div{display:flex;align-items:center}.buttons-component .ant-btn-group{margin-left:6px}body .divide-btn{margin-left:6px;border-top-right-radius:0!important;border-bottom-right-radius:0!important}body .margin-left-1{margin-left:1px!important;width:18px;border-top-left-radius:0!important;border-bottom-left-radius:0!important;display:flex;justify-content:center;align-items:center;padding:0}body .margin-left-1 .iconfont{font-size:12px}",""])},1364:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(26)),r=u(a(5)),o=u(a(8)),l=u(a(6)),i=u(a(7)),s=a(1),c=u(s),d=u(a(1365));function u(e){return e&&e.__esModule?e:{default:e}}a(1189);var p=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"tls-content"},this.props.sourceData.map((function(t,a){var n=t.data,r=t.checked;return c.default.createElement(d.default,{key:a,data:n,area:n[0],laneIndex:a,dropLogic:e.props.dropLogic,dragLane:e.props.dragLane,deleteLane:e.props.onDeleteLane,json:e.props.json,multiOptions:e.props.multiOptions,checked:r,onChecked:function(t){return e.props.onChecked(t,a)}})})))}}]),t}(s.Component);t.default=p},1365:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=b(a(26)),o=b(a(5)),l=b(a(8)),i=b(a(6)),s=b(a(7)),c=a(1),d=b(c),u=a(1037),p=b(a(1366)),f=a(404),g=a(20),m=b(a(23));a(1189);var h=a(405);function b(e){return e&&e.__esModule?e:{default:e}}var v=m.default.base.NCCheckbox,y=(0,u.DragSource)("tag",{beginDrag:function(e){return{dragType:"lane",laneIndex:e.laneIndex,areaItem:e.area}},canDrag:function(e){return e.area&&"2"===e.area.areatype}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(n=(0,u.DropTarget)("tag",{drop:function(e,t){var a=e.laneIndex,n=e.area,r=t.getItem(),o=r.index,l=r.areaItem,i=r.dragType;if(t.isOver({shallow:!0})&&(!n||n.areatype===l.areatype))if("lane"===i){if(r.laneIndex===a)return;e.dragLane(r.laneIndex,a)}else{if(n&&n.areatype!==l.areatype)return;if(!n&&"1"===l.areatype)return;e.dropLogic("lane",{dragIndex:o,laneIndex:r.laneIndex,targetLaneIndex:a})}},canDrop:function(e){return!e.area||"2"==e.area.areatype}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(n=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.renderTags=function(e){return a.props.data.map((function(t,n){var r=t.name;if(r=(0,h.getMultiLangText)(t,"name",a.props.multiOptions),t)return d.default.createElement(p.default,{key:t.code,name:r,index:n,laneIndex:e,dropLogic:a.props.dropLogic,areaItem:t,nodrop:"1"==t.areatype&&t.headcode===t.code||f.checkAreaType.isSide(t)})}))},a.renderDelete=function(e){return d.default.createElement("span",{className:"lane-delete",onClick:function(){a.props.deleteLane(e)}},(0,g.langCheck)("ZoneSetting-000190","pages",a.props.json))},a.renderCheckbox=function(){var e=a.props.area,t=e&&"1"===e.areatype;return d.default.createElement(v,{checked:a.props.checked,disabled:t,onChange:a.props.onChecked})},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDragSource,a=e.connectDropTarget,n=e.area,r=e.laneIndex,o=e.isOver;return t(a(d.default.createElement("div",{className:"tls-list-container"+(o?" hover":"")},d.default.createElement("div",{className:"tls-list"},this.renderCheckbox(),d.default.createElement("span",{className:"lane-index"},r+1),d.default.createElement("div",{className:"tags"},this.renderTags(r)),!n&&this.renderDelete(r),n&&"1"!==n.areatype&&d.default.createElement("i",{className:"iconfont icon-tuodong"})))))}}]),t}(c.Component))||n)||n;t.default=y},1366:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=p(a(26)),o=p(a(5)),l=p(a(8)),i=p(a(6)),s=p(a(7)),c=a(1),d=p(c),u=a(1037);function p(e){return e&&e.__esModule?e:{default:e}}a(1189);var f=(0,u.DragSource)("tag",{beginDrag:function(e,t,a){return{index:e.index,laneIndex:e.laneIndex,canDrop:"2"==e.areaItem.areatype,areaItem:e.areaItem,areaComp:a}},canDrag:function(e){return"2"===e.areaItem.areatype||e.areaItem.headcode!==e.areaItem.code}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging(),canDrag:t.canDrag(),dragItem:t.getItem()}}))(n=(0,u.DropTarget)("tag",{drop:function(e,t){var a=t.getItem();t.isOver({shallow:!0})&&(e.areaItem&&e.areaItem.areatype!==a.areaItem.areatype||e.dropLogic("tag",{dragIndex:a.index,targetIndex:e.index,laneIndex:a.laneIndex,targetLaneIndex:e.laneIndex}))},canDrop:function(e,t){var a=t.getItem(),n=e.areaItem;if(a){var r=a.areaItem.areatype===n.areatype;return r||a.areaComp&&a.areaComp.setState({canShowDragHover:!0}),r}return"2"===n.areatype||n.headcode!==n.code}},(function(e,t){var a=t.getItem();a&&a.canDrop;return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),canDrop:t.canDrop(),canShowDragHover:t.canDrop()&&t.isOver()}}))(n=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDragSource,a=e.connectDropTarget,n=e.name,r=e.areaItem,o=e.canShowDragHover,l=e.isOver,i="1"===r.areatype?"icon-kapian":"2"===r.areatype?"icon-liebiao1":"";return t(a(d.default.createElement("div",{className:"tag"+(this.props.nodrop?" nodrop":"")+" ",style:!this.props.nodrop&&o?{cursor:"no-drop"}:{}},l&&d.default.createElement("div",{className:"drag-hover"}),d.default.createElement("span",null,n,d.default.createElement("i",{className:"iconfont "+i})))))}}]),t}(c.Component))||n)||n;t.default=f},1367:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,'.tab-lay-modal .wui-modal-content{min-height:500px}.tab-lay-modal .wui-modal-content .wui-modal-body{background-color:#f6f6f6;padding:0}.tab-lay-modal .tls-content{margin-top:4px}.tab-lay-modal .tls-list-container{padding:0 30px}.tab-lay-modal .tls-list-container.hover{background:#f9f2ee}.tab-lay-modal .tls-list{padding-right:32px;border-bottom:1px solid #dadada;min-height:40px;display:flex;align-items:center}.tab-lay-modal .tls-list .lane-index{width:49px;text-align:center;line-height:26px}.tab-lay-modal .tls-list .lane-delete{color:#0073e1;font-size:12px;cursor:pointer}.tab-lay-modal .tls-list .icon-tuodong{cursor:pointer;color:#007ace}.tab-lay-modal .tls-list .tags{flex:1}.tab-lay-modal .tls-list .tag{position:relative;display:inline-block;cursor:pointer;height:27px;line-height:1;background-color:#fff;padding:6px 8px;border:1px solid #a0a1a1;margin-left:10px;border-radius:3px;box-shadow:0 1px 3px 0 rgba(163,156,156,.5)}.tab-lay-modal .tls-list .tag .iconfont{font-size:14px;vertical-align:middle;margin-left:4px}.tab-lay-modal .tls-list .tag.nodrop{cursor:no-drop;background-color:#eaeaea;color:#555}.tab-lay-modal .tls-list .tag:hover{border:1px solid #0091ff}.tab-lay-modal .tls-list .tag:active{background-color:#b6dcff;border:1px solid #0091ff}.tab-lay-modal .tls-list .tag .drag-hover:before{content:"";position:absolute;width:2px;background:#2797ff;left:-8px;top:-2px;bottom:-2px}.tab-lay-modal .tls-list .tag .drag-hover:after{content:"";position:absolute;width:2px;background:#f7c1c1;left:-6px;top:-2px;bottom:-2px}.tab-lay-modal .tls-add{width:100%;height:40px;border-bottom:1px solid #ccc;border-top:1px solid #ccc}.tab-lay-modal .tls-add .add-content{width:100%;text-align:center;line-height:38px;color:#0073e1}.tab-lay-modal .tls-add .add-content i{vertical-align:middle;padding-right:5px;cursor:pointer}.tab-lay-modal .tls-add .add-content span{font-size:15px;vertical-align:middle;cursor:pointer}.tab-lay-modal .tls-header{background-color:#fff}.tab-lay-modal .tls-header .head-btns{display:flex;align-items:center;justify-content:flex-end;height:40px;margin-right:24px}.tab-lay-modal .wui-tabs-top .wui-tabs-content{background-color:#f6f6f6}.tab-lay-modal .wui-tabs-top .wui-tabs-bar{border-bottom:2px solid #ccc}',""])},1368:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(407)),r=g(a(179)),o=g(a(118)),l=g(a(3)),i=g(a(2));t.addMetaItem=function(e){var t=this,a=e.selectedTreeNode,n=e.targetAreaID,r=e.dataRef,o=e.areaList,l=e.dropIndex,p=[],f={props:{dataRef:r}},g=o.find((function(e){return e&&e.pk_area===n})),b=this.props,v=b.json,y=b.multiOptions,k=s.default.isEmpty(r)?[]:[f];a.length>0&&a.forEach((function(e){e.props.dataRef.myUniqID!==r.myUniqID&&k.push(e)}));s.default.forEach(k,(function(e,t){var a=e.props.dataRef,r=a.myUniqID,o=a.datatype,l=a.refname,s=(a.refcode,a.pid,a.refpk),c=a.isLeaf,f=a.modelname,h=a.length,b=a.notSearchAreaCode,k=a.proid,C=a.resid,S=a.readonly,w={},x=function(e,t){var a=m("langCode"),n={};if(!t)return{label:e};return t.forEach((function(t){t.languageMain;var r=t.index,o=t.languageCode;n["label"+r]=o===a?e:""})),n}(l,y);if("0"===g.areatype){var E=(0,d.getObjNameByDatatype)(o,d.opersignObj),T=(0,d.getObjNameByDatatype)(o,(0,d.opersignNameObj)());w=(0,i.default)({pk_query_property:"newMetaData_"+r,areaid:n,datatype:o,code:r},x,{metapath:r,isnotmeta:!1,isuse:!0,opersign:E||"=@>@>=@<@<=@like@",opersignname:T||(0,u.langCheck)("ZoneSetting-000001","pages",v),defaultvalue:"",isfixedcondition:!1,required:!1,disabled:!1,visible:"56"!==o,ismultiselectedenabled:!1,isquerycondition:!0,refname:"204"===o?f:"-99",containlower:!c,ischeck:!1,isbeyondorg:!1,usefunc:"34"===o,showtype:"1",returntype:"refpk",define1:"",define2:"",define3:"",define4:"",define5:"",itemtype:"input",myrefpk:s,visibleposition:"",tablecode:"",querytablename:"",maxlength:h})}else w=(0,i.default)({pk_query_property:"newMetaData_"+r,areaid:n,code:b||r,datatype:o},x,{metapath:r,color:(0,d.colorObj)()&&(0,d.colorObj)()[0].value,isrevise:!1,required:!1,disabled:!1,visible:"56"!==o,maxlength:h,defaultvalue:"",hyperlinkflag:!1,defaultvar:"",define1:"",define2:"",define3:"",itemtype:"input",myrefpk:s});"1"===g.areatype&&(w.colnum="1",w.isnextrow=!1),"2"===g.areatype&&(w.width="",w.istotal=!1),"204"===w.datatype&&(w.metaid=s,w.iscode=!1,w.modelname=f),"56"===w.datatype&&(w.isdefined=!0),"31"!==w.datatype&&"52"!==w.datatype||(w.dataval="2,,"),w.itemtype=(0,d.getItemtypeByDatatype)(w.datatype),w.proid=k,w.resid=C,!0===S&&(w.disabled=!0),p.push(w)}));var C=[];s.default.forEach(p,(function(e){"203"===e.datatype&&(console.log(e.label),C.push(e.myrefpk))})),C.length>0?(0,c.default)({url:"/nccloud/platform/templet/getEnumValue.do",info:{name:(0,u.langCheck)("ZoneSetting-000017","pages",v),action:(0,u.langCheck)("ZoneSetting-000122","pages",v)},data:C,success:function(e){if(e){var a=e.data,r=a.data,o=a.success;o&&r&&s.default.forEach(r,(function(e){s.default.forEach(p,(function(t){s.default.forEach(e,(function(e){e.id===t.myrefpk&&(s.default.isEmpty(t.dataval)?t.dataval=e.name+"="+e.value:t.dataval=t.dataval+","+e.name+"="+e.value)}))}))})),h.call(t,{cardList:p,areaType:g.areatype,targetAreaID:n,dropIndex:l})}}}):h.call(this,{cardList:p,areaType:g.areatype,targetAreaID:n,dropIndex:l})},t.filterRepeatMeta=function(e,t){var a={},n=[],r={};return e.forEach((function(e){a[e.code]=e.label})),t.forEach((function(e){a[e.code]?r[e.code]?r[e.code].repeat.push((0,l.default)({},e.code,e.label)):r[e.code]={label:a[e.code],repeat:[(0,l.default)({},e.code,e.label)]}:n.push(e)})),n.forEach((function(e){void 0===a[e.code]?a[e.code]=e.label:r[e.code]?r[e.code].repeat.push((0,l.default)({},e.code,e.label)):r[e.code]={label:a[e.code],repeat:[(0,l.default)({},e.code,e.label)]}})),{cardList:n,errorMsg:r}},t.giveRepeatedTips=function(e,t){var a=[],l=(0,u.langCheck)("ZoneSetting-000279","pages",t),i=(0,u.langCheck)("ZoneSetting-000280","pages",t),s=function(e,t){var n=t.repeat.map((function(t){return"“"+e+" "+t[e]+"”"})).join("、"),r=a.length+1+". "+l+"“"+e+" "+t.label+"”, "+i+n;a.push(r)},c=!0,d=!1,p=void 0;try{for(var g,m=(0,r.default)((0,n.default)(e));!(c=(g=m.next()).done);c=!0){var h=g.value,b=(0,o.default)(h,2),v=b[0],y=b[1];s(v,y)}}catch(e){d=!0,p=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw p}}(0,f.default)({status:"warning",msg:a.join("\n")})};var s=g(a(68)),c=g(a(32)),d=a(405),u=a(20),p=a(404),f=g(a(59));function g(e){return e&&e.__esModule?e:{default:e}}var m=g(a(23)).default.getLangCode;function h(e){var t=this,a=e.cardList,n=e.areaType,r=e.targetAreaID,o=e.dropIndex,l=this.props.json;if("0"!==n){var i=[];s.default.forEach(a,(function(e){"204"===e.datatype&&i.push(e.modelname)})),i.length>0?(0,c.default)({url:"/nccloud/platform/templet/getRefDefaultSel.do",info:{name:(0,u.langCheck)("ZoneSetting-000017","pages",l),action:(0,u.langCheck)("ZoneSetting-000024","pages",l)},data:i,success:function(e){if(e){var n=e.data,l=n.data,i=n.success;i&&l&&s.default.forEach(l,(function(e){s.default.forEach(a,(function(t){e.name===t.modelname&&(t.dataval=e.pk_refinfo+",code=1",t.refname=e.name,t.refcode=e.refpath)}))})),console.log("meta ajax"),a[0]&&p.setCardSelect.call(t,a[0]),t.addCardFromMetaTree({cardList:a,targetAreaID:r,dropIndex:o})}}}):(a[0]&&p.setCardSelect.call(this,a[0]),this.addCardFromMetaTree({cardList:a,targetAreaID:r,dropIndex:o}))}else a[0]&&p.setCardSelect.call(this,a[0]),this.addCardFromMetaTree({cardList:a,targetAreaID:r,dropIndex:o})}},1369:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=z(a(75)),r=z(a(76)),o=z(a(69)),l=z(a(1038)),i=z(a(3)),s=z(a(1043)),c=z(a(254)),d=z(a(2)),u=z(a(26)),p=z(a(5)),f=z(a(8)),g=z(a(6)),m=z(a(7)),h=z(a(119));a(1042),a(178);var b=a(1),v=z(b),y=a(38),k=a(85),C=z(a(59)),S=z(a(32)),w=a(405),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(w),E=a(1084),T=a(404),M=z(a(1370)),A=z(a(1371)),D=z(a(1372)),I=z(a(1373)),N=z(a(1374)),L=z(a(1375)),P=a(20),O=z(a(1378)),Z=a(120),j=z(a(23)),V=z(a(1380)),F=z(a(1383)),q=z(a(1386));function z(e){return e&&e.__esModule?e:{default:e}}var R=j.default.base,B=R.NCDiv,H=R.NCCheckbox,K=R.NCSelect,U=R.NCMultiLangText,G=R.NCTabs,W=j.default.high,Y=j.default.PubSub,J=(W.Refer,W.FormulaEditor),Q=h.default.Search,X=h.default.TextArea,$=K.NCOption,ee=G.NCTabPane,te={height:28,width:"100%"},ae=function(e){function t(e){(0,p.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.findAreaRelation=function(e,t){var n=e.selectCard,r=(e.json,e.newAreaList),o=a.getArea(n),l=a.transferNewAreaList(r);switch(a.checkAreaType(o)){case"table":var i=l.filter((function(e){return e})).find((function(e){return e.pk_area==o.pk_area})),s=i&&i.sides&&i.sides.find((function(e){return"edit"==e.areastatus})),c=i&&i.sides&&i.sides.find((function(e){return"browse"==e.areastatus}));switch(t){case"issyncside":return s;case"issyncfold":return c;default:return null}case"fold":var d=l.filter((function(e){return e})).find((function(e){return e.code==o.relationcode})),u=d&&d.sides&&d.sides.find((function(e){return"edit"==e.areastatus}));switch(t){case"issynclist":return d;case"issyncside":return u;default:return null}case"side":var p=l.filter((function(e){return e})).find((function(e){return e.code==o.relationcode})),f=p&&p.sides&&p.sides.find((function(e){return"browse"==e.areastatus}));switch(t){case"issynclist":return p;case"issyncfold":return f;default:return null}default:return null}},a.changeValue=function(e,t){var n=a.props.selectCard;_.isEmpty(n)||((n=(0,d.default)({},n))[t]=e,a.props.updateSelectCard(n))},a.changeCheckboxValue=function(e,t,n){var r=a.props.selectCard;if(!_.isEmpty(r)){if(r=_.cloneDeep(r),"visible"===t&&(r.visibleposition=""),a.props.isImplement&&"isfixedcondition"===t&&1==r.isfixedcondition){var o=a.getArea(r);a.queryFixedCondition({pk_template:a.props.zoneFormData.pk_page_templet,araecode:o.code,propcode:r.code},(function(n){r[t]=e,r.isfixedcondition=n,a.asyncUpdataCardAndAreaList(r,t)}))}else r[t]=e,a.asyncUpdataCardAndAreaList(r,t);["issyncside","issyncfold","issynclist"].includes(t)&&(e&&n?a.checkedAreaMap.set(t,n.pk_area):a.checkedAreaMap.delete(t))}},a.syncFields=function(e){var t=a.props.selectCard;t=_.cloneDeep(t);var n=["pk_form_property","pk_query_property","areaid","width","position","isnextrow","issyncside","issyncfold","issynclist"];if(0==a.checkedAreaMap.size)return!1;a.checkedAreaMap.forEach((function(a,r,o){var l=e.find((function(e){return e.pk_area==a})).queryPropertyList,i=!0;l.map((function(e,a){e.code==t.code&&(n.map((function(e){t.hasOwnProperty(e)&&delete t[e]})),l[a]=(0,c.default)(e,t),i=!1)})),i&&(n.map((function(e){"areaid"==e?t.areaid=a:["pk_query_property","pk_form_property"].includes(e)?t[e]="":t.hasOwnProperty(e)&&delete t[e]})),t.position=l.length+1,l.push(t))}))},a.getArea=function(e,t){var n=void 0;return(t=t||a.props.areaList).forEach((function(t,a){t.queryPropertyList.forEach((function(a,r){e.areaid!==a.areaid||(n=t)}))})),n},a.updateCardInArea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.selectCard,t=a.props.areaList;if(!_.isEmpty(e)){var n=0,r=0;t=_.cloneDeep(t),_.forEach(t,(function(t,a){_.forEach(t.queryPropertyList,(function(t,o){if(t.areaid===e.areaid&&t.pk_query_property===e.pk_query_property)return n=a,r=o,!1}))})),t[n].queryPropertyList[r]=e,a.props.updateAreaList(t,!1,a.syncFields)}},a.getCardListInAreaBySelectCard=function(){var e=a.props,t=e.areaList,n=e.selectCard,r=0;return _.forEach(t,(function(e,t){if(e.pk_area===n.areaid)return r=t,!1})),t[r]?t[r].queryPropertyList:{}},a.onPressEnter=function(e,t){a[t+"input"].blur()},a.getMyNumberInput=function(e,t){return v.default.createElement("div",{fieldid:t},v.default.createElement(s.default,{min:1,max:20,value:a.props.selectCard[t],onChange:function(e){a.changeValue(e,t)},onBlur:function(e){a.updateCardInArea()},ref:function(e){return a[t+"input"]=e},onPressEnter:function(e){a.onPressEnter(e.target.value,t)}}))},a.onPromptMsg=function(){return(0,C.default)({status:"warning",msg:(0,P.langCheck)("102202APP-000081","pages",a.props.json)})},a.getMyCheckbox=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];return a.props.isImplement&&1==a.props.selectCard.isfixedcondition&&"isuse"===e&&(t=!0),a.props.isImplement&&"editdisabled"===e&&(t=!0),!0===a.props.selectCard.editdisabled&&"disabled"===e&&(t=!0),v.default.createElement("div",{fieldid:e},v.default.createElement(H,{disabled:t,checked:Boolean(a.props.selectCard[e]),onChange:function(t){a.changeCheckboxValue(t,e,n)}}))},a.handleSelectChange=function(e,t){var n=a.props.selectCard;_.isEmpty(n)||("mobiletitle"===t&&a.checkMobileTitleChange(e),"itemtype"===t&&("photo"===e?n.uploadquantity=10:"attachment"===e&&(n.uploadquantity="")),n=(0,d.default)({},n),void 0===t?n=(0,d.default)({},n,e):(n[t]=e,"datatype"===t&&(n.dataval="",n.itemtype=x.getItemtypeByDatatype(n.datatype),"31"!==e&&"52"!==e||(n.dataval="2,,"))),a.asyncUpdataCardAndAreaList(n,t))},a.getMySelect=function(e,t){var n=a.props.selectCard,r=_.isEmpty(n[t])?e[0].value:n[t];return"showtype"===t&&"0"===n[t]&&(r="2"),v.default.createElement("div",{fieldid:t},v.default.createElement(K,{showClear:!1,value:r,onChange:function(e){a.handleSelectChange(e,t)},style:te,fieldid:t,multiple:"issupportphoto"==t},"color"===t?e.map((function(e,t){return v.default.createElement($,{key:t,value:e.value},v.default.createElement("span",{className:"template-setting-color-select"},v.default.createElement("span",null,e.name),v.default.createElement("span",{className:"color-select-color",style:{backgroundColor:e.value}})))})):e.map((function(e,t){return v.default.createElement($,{key:t,value:e.value},e.name)}))))},a.getMetaType=function(e){return!!e.metapath},a.getAreaType=function(){var e=a.props,t=e.areaList,n=e.selectCard,r=void 0;return _.forEach(t,(function(e,t){_.forEach(e.queryPropertyList,(function(t,a){n.areaid!==t.areaid||(r=e.areatype)}))})),r},a.setModalVisibel=function(e,t){a.setState((0,i.default)({},e,t))},a.getMySearch=function(e,t){var n=a.props,r=n.selectCard,o=n.json,l=r[e];if("57"===r.datatype)if("dataval"===e)l=r.refname;else if("defaultvalue"===e){var s=r.defaultvalue&&r.defaultvalue.split("=");l=s&&s[0]}return"204"!==r.datatype&&"57"!==r.datatype||"-99"!==l||(l=""),v.default.createElement("div",{fieldid:e},v.default.createElement(Q,{disabled:a.getPropertyDisabled(e),style:te,value:l,onChange:function(){},onSearch:function(){"referFilterModalVisible"===t&&(r.pk_query_property.startsWith("newMetaData")||r.pk_query_property.startsWith("newNotMetaData"))?(a.setState((0,i.default)({},t,!1)),(0,C.default)({status:"warning",msg:(0,P.langCheck)("ZoneSetting-000349","pages",o)})):a.setState((0,i.default)({},t,!0))}}))},a.getMyFormulaSearch=function(e){var t=a.props,n=t.selectCard,r=t.toggleFormula;return v.default.createElement("div",{fieldid:e},v.default.createElement(Q,{style:te,value:n[e],onChange:function(){},onSearch:function(){T.handleFormula.call(a,n),r([e],{visible:!0,value:n[e]})}}))},a.getMyModalSearch=function(e){var t=a.props,n=t.selectCard,r=t.toggleFormula;return v.default.createElement("div",{fieldid:e},v.default.createElement(Q,{className:"attachmentSearch",suffix:v.default.createElement("i",{className:"iconfont icon-danchuang",onClick:function(){T.handleFormula.call(a,n),r([e],{visible:!0,value:n[e]})}}),value:(0,w.watermarktype)(n.watermarktype),style:te,disabled:"filetype"==e&&"300"==n.datatype&&"photo"==n.itemtype}))},a.checkMobileTitleChange=function(e){var t=a.props.selectCard,n=t.mobiletitle,r=a.getCardListInAreaBySelectCard(),o=function(e){return(0,P.langCheck)("ZoneSetting-"+e,"pages",a.props.json)};if("1"===e||"3"===e){var l=r.find((function(t){return t.mobiletitle===e})),i=(0,w.mobileTitle)().find((function(t){return t.value===e})).name;if(l&&l.pk_query_property!==t.pk_query_property){var s=""+l.label+o("000253")+i+o("000254")+i+"？"+o("000255")+l.label+o("000256");(0,Z.ControlTip)({status:"warning",title:(0,P.langCheck)("ZoneSetting-000207","pages",a.props.json),msg:s,onOk:function(){l.mobiletitle="0",a.updateCardInArea(l)},onCancel:function(){t.mobiletitle=n,a.asyncUpdataCardAndAreaList(t)}})}}},a.checkAreaType=function(e){var t=T.checkAreaType.isFold,a=T.checkAreaType.isTable,n=T.checkAreaType.isSide;return t(e)?"fold":a(e)?"table":n(e)?"side":void 0},a.transferNewAreaList=function(e){var t=[];return e.forEach((function(e){e&&(t.push(e),Array.isArray(e.tabs)&&(t=t.concat(e.tabs)))})),t},a.renderSyncCheckbox=function(){var e=a.props,t=e.selectCard,n=e.json,r=e.newAreaList,o=a.getArea(t),l=a.transferNewAreaList(r);if(o&&!o.newArea)switch(a.checkAreaType(o)){case"table":var i=l.filter((function(e){return e})).find((function(e){return e.pk_area==o.pk_area})),s=i&&i.sides&&i.sides.find((function(e){return"edit"==e.areastatus})),c=i&&i.sides&&i.sides.find((function(e){return"browse"==e.areastatus}));return v.default.createElement(v.default.Fragment,null,s&&v.default.createElement(v.default.Fragment,null,v.default.createElement("li",null,""+(0,P.langCheck)("ZoneSetting-000275","pages",n)+s.name),v.default.createElement("li",null,a.getMyCheckbox("issyncside",!1,s))),c&&v.default.createElement(v.default.Fragment,null,v.default.createElement("li",null,""+(0,P.langCheck)("ZoneSetting-000275","pages",n)+c.name),v.default.createElement("li",null,a.getMyCheckbox("issyncfold",!1,c))));case"fold":var d=l.filter((function(e){return e})).find((function(e){return e.code==o.relationcode})),u=d&&d.sides&&d.sides.find((function(e){return"edit"==e.areastatus}));return v.default.createElement(v.default.Fragment,null,d&&v.default.createElement(v.default.Fragment,null,v.default.createElement("li",null,""+(0,P.langCheck)("ZoneSetting-000275","pages",n)+d.name),v.default.createElement("li",null,a.getMyCheckbox("issynclist",!1,d))),u&&v.default.createElement(v.default.Fragment,null,v.default.createElement("li",null,""+(0,P.langCheck)("ZoneSetting-000275","pages",n)+u.name),v.default.createElement("li",null,a.getMyCheckbox("issyncside",!1,u))));case"side":var p=l.filter((function(e){return e})).find((function(e){return e.code==o.relationcode})),f=p&&p.sides&&p.sides.find((function(e){return"browse"==e.areastatus}));return v.default.createElement(v.default.Fragment,null,p&&v.default.createElement(v.default.Fragment,null,v.default.createElement("li",null,""+(0,P.langCheck)("ZoneSetting-000275","pages",n)+p.name),v.default.createElement("li",null,a.getMyCheckbox("issynclist",!1,p))),f&&v.default.createElement(v.default.Fragment,null,v.default.createElement("li",null,""+(0,P.langCheck)("ZoneSetting-000275","pages",n)+f.name),v.default.createElement("li",null,a.getMyCheckbox("issyncfold",!1,f))));default:return null}},a.renderCanEditFields=function(){var e=[{key:"#a",name:(0,P.langCheck)("ZoneSetting-000192","pages",a.props.json)},{key:"#b",name:(0,P.langCheck)("ZoneSetting-000193","pages",a.props.json)},{key:"#c",name:(0,P.langCheck)("ZoneSetting-000194","pages",a.props.json)},{key:"#d",name:(0,P.langCheck)("ZoneSetting-000195","pages",a.props.json)}];if(!a.props.isImplement)return e.map((function(e){return[v.default.createElement("li",null,e.name),v.default.createElement("li",null,a.getMyCheckbox(e.key))]}))},a.renderCustomDocRefer=function(){var e=a.props,t=e.selectCard,n=e.json;return v.default.createElement("li",null,a.getMySearch("defaultvalue","customDocDefaultModalVisibel"),v.default.createElement(L.default,{docPk:t.dataval,refname:t.refname,isgrade:t.isgrade,handleSelectChange:a.handleSelectChange,defaultvalue:t.defaultvalue,modalVisibel:a.state.customDocDefaultModalVisibel,setModalVisibel:a.setModalVisibel,json:n,isMultiSelectedEnabled:t.ismultiselectedenabled}))},a.renderMoneyModal=function(){var e=a.props.selectCard;return v.default.createElement("li",null,a.getMySearch("dataval","moneyModalVisibel"),v.default.createElement(M.default,{datatype:e.datatype,handleSelectChange:a.handleSelectChange,initVal:e.dataval,modalVisibel:a.state.moneyModalVisibel,setModalVisibel:a.setModalVisibel}))},a.getPropertyDisabled=function(e){var t=a.props,n=t.selectCard,r=t.isImplement;return"defaultvalue"===e&&(r&&1==n.isfixedcondition)},a.queryFixedCondition=function(e,t){(0,S.default)({url:"/nccloud/platform/templet/checkfixedconditionaction.do",data:e,info:{name:(0,P.langCheck)("ZoneSetting-000017","pages",a.props.json),action:(0,P.langCheck)("ZoneSetting-000200","pages",a.props.json)},success:function(e){var a=e.data,n=a.success,r=a.data;n&&t(r)}})},a.renderReferFilter=function(){var e=a.props,t=e.json,n=e.selectCard,r=a.state.isShowOrgRights,o=a.getCardListInAreaBySelectCard(),l=a.getArea(n);return r?v.default.createElement(b.Fragment,null,v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000328","pages",t)),v.default.createElement("li",null,a.getMySelect(x.permOrgItem(),"orgrights")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000331","pages",t)),v.default.createElement("li",null,a.getMySearch("refcondition","referFilterModalVisible"),a.state.referFilterModalVisible&&v.default.createElement(q.default,{json:t,selectCard:n,handleSelectChange:a.handleSelectChange,modalVisibel:a.state.referFilterModalVisible,cards:o,setModalVisibel:a.setModalVisibel,currentArea:l}))):v.default.createElement(b.Fragment,null,v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000331","pages",t)),v.default.createElement("li",null,a.getMySearch("refcondition","referFilterModalVisible"),a.state.referFilterModalVisible&&v.default.createElement(q.default,{json:t,selectCard:n,handleSelectChange:a.handleSelectChange,modalVisibel:a.state.referFilterModalVisible,cards:o,setModalVisibel:a.setModalVisibel,currentArea:l})))},a.handleChangeRefName=function(e){T.queryOrgAuthority.call(a,e,(function(e){a.setState({isShowGroupPower:e})}))},a.renderOrgAuthorities=function(){var e=a.props.json;if(a.state.isShowGroupPower)return v.default.createElement(b.Fragment,null,v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000340","pages",e)),v.default.createElement("li",null,a.getMyCheckbox("isgrouppower")))},a.renderReferName=function(){var e=a.props,t=e.selectCard,n=e.json;return v.default.createElement(b.Fragment,null,v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000030","pages",n)),"204"===t.datatype?v.default.createElement("li",null,a.getMySearch("refname","referModalVisibel"),a.renderReferModal(!1)):"57"===t.datatype?v.default.createElement("li",null,a.getMySearch("refname","customModalVisibel"),a.renderCustomModal(!1)):v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000030","pages",n),"refname")))},a.renderReferModal=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.props.selectCard,n="-99"!==t.refname?t.refname:"";return v.default.createElement(A.default,{handleSelectChange:a.handleSelectChange,dataval:t.dataval,refname:n,showfocus:t.showfocus,iscode:t.iscode,onlyLeafCanSelect:t.onlyLeafCanSelect,isdatapowerenable:t.isdatapowerenable,isgrouppower:t.isgrouppower,isShowGroupPower:a.state.isShowGroupPower,modalVisibel:a.state.referModalVisibel,setModalVisibel:a.setModalVisibel,isShowSetting:e,areatype:a.getAreaType(),onOk:function(e){var t=e.isShowGroupPower;"0"===a.getAreaType()&&a.setState({isShowGroupPower:t})}})},a.renderCustomModal=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.props.selectCard,n="-99"!==t.refname?t.refname:"";return v.default.createElement(D.default,{handleSelectChange:a.handleSelectChange,initVal:t.dataval,refname:n,showfocus:t.showfocus,iscode:t.iscode,onlyLeafCanSelect:t.onlyLeafCanSelect,isdatapowerenable:t.isdatapowerenable,modalVisibel:a.state.customModalVisibel,setModalVisibel:a.setModalVisibel,isShowSetting:e})},a.getDom1=function(){var e=a.props,t=e.selectCard,n=e.json;console.log("selectCard--",t);var r=t.metapath;return v.default.createElement(G,{defaultActiveKey:"1",activeKey:"1"},v.default.createElement(ee,{tab:(0,P.langCheck)("ZoneSetting-000075","pages",n),key:"1"},v.default.createElement("ul",{className:"basic-property"},v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000076","pages",n)),v.default.createElement("li",null,a.getMultiLangInput((0,P.langCheck)("ZoneSetting-000076","pages",n),"label")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000077","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000077","pages",n),"resid")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000078","pages",n)),function(){if(t.isdefined)return v.default.createElement("li",null,a.getMySelect((0,w.dataTypeObj)(),"datatype"));var e=x.getObjNameByDatatype(t.datatype,(0,w.dataTypeObj)());return e=""===e?t.datatype:e,v.default.createElement("li",null,e)}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000022","pages",n)),"203"==t.datatype||"32"==t.datatype?v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",n),"showdataval")):v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",n),"dataval")),function(){if("203"==t.datatype||"32"==t.datatype)return v.default.createElement("li",{style:{display:"none"}},(0,P.langCheck)("ZoneSetting-000022","pages",n))}(),function(){if("203"==t.datatype||"32"==t.datatype)return v.default.createElement("li",{style:{display:"none"}},a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",n),"dataval"))}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000032","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000032","pages",n),"maxlength")),v.default.createElement("li",null,a.isDevEnv&&(0,P.langCheck)("ZoneSetting-000079","pages",n)),v.default.createElement("li",null,a.isDevEnv&&a.getMyCheckbox("isnotmeta")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000080","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isuse")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000081","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000081","pages",n),"code",r)),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000082","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000082","pages",n),"opersign")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000083","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000083","pages",n),"opersignname")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000084","pages",n)),"204"===t.datatype&&"-99"!==t.refname?v.default.createElement("li",null,a.getMySearch("defaultvalue","defaultValueModalVisibel"),v.default.createElement(N.default,{areatype:"0",refcode:t.refcode,refname:t.refname,isMultiSelectedEnabled:Boolean(t.ismultiselectedenabled),handleSelectChange:a.handleSelectChange,defaultvalue:t.defaultvalue,modalVisibel:a.state.defaultValueModalVisibel,setModalVisibel:a.setModalVisibel,isUnit:"templateSetting-unit"===a.props.status})):"57"===t.datatype&&t.dataval?a.renderCustomDocRefer():v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000084","pages",n),"defaultvalue")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000085","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("disabled",a.props.isImplement&&(!0===t["#a"]||!0===t["#b"]))),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000086","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("visible")),function(){if(t.visible)return[v.default.createElement("li",{key:"visibleposition0"},(0,P.langCheck)("ZoneSetting-000087","pages",n)),v.default.createElement("li",{key:"visibleposition1"},a.getMyInput((0,P.langCheck)("ZoneSetting-000087","pages",n),"visibleposition"))]}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000088","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("ismultiselectedenabled")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000089","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isfixedcondition")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000090","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("required")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000091","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isquerycondition")),a.renderReferName(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000092","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("containlower")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000093","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("ischeck")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000094","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isbeyondorg")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000095","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("usefunc")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000096","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000096","pages",n),"tablecode")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000097","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000097","pages",n),"querytablename")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000098","pages",n)),v.default.createElement("li",null,a.getMySelect(x.getItemtypeObjByDatatype(t.datatype),"itemtype")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000099","pages",n)),v.default.createElement("li",null,a.getMySelect((0,w.showType)(),"showtype")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000100","pages",n)),v.default.createElement("li",null,a.getMySelect((0,w.returnType)(),"returntype")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000101","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000101","pages",n),"define1")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000102","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000102","pages",n),"define2")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000103","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000103","pages",n),"define3")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000104","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000104","pages",n),"define4")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000105","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000105","pages",n),"define5")),"204"===t.datatype&&a.renderOrgAuthorities(),"204"===t.datatype&&a.renderReferFilter())))},a.getDom2=function(){var e=a.props,t=e.selectCard,n=e.json,r=t.metapath;return console.log("selectCard=",t),v.default.createElement(G,{defaultActiveKey:"1"},v.default.createElement(ee,{tab:(0,P.langCheck)("ZoneSetting-000075","pages",n),key:"1"},v.default.createElement("ul",{className:"basic-property"},v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000076","pages",n)),v.default.createElement("li",null,a.getMultiLangInput((0,P.langCheck)("ZoneSetting-000076","pages",n),"label")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000077","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000077","pages",n),"resid")),v.default.createElement("li",null,a.isDevEnv&&(0,P.langCheck)("ZoneSetting-000079","pages",n)),v.default.createElement("li",null,a.isDevEnv&&a.getMyCheckbox("isnotmeta")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000080","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isuse")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000106","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000106","pages",n),"metadataproperty")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000032","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000032","pages",n),"maxlength")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000081","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000081","pages",n),"code",r)),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000082","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000082","pages",n),"opersign")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000083","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000083","pages",n),"opersignname")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000084","pages",n)),"204"===t.datatype&&"-99"!==t.refname?v.default.createElement("li",null,a.getMySearch("defaultvalue","defaultValueModalVisibel"),v.default.createElement(N.default,{areatype:"0",refcode:t.refcode,refname:t.refname,isMultiSelectedEnabled:Boolean(t.ismultiselectedenabled),handleSelectChange:a.handleSelectChange,defaultvalue:t.defaultvalue,modalVisibel:a.state.defaultValueModalVisibel,setModalVisibel:a.setModalVisibel,isUnit:"templateSetting-unit"===a.props.status})):"57"===t.datatype&&t.dataval?a.renderCustomDocRefer():v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000084","pages",n),"defaultvalue")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000085","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("disabled",a.props.isImplement&&(!0===t["#a"]||!0===t["#b"]))),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000086","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("visible")),function(){if(t.visible)return[v.default.createElement("li",{key:"visibleposition0"},(0,P.langCheck)("ZoneSetting-000087","pages",n)),v.default.createElement("li",{key:"visibleposition1"},a.getMyInput((0,P.langCheck)("ZoneSetting-000087","pages",n),"visibleposition"))]}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000088","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("ismultiselectedenabled")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000089","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isfixedcondition")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000090","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("required")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000091","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isquerycondition")),a.renderReferName(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000092","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("containlower")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000093","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("ischeck")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000094","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("isbeyondorg")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000095","pages",n)),v.default.createElement("li",null,a.getMyCheckbox("usefunc")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000096","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000096","pages",n),"tablecode")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000097","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000097","pages",n),"querytablename")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000099","pages",n)),v.default.createElement("li",null,a.getMySelect((0,w.showType)(),"showtype")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000100","pages",n)),v.default.createElement("li",null,a.getMySelect((0,w.returnType)(),"returntype")))),v.default.createElement(ee,{tab:(0,P.langCheck)("ZoneSetting-000107","pages",n),key:"2"},v.default.createElement("ul",{className:"basic-property"},v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000078","pages",n)),v.default.createElement("li",null,a.getMySelect((0,w.dataTypeObj)(),"datatype")),function(){if(["203","32","31","52","4"].includes(t.datatype))return v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000022","pages",n))}(),"203"==t.datatype||"32"==t.datatype?v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",n),"showdataval")):"31"===t.datatype||"52"===t.datatype||"4"===t.datatype?a.renderMoneyModal():void 0,function(){if("203"==t.datatype||"32"==t.datatype)return v.default.createElement("li",{style:{display:"none"}},(0,P.langCheck)("ZoneSetting-000022","pages",n))}(),function(){if("203"==t.datatype||"32"==t.datatype)return v.default.createElement("li",{style:{display:"none"}},a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",n),"dataval"))}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000098","pages",n)),v.default.createElement("li",null,a.getMySelect(x.getItemtypeObjByDatatype(t.datatype),"itemtype")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000101","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000101","pages",n),"define1")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000102","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000102","pages",n),"define2")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000103","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000103","pages",n),"define3")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000104","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000104","pages",n),"define4")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000105","pages",n)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000105","pages",n),"define5")),"204"===t.datatype&&a.renderOrgAuthorities(),"204"===t.datatype&&a.renderReferFilter())))},a.getDom3=function(e,t){var n=a.props,r=n.selectCard,o=n.json,l=n.formula;console.log("selectCard-------",r);var i="204"===r.datatype?"block":"none",s=a.getCardListInAreaBySelectCard(),c=r.metapath;l.regionCode;return v.default.createElement(G,{defaultActiveKey:"1"},v.default.createElement(ee,{tab:(0,P.langCheck)("ZoneSetting-000075","pages",o),key:"1"},v.default.createElement("ul",{className:"basic-property"},v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000076","pages",o)),v.default.createElement("li",null,a.getMultiLangInput((0,P.langCheck)("ZoneSetting-000076","pages",o),"label")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000077","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000077","pages",o),"resid")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000081","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000081","pages",o),"code",c)),function(){if(!t)return[v.default.createElement("li",{key:"metadataproperty0"},(0,P.langCheck)("ZoneSetting-000106","pages",o)),v.default.createElement("li",{key:"metadataproperty1"},a.getMyInput((0,P.langCheck)("ZoneSetting-000106","pages",o),"metadataproperty"))]}(),"1"===e?[v.default.createElement("li",{key:"colnum0"},(0,P.langCheck)("ZoneSetting-000031","pages",o)),v.default.createElement("li",{key:"colnum1"},a.getMySelect(x.colnumObj,"colnum"))]:[v.default.createElement("li",{key:"width0"},(0,P.langCheck)("ZoneSetting-000108","pages",o)),v.default.createElement("li",{key:"width1"},a.getMyInput((0,P.langCheck)("ZoneSetting-000108","pages",o),"width"))],v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000032","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000032","pages",o),"maxlength")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000109","pages",o)),v.default.createElement("li",null,a.getMyCheckbox("isrevise",a.props.isImplement&&(!0===r["#a"]||!0===r["#d"]))),"1"===e?[v.default.createElement("li",{key:"nextrow0"},(0,P.langCheck)("ZoneSetting-000110","pages",o)),v.default.createElement("li",{key:"nextrow1"},a.getMyCheckbox("isnextrow"))]:[v.default.createElement("li",{key:"istotal0"},(0,P.langCheck)("ZoneSetting-000111","pages",o)),v.default.createElement("li",{key:"istotal1"},a.getMyCheckbox("istotal",a.props.isImplement&&!0===r["#a"]))],v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000112","pages",o)),v.default.createElement("li",null,a.getMyCheckbox("visible",a.props.isImplement&&(!0===r["#a"]||!0===r["#c"]))),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000113","pages",o)),v.default.createElement("li",null,a.getMyCheckbox("required",a.props.isImplement&&!0===r["#a"])),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000085","pages",o)),v.default.createElement("li",{style:{position:"relative"}},a.getMyCheckbox("disabled",a.props.isImplement&&(!0===r["#a"]||!0===r["#b"])),r.editdisabled&&v.default.createElement("div",{onClick:a.onPromptMsg,style:{width:"22px",height:"14px",opacity:0,position:"absolute",left:"58px",top:"7px",zIndex:"3"}})),a.renderSyncCheckbox(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000084","pages",o)),"204"!==r.datatype||_.isUndefined(r.refcode)||""===r.refcode||null===r.refcode?"57"===r.datatype&&r.dataval?a.renderCustomDocRefer():"30"===r.datatype?v.default.createElement("li",null,v.default.createElement(X,{rows:5,style:te,value:r.defaultvalue,onChange:function(e){a.changeValue(e.target.value,"defaultvalue")},onBlur:function(e){a.updateCardInArea()},ref:function(e){return a.defaultvalueinput=e}})):v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000084","pages",o),"defaultvalue")):v.default.createElement("li",null,a.getMySearch("defaultvalue","defaultValueModalVisibel"),v.default.createElement(N.default,{refcode:r.refcode,refname:r.refname,isMultiSelectedEnabled:Boolean(r.ismultiselectedenabled),handleSelectChange:a.handleSelectChange,defaultvalue:r.defaultvalue,modalVisibel:a.state.defaultValueModalVisibel,setModalVisibel:a.setModalVisibel,isUnit:"templateSetting-unit"===a.props.status})),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000114","pages",o)),v.default.createElement("li",null,a.getMySelect(x.defaultvarObj,"defaultvar")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000115","pages",o)),v.default.createElement("li",null,a.getMySelect((0,w.colorObj)(),"color")),a.props.ismobile&&"2"===a.getAreaType()&&[v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000233","pages",o)),v.default.createElement("li",null,a.getMySelect((0,w.mobileTitle)(),"mobiletitle"))])),v.default.createElement(ee,{tab:(0,P.langCheck)("ZoneSetting-000107","pages",o),key:"2"},v.default.createElement("ul",{className:"basic-property"},v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000078","pages",o)),function(){if(t){if(r.isdefined)return v.default.createElement("li",null,a.getMySelect((0,w.dataTypeObj)(),"datatype"));var e=x.getObjNameByDatatype(r.datatype,(0,w.dataTypeObj)());return e=""===e?r.datatype:e,v.default.createElement("li",null,e)}return v.default.createElement("li",null,a.getMySelect((0,w.dataTypeObj)(),"datatype"))}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000022","pages",o)),function(){switch(!0){case"204"===r.datatype:return v.default.createElement("li",null,a.getMySearch("refname","referModalVisibel"),a.renderReferModal());case"31"===r.datatype||"52"===r.datatype||"4"===r.datatype:return a.renderMoneyModal();case"57"===r.datatype:return v.default.createElement("li",null,a.getMySearch("dataval","customModalVisibel"),a.renderCustomModal());case"203"===r.datatype:case"32"===r.datatype:return v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",o),"showdataval"));default:return v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",o),"dataval"))}}(),function(){if("203"==r.datatype||"32"==r.datatype)return v.default.createElement("li",{style:{display:"none"}},(0,P.langCheck)("ZoneSetting-000022","pages",o))}(),function(){if("203"==r.datatype||"32"==r.datatype)return v.default.createElement("li",{style:{display:"none"}},a.getMyInput((0,P.langCheck)("ZoneSetting-000022","pages",o),"dataval"))}(),function(){if(t&&!r.isdefined)return v.default.createElement("li",{style:{display:i}},(0,P.langCheck)("ZoneSetting-000071","pages",o))}(),function(){if(t&&!r.isdefined)return v.default.createElement("li",{style:{display:i}},a.getMySearch("relatemeta","relateMetaModalVisibel"),v.default.createElement(I.default,{cards:s,handleSelectChange:a.handleSelectChange,initVal:r.relatemeta,modalVisibel:a.state.relateMetaModalVisibel,setModalVisibel:a.setModalVisibel}))}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000098","pages",o)),v.default.createElement("li",null,a.getMySelect(x.getItemtypeObjByDatatype(r.datatype),"itemtype")),function(){if(a.props.ismobile&&"300"==r.datatype)return v.default.createElement(b.Fragment,null,v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000285","pages",o)),v.default.createElement("li",null,v.default.createElement("li",null,a.getMyCheckbox("issupportphoto"))),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000286","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000286","pages",o),"uploadquantity")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000287","pages",o)),v.default.createElement("li",null,a.getMyModalSearch("watermark")))}(),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000116","pages",o)),v.default.createElement("li",null,a.getMyFormulaSearch("showformula")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000117","pages",o)),v.default.createElement("li",null,a.getMyFormulaSearch("editformula")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000118","pages",o)),v.default.createElement("li",null,a.getMyFormulaSearch("validateformula")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000119","pages",o)),v.default.createElement("li",null,a.getMyCheckbox("hyperlinkflag")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000339","pages",o)),v.default.createElement("li",null,a.getMyCheckbox("editdisabled")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000120","pages",o)),v.default.createElement("li",{title:r.metapath,className:"metapath"},r.metapath),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000101","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000101","pages",o),"define1")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000102","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000102","pages",o),"define2")),v.default.createElement("li",null,(0,P.langCheck)("ZoneSetting-000103","pages",o)),v.default.createElement("li",null,a.getMyInput((0,P.langCheck)("ZoneSetting-000103","pages",o),"define3")),"204"===r.datatype&&a.renderReferFilter())))},a.onCellChange=function(e,t){return function(n){var r=a.props.batchSource,o=(r=_.cloneDeep(r))[e];o&&(o[t]=n,a.props.updateBatchSource(r))}},a.handleFormulaOkClick=function(e,t){var n=a.props.currentBatchCell,r=n.index,o=n.code;_.isEmpty(a.props.selectCard)?a.onCellChange(r,o)(e):a.handleSelectChange(e,t),a.props.toggleFormula(t,!1)},a.urlRequestObj=(0,P.GetQuery)(a.props.location.search),a.pagecode=a.urlRequestObj.pcode,a.checkedAreaMap=new l.default,a.isDevEnv="development"===window.environmentmodel,a.state={moneyModalVisibel:!1,referModalVisibel:!1,relateMetaModalVisibel:!1,customModalVisibel:!1,defaultValueModalVisibel:!1,customDocDefaultModalVisibel:!1,showformula:!1,editformula:!1,validateformula:!1,watermark:!1,filetype:!1,referFilterModalVisible:!1,isShowOrgRights:!1,isShowGroupPower:!1},a}var a;return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;window["nc-lightapp-front"]=j.default,this.pubsub=Y.subscribe("SELECT_CARD",(function(t,a){a!==e.state.isShowGroupPower&&(a?e.setState({isShowGroupPower:!0}):e.setState({isShowGroupPower:!1}))}))}},{key:"componentWillUnmount",value:function(){Y.unsubscribe(this.pubsub)}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectCard;if(!_.eq(this.props.selectCard,t)){var a=["issyncside","issyncfold","issynclist"];if(!(0,o.default)(t).some((function(e){return a.includes(e)})))return this.checkedAreaMap.clear(),!1;for(var n in t)if(a.includes(n)&&t[n]){var r=this.findAreaRelation(e,n)||{};if(null==r.pk_area)continue;this.checkedAreaMap.set(n,r.pk_area)}}}},{key:"getMyInput",value:function(e,t,a){var n=this,r=!1;if("width"==t&&(null!=this.props.selectCard[t]&&""!=this.props.selectCard[t]||(this.props.selectCard[t]="120")),r=(""!=a&&null!=a||"code"!=t)&&"code"==t,this.props.isImplement&&1==this.props.selectCard.isfixedcondition){["opersign","opersignname","defaultvalue"].includes(t)&&(r=!0)}return v.default.createElement("div",{fieldid:t},v.default.createElement(h.default,{disabled:r,style:te,value:this.props.selectCard[t],onChange:function(e){n.changeValue(e.target.value,t)},onBlur:function(e){"label"==t&&n.props.updateSearchBox({reset:!0}),n.updateCardInArea()},ref:function(e){return n[t+"input"]=e},onPressEnter:function(e){n.onPressEnter(e.target.value,t)}}))}},{key:"changeMultiLangText",value:function(e,t){var a=this.props,n=a.selectCard,r=a.multiOptions;_.isEmpty(n)||(n=(0,d.default)({},n),r.forEach((function(a,r){var o=""+t+a.index;n[o]=e[o].value})),this.props.updateSelectCard(n))}},{key:"getMultiLangInput",value:function(e,t){var a=this,n=this.props,r=n.multiOptions,o=n.selectCard,l={};return r.forEach((function(e,a){var n=""+t+e.index;l[n]={value:o[n]}})),v.default.createElement("div",{fieldid:t},v.default.createElement(U,{value:l,onChange:function(e){a.changeMultiLangText(e,t)},onBlur:function(e){a.updateCardInArea()},ref:function(e){return a[t+"multilang"]=e},fieldid:t,languageMeta:r,attrcode:t}))}},{key:"asyncUpdataCardAndAreaList",value:(a=(0,r.default)(n.default.mark((function e(t,a){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.updateSelectCard(t);case 2:return e.next=4,this.updateCardInArea();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,a=t.selectCard,n=(t.areaList,t.formula),r=t.selectedArea,o=t.json,l=void 0;if(_.isEmpty(r)&&_.isEmpty(a))l=null;else if(_.isEmpty(r)){var i=this.getMetaType(a),s=this.getAreaType();l="0"===s?i?this.getDom1():this.getDom2():this.getDom3(s,i)}else l=v.default.createElement(O.default,{json:this.props.json,multiOptions:this.props.multiOptions});return v.default.createElement(B,{className:"template-setting-right-sider template-setting-sider",fieldid:"right",areaCode:B.config.Area},v.default.createElement("div",{className:"sider-content"},v.default.createElement("div",{className:"sider-tab"},l)),n.showformula.visible&&v.default.createElement(J,{value:n.showformula.value,isValidateOnOK:!0,validateUrl:"/nccloud/platform/formula/check.do",validateData:{areacodes:n.regionCode,pagecode:this.pagecode},formulaUrl:"/nccloud/platform/formula/control.do",treeParam:{pk_billtype:"CM02",bizmodelStyle:"fip",classid:""},noShowAttr:[(0,P.langCheck)("ZoneSetting-000106","pages",o)],show:n.showformula.visible,onHide:function(){e.props.toggleFormula("showformula",!1)},attrConfig:n.tab,onOk:function(t){return e.handleFormulaOkClick(t,"showformula")},onCancel:function(){e.props.toggleFormula("showformula",!1)}}),n.editformula.visible&&v.default.createElement(J,{value:n.editformula.value,isValidateOnOK:!0,validateUrl:"/nccloud/platform/formula/check.do",validateData:{areacodes:n.regionCode,pagecode:this.pagecode},formulaUrl:"/nccloud/platform/formula/control.do",noShowAttr:[(0,P.langCheck)("ZoneSetting-000106","pages",o)],show:n.editformula.visible,onHide:function(){e.props.toggleFormula("editformula",!1)},attrConfig:n.tab,onOk:function(t){return e.handleFormulaOkClick(t,"editformula")},onCancel:function(){e.props.toggleFormula("editformula",!1)}}),n.validateformula.visible&&v.default.createElement(J,{value:n.validateformula.value,isValidateOnOK:!0,validateUrl:"/nccloud/platform/formula/check.do",validateData:{areacodes:n.regionCode,pagecode:this.pagecode},formulaUrl:"/nccloud/platform/formula/control.do",noShowAttr:[(0,P.langCheck)("ZoneSetting-000106","pages",o)],show:n.validateformula.visible,onHide:function(){e.props.toggleFormula("validateformula",!1)},attrConfig:n.tab,onOk:function(t){return e.handleFormulaOkClick(t,"validateformula")},onCancel:function(){e.props.toggleFormula("validateformula",!1)}}),n.watermark.visible&&v.default.createElement(V.default,{handleSelectCardChange:function(t){e.asyncUpdataCardAndAreaList(t)},toggleFormula:this.props.toggleFormula,visible:n.watermark.visible,json:o}),n.filetype.visible&&v.default.createElement(F.default,{customHeader:(0,P.langCheck)("ZoneSetting-000288","pages",o),visible:n.filetype.visible,onOk:function(){e.props.toggleFormula("filetype",!1)},onCancel:function(){e.props.toggleFormula("filetype",!1)},json:o}))}}]),t}(b.Component);t.default=(0,y.connect)((function(e){return{areaList:e.zoneSettingData.areaList,selectCard:e.zoneSettingData.selectCard,formula:e.zoneSettingData.formula,selectedArea:e.zoneSettingData.selectedArea,currentBatchCell:e.zoneSettingData.currentBatchCell,batchSource:e.zoneSettingData.batchSource,zoneFormData:e.zoneSettingData.zoneFormData,isImplement:e.zoneSettingData.isImplement,newAreaList:e.zoneSettingData.newAreaList,ismobile:e.zoneSettingData.ismobile}}),{updateAreaList:E.updateAreaList,updateSelectCard:E.updateSelectCard,updateBatchSource:E.updateBatchSource,toggleFormula:E.toggleFormula,setFormulaInfo:E.setFormulaInfo,updateSearchBox:E.updateSearchBox})((0,k.withRouter)(ae))},1370:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=h(a(1043)),r=h(a(3)),o=h(a(26)),l=h(a(5)),i=h(a(8)),s=h(a(6)),c=h(a(7));a(1042);var d=a(1),u=h(d),p=h(a(403)),f=h(a(59)),g=a(20),m=a(252);function h(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setModalVisibel("moneyModalVisibel",!1)},a.onOkDialog=function(){var e=a.state,t=e.small,n=e.big,r=e.customScale,o=e.json,l=a.props.datatype,i=void 0;if(""!==t&&""!==n&&Number(t)>=Number(n))return(0,f.default)({status:"error",msg:(0,g.langCheck)("ZoneSetting-000056","pages",o)});i="4"===l?t+","+n:r+","+t+","+n,a.props.handleSelectChange(i,"dataval"),a.showModalHidden()},a.saveValue=function(e,t){(_.isNull(t)||_.isUndefined(t))&&(t=""),a.setState((0,r.default)({},e,t))},a.state={initVal:a.props.initVal,small:"",big:"",customScale:"",json:{}},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;!0===e.modalVisibel&&this.setState({initVal:e.initVal},(function(){var a=e.datatype,n=t.state.initVal;if(""===n||null===n)t.setState({customScale:"4"===a?0:2,small:"",big:""});else{var r=n&&n.split(",");"4"===a?t.setState({customScale:0,small:r&&3===n.length?r[1]:n&&2===n.length?r[0]:"",big:r?r[r.length-1]:""}):t.setState({customScale:r?r[0]:31,small:r?r[1]:"",big:r?r[2]:""})}}))}},{key:"componentDidMount",value:function(){var e=this;(0,m.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.customScale,r=t.small,o=t.big,l=t.json,i=this.props.datatype;return u.default.createElement("div",{className:"myZoneModal"},u.default.createElement(p.default,{closable:!1,customHeader:(0,g.langCheck)("ZoneSetting-000022","pages",l),wrapClassName:"zonesetting-moneyModal",visible:this.props.modalVisibel,okText:(0,g.langCheck)("ZoneSetting-000005","pages",l),cancelText:(0,g.langCheck)("ZoneSetting-000006","pages",l),onOk:this.onOkDialog,destroyOnClose:!0,onCancel:this.showModalHidden,fieldid:"money"},function(){if("4"!==i)return u.default.createElement("div",null,u.default.createElement("div",{className:"descrip_label"},(0,g.langCheck)("ZoneSetting-000057","pages",l)," "),u.default.createElement("div",{className:"mdcontent"},u.default.createElement("div",null,u.default.createElement("span",{className:"money-label"}," ",(0,g.langCheck)("ZoneSetting-000058","pages",l)),u.default.createElement(n.default,{precision:0,min:0,max:8,value:a,onChange:function(t){e.saveValue("customScale",t)}}))))}(),u.default.createElement("div",null,u.default.createElement("div",{className:"descrip_label"},(0,g.langCheck)("ZoneSetting-000059","pages",l)," "),u.default.createElement("div",{className:"mdcontent"},u.default.createElement("div",null,u.default.createElement("span",{className:"money-label"},(0,g.langCheck)("ZoneSetting-000060","pages",l)),u.default.createElement(n.default,{precision:a,value:r,onChange:function(t){e.saveValue("small",t)}})),u.default.createElement("div",null,u.default.createElement("span",{className:"money-label"},(0,g.langCheck)("ZoneSetting-000061","pages",l)),u.default.createElement(n.default,{value:o,precision:a,onChange:function(t){e.saveValue("big",t)}}))))))}}]),t}(d.Component);t.default=b},1371:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=T(a(3)),l=T(a(75)),i=T(a(76)),s=T(a(26)),c=T(a(5)),d=T(a(8)),u=T(a(6)),p=T(a(7)),f=T(a(121));a(180);var g=a(1),m=T(g),h=T(a(68)),b=T(a(32)),v=a(38),y=T(a(403)),k=T(a(59)),C=a(20),S=a(252),w=T(a(23)),x=a(404),E=T(a(1214));function T(e){return e&&e.__esModule?e:{default:e}}var M=w.default.base.NCRadio,A=f.default.Option;function _(e){var t=e.labelName,a=e.selectedValue,n=e.onChange;return m.default.createElement("div",{className:"mdcontentItem"},m.default.createElement("span",{className:"refer_label"},t),m.default.createElement(M.NCRadioGroup,{selectedValue:a,onChange:n},e.children))}var D=(n=function(e){function t(e){(0,c.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.call(a),a.state={pk_refinfo:"",refname:a.props.refname,showfocus:a.props.showfocus,iscode:a.props.iscode,onlyLeafCanSelect:a.props.onlyLeafCanSelect,isdatapowerenable:a.props.isdatapowerenable,isgrouppower:a.props.isgrouppower,isShowGroupPower:a.props.isShowGroupPower,option:[],json:{}},a.onOkDialog=a.onOkDialog.bind(a),a}var a;return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.json;if(!0===e.modalVisibel&&e.modalVisibel&&!this.props.modalVisibel){e.refname&&!e.isShowGroupPower&&this.setGroupPowerShow(e.refname,e.isgrouppower);var n=this.props.dataval,r=h.default.isEmpty(n)?"":n.split(",")[0],o=this.getdefaultfocus(e);this.setState({pk_refinfo:r,refname:e.refname,showfocus:e.showfocus||o,iscode:e.iscode,onlyLeafCanSelect:e.onlyLeafCanSelect||!1,isdatapowerenable:e.isdatapowerenable||!1,datapoweroperationcode:e.selectCard.datapoweroperationcode||"",isgrouppower:e.isgrouppower||!1,isShowGroupPower:e.isShowGroupPower||!1});var l;"/nccloud/platform/templet/queryrefinfo.do",l={defdoc:e.selectCard&&e.selectCard.metaid,isfilter:"0"===e.areatype},(0,b.default)({url:"/nccloud/platform/templet/queryrefinfo.do",data:l,info:{name:(0,C.langCheck)("ZoneSetting-000062","pages",a),action:(0,C.langCheck)("ZoneSetting-000063","pages",a)},success:function(e){var a=e.data;a.success&&a.data?t.setState({option:a.data}):(0,k.default)({status:"error",msg:a.data.true})}})}}},{key:"onOkDialog",value:(a=(0,i.default)(l.default.mark((function e(){var t,a,n,r,o,i,s,c,d,u,p,f,g=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateSave()){e.next=2;break}return e.abrupt("return");case 2:if(t=this.state,a=t.refname,n=t.showfocus,r=t.onlyLeafCanSelect,o=t.pk_refinfo,i=t.option,s=t.json,c=t.isdatapowerenable,d=t.isgrouppower,u=t.datapoweroperationcode,p=n,!((f=h.default.filter(i,(function(e){return e.pk_refinfo===o})))&&f.length&&f[0].refpath)){e.next=8;break}return e.next=8,this.props.handleSelectChange(f[0].refpath,"refcode");case 8:return this.props.onOk&&this.props.onOk({isShowGroupPower:this.state.isShowGroupPower}),e.next=11,this.asyncChange(a,o,p,n,r,c,d,u);case 11:(0,b.default)({url:"/nccloud/platform/templet/getMetaByRefName.do",info:{scode:(0,C.langCheck)("ZoneSetting-000064","pages",s),action:(0,C.langCheck)("ZoneSetting-000065","pages",s)},data:{showfocus:p||"1",onlyLeafCanSelect:r||!1,refname:a},success:function(e){if(e){var t=e.data,a=t.data,n=t.success;n&&a&&g.props.handleSelectChange(a,"metadataproperty")}}}),this.showModalHidden();case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e=this;(0,S.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.showfocus,n=(t.iscode,t.onlyLeafCanSelect),r=t.option,o=t.refname,l=t.json,i=t.isdatapowerenable,s=t.isgrouppower,c=t.isShowGroupPower,d=t.datapoweroperationcode,u=this.getdefaultfocus();return m.default.createElement("div",{className:"myZoneModal"},m.default.createElement(y.default,{customHeader:(0,C.langCheck)("ZoneSetting-000066","pages",l),wrapClassName:"zonesetting-referModal",visible:this.props.modalVisibel,okText:(0,C.langCheck)("ZoneSetting-000005","pages",l),cancelText:(0,C.langCheck)("ZoneSetting-000006","pages",l),onOk:this.onOkDialog,destroyOnClose:!0,onCancel:this.showModalHidden,fieldid:"referType"},m.default.createElement("div",{style:{margin:20}},this.props.isShowSetting&&m.default.createElement("div",{className:"descrip_label"},(0,C.langCheck)("ZoneSetting-000067","pages",l)," "),m.default.createElement("div",{className:"mdcontent"},m.default.createElement("div",{className:"mdcontentItem"},m.default.createElement("span",{className:"refer_label"},(0,C.langCheck)("ZoneSetting-000068","pages",l)),m.default.createElement(f.default,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:o,onChange:function(t,a){e.handleSelectChange(t,a.props.children)},style:{width:220},notFoundContent:(0,C.langCheck)("ZoneSetting-000278","pages",l)},r.map((function(e,t){return m.default.createElement(A,{key:t,value:e.pk_refinfo,title:e.name},e.name)})))))),this.props.isShowSetting&&m.default.createElement("div",{style:{margin:20}},m.default.createElement("div",{className:"descrip_label"},(0,C.langCheck)("ZoneSetting-000069","pages",l)," "),m.default.createElement("div",{className:"mdcontent"},m.default.createElement(_,{labelName:(0,C.langCheck)("ZoneSetting-000070","pages",l),selectedValue:a||u,onChange:this.checkboxChange},m.default.createElement(M,{value:"0"},(0,C.langCheck)("ZoneSetting-000081","pages",l)),m.default.createElement(M,{value:"1"},(0,C.langCheck)("ZoneSetting-000131","pages",l)),m.default.createElement(M,{value:"2"},(0,C.langCheck)("ZoneSetting-000243","pages",l))),m.default.createElement(_,{labelName:(0,C.langCheck)("ZoneSetting-000232","pages",l),selectedValue:n||!1,onChange:this.leafChange},m.default.createElement(M,{value:!0},(0,C.langCheck)("ZoneSetting-000229","pages",l)),m.default.createElement(M,{value:!1},(0,C.langCheck)("ZoneSetting-000230","pages",l))),c&&m.default.createElement(_,{labelName:(0,C.langCheck)("ZoneSetting-000340","pages",l),selectedValue:s,onChange:this.isGroupPowerChange},m.default.createElement(M,{value:!0},(0,C.langCheck)("ZoneSetting-000229","pages",l)),m.default.createElement(M,{value:!1},(0,C.langCheck)("ZoneSetting-000230","pages",l))))),this.props.isreport&&!this.props.selectCard.metapath&&m.default.createElement("div",{style:{margin:20}},m.default.createElement(E.default,{dataSource:{isdatapowerenable:i,datapoweroperationcode:d},referData:{pk_refinfo:this.state.pk_refinfo,pk:this.state.pk_refinfo},json:l,onDataPowerEnableChange:this.handleStateChange.bind(this,"isdatapowerenable"),onUsedSceneChange:this.handleStateChange.bind(this,"datapoweroperationcode")}))))}}]),t}(g.Component),r=function(){var e=this;this.showModalHidden=function(){e.props.setModalVisibel("referModalVisibel",!1)},this.getdefaultfocus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props;return t.iscode&&!0===t.iscode?"0":"1"},this.asyncChange=function(t,a,n,r,o,l,i,s){var c=a+",code="+n;e.props.isShowSetting?e.props.handleSelectChange({refname:t,dataval:c,showfocus:r,onlyLeafCanSelect:o,isdatapowerenable:l,isgrouppower:i}):e.props.handleSelectChange({refname:t,dataval:c,datapoweroperationcode:s,isdatapowerenable:l})},this.validateSave=function(){var t=e.state,a=t.datapoweroperationcode,n=t.isdatapowerenable,r=t.json;return!(n&&!a)||((0,k.default)({status:"warning",msg:(0,C.langCheck)("ZoneSetting-000357","pages",r)}),!1)},this.handleSelectChange=function(t,a){e.setState({pk_refinfo:t,refname:a}),e.setGroupPowerShow(a)},this.setGroupPowerShow=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];x.queryOrgAuthority.call(e,t,(function(t){e.setState({isShowGroupPower:t},(function(){e.setState({isgrouppower:a})}))}))},this.checkboxChange=function(t){e.setState({showfocus:t})},this.leafChange=function(t){e.setState({onlyLeafCanSelect:t})},this.isDataPowerEnableChange=function(t){e.setState({isdatapowerenable:t})},this.isGroupPowerChange=function(t){e.setState({isgrouppower:t})},this.handleStateChange=function(t,a){e.setState((0,o.default)({},t,a))}},n);t.default=(0,v.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard,areaList:e.zoneSettingData.areaList,isreport:e.zoneSettingData.isreport}}),{})(D)},1372:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(3)),r=y(a(26)),o=y(a(5)),l=y(a(8)),i=y(a(6)),s=y(a(7)),c=a(1),d=y(c),u=a(38),p=y(a(403)),f=y(a(59)),g=y(a(1210)),m=a(20),h=a(252),b=y(a(23)),v=y(a(1214));function y(e){return e&&e.__esModule?e:{default:e}}var k=b.default.base.NCRadio,C=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setModalVisibel("customModalVisibel",!1)},a.onOkDialog=function(){if(a.validateSave()){var e=a.state,t=e.initVal,n=e.showfocus,r=e.onlyLeafCanSelect,o=e.refname,l=e.isgrade,i=e.isdatapowerenable,s=e.datapoweroperationcode;a.props.isShowSetting?a.props.handleSelectChange({dataval:t,showfocus:n||"1",onlyLeafCanSelect:r||!1,isdatapowerenable:i||!1,refname:o,defaultvalue:"",isgrade:l}):a.props.handleSelectChange({refname:o,dataval:t,datapoweroperationcode:s,isdatapowerenable:i}),a.showModalHidden()}},a.checkboxChange=function(e){a.setState({showfocus:e})},a.leafChange=function(e){a.setState({onlyLeafCanSelect:e})},a.isDataPowerEnableChange=function(e){a.setState({isdatapowerenable:e})},a.validateSave=function(){var e=a.state,t=e.datapoweroperationcode,n=e.isdatapowerenable,r=e.json;return!(n&&!t)||((0,f.default)({status:"warning",msg:(0,m.langCheck)("ZoneSetting-000357","pages",r)}),!1)},a.handleStateChange=function(e,t){a.setState((0,n.default)({},e,t))},a.state={initVal:a.props.initVal,refname:a.props.refname,showfocus:a.props.showfocus,iscode:a.props.iscode,onlyLeafCanSelect:a.props.onlyLeafCanSelect,isdatapowerenable:a.props.isdatapowerenable,isgrade:"",json:{}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.modalVisibel&&e.modalVisibel&&!this.props.modalVisibel&&this.setState({initVal:e.initVal,refname:e.refname,showfocus:e.showfocus,iscode:e.iscode,onlyLeafCanSelect:e.onlyLeafCanSelect,isdatapowerenable:e.isdatapowerenable,datapoweroperationcode:e.selectCard.datapoweroperationcode})}},{key:"componentDidMount",value:function(){var e=this;(0,h.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.initVal,n=t.showfocus,r=t.iscode,o=t.onlyLeafCanSelect,l=t.refname,i=t.json,s=t.isdatapowerenable,c=t.datapoweroperationcode;return d.default.createElement("div",{className:"myZoneModal"},d.default.createElement(p.default,{closable:!1,title:(0,m.langCheck)("ZoneSetting-000022","pages",i),wrapClassName:"zonesetting-customModal",visible:this.props.modalVisibel,okText:(0,m.langCheck)("ZoneSetting-000005","pages",i),cancelText:(0,m.langCheck)("ZoneSetting-000006","pages",i),onOk:this.onOkDialog,destroyOnClose:!0,onCancel:this.showModalHidden,fieldid:"custom"},d.default.createElement("div",{className:"def-refer"},d.default.createElement(g.default,{value:{refpk:a||"test",refname:l,refcode:""},placeholder:(0,m.langCheck)("ZoneSetting-000023","pages",i),fieldid:"defdocList",onChange:function(t){e.setState({initVal:t&&t.refpk,refname:t&&t.refname,isgrade:t&&t.values&&t.values.isgrade&&t.values.isgrade.value})}})),this.props.isShowSetting&&d.default.createElement("div",{className:"mdcontent"},d.default.createElement("div",{className:"mdcontentItem"},d.default.createElement("span",{className:"refer_label"},(0,m.langCheck)("ZoneSetting-000070","pages",i)),d.default.createElement(k.NCRadioGroup,{selectedValue:n||(r&&!0===r?"0":"1"),onChange:this.checkboxChange},d.default.createElement(k,{value:"0"},(0,m.langCheck)("ZoneSetting-000081","pages",i)),d.default.createElement(k,{value:"1"},(0,m.langCheck)("ZoneSetting-000131","pages",i)),d.default.createElement(k,{value:"2"},(0,m.langCheck)("ZoneSetting-000243","pages",i)))),d.default.createElement("div",{className:"mdcontentItem"},d.default.createElement("span",{className:"refer_label"},(0,m.langCheck)("ZoneSetting-000232","pages",i)),d.default.createElement(k.NCRadioGroup,{selectedValue:o||!1,onChange:this.leafChange},d.default.createElement(k,{value:!0},(0,m.langCheck)("ZoneSetting-000229","pages",i)),d.default.createElement(k,{value:!1},(0,m.langCheck)("ZoneSetting-000230","pages",i))))),this.props.isreport&&!this.props.selectCard.metapath&&d.default.createElement(v.default,{dataSource:{isdatapowerenable:s,datapoweroperationcode:c},referData:{refpk:a,pk:a},json:i,onDataPowerEnableChange:this.handleStateChange.bind(this,"isdatapowerenable"),onUsedSceneChange:this.handleStateChange.bind(this,"datapoweroperationcode")})))}}]),t}(c.Component);t.default=(0,u.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard,areaList:e.zoneSettingData.areaList,isreport:e.zoneSettingData.isreport}}),{})(C)},1373:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a(15)),r=w(a(29)),o=w(a(2)),l=w(a(97)),i=w(a(26)),s=w(a(5)),c=w(a(8)),d=w(a(6)),u=w(a(7)),p=w(a(1075));a(1067),a(1081);var f=a(1),g=w(f),m=w(a(68)),h=w(a(32)),b=a(38),v=w(a(403)),y=w(a(257)),k=a(20),C=a(252),S=a(1086);function w(e){return e&&e.__esModule?e:{default:e}}var x=w(a(23)).default.base.NCDiv,E=p.default.TreeNode,T=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.onLoadData=function(e){var t=a.state.json;return new l.default((function(n){e.props.children?n():(0,h.default)({url:"/nccloud/platform/templet/querymetapro.do",info:{name:(0,k.langCheck)("ZoneSetting-000017","pages",t),action:(0,k.langCheck)("ZoneSetting-000020","pages",t)},data:{metaid:e.props.refpk},success:function(t){if(t){var l=t.data,i=l.data,s=l.success;if(s&&i&&i.rows&&i.rows.length>0){var c=[];i.rows.map((function(t,a){c.push((0,o.default)({},t,{title:t.refcode+" "+t.refname,key:e.props.myUniqID+"."+t.refcode,myUniqID:e.props.myUniqID+"."+t.refcode,isLeaf:t.isleaf}))})),e.props.dataRef.children=[].concat(c),a.setState({metaTree:[].concat((0,r.default)(a.state.metaTree))}),n()}}}})}))},a.showModalHidden=function(){var e=a.props.cards;m.default.forEach(e,(function(e,t){e.myMetaPath&&""!==e.myMetaPath&&(e.myMetaPath="")})),a.props.setModalVisibel("relateMetaModalVisibel",!1)},a.onOkDialog=function(){var e="",t=a.props.cards;m.default.forEach(t,(function(t,a){t.myMetaPath&&""!==t.myMetaPath&&(e=""===e?t.code+"="+t.myMetaPath:e+","+t.code+"="+t.myMetaPath)})),a.props.handleSelectChange(e,"relatemeta"),a.showModalHidden()},a.renderTreeNodes=function(e){return e.map((function(e){var t="fieldid_"+e.refcode+"_node";return e.children?g.default.createElement(E,{icon:function(e){var t=e.expanded;return g.default.createElement(y.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return g.default.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})},title:e.title,key:e.key,dataRef:e,className:t},a.renderTreeNodes(e.children)):e.isLeaf?g.default.createElement(E,(0,o.default)({icon:g.default.createElement("span",{className:"tree-dot"})},e,{dataRef:e,className:t})):g.default.createElement(E,(0,o.default)({},e,{icon:function(e){var t=e.expanded;return g.default.createElement(y.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return g.default.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})},dataRef:e,className:t}))}))},a.onSelect=function(e,t){a.setState({selectedKeys:e,selectTreeNodes:t.selectedNodes})},a.cardClick=function(e){var t=a.state.selectTreeNodes;if(t.length>0){var n=t[0].props.dataRef;n.datatype===e.datatype&&(e.myMetaPath=n.myUniqID,a.setState({selectedKeys:[],selectTreeNodes:[]}))}},a.deleteMyMetaPath=function(e,t){e.myMetaPath="",a.setState({selectedKeys:[],selectTreeNodes:[]})},a.getOpacity=function(e,t){var a=1;return""!==t&&e!==t&&(a=.5),a},a.state={metaTree:[],selectTreeNodes:[],json:{}},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.json;if(!0===e.modalVisibel){var n=this.props.selectCard,r=n.metaid,l=n.relatemeta,i=this.props.cards;if(l&&""!==l){var s=l.split(","),c=[];m.default.forEach(s,(function(e){var t=e.split("=");c.push({code:t[0],myMetaPath:t[1]})})),m.default.forEach(i,(function(e,t){m.default.forEach(c,(function(t){t.code===e.code&&(e.myMetaPath=t.myMetaPath)}))}))}(0,h.default)({url:"/nccloud/platform/templet/querymetapro.do",info:{name:(0,k.langCheck)("ZoneSetting-000017","pages",a),action:(0,k.langCheck)("ZoneSetting-000020","pages",a)},data:{metaid:r},success:function(e){if(e){var n=e.data,r=n.data,l=n.success;if(l&&r&&r.rows&&r.rows.length>0){var i=[];r.rows.map((function(e,t){i.push((0,o.default)({},e,{title:e.refcode+" "+e.refname,key:""+e.refcode,myUniqID:""+e.refcode,isLeaf:e.isleaf}))})),t.setState({metaTree:i})}else l&&r&&r.rows&&!r.rows.length&&Notice({status:"warning",msg:(0,k.langCheck)("ZoneSetting-000021","pages",a)})}}})}}},{key:"componentDidMount",value:function(){var e=this;(0,C.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.metaTree,r=t.selectTreeNodes,o=t.json,l=this.props.cards,i="";return r.length>0&&(i=r[0].props.dataRef.datatype),g.default.createElement(v.default,{title:g.default.createElement("div",null,(0,k.langCheck)("ZoneSetting-000071","pages",o),g.default.createElement("span",{style:{fontSize:"13px",color:"#555",marginLeft:"20px"}},(0,k.langCheck)("ZoneSetting-000072","pages",o))),wrapClassName:"realate-meta-modal",visible:this.props.modalVisibel,okText:(0,k.langCheck)("ZoneSetting-000005","pages",o),cancelText:(0,k.langCheck)("ZoneSetting-000006","pages",o),onOk:this.onOkDialog,destroyOnClose:!0,onCancel:this.showModalHidden,width:"80%",bodyHeight:.72*document.body.clientHeight+"px",fieldid:"relateMeta"},g.default.createElement(S.PageLayout,null,g.default.createElement(S.PageLayoutLeft,null,g.default.createElement(x,{className:"sider-tree",fieldid:"releateMeta",areaCode:x.config.TreeCom},g.default.createElement(p.default,{loadData:this.onLoadData,showLine:!0,showIcon:!0,onSelect:this.onSelect,selectedKeys:this.state.selectedKeys},this.renderTreeNodes(a)))),g.default.createElement(S.PageLayoutRight,null,g.default.createElement("div",{className:"sider-list"},g.default.createElement("table",null,g.default.createElement("thead",null,g.default.createElement("tr",null,g.default.createElement("th",null,(0,k.langCheck)("ZoneSetting-000073","pages",o)),g.default.createElement("th",null,(0,k.langCheck)("ZoneSetting-000074","pages",o)))),g.default.createElement("tbody",null,l.map((function(t,a){if(t.metapath&&""!==t.metapath)return g.default.createElement("tr",{key:a,onClick:function(a){e.cardClick(t)},style:{opacity:e.getOpacity(t.datatype,i)}},g.default.createElement("td",null,t.label),t.myMetaPath&&""!==t.myMetaPath?g.default.createElement("td",null,g.default.createElement("div",{className:"close-and-text"},g.default.createElement(n.default,{type:"close",onClick:function(){e.deleteMyMetaPath(t,a)}})," ",t.myMetaPath)):g.default.createElement("td",null))}))))))))}}]),t}(f.Component);t.default=(0,b.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard}}),{})(T)},1374:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(26)),r=v(a(5)),o=v(a(8)),l=v(a(6)),i=v(a(7)),s=a(1),c=v(s),d=a(38),u=v(a(403)),p=b(a(253)),f=v(a(32)),g=b(a(405)),m=a(20),h=a(252);function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}p.high.Refer;var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.getFunctions=function(){var e=a.props.selectCard;(0,f.default)({url:"/nccloud/platform/templet/getfunction.do",data:{code:e.code},success:function(e){var t=e.data.data,n=[];for(var r in t)n.push({code:r,name:t[r]});a.setState({functions:n})}})},a.showModalHidden=function(){a.props.setModalVisibel("defaultValueModalVisibel",!1)},a.onOkDialog=function(){var e=a.state.defaultvalueObj,t=e.display,n=e.value,r="";""!==t&&""!==n&&(r=t+"="+n),a.props.handleSelectChange(r,"defaultvalue"),a.showModalHidden()},a.state={defaultvalueObj:{},json:{}},a.onOkDialog=a.onOkDialog.bind(a),a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.json;if(!0===e.modalVisibel){var n={},r=e.defaultvalue,o=e.isMultiSelectedEnabled,l=e.refname;if(r){var i=r.split("=");n={display:i[0],value:i[1]}}"0"===e.areatype?((0,f.default)({url:"/nccloud/platform/templet/getRefDefaultSel.do",info:{name:(0,m.langCheck)("ZoneSetting-000017","pages",a),action:(0,m.langCheck)("ZoneSetting-000024","pages",a)},data:[l],success:function(e){if(e){var a=e.data,r=a.data,l=a.success,i=void 0;l&&r&&(_.forEach(r,(function(e){i=e.refpath})),t.setState({refcode:i,defaultvalueObj:n,isMultiSelectedEnabled:o}))}}}),this.getFunctions()):this.setState({refcode:e.refcode,defaultvalueObj:n,isMultiSelectedEnabled:o})}}},{key:"componentDidMount",value:function(){var e=this;window["nc-lightapp-front"]=p;(0,h.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"render",value:function(){var e=this,t=this.state.json;if(!this.state.refcode)return null;var a="0"===this.props.areatype?this.state.functions:null;return c.default.createElement(u.default,{customHeader:(0,m.langCheck)("ZoneSetting-000025","pages",t),wrapClassName:"zonesetting-defaultValueModal",visible:this.props.modalVisibel,okText:(0,m.langCheck)("ZoneSetting-000005","pages",t),cancelText:(0,m.langCheck)("ZoneSetting-000006","pages",t),onOk:this.onOkDialog,destroyOnClose:!0,onCancel:this.showModalHidden,fieldid:"defaultValue",size:"sm"},c.default.createElement("div",{className:"mdcontent"},function(){if(e.state["myRefDom"+e.state.refcode]){var t=e.state["myRefDom"+e.state.refcode];return c.default.createElement(t,{isMultiSelectedEnabled:e.state.isMultiSelectedEnabled,foolValue:e.state.defaultvalueObj,fieldid:"defaultValueRef",onChange:function(t,a){e.setState({defaultvalueObj:a})},isShowUnit:e.props.isUnit,functions:a})}g.createScript.call(e,""+e.state.refcode)}()))}}]),t}(s.Component);t.default=(0,d.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard}}))(y)},1375:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(2)),r=m(a(26)),o=m(a(5)),l=m(a(8)),i=m(a(6)),s=m(a(7)),c=a(1),d=m(c),u=m(a(403)),p=m(a(1376)),f=m(a(1377)),g=a(20);function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setModalVisibel("customDocDefaultModalVisibel",!1)},a.onOkDialog=function(){var e=a.state.defaultvalueObj,t=e.display,n=e.value,r="";""!==t&&""!==n&&(r=t+"="+n),a.props.handleSelectChange(r,"defaultvalue"),a.showModalHidden()},a.renderDocRefer=function(){var e=a.props,t=e.isgrade,r=e.docPk,o=e.refname,l=(e.json,{foolValue:a.state.defaultvalueObj,queryCondition:function(){return{pk_defdoclist:r}},refName:o,placeholder:o,isMultiSelectedEnabled:a.props.isMultiSelectedEnabled,onChange:function(e,t){a.setState({defaultvalueObj:t})}});return"Y"===t?d.default.createElement(f.default,(0,n.default)({fieldid:"defdocTreeRef"},l)):d.default.createElement(p.default,(0,n.default)({fieldid:"defdocGridRef"},l))},a.state={defaultvalueObj:{}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(!0===e.modalVisibel){var t={},a=e.defaultvalue;e.refname;if(a){var n=a.split("=");t={display:n[0],value:n[1]}}this.setState({defaultvalueObj:t})}}},{key:"render",value:function(){var e=this.props.json;return d.default.createElement(u.default,{closable:!1,title:(0,g.langCheck)("ZoneSetting-000227","pages",e),wrapClassName:"zonesetting-defaultValueModal",visible:this.props.modalVisibel,okText:(0,g.langCheck)("ZoneSetting-000005","pages",e),cancelText:(0,g.langCheck)("ZoneSetting-000006","pages",e),onOk:this.onOkDialog,destroyOnClose:!0,onCancel:this.showModalHidden,fieldid:"cusDocDefault"},d.default.createElement("div",{className:"mdcontent"},this.renderDocRefer()))}}]),t}(c.Component);t.default=h},1376:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(254));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={refType:"grid",refName:(0,l.langCheck)("0000PUB-000060"),placeholder:(0,l.langCheck)("0000PUB-000060"),refCode:"uapbd.refer.userdef.DefdocGridRef",queryGridUrl:"/nccloud/uapbd/userdef/DefdocGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["code","name"]}]};return r.default.createElement(s,(0,n.default)(t,e))};var r=i(a(1)),o=a(253),l=a(20);function i(e){return e&&e.__esModule?e:{default:e}}var s=o.high.Refer},1377:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(254));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={refType:"tree",refName:(0,l.langCheck)("0000PUB-000060"),placeholder:(0,l.langCheck)("0000PUB-000060"),refCode:"uapbd.refer.userdef.DefdocTreeRef",queryTreeUrl:"/nccloud/uapbd/userdef/DefdocTreeRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["code","name"]}]};return r.default.createElement(s,(0,n.default)(t,e))};var r=i(a(1)),o=a(253),l=a(20);function i(e){return e&&e.__esModule?e:{default:e}}var s=o.high.Refer},1378:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(119)),r=S(a(2)),o=S(a(26)),l=S(a(5)),i=S(a(8)),s=S(a(6)),c=S(a(7)),d=S(a(265));a(178),a(262);var u=a(1),p=S(u),f=a(38),g=(S(a(0)),a(405)),m=a(1084),h=a(20),b=a(120),v=S(a(1379)),y=S(a(23)),k=S(a(59)),C=a(404);function S(e){return e&&e.__esModule?e:{default:e}}var w=y.default.base,x=w.NCSelect,E=w.NCRadio,T=w.NCDiv,M=w.NCCheckbox,A=w.NCMultiLangText,D=x.NCOption,I=d.default.TabPane,N=E.NCRadioGroup,L={height:28,width:"100%"},P=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.relationcode=function(){var e=a.props,t=e.areaList,n=e.selectedArea,r=_.cloneDeep(t);"2"===n.areatype&&(r=r.filter((function(e){return"2"===e.areatype&&!e.associatedtab})));var o=r.map((function(e){return{name:e.code,value:e.code}}));return[{name:"",value:""}].concat(o)},a.getAssociatedtabCode=function(){var e=a.props,t=e.areaList,n=e.selectedArea,r=_.cloneDeep(t);"2"===n.areatype?r=r.filter((function(e){if("2"===e.areatype&&e.code!==n.code&&!e.associatedtab)return n.isgrandson?e.isgrandson:!e.isgrandson})):"1"===n.areatype&&(r=r.filter((function(e){return"1"===e.areatype&&e.code!==n.code&&e.code===e.headcode})));var o=r.map((function(e){return{name:e.code,value:e.code}}));return[{name:"",value:""}].concat(o)},a.onPressEnter=function(e,t){a[t+"input"].blur()},a.autoCheckPageSizeValue=function(e){var t=a.props.json;return""===e||void 0===e?((0,k.default)({status:"warning",msg:(0,h.langCheck)("ZoneSetting-000353","pages",t)}),e):(parseFloat(e)>5e3&&(e="5000",(0,k.default)({status:"warning",msg:(0,h.langCheck)("ZoneSetting-000354","pages",t)})),parseFloat(e)<1&&(e="1",(0,k.default)({status:"warning",msg:(0,h.langCheck)("ZoneSetting-000354","pages",t)})),_.isInteger(parseFloat(e))||(e="100",(0,k.default)({status:"warning",msg:(0,h.langCheck)("ZoneSetting-000354","pages",t)})),e)},a.changeTemplateValue=function(e,t){var n=a.props,o=n.selectedArea,l=n.areaList,i=n.json,s=o.associatedtab;if(l=_.cloneDeep(l),!_.isEmpty(o)){var c=_.cloneDeep(o);if(o=(0,r.default)({},o),"metaObj"===t){var d=l.findIndex((function(e){return e.pk_area===o.pk_area}));if(!_.isEmpty(l[d].queryPropertyList))return void(0,b.ControlTip)({status:"warning",title:(0,h.langCheck)("102202APP-000021","pages",i),msg:(0,h.langCheck)("102202APP-000071","pages",i),onOk:function(){u.call(a)},onCancel:function(){o.metaname=c.metaname,o.metaid="root",o.refcode=c.refcode,a.props.updateSelectArea(o)}});u.call(a)}else"associatedtab"===t&&(p(o,e),""!==e&&"2"===o.areatype&&(l=a.getMoveAreaList(o,a.props.areaList.find((function(t){return t.code===e}))))),"2"===o.areatype&&"pagesize"===t&&(e=a.autoCheckPageSizeValue(e)),o[t]=e,l.map((function(a){a.pk_area==o.pk_area&&(a[t]=e,"associatedtab"===t&&p(a,e))})),a.props.updateSelectArea(o),a.props.updateAreaList(l),"associatedtab"===t&&(e?(0,C.setActiveTabKey)({areaCode:e,activeKey:o.code,expand:!0}):((0,C.setActiveTabKey)({areaCode:s,activeKey:s,expand:!1}),(0,C.setActiveTabKey)({areaCode:o.code,activeKey:o.code,expand:!0})))}function u(){o.metaname=e.refname,o.metaid=e.refpk,o.refcode=e.refcode,o.queryPropertyList=[],o.formPropertyList=[],l.map((function(t){t.pk_area==o.pk_area&&(t.metaname=e.refname,t.metaid=e.refpk,t.refcode=e.refcode,t.queryPropertyList=[],t.formPropertyList=[])})),this.props.updateSelectArea(o),this.props.updateAreaList(l)}function p(e,t){""!==t&&("2"===e.areatype&&(e.tabheadcode=t),"1"===e.areatype&&(e.relationcode=""))}},a.getMoveAreaList=function(e,t){if(t){var n=_.cloneDeep(a.props.areaList),r=n.findIndex((function(t){return t.pk_area===e.pk_area})),o=n.findIndex((function(e){return e.pk_area===t.pk_area}));return r<o&&(n.splice(r,1),n.splice(o+1,0,e)),n}},a.changeMultiLangText=function(e,t){var n=a.props,r=n.selectedArea,o=n.areaList,l=(n.json,n.multiOptions),i=void 0;if(!_.isEmpty(r)){r=_.cloneDeep(r);for(var s=0;s<l.length;s++)i=""+t+l[s].index,r[i]=e[i].value;o=o.map((function(a){if(a.pk_area===r.pk_area)for(var n=0;n<l.length;n++)a[i=""+t+l[n].index]=e[i].value;return a})),a.props.updateSelectArea(r),a.props.updateAreaList(o)}},a.getTemplateInput=function(e,t){var o=L,l=a.props,i=l.areaList,s=l.selectedArea,c=l.validate,d=i.findIndex((function(e){return e.pk_area===s.pk_area})),u=i[d];return!1===c&&u&&["code","name"].includes(t)&&""===u[t]&&(o=(0,r.default)({},L,{borderColor:"#f5222d"})),p.default.createElement("div",{fieldid:t},p.default.createElement(n.default,{style:o,value:a.props.selectedArea[t],onChange:function(e){a.changeTemplateValue(e.target.value,t)},onBlur:function(e){a.changeTemplateValue(e.target.value,t)},ref:function(e){return a[t+"input"]=e},onPressEnter:function(e){a.onPressEnter(e.target.value,t)},disabled:a.getItemDisabled(t)}))},a.getTemplateSelect=function(e,t){return p.default.createElement("div",{fieldid:t},p.default.createElement(x,{showSearch:!0,showClear:!1,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:a.props.selectedArea[t],onChange:function(e){a.changeTemplateValue(e,t)},style:L,disabled:a.getItemDisabled(t),fieldid:t},e&&e.map((function(e,t){return p.default.createElement(D,{key:t,value:e.value},e.name)}))))},a.getTemplateRefer=function(e){var t=a.props.selectedArea,n={refcode:t?t.refcode:"",refname:t?t.metaname:"",refpk:t?t.metaid:""};return p.default.createElement(v.default,{value:n,onChange:function(e){a.changeTemplateValue(e,"metaObj")},disabled:a.props.isImplement,fieldid:"mdDefaultClassEntity"})},a.getTemplateRadio=function(e,t){var n=!!a.props.selectedArea[t]&&a.props.selectedArea[t];return p.default.createElement("div",{fieldid:t},p.default.createElement(N,{defaultValue:n,selectedValue:n,onChange:function(e){a.changeTemplateValue(e,t)},style:L},p.default.createElement(E,{value:!0,disabled:a.getItemDisabled(t)},(0,h.langCheck)("102202APP-000069","pages",a.props.json)),p.default.createElement(E,{value:!1,disabled:a.getItemDisabled(t)},(0,h.langCheck)("102202APP-000070","pages",a.props.json))))},a.getTemplateCheckbox=function(e,t){return p.default.createElement("div",{fieldid:t},p.default.createElement(M,{checked:!!a.props.selectedArea[t]&&a.props.selectedArea[t],onChange:function(e){console.log(a.props),a.changeTemplateValue(e,t)}}))},a.getItemDisabled=function(e){return a.props.isImplement&&!["name","isunfold","isclosequickquery","pagesize"].includes(e)},a.renderTabFields=function(){var e=a.props,t=e.selectedArea,n=e.json;return C.checkAreaType.isTable(t)&&!0!==t.isgrandson&&t.relationcode&&t.relationcode!==t.code?null:p.default.createElement(p.default.Fragment,null,t.areatype&&"0"!==t.areatype&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",null,(0,h.langCheck)("102202APP-000074","pages",n)),p.default.createElement("li",null,a.getTemplateSelect(a.getAssociatedtabCode(),"associatedtab"))),t.areatype&&"2"==t.areatype&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",null,(0,h.langCheck)("102202APP-000079","pages",n)),p.default.createElement("li",null,a.getTemplateSelect(a.getAssociatedtabCode(),"tabheadcode"))))},a.state={},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"getMultiLangInput",value:function(e,t){var a=this,n=L,o=this.props,l=o.areaList,i=o.selectedArea,s=o.validate,c=o.multiOptions,d=l.findIndex((function(e){return e.pk_area===i.pk_area})),u=l[d];!1===s&&u&&"name"===t&&""===u[t]&&(n=(0,r.default)({},L,{borderColor:"#f5222d"}));for(var f={},g=0;g<c.length;g++){var m=""+t+c[g].index;u&&(f[m]={value:u[m]})}return p.default.createElement("div",{fieldid:t},p.default.createElement(A,{style:n,value:f,onChange:function(e){a.changeMultiLangText(e,t)},onBlur:function(e){a.changeMultiLangText(e,t)},ref:function(e){return a[t+"input"]=e},disabled:this.getItemDisabled(t),fieldid:t,languageMeta:c,attrcode:t}))}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.selectedArea;return p.default.createElement(d.default,{defaultActiveKey:"1",renderTabBar:function(e,t){return p.default.createElement(T,{areaCode:T.config.TABS}," ",p.default.createElement(t,e))}},p.default.createElement(I,{tab:(0,h.langCheck)("102202APP-000067","pages",t),key:"1"},p.default.createElement("ul",{className:"basic-property rightTemplate"},p.default.createElement("li",{className:"required"},(0,h.langCheck)("102202APP-000038","pages",t)),p.default.createElement("li",null,this.getTemplateInput((0,h.langCheck)("102202APP-000038","pages",t),"code")),p.default.createElement("li",{className:"required"},(0,h.langCheck)("102202APP-000039","pages",t)),p.default.createElement("li",null,this.getMultiLangInput((0,h.langCheck)("102202APP-000039","pages",t),"name")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000040","pages",t)),p.default.createElement("li",null,this.getTemplateSelect((0,g.areatype)(t),"areatype")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000064","pages",t)),p.default.createElement("li",null,this.getTemplateSelect((0,g.isunfold)(t),"isunfold")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000041","pages",t)),p.default.createElement("li",null,this.getTemplateInput((0,h.langCheck)("102202APP-000041","pages",t),"areadesc")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000042","pages",t)),p.default.createElement("li",null,this.getTemplateSelect(this.relationcode(),"relationcode")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000043","pages",t)),p.default.createElement("li",null,this.getTemplateInput((0,h.langCheck)("102202APP-000043","pages",t),"clazz")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000044","pages",t)),p.default.createElement("li",null,this.getTemplateSelect((0,g.areastatus)(t),"areastatus")),p.default.createElement("li",null,(0,h.langCheck)("102202APP-000036","pages",t)),p.default.createElement("li",null,p.default.createElement("div",{fieldid:"mdDefaultClassEntity"},this.getTemplateRefer((0,h.langCheck)("102202APP-000036","pages",t)))),a.areatype&&"2"==a.areatype&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",null,(0,h.langCheck)("102202APP-000072","pages",t)),p.default.createElement("li",{className:"isgrandsonRadio"},this.getTemplateRadio((0,h.langCheck)("102202APP-000072","pages",t),"isgrandson"))),this.renderTabFields(),this.props.isImplement&&!C.checkAreaType.isSearch(a)?p.default.createElement(p.default.Fragment,null,p.default.createElement("li",null,(0,h.langCheck)("102202APP-000078","pages",t)),p.default.createElement("li",null,this.getTemplateCheckbox((0,g.areastatus)(t),"areahide"))):null,a.areatype&&"0"==a.areatype&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",null,(0,h.langCheck)("102202APP-000080","pages",t)),p.default.createElement("li",{className:"isgrandsonRadio"},this.getTemplateRadio((0,h.langCheck)("102202APP-000080","pages",t),"isclosequickquery"))),a.areatype&&"2"===a.areatype&&p.default.createElement(p.default.Fragment,null,p.default.createElement("li",null,(0,h.langCheck)("ZoneSetting-000352","pages",t)),p.default.createElement("li",null,this.getTemplateInput((0,h.langCheck)("ZoneSetting-000352","pages",t),"pagesize"))))))}}]),t}(u.Component);P.PropTypes={},t.default=(0,f.connect)((function(e){return{areaList:e.zoneSettingData.areaList,selectedArea:e.zoneSettingData.selectedArea,validate:e.zoneSettingData.validate,isImplement:e.zoneSettingData.isImplement,zoneDatas:e.zoneRegisterData.zoneDatas}}),{updateAreaList:m.updateAreaList,updateSelectArea:m.updateSelectArea})(P)},1379:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(254));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={queryTreeUrl:"/nccloud/riart/ref/mdClassDefaultEntityRefTreeAction.do",refType:"tree",isTreelazyLoad:!1,refName:(0,l.langCheck)("0000PUB-000046"),rootNode:{refname:(0,l.langCheck)("0000PUB-000046"),refpk:"root"},queryCondition:{isWorkbench:"Y"},onlyLeafCanSelect:!0};return r.default.createElement(s,(0,n.default)(t,e))};var r=i(a(1)),o=a(253),l=a(20);function i(e){return e&&e.__esModule?e:{default:e}}var s=o.high.Refer},1380:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(415)),r=C(a(1043)),o=C(a(412)),l=C(a(119)),i=C(a(2)),s=C(a(26)),c=C(a(5)),d=C(a(8)),u=C(a(6)),p=C(a(7));a(414),a(1042),a(413),a(178);var f=a(1),g=C(f),m=C(a(403)),h=a(20),b=C(a(23)),v=a(1084),y=a(38),k=C(a(59));function C(e){return e&&e.__esModule?e:{default:e}}a(1381);var S=b.default.base,w=S.NCRadio,x=S.NCSelect,E=S.NCCheckbox,T=x.NCOption,M=function(e){function t(e){(0,c.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleSelectCardChange=function(e,t){var n=a.props.selectCard;(n=(0,i.default)({},n))[t]=e,"watermarktype"===t&&(0==e?(n.watermarktext="",n.watermarkfont="",n.position="",n.transparency=""):(n.watermarktext="",n.watermarkfont=0,n.position=0,n.transparency=0)),a.props.updateSelectCard(n)},a.handleOk=function(){var e=a.props,t=e.selectCard,n=e.json;if(1==t.watermarktype){if(0==t.watermarktext.length)return void(0,k.default)({status:"warning",msg:(0,h.langCheck)("ZoneSetting-000318","pages",n)});if(t.watermarktext.length>20)return void(0,k.default)({status:"warning",msg:(0,h.langCheck)("ZoneSetting-000319","pages",n)})}a.props.handleSelectCardChange(t),a.props.toggleFormula("watermark",!1)},a.getSelectoption=function(){var e=a.props.json;return{fontsizeOption:[{name:"正常",value:0},{name:"大",value:1},{name:"小",value:2}],positionOption:[{name:""+(0,h.langCheck)("ZoneSetting-000309","pages",e),value:0},{name:""+(0,h.langCheck)("ZoneSetting-000310","pages",e),value:1},{name:""+(0,h.langCheck)("ZoneSetting-000311","pages",e),value:2},{name:""+(0,h.langCheck)("ZoneSetting-000312","pages",e),value:3},{name:""+(0,h.langCheck)("ZoneSetting-000313","pages",e),value:4},{name:""+(0,h.langCheck)("ZoneSetting-000314","pages",e),value:5},{name:""+(0,h.langCheck)("ZoneSetting-000315","pages",e),value:6},{name:""+(0,h.langCheck)("ZoneSetting-000316","pages",e),value:7}]}},a.renderTextMarkOption=function(){var e=a.props,t=e.selectCard,i=e.json,s=1!==t.watermarktype;return g.default.createElement("div",{className:"textMark"},g.default.createElement(o.default,null,g.default.createElement("label",null,(0,h.langCheck)("ZoneSetting-000304","pages",i)),g.default.createElement(l.default,{disabled:s,value:t&&t.watermarktext,onChange:function(e){a.handleSelectCardChange(e.target.value,"watermarktext")},onBlur:function(e){a.handleSelectCardChange(e.target.value,"watermarktext")},ref:function(e){return a.input=e},onPressEnter:function(e){a.input.blur()}})),g.default.createElement(o.default,null,g.default.createElement("label",null,(0,h.langCheck)("ZoneSetting-000305","pages",i)),g.default.createElement(x,{showClear:!1,disabled:s,value:t&&t.watermarkfont||0,onChange:function(e){a.handleSelectCardChange(e,"watermarkfont")}},a.getSelectoption().fontsizeOption.map((function(e,t){return g.default.createElement(T,{key:t,value:e.value},e.name)}))),g.default.createElement("label",{style:{marginLeft:20}},(0,h.langCheck)("ZoneSetting-000308","pages",i)),g.default.createElement(x,{showClear:!1,disabled:s,value:t&&t.position||0,onChange:function(e){a.handleSelectCardChange(e,"position")}},a.getSelectoption().positionOption.map((function(e,t){return g.default.createElement(T,{key:t,value:e.value},e.name)})))),g.default.createElement(o.default,null,g.default.createElement("label",null,(0,h.langCheck)("ZoneSetting-000307","pages",i)),g.default.createElement(r.default,{min:0,max:100,step:1,value:t&&t.watermarkalpha||0,onChange:function(e){a.handleSelectCardChange(e,"watermarkalpha")},disabled:s}),g.default.createElement(n.default,{min:0,max:100,onChange:function(e){a.handleSelectCardChange(e,"watermarkalpha")},value:t&&"number"==typeof t.watermarkalpha?t.watermarkalpha:0,step:1,disabled:s})))},a.rendetOtherOption=function(){var e=a.props,t=e.selectCard,n=e.json,r=t.isshowplace,o=t.isshowtime;return g.default.createElement("div",{className:"otherOption"},(0,h.langCheck)("ZoneSetting-000301","pages",n),g.default.createElement(E,{className:"dnd-cancel",checked:r,onChange:function(e){a.handleSelectCardChange(e,"isshowplace")}}),g.default.createElement("span",null,(0,h.langCheck)("ZoneSetting-000302","pages",n)),g.default.createElement(E,{className:"dnd-cancel",checked:o,onChange:function(e){a.handleSelectCardChange(e,"isshowtime")}}),g.default.createElement("span",null,(0,h.langCheck)("ZoneSetting-000303","pages",n)))},a.state={preSelectCard:{}},a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.selectCard;this.setState({preSelectCard:(0,h.deepClone)(e)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectCard,n=t.visible,r=t.json,o=this.state.preSelectCard;return console.log("selectCard========>",a),console.log("preSelectCard========>",o),g.default.createElement(m.default,{maskClosable:!0,customHeader:(0,h.langCheck)("ZoneSetting-000287","pages",r),visible:n,onOk:function(){e.handleOk()},onCancel:function(){e.props.handleSelectCardChange(o),e.props.toggleFormula("watermark",!1)},className:"watermarkModal"},g.default.createElement("div",{className:"leftSide"},g.default.createElement(w.NCRadioGroup,{selectedValue:a&&a.watermarktype,onChange:function(t){return e.handleSelectCardChange(t,"watermarktype")}},g.default.createElement(w,{value:0},(0,h.langCheck)("ZoneSetting-000298","pages",r)),g.default.createElement("br",null),g.default.createElement(w,{value:1},(0,h.langCheck)("ZoneSetting-000299","pages",r)),this.renderTextMarkOption(),this.rendetOtherOption())),g.default.createElement("div",{className:"rightSide"}))}}]),t}(f.Component);t.default=(0,y.connect)((function(e){return{selectCard:e.zoneSettingData.selectCard}}),{updateSelectCard:v.updateSelectCard})(M)},1381:function(e,t,a){var n=a(1382);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1382:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".watermarkModal{display:flex;flex-direction:row}.watermarkModal .leftSide{width:70%}.watermarkModal .leftSide .wui-radio-group{width:100%}.watermarkModal .leftSide .ant-row,.watermarkModal .leftSide .wui-radio-label{margin:10px 0}.watermarkModal .leftSide .textMark .ant-row>label{display:inline-block;min-width:43px!important;margin-right:16px;text-align:right}.watermarkModal .leftSide .textMark .ant-row .ant-input{width:280px}.watermarkModal .leftSide .textMark .ant-row .ant-input-number{width:60px}.watermarkModal .leftSide .textMark .ant-row .ant-slider{display:inline-block;width:200px;margin:0 20px}.watermarkModal .leftSide .textMark .ant-row .nc-select-wrapper{width:100px}.watermarkModal .leftSide .otherOption{margin-top:50px}.watermarkModal .leftSide .otherOption .checkbox-hotkey-wrapper{margin-left:16px}.watermarkModal .leftSide .otherOption .checkbox-hotkey-wrapper .wui-checkbox{margin:0}.watermarkModal .rightSide{width:30%}",""])},1383:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=f(a(26)),r=f(a(5)),o=f(a(8)),l=f(a(6)),i=f(a(7)),s=a(1),c=f(s),d=f(a(403)),u=f(a(23)),p=a(20);function f(e){return e&&e.__esModule?e:{default:e}}a(1384);var g=u.default.base,m=g.NCCheckbox,h=g.NCRadio,b=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.getfiletypeMap=function(){var e=a.props.json;return[{key:"all",name:""+(0,p.langCheck)("ZoneSetting-000270","pages",e),value:""},{key:"work",name:""+(0,p.langCheck)("ZoneSetting-000293","pages",e),value:"ppt、pptx、xls、xlsx、doc、docx、pdf、txt"},{key:"img",name:""+(0,p.langCheck)("ZoneSetting-000294","pages",e),value:"png、jpg、heic"},{key:"video",name:""+(0,p.langCheck)("ZoneSetting-000295","pages",e),value:"mp4"},{key:"zip",name:""+(0,p.langCheck)("ZoneSetting-000296","pages",e),value:"rar 、zip、7z"},{key:"dwg",name:""+(0,p.langCheck)("ZoneSetting-000297","pages",e),value:"dwg(AutoCad)"}]},a.radioChange=function(e){a.setState({filetype:e})},a.checkboxChange=function(e,t){console.log(e,t)},a.renderCheckboxArea=function(){return c.default.createElement("ul",null,a.getfiletypeMap().map((function(e){return c.default.createElement("li",null,c.default.createElement(m,{className:"dnd-cancel",onChange:function(t){a.checkboxChange(t,e.key)}},e.name),c.default.createElement("span",null,e.value))})))},a.state={filetype:"0"},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onOk,n=e.onCancel,r=e.json,o=this.state.filetype;return c.default.createElement(d.default,{maskClosable:!0,customHeader:(0,p.langCheck)("ZoneSetting-000287","pages",r),visible:t,onOk:a,onCancel:n,className:"filetypeModal"},c.default.createElement(h.NCRadioGroup,{selectedValue:o,onChange:this.radioChange},c.default.createElement(h,{value:"0"},(0,p.langCheck)("ZoneSetting-000291","pages",r)),c.default.createElement(h,{value:"1"},(0,p.langCheck)("ZoneSetting-000292","pages",r))),this.renderCheckboxArea())}}]),t}(s.Component);t.default=b},1384:function(e,t,a){var n=a(1385);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1385:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,"",""])},1386:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=w(a(51)),l=w(a(407)),i=w(a(179)),s=w(a(118)),c=w(a(97)),d=w(a(26)),u=w(a(5)),p=w(a(8)),f=w(a(6)),g=w(a(7)),m=a(1),h=w(m),b=w(a(403)),v=w(a(23)),y=w(a(32)),k=a(20),C=w(a(1387)),S=w(a(1215));function w(e){return e&&e.__esModule?e:{default:e}}a(1388);var x=v.default.createPage,E=v.default.base.NCButton,T="referFilterTable",M=(n=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));r.call(a),a.props.use.editTable(T);var n=(0,C.default)(e);return a.modifyMeta(n),a.state={buttoDisabled:!0},a}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.props.editTable.setStatus(T,"edit"),this.props.selectCard.refcondition&&this.initTableData()}},{key:"render",value:function(){var e=this.props,t=e.modalVisibel,a=e.json;return h.default.createElement(b.default,{maskClosable:!0,wrapClassName:"zonesetting-referfilter-modal",title:(0,k.langCheck)("ZoneSetting-000331","pages",a),visible:t,size:"lg",onOk:this.handleOk,onCancel:this.handleModalClose},this.renderContent())}}]),t}(m.Component),r=function(){var e=this;this.initTableData=function(){var t=e.props.selectCard.refcondition,a=e.formatTableData(t);e.props.editTable.setTableData(T,{rows:a})},this.modifyMeta=function(t){return e.getRefRelyPro().then((function(a){var n=a.refRelyVOList.map((function(e,t){return{display:e.displayName+" "+e.name,value:e.columnName+"--"+t}}));t[T].items.map((function(t){return"key"===t.attrcode&&(t.itemtype="customer",t.render=function(t,a,r){var o=a.values||{};return h.default.createElement(S.default,{value:o.key.value,optionData:n,onChange:function(t){e.props.editTable.setValByKeyAndIndex(T,r,"key",{value:t&&t.split("--")[0]})}})}),t})),e.props.meta.setMeta(t),e.setState({buttoDisabled:!1})})),t},this.getRefRelyPro=function(){return new c.default((function(t){(0,y.default)({url:"/nccloud/platform/templet/getRefRelyPro.do",data:{propertyId:e.props.selectCard.pk_query_property,areaType:e.props.currentArea.areatype},info:{name:(0,k.langCheck)("ZoneSetting-000017","pages",e.props.json),action:(0,k.langCheck)("ZoneSetting-000200","pages",e.props.json)},success:function(e){var a=e.data,n=a.success,r=a.data;n&&t(r)}})}))},this.formatTableData=function(t){return JSON.parse(t).map((function(t){return{values:e.obj2ObjValue(t)}}))},this.obj2ObjValue=function(t){var a={item:(0,k.langCheck)("ZoneSetting-000333","pages",e.props.json),constant:(0,k.langCheck)("ZoneSetting-000333","pages",e.props.json),code:(0,k.langCheck)("ZoneSetting-000333","pages",e.props.json)},n={},r=!0,o=!1,c=void 0;try{for(var d,u=(0,i.default)((0,l.default)(t));!(r=(d=u.next()).done);r=!0){var p=d.value,f=(0,s.default)(p,2),g=f[0],m=f[1];n[g]={display:"type"===g?a[m]:"",value:m}}}catch(e){o=!0,c=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw c}}return n},this.handleModalClose=function(){e.props.setModalVisibel("referFilterModalVisible",!1)},this.handleOk=function(){var t=e.props.editTable.getViewData(T);if(t.length>0){var a=t.map((function(e){var t=e.values,a=t.key,n=t.value,r=t.nofilter,o=!(!r||!r.value)&&r.value;return{key:a.value,value:n.value,nofilter:o}}));e.props.editTable.checkRequired(T,t)&&(e.props.handleSelectChange((0,o.default)(a),"refcondition"),e.handleModalClose())}else e.props.handleSelectChange("","refcondition"),e.handleModalClose()},this.handleAddRow=function(){e.props.editTable.addRow(T,-1,!1,{type:{display:(0,k.langCheck)("ZoneSetting-000333","pages",e.props.json),value:"item"}})},this.handleRemoveRow=function(){var t=e.props.editTable,a=t.getCheckedRows,n=t.deleteTableRowsByIndex,r=a(T).map((function(e){return e.index}));n(T,r)},this.handleAfterEvent=function(e,t,a,n,r,o,l,i,s){"type"===a&&e.editTable.setValByKeyAndIndex(T,o,"value",{display:"",value:""})},this.renderContent=function(){var t=e.props,a=t.json,n=t.editTable.createEditTable,r=e.state.buttoDisabled;return h.default.createElement("div",{className:"flex-container",style:{height:"100%"}},h.default.createElement("div",{className:"modal-header"},h.default.createElement("div",{className:"modal-header-content"},h.default.createElement(E,{onClick:e.handleAddRow,disabled:r},(0,k.langCheck)("ZoneSetting-000260","pages",a)),h.default.createElement(E,{onClick:e.handleRemoveRow,disabled:r},(0,k.langCheck)("ZoneSetting-000190","pages",a)))),h.default.createElement("div",{className:"modal-table flex-container"},n(T,{showCheck:!0,hideRightMenu:!0,onAfterEvent:e.handleAfterEvent,onBeforeEvent:e.handleBeforeEvent})),h.default.createElement("div",{className:"modal-footer"},h.default.createElement("div",{className:"tip-title"},h.default.createElement("i",{className:"icon iconfont icon-bangzhutishi"}),(0,k.langCheck)("ZoneSetting-000342","pages",a)),h.default.createElement("ul",null,h.default.createElement("li",null,(0,k.langCheck)("ZoneSetting-000343","pages",a)),h.default.createElement("li",null,(0,k.langCheck)("ZoneSetting-000344","pages",a)),h.default.createElement("li",null,(0,k.langCheck)("ZoneSetting-000345","pages",a)),h.default.createElement("li",null,(0,k.langCheck)("ZoneSetting-000346","pages",a))),h.default.createElement("div",null,(0,k.langCheck)("ZoneSetting-000347","pages",a))))}},n);M=x({})(M),t.default=M},1387:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r=o(a(1215));function o(e){return e&&e.__esModule?e:{default:e}}var l=o(a(23)).default.base.NCCheckbox;t.default=function(e){var t=e.json;return{code:"20521030",pageid:"20521030",appCode:"",referFilterTable:{items:[{attrcode:"value",itemtype:"customer",width:"280px",visible:!0,label:(0,n.langCheck)("ZoneSetting-000338","pages",t),required:!0,render:function(t,a,n){var o=a.values||{};return React.createElement(r.default,{value:o.value.value,optionData:e.cards.map((function(t){if(t.code!==e.selectCard.code)return{display:t.label+" "+t.code,value:t.code}})).filter((function(e){return null!=e})),onChange:function(t){e.editTable.setValByKeyAndIndex("referFilterTable",n,"value",{value:t})}})}},{attrcode:"key",itemtype:"input",width:"280px",visible:!0,label:(0,n.langCheck)("ZoneSetting-000337","pages",t),required:!0},{attrcode:"nofilter",itemtype:"customer",width:"120px",visible:!0,label:(0,n.langCheck)("ZoneSetting-000350","pages",t),required:!1,render:function(t,a,n){var r=a.values||{},o=!(!r.nofilter||!r.nofilter.value)&&r.nofilter.value;return React.createElement(l,{checked:o,onChange:function(t){e.editTable.setValByKeyAndIndex("referFilterTable",n,"nofilter",{value:t})}})}}],moduletype:"table",pagination:!1,code:"referFilterTable"}}}},1388:function(e,t,a){var n=a(1389);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},1389:function(e,t,a){(e.exports=a(16)(!1)).push([e.i,".zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-header{overflow:hidden}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-header .modal-header-content{float:right;margin-bottom:6px}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-table{margin-bottom:5px}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-table .table-next-body-inner-wrapper{height:200px}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-footer{border:1px solid #f3d97a;border-radius:8px;padding:10px;background-color:#ffffe8;margin-bottom:2px;color:#333;line-height:20px}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-footer .tip-title{color:#111}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .modal-footer .tip-title .icon{color:#ff8b00;font-size:14px;margin-right:4px;vertical-align:middle}.zonesetting-referfilter-modal .wui-modal-content .wui-modal-body .wui-table-content .wui-table-body{min-height:230px!important;max-height:230px!important}.zonesetting-referfilter-modal .wui-modal-content .nc-select-wrapper{height:24px!important}.zonesetting-referfilter-modal .wui-modal-content .nc-select-wrapper .wui-select-selection{min-height:24px!important;height:24px!important}",""])},1390:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a(69)),r=w(a(26)),o=w(a(5)),l=w(a(8)),i=w(a(6)),s=w(a(7)),c=a(1),d=w(c),u=w(a(1093)),p=(w(a(32)),a(38)),f=(w(a(59)),w(a(1391))),g=w(a(1393)),m=w(a(1395)),h=a(20),b=w(a(1401)),v=w(a(23)),y=a(1084),k=a(404),C=w(a(68)),S=a(1188);w(a(1096));function w(e){return e&&e.__esModule?e:{default:e}}var x=v.default.base.NCDiv,E=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.changeTab=function(e){a.setState({activeTab:e})},a.updateMetaTreeData=function(e){var t=e.metaTree,n=e.origTree;a.setState({metaTree:t,origTree:n})},a.loadMetaTree=function(e,t){var r=a.props,o=r.isImplement,l=r.newAreaList,i=r.selectedArea,s=r.updateSelectArea,c=a.state,d=c.metaTree,u=c.currentArea;return!1!==o&&(l.length&&0===d.length&&0===(0,n.default)(u).length?(s(l.find(Boolean)),!0):(0!==(0,n.default)(i).length||0===(0,n.default)(e.selectedArea).length)&&(e.selectedArea&&i?e.selectedArea.code!==i.code:void 0))},a.findActiveArea=function(e){var t=a.props,n=t.newAreaList,r=t.selectedArea;return e.selectedArea.code!==r.code?r:n.find(Boolean)},a.calculateToggleIconPosition=function(){var e=a.props,t=e.show;return e.isImplement?{}:{left:t?k.LEFT_SIDER_WIDTH:-11}},a.toggleLeftSider=function(){a.props.onToggleLeftSider(!a.props.leftSiderShow)},a.state={activeTab:"meta",metaTree:[],origTree:null,targetAreaID:"",targetAreaType:"",canSelectTreeNodeList:[],currentArea:{},loading:!1},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.props.json;if(this.loadMetaTree(e,t)){var r=this.findActiveArea(e);if(!r||""!==r.metaid&&null!==r.metaid&&void 0!==r.metaid){if(this.state.loading)return;this.setState({loading:!0}),S.queryMetaTreeData.call(this,r.metaid,"").then((function(e){var t={isleaf:!1,readonly:!1,refpk:r.metaid,refcode:"",pid:null,children:e},a=S.createMetaTreeIns.call(n,t,r.areatype),o=a.getMetaTreeData().children,l=[];C.default.forEach(o,(function(e){"205"===e.datatype&&l.push(e)})),n.setState({metaTree:o,origTree:a,targetAreaID:r.pk_area,targetAreaType:r.areatype,canSelectTreeNodeList:l,currentArea:r,loading:!1})}))}else this.setState({metaTree:[],targetAreaID:r.pk_area,targetAreaType:r.areatype,canSelectTreeNodeList:[],currentArea:r,loading:!1})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.status,r=t.json,o=t.isImplement,l=this.state,i=l.activeTab,s=l.loading,c=o&&!1===a?"spread-height":"";return d.default.createElement(x,{className:"template-setting-left-sider-container "+c,fieldid:"left",areaCode:x.config.Area},n&&a&&d.default.createElement("div",{className:"left-side-tab"},d.default.createElement("div",{onClick:function(){e.changeTab("meta")},className:"meta"===i&&"active"},(0,h.langCheck)("ZoneSetting-000247","pages",r)),d.default.createElement("div",{onClick:function(){e.changeTab("notMeta")},className:"notMeta"===i&&"active"},(0,h.langCheck)("ZoneSetting-000202","pages",r))),d.default.createElement("div",{className:"template-setting-sider template-setting-left-sider"+(o?" implement":""),style:{display:a?"block":"none"}},!o&&d.default.createElement(b.default,{multiOptions:this.props.multiOptions}),!o&&d.default.createElement(f.default,{json:this.props.json}),"meta"===i&&o&&!1===s&&d.default.createElement(m.default,{metaTree:this.state.metaTree,origTree:this.state.origTree,updateMetaTreeData:this.updateMetaTreeData,json:r,targetAreaID:this.state.targetAreaID,canSelectTreeNodeList:this.state.canSelectTreeNodeList,currentArea:this.state.currentArea}),!0!==o&&d.default.createElement(g.default,{json:this.props.json,templettype:this.props.templettype}),"notMeta"===i&&o&&d.default.createElement(g.default,{json:this.props.json,templettype:this.props.templettype})))}}]),t}(c.Component);t.default=(0,p.connect)((function(e){return{newAreaList:e.zoneSettingData.newAreaList,selectedArea:e.zoneSettingData.selectedArea,isImplement:e.zoneSettingData.isImplement,leftSiderShow:e.zoneSettingData.leftSiderShow}}),{updateSelectArea:y.updateSelectArea,onToggleLeftSider:y.onToggleLeftSider})((0,u.default)(E))},1391:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(26)),r=h(a(5)),o=h(a(8)),l=h(a(6)),i=h(a(7)),s=a(1),c=h(s),d=a(20),u=a(38),p=h(a(1216)),f=h(a(1392)),g=a(1084),m=a(404);function h(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props.json,a=[{areacode:"0",name:(0,d.langCheck)("102202APP-000033","pages",t),icon:"ncc-pt-cxq"},{areacode:"1",name:(0,d.langCheck)("102202APP-000032","pages",t),icon:"ncc-pt-bdq"},{areacode:"2",name:(0,d.langCheck)("102202APP-000031","pages",t),icon:"ncc-pt-bgq"}],n=c.default.createElement("div",null,c.default.createElement("div",{className:"tip"},c.default.createElement("i",{className:"iconfont icon-zhuyi1"}),(0,d.langCheck)("ZoneSetting-000197","pages",t)),c.default.createElement("span",{className:"title"},(0,d.langCheck)("ZoneSetting-000196","pages",t))," ");return c.default.createElement(p.default,{renderHeader:n,onDragItemClick:function(t){return(0,m.addNewAreaItem)(e.props,{items:{areatype:t.items.areacode},isExpand:!0})}},a.map((function(e){return c.default.createElement(f.default,{items:e})})))}}]),t}(s.Component);t.default=(0,u.connect)((function(e){return{areaList:e.zoneSettingData.areaList}}),{updateAreaList:g.updateAreaList,updateSelectArea:g.updateSelectArea})(b)},1392:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(1)),r=a(1037),o=l(a(257));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.DragSource)("area",{beginDrag:function(e){return{type:"area",from:"left",areaCode:e.items.areacode}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((function(e){var t=e.items,a=e.connectDragSource,r=e.onDragItemClick,l=t.areacode,i=t.name,s=t.icon;return a(n.default.createElement("div",{className:"drag-item-wrapper area",key:l,onClick:r},n.default.createElement("div",{className:"drag-item",title:i},n.default.createElement(o.default,{xlinkHref:"#icon-"+s}),n.default.createElement("span",{className:"name"},i))))}))},1393:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(26)),r=g(a(5)),o=g(a(8)),l=g(a(6)),i=g(a(7)),s=a(1),c=g(s),d=a(20),u=g(a(1216)),p=g(a(1394)),f=a(405);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,r.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.json,a=(e.templettype,(0,f.dataTypeObj)());return c.default.createElement(u.default,{headerTitle:(0,d.langCheck)("ZoneSetting-000202","pages",t)},a.map((function(e){return c.default.createElement(p.default,{items:e})})))}}]),t}(s.Component);t.default=m},1394:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(1)),r=a(1037),o=l(a(257));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.DragSource)("card",{beginDrag:function(e){return{type:"card",from:"left",datatype:e.items.value,notMetaData:!0}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((function(e){var t=e.items,a=e.connectDragSource,r=e.onDragItemClick,l=t.datatype,i=t.name,s=t.icon;t.nowrap;return a(n.default.createElement("div",{className:"drag-item-wrapper",key:l,onClick:r},n.default.createElement("div",{className:"drag-item",title:i},n.default.createElement(o.default,{xlinkHref:"#icon-"+s}),n.default.createElement("span",{className:"name"},i))))}))},1395:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=M(a(1038)),r=M(a(22)),o=M(a(97)),l=M(a(2)),i=M(a(26)),s=M(a(5)),c=M(a(8)),d=M(a(6)),u=M(a(7)),p=M(a(121)),f=M(a(119));a(180),a(178);var g=a(1),m=M(g),h=a(38),b=M(a(32)),v=M(a(23)),y=a(20),k=(a(1396),M(a(1397))),C=a(1084),S=M(a(1398)),w=M(a(1399)),x=M(a(68)),E=a(1188),T=M(a(1096));function M(e){return e&&e.__esModule?e:{default:e}}var A=f.default.Search,_=(p.default.Option,v.default.base),D=_.NCTree,I=(_.NCIcon,_.NCCheckbox),N=(_.NCFormControl,D.NCTreeNode),L=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.createCodeObject=function(){var e=a.props,t=e.areaList,n=e.targetAreaID,r={},o=t.find((function(e){return e&&e.pk_area===n})),l=o&&o.queryPropertyList;return l&&l.forEach((function(e){r[e.proid]=e.proid})),r},a.selectAllTreeNode=function(e,t){var n=a.state.selectedKeys,r=a.createCodeObject();n=x.default.cloneDeep(n);var o=a.props.metaTreeNodes;e?x.default.forEach(t,(function(e,t){-1===n.indexOf(e.myUniqID)&&void 0===r[e.proid]&&"205"!==e.datatype&&(n.push(e.myUniqID),o.push({props:{dataRef:(0,l.default)({},e)}}))})):(x.default.forEach(t,(function(e,t){x.default.remove(n,(function(t){return t===e.myUniqID}))})),x.default.forEach(t,(function(e,t){x.default.remove(o,(function(t){return t.props.dataRef.myUniqID===e.myUniqID}))}))),a.setState({selectedKeys:n,checkAllTree:e}),a.props.setMetaTreeNodes(o)},a.handleChangeSelectTreeNode=function(e){var t=a.props.canSelectTreeNodeList;x.default.forEach(t,(function(t){-1===e.indexOf(t.refcode+" "+t.refname)?null!==t.children&&setTimeout((function(){a.selectAllTreeNode(!1,t.children)}),0):null!==t.children&&setTimeout((function(){a.selectAllTreeNode(!0,t.children)}),0)})),a.setState({needToBeAllSelectNodeList:e})},a.initState=function(){a.setState({selectedKeys:[],searchSelectedKeys:[],checkAllTree:!1}),a.props.setMetaTreeNodes([])},a.handleSearch=function(e){var t=a.state,n=(t.searchTreeData,t.searchSelectedKeys),r=[];(0,y.DeferFn)((function(){(0,b.default)({url:"/nccloud/platform/templet/searchmeta.do",data:{metaid:a.props.selectedArea.metaid,text:e},info:{name:(0,y.langCheck)("ZoneSetting-000017","pages",a.props.json),action:(0,y.langCheck)("ZoneSetting-000020","pages",a.props.json)},success:function(t){var o=t.data.data;if(o){var i=[];o.map((function(e){i.push((0,l.default)({},e,{title:e.refcode+" "+e.refname,key:""+e.refcode,myUniqID:""+e.refcode,isLeaf:e.isleaf}))})),i.forEach((function(t){if(t.title.indexOf(e)>-1){var a=function e(t,a){for(var n=void 0,r=t.key,o=0;o<a.length;o++){var l=a[o];l.children&&(l.children.some((function(e){return e.key.indexOf(r)>-1}))?n=l.key:e(r,l.children)&&(n=e(r,l.children)))}return n}(t,o);a&&!r.includes(a)&&r.push(a),a&&console.log(a)}})),a.setState({searchExpandedKeys:r,searchSelectedKeys:n,searchTreeData:i})}else a.setState({searchExpandedKeys:[],searchSelectedKeys:[],searchTreeData:[]})}})}))},a.onSearchFieldChange=(0,y.debounce)((function(e){var t=a.props,n=t.origTree;t.searchField;0===e.length?a.setState({searchValue:e,searchExpandedKeys:[],curTree:n}):a.setState({searchValue:e})}),300),a.onSearchMeta=function(e){if(e){var t=a.props,n=t.selectedArea,r=t.origTree,o=(n.metaid,a.state),l=(o.searchTreeData,o.searchSelectedKeys),i=[],s=E.queryMetaPropByKeyWords.call(a,e,r,i),c=s.getMetaTreeData().children;s.getRoot().children.length>0?a.setState({curTree:s,searchExpandedKeys:i,searchSelectedKeys:l,searchTreeData:c}):a.setState({curTree:s,searchExpandedKeys:[],searchSelectedKeys:[],searchTreeData:[]})}},a.onSearchMetaAsync=function(e){var t=a.props,n=t.selectedArea,r=t.currentArea,o=n.metaid;e&&(0,y.DeferFn)((function(){E.queryMetaTreeData.call(a,o,e).then((function(e){var t={isleaf:!1,readonly:!1,refpk:r.metaid,refcode:"",pid:null,children:e},n=E.createMetaTreeIns.call(a,t,r.areatype).getMetaTreeData();n.children;console.log(n)}))}))},a.onSearchFieldClean=function(){var e=a.props,t=e.origTree,n=e.searchField;ReactDOM.findDOMNode(n).querySelector(".ant-input").value="",a.setState({searchValue:"",curTree:t})},a.onLoadSubTreeData=function(e){var t=a.state,n=t.searchValue,r=t.curTree,l=a.props,i=(l.targetAreaType,l.origTree),s=e.props,c=s.children,d=s.refpk,u=s.myUniqID,p=(s.notSearchAreaCode,s.datatype,s.dataRef,[]);return new o.default((function(e){c?e():E.asyncQueryMetaPro.call(a,d).then((function(t){var o=i,l=[];n?l=E.appendMetaTreeNodes.call(a,t.rows,u,r):(o=E.appendMetaTreeNodes.call(a,t.rows,u,i),l=E.queryMetaPropByKeyWords.call(a,n,o,p)),a.setState({curTree:l});var s=o.getMetaTreeData();a.props.updateMetaTreeData({metaTree:s.children,origTree:o}),e()}))}))},a.onSelectTreeNode=function(e,t){a.setState({selectedKeys:e,searchSelectedKeys:e});var n=t.selectedNodes.map((function(e){return{props:{dataRef:e.props.dataRef}}}));a.props.setMetaTreeNodes(n)},a.onExpandTreeNode=function(e,t,n){var r=t.expanded,o=t.node,l=x.default.result(o,"props.dataRef.myUniqID");!1===r&&(e=x.default.filter(e,(function(e){return-1===e.indexOf(l)}))),"search"===n?a.setState({searchExpandedKeys:e}):a.setState({expandedKeys:e})},a.renderMetaTree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=a.state,n=t.expandedKeys,r=t.selectedKeys,o=t.searchSelectedKeys,l=t.searchExpandedKeys;return"search"===e&&(r=o,n=l),m.default.createElement(D,{fieldid:"meta",showIcon:!0,mustExpandable:!0,showLine:!0,multiple:!0,loadData:a.onLoadSubTreeData,onSelect:a.onSelectTreeNode,onExpand:function(t,n){a.onExpandTreeNode(t,n,e)},expandedKeys:n,selectedKeys:r},a.renderMetaTreeNodes(e))},a.renderTreeNode=function(e,t,n){var o=a.state,i=o.expandedKeys,s=o.searchExpandedKeys,c=o.searchValue,d="search"===n?s:i,u=a.props,p=u.targetAreaID,f=u.metaTreeNodes,g=u.currentArea,h=a.createCodeObject(),b=e.data,v=(e.parent,e.children),y=(b.children,(0,r.default)(b,["children"])),C=y.isLeaf,S=y.key,w=y.refcode,x=y.title,E="fieldid_"+w+"_node",T=h[y.proid]?"moved-tree-node":"",M=x.search(c),A=x.substr(0,M),_=x.substr(M+c.length),D=M>-1?m.default.createElement("span",null,A,m.default.createElement("span",{className:"wui-tree-searchable-filter"},c),_):m.default.createElement("span",null,x),I=m.default.createElement("span",{className:"icon iconfont "+(d.includes(w)?"icon-wenjianjiadakai":"icon-wenjianjia")}),L=m.default.createElement(k.default,{title:D,dataRef:y,targetAreaID:p,selectedNodes:f,movedItem:!!T,initState:a.initState,currentArea:g});y.targetAreaID=p;var P=void 0;if(v.length>0){var O=v.map((function(e){return t.get(e)}));P=m.default.createElement(N,(0,l.default)({},y,{key:S,dataRef:y,className:E+" "+T,icon:I,title:L}),O)}else P=C?m.default.createElement(N,(0,l.default)({},y,{dataRef:y,className:E+" "+T,title:L})):m.default.createElement(N,(0,l.default)({},y,{dataRef:y,className:E+" "+T,icon:I,title:L}));return P},a.renderMetaTreeNodes=function(e){var t=a.state.curTree;if(!(t instanceof T.default))return null;var r=T.default.serialize(t).nodes.reverse(),o=t.getRoot(),l=new n.default;return r.forEach((function(t){var n=a.renderTreeNode(t,l,e);l.set(t,n)})),o.children.map((function(e){return l.get(e)}))},a.state={selectedKeys:[],needToBeAllSelectNodeList:[],expandedKeys:[],checkAllTree:!1,searchValue:"",searchSelectedKeys:[],searchTreeData:[],searchExpandedKeys:[],curTree:null},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectedArea,a=e.origTree;t.metaid;this.setState({curTree:a})}},{key:"componentWillReceiveProps",value:function(e,t){var a=this.props,n=a.currentArea,r=a.metaTreeNodes;n.pk_area!==e.currentArea.pk_area&&(this.setState({curTree:e.origTree,selectedKeys:[],searchSelectedKeys:[],expandedKeys:[],needToBeAllSelectNodeList:[],checkAllTree:!1,searchValue:"",searchTreeData:[]}),this.props.setMetaTreeNodes([])),0===e.metaTreeNodes.length&&r.length>0&&this.setState({selectedKeys:[],searchSelectedKeys:[],needToBeAllSelectNodeList:[],checkAllTree:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.json,n=(t.canSelectTreeNodeList,t.metaTree);this.state.searchValue;return m.default.createElement("div",{className:"left-side-meta-tree"},m.default.createElement("div",{className:"tree-feature-container"},m.default.createElement("div",{className:"tip"},m.default.createElement("i",{className:"iconfont icon-zhuyi1"}),(0,y.langCheck)("ZoneSetting-000197","pages",a)),m.default.createElement("div",{className:"metatree-search-input",style:{width:"250px",display:"block"}},m.default.createElement(A,{ref:function(t){return e.props.searchField=t},placeholder:(0,y.langCheck)("ZoneSetting-000322","pages",a),onChange:function(t){e.onSearchFieldChange(t.target.value)},onSearch:this.onSearchMeta,suffix:m.default.createElement("i",{className:"icon iconfont icon-sousuo st-icon-sousuo",onClick:this.onSearchMeta})}),this.state.searchValue&&m.default.createElement("i",{class:"icon iconfont icon-qingkong",onClick:this.onSearchFieldClean})),m.default.createElement(I,{className:"dnd-cancel check-all-tree",onChange:function(t){e.selectAllTreeNode(t,e.props.metaTree)},checked:this.state.checkAllTree},(0,y.langCheck)("ZoneSetting-000125","pages",a))),m.default.createElement("div",{className:"tree-contianer"},n.length>0?this.renderMetaTree(this.state.searchValue?"search":"default"):m.default.createElement(w.default,{text:(0,y.langCheck)("ZoneSetting-000278","pages",a)})),m.default.createElement(S.default,null))}}]),t}(g.Component);t.default=(0,h.connect)((function(e){return{metaTreeNodes:e.zoneSettingData.metaTreeNodes,areaList:e.zoneSettingData.areaList,selectedArea:e.zoneSettingData.selectedArea}}),{setMetaTreeNodes:C.setMetaTreeNodes})(L)},1396:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTree=void 0;var n,r=a(68),o=(n=r)&&n.__esModule?n:{default:n};t.createTree=function(e,t,a){e=o.default.cloneDeep(e);var n=l(e,a),r=n.treeArray,c=n.treeObject;return c=i(c,t),s(r,c,t)};var l=function(e,t){var a=[],n={};return e.map((function(e,r){e[t]?(n.hasOwnProperty(e[t])||(n[e[t]]=[]),n[e[t]].push(e)):a.push(e)})),{treeArray:a,treeObject:n}},i=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(e[a]=s(e[a],e,t));return e},s=function(e,t,a){return e.map((function(e,n){return t.hasOwnProperty(e[a])&&(e.children=t[e[a]]),e}))}},1397:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=h(a(26)),o=h(a(5)),l=h(a(8)),i=h(a(6)),s=h(a(7)),c=a(1),d=h(c),u=h(a(23)),p=a(1037),f=a(1039),g=a(38),m=a(1095);function h(e){return e&&e.__esModule?e:{default:e}}var b=u.default.base,v=(b.NCTree,b.NCIcon,{canDrag:function(e){return!e.movedItem},beginDrag:function(e){var t=e.targetAreaID,a=e.selectedNodes,n=e.currentArea;document.body.classList.add("dragging-meta-tree");var r=(0,m.processClass)(n.code),o=document.querySelector(".search-area-"+r);return o&&o.classList.add("area-can-drop-meta"),e.areaList.forEach((function(e){var t=document.createElement("div"),a=(0,m.processClass)(e.code);t.classList.add("mask");var o=".drag-mask-"+a,l=document.querySelector(o);if(a!==r){if("1"===n.areatype&&n.relationcode===a)document.querySelector(".drag-mask-content-"+a).appendChild(t);else l&&l.appendChild(t);t.addEventListener("dragenter",(function(){t.classList.add("mask-bg-color")})),t.addEventListener("dragleave",(function(){t.classList.remove("mask-bg-color")}))}})),a=a.map((function(e){return{props:{dataRef:e.props.dataRef}}})),{dataRef:e.dataRef,metaTree:"metaTree",selectedNodes:a,targetAreaID:t}},isDragging:function(e,t){return t.getItem().id===e.id},endDrag:function(e){var t=e.currentArea,a=(0,m.processClass)(t.code);document.body.classList.remove("dragging-meta-tree");var n=document.querySelector(".search-area-"+a);n&&n.classList.remove("area-can-drop-meta"),e.areaList.forEach((function(t){var a=e.currentArea,n=(0,m.processClass)(t.code),r=".drag-mask-"+n,o=document.querySelector(r);("1"!==t.areatype&&"2"!==t.areatype||a.relationcode!==n||(o=document.querySelector(".drag-mask-content-"+n)),o)&&(o.lastElementChild.className.includes("mask")&&o.removeChild(o.lastElementChild))}))}}),y=(0,p.DragSource)("card",v,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),getDropResult:t.getDropResult()}}))(n=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=e.getDropResult,r=e.initState;n&&n.result&&r()}},{key:"componentDidMount",value:function(){this.props.connectDragPreview((0,f.getEmptyImage)(),{captureDraggingState:!0})}},{key:"render",value:function(){var e=this.props,t=e.connectDragSource,a=e.title;return t(d.default.createElement("div",{style:{display:"inline-block"}},a))}}]),t}(c.Component))||n;t.default=(0,g.connect)((function(e){return{areaList:e.zoneSettingData.areaList}}))(y)},1398:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=p(a(26)),o=p(a(5)),l=p(a(8)),i=p(a(6)),s=p(a(7)),c=a(1),d=p(c),u=a(38);function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,a(1037).DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}}))(n=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.getItemStyles=function(){var e=a.props.clientOffset;if(!e)return{display:"none"};var t="translate("+e.x+"px, "+e.y+"px)";return{transform:t,WebkitTransform:t}},a.countSelectedNumber=function(){var e=a.props.item,t=e.selectedNodes,n=t.find((function(t){return t.props.dataRef.proid===e.dataRef.proid}));return 1===t.length&&n?e.dataRef.title:n?"+"+t.length:"+"+(t.length+1)},a.state={layerStyle:{display:"none"}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){if(navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1||navigator.userAgent.indexOf("Edge")>-1)return null;var e=this.props.item;return null===e||e&&!e.metaTree?null:d.default.createElement("div",null,d.default.createElement("div",{style:this.getItemStyles(),className:"tree-node-layer"},d.default.createElement("span",null,0===e.selectedNodes.length?e.dataRef.title:this.countSelectedNumber())))}}]),t}(c.Component))||n;t.default=(0,u.connect)((function(e){return{}}))(f)},1399:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement("div",{className:"not-have-meta-data"},n.default.createElement("img",{src:r.default,alt:""}),e.text)};var n=o(a(1)),r=o(a(1400));function o(e){return e&&e.__esModule?e:{default:e}}},1400:function(e,t,a){e.exports=a.p+"images/nothavemetadata.png"},1401:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(409)),r=y(a(412)),o=y(a(26)),l=y(a(5)),i=y(a(8)),s=y(a(6)),c=y(a(7)),d=y(a(121));a(410),a(413),a(180);var u=a(1),p=y(u),f=a(38),g=y(a(0)),m=a(1084),h=a(1402),b=a(20),v=(a(252),a(405));function y(e){return e&&e.__esModule?e:{default:e}}var k=d.default.Option,C=function(e){function t(e,a){(0,l.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,a));return n.getFromData=function(){var e=n.props.form,t=e.getFieldsValue,a=e.validateFields,r=!1;return a((function(e,t){e||(r=!0)})),r?t():null},n.getFormItem=function(e){var t=n.props.areaList,a=[],r=[];if(t&&t.map((function(e,t){"1"===e.areatype?a.push(e):"2"===e.areatype&&r.push(e)})),n.props.isImplement)e=e.filter((function(e,t){return"name"===e.code}));else if(0!==a.length||0!==r.length){var o=e.find((function(e){return"headcode"===e.code}));o&&(o.options=function(){var e=this,a=t&&t.filter((function(e,t){return"0"!==e.areatype}));return a&&a.map((function(t,a){var n=(0,v.getMultiLangText)(t,"name",e.props.multiOptions);return p.default.createElement(k,{key:t.code,value:t.code},n)}))}.call(n))}else e=e&&e.filter((function(e,t){return"headcode"!==e.code}));return e},n.state={},n}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.props.setZoneDataFun(this.getFromData)}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.zoneFormData,o=[{lable:(0,b.langCheck)("102202APP-000005","pages",t),type:"input",code:"code",required:!0},{lable:(0,b.langCheck)("102202APP-000006","pages",t),type:"input",code:"name",required:!0,disabled:this.props.isImplement},{lable:(0,b.langCheck)("102202APP-000007","pages",t),type:"input",code:"resid"},{lable:(0,b.langCheck)("102202APP-000008","pages",t),type:"input",code:"templetdesc",required:!1},{lable:(0,b.langCheck)("102202APP-000009","pages",t),type:"input",code:"clazz",required:!1},{lable:(0,b.langCheck)("102202APP-000010","pages",t),type:"select",code:"headcode",options:[],required:!0},{lable:(0,b.langCheck)("102202APP-000068","pages",t),type:"radio",code:"isdefault",hidden:"root"!==a.parentid}];return o=this.getFormItem(o),p.default.createElement(n.default,{className:"from-card"},p.default.createElement(r.default,{gutter:24},(0,h.createForm)(o,this.props)))}}]),t}(u.Component);(C=n.default.create()(C)).PropTypes={zoneArr:g.default.object.isRequired,zoneDatas:g.default.object.isRequired,setZoneDataFun:g.default.func.isRequired},t.default=(0,f.connect)((function(e){var t=e.zoneRegisterData,a=t.zoneDatas,n=t.json,r=e.zoneSettingData;return{zoneDatas:a,json:n,areaList:r.areaList,zoneFormData:r.zoneFormData,isImplement:r.isImplement}}),{setZoneDataFun:m.setZoneDataFun,updateAreaList:m.updateAreaList})(C)},1402:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=void 0;var n=p(a(119)),r=p(a(3)),o=p(a(36)),l=p(a(2)),i=p(a(421)),s=p(a(409));a(178),a(422),a(410);var c=p(a(1)),d=a(20),u=p(a(59));function p(e){return e&&e.__esModule?e:{default:e}}var f=p(a(23)).default.base,g=f.NCSelect,m=f.NCRadio,h=s.default.Item,b=m.NCRadioGroup,v=(t.createForm=function(e,t){var a=[];return e&&e.map((function(e,n){e.lable;var r=e.md,o=void 0===r?24:r,l=e.lg,s=void 0===l?12:l,d=e.xl,u=void 0===d?8:d;e.hidden||a.push(c.default.createElement(i.default,{md:o,lg:s,xl:u,key:n,fieldid:e.code},v(t,e)))})),a.filter((function(e){return e.props.children}))},function(e,t){var a=e.zoneDatas,i=e.json,s=e.zoneFormData,p=e.form,f=p.getFieldDecorator,v=(p.getFieldsValue,t.lable),y=t.type,k=t.code,C=t.required,S=t.check,w=(t.search,t.disabled),x=function(t){var a=(0,l.default)({},s),n=["string","boolean"].includes(void 0===t?"undefined":(0,o.default)(t))?t:t.target.value,i=(0,l.default)({},a,(0,r.default)({},k,n));e.setZoneDataFun(i),"headcode"===k&&e.updateAreaList(e.areaList)};switch(y){case"select":return a.areaList&&a.areaList.length>0&&a.areaList.map((function(e){a[k]!==e.code||"0"!==e.areatype||(0,u.default)({status:"error",msg:(0,d.langCheck)("102202APP-000000","pages",i)})})),c.default.createElement(h,{label:v},f(k,{initialValue:a[k]?a[k]+"":"",rules:[{required:C,message:(0,d.langCheck)("102202APP-000001","pages",i)},{validator:S||null}]})(c.default.createElement(g,{showClear:!1,fieldid:k,onChange:x},t.options)));case"radio":var E=!!a[k]&&a[k];return c.default.createElement(h,{label:v},f(k,{initialValue:E,rules:[{required:C},{type:"boolean",validator:S||null}]})(c.default.createElement(b,{selectedValue:e.zoneFormData[k],onChange:x},c.default.createElement(m,{value:!0},(0,d.langCheck)("102202APP-000069","pages",i)),c.default.createElement(m,{value:!1},(0,d.langCheck)("102202APP-000070","pages",i)))));default:return c.default.createElement(h,{label:v},w?c.default.createElement("span",null,a[k]):f(k,{initialValue:a[k]?a[k]+"":"",rules:[{required:C,message:""+(0,d.langCheck)("102202APP-000002","pages",i)+v},{validator:S||null}]})(c.default.createElement(n.default,{onChange:x})))}})}}]);
//# sourceMappingURL=ZoneSetting.3739dbce.js.map
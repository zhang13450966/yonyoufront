/*! @ncctag {"date":"2022/7/15 下午2:36:47"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["react","nc-lightapp-front"],t):"object"==typeof exports?exports["ufoe/pages/approvalProcess/list/index"]=t(require("react"),require("nc-lightapp-front")):e["ufoe/pages/approvalProcess/list/index"]=t(e.React,e["nc-lightapp-front"])}(window,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=1953)}({16:function(e,r){e.exports=t},1953:function(e,t,r){"use strict";var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(1954),s=r(1955),i=r(820),p=r(1956),c=r(1957),l=r(1958),u=r(1964),f=r(979),d=r(1965);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}r(1966);var v=$nccPlatform.createPage({orderOfHotKey:["basic_modal_form","pk_org"]})(n=$nccUtil.AppWrapper({lang:{resources:[{domainName:"ufoe",moduleId:"182001524"}]},use:{editTable:[i.PAGE_CONST.list,i.PAGE_CONST.reportListTable],search:[i.PAGE_CONST.search],form:[i.PAGE_CONST.basicModalForm]},changeFields:(0,d.changeFields)(),pageId:"approvalProcess"})(n=function(e){function t(e){var r,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._unloadMsg=function(){return $appRoot.props.editTable.getStatus(i.PAGE_CONST.list)!==$nccConst.spell.browse},a.getOrgRefPara=function(){var e=_.get($appRoot.state[i.PAGE_CONST.pk_org],"value"),t=_.get($appRoot.state[i.PAGE_CONST.pk_rms],"value");return e&&t?{pk_rms:t,pk_org:e}:null},a.initIndividualRes=m(regeneratorRuntime.mark((function e(){var t,r,o,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(i.API_URL.qryDefaultByIndividualSet);case 2:return t=e.sent,r=t.data,o=r.repOrgRef,s=r.repRmsRef,r.taskRef,r.busiAttrRef,p={},null!=s&&(p[i.PAGE_CONST.pk_rms]={display:s.refname,value:s.refpk}),null!=o&&(p[i.PAGE_CONST.pk_org]={display:o.refname,value:o.refpk}),e.next=9,a.setState(p);case 9:if(null==s||null==o){e.next=12;break}return e.next=12,f.API.queryApproveSetByTopRef(o.refpk,s.refpk);case 12:case"end":return e.stop()}}),e,n)}))),a.onReferChange=(o=m(regeneratorRuntime.mark((function e(t,r){var o,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(log.info("type, value",t,r),o=h({},t,r),t!==i.PAGE_CONST.pk_org){e.next=8;break}return s=_.get(r,"value"),e.next=6,$nccUtil.initRefer.getFirstRms(s);case 6:p=e.sent,o[i.PAGE_CONST.pk_rms]=s?{value:_.get(p,"refpk"),display:_.get(p,"refname")}:{};case 8:return e.next=10,a.setState(o);case 10:return e.next=12,f.API.queryApproveSetByScheme({},!1);case 12:case"end":return e.stop()}}),e,n)}))),function(e,t){return o.apply(this,arguments)}),a.topDisabledFn=function(e){a.setState({topDisabled:e})},a.editshowSeachFn=function(e){a.setState({showSeach:e})},a.state=(h(r={json:{}},i.PAGE_CONST.pk_org,{}),h(r,i.PAGE_CONST.pk_rms,{}),h(r,"topDisabled",!1),h(r,"showSeach",!0),r),a.headBtnStatus=$nccUtil.getBtnStatusFunc(u.HeadBtnStatus),a.initData(),a}var r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),o(t,[{key:"initData",value:(r=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.initTemplate.call(this);case 2:$appRoot.headBtnStatus.init(),this.initIndividualRes();case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=!_.get(this.state[i.PAGE_CONST.pk_org],"value");return React.createElement("div",{className:"nc-single-table"},React.createElement("div",{className:"nc-singleTable-header-area"},React.createElement("div",{className:"header-title-search-area"},$nccPlatform.createPageIcon(),React.createElement("h2",{className:"title-search-detail"},$appRoot.props.getSearchParam("n")),React.createElement("h2",{className:"title-search-detail ref"},React.createElement($nccCom.RequireRefWrapper,null,React.createElement($nccRefer.ReportMasterOrgRef,{disabled:this.state.topDisabled,foolValue:this.state[i.PAGE_CONST.pk_org],onChange:function(t,r){return e.onReferChange(i.PAGE_CONST.pk_org,r)}}))),React.createElement("h2",{className:"title-search-detail ref"},React.createElement($nccCom.RequireRefWrapper,null,React.createElement($nccRefer.ReportOrgSystemRef,{disabled:t||this.state.topDisabled,foolValue:this.state[i.PAGE_CONST.pk_rms],queryCondition:function(){var t=e.state[i.PAGE_CONST.pk_org].value;return t?{pk_org:t,GridRefActionExt:$nccConst.value.GridRefActionExt}:{}},onChange:function(t,r){return e.onReferChange(i.PAGE_CONST.pk_rms,r)}})))),React.createElement("div",{className:"header-button-area"},React.createElement(p.Buttons,{topDisabledFn:this.topDisabledFn,editshowSeachFn:this.editshowSeachFn}))),this.state.showSeach?React.createElement("div",{className:"nc-singleTable-search-area"},React.createElement(c.Search,null)):null,React.createElement("div",{className:"nc-singleTable-table-area"},React.createElement(s.Table,null)),React.createElement(l.Modals,null))}}]),t}())||n)||n;ReactDOM.render(React.createElement(v,null),document.querySelector("#app"))},1954:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;t.initTemplate=(n=s(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTemplate();case 2:t=e.sent,r=t.template,n=t.button,t.context,i.call(this,r),c.call(this,r),this.props.meta.setMeta(r),this.props.button.setButtons(n),$appRoot.props.button.setPopContent("TableDel",$appRoot.state.json["182001524-000000"]),this.props.renderItem("search",o.PAGE_CONST.search,"pk_org",React.createElement($nccRefer.ReportMasterOrgRef,null));case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)});var n,o=r(820),a=r(979);function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}function i(e){}var p="TableDel";function c(e){var t=this,r=e[o.PAGE_CONST.list].items.find((function(e){return"ACTION"===e.attrcode}));r.itemtype=$nccConst.spell.customer,r.fixed="right",r.isSort=!1,r.changeMetaCol=!0,r.render=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i,c=(i=s(regeneratorRuntime.mark((function e(n,s){var i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r[1],c=r[2],log.info("args",{rowValue:i,index:c}),s!==p){e.next=7;break}if(!l){e.next=6;break}return e.abrupt("return",a.API.deleteApproveSet([i]));case 6:return e.abrupt("return",$appRoot.props.editTable.deleteTableRowsByIndex(o.PAGE_CONST.list,c));case 7:case"end":return e.stop()}}),e,t)}))),function(e,t){return i.apply(this,arguments)}),l=$appRoot.props.editTable.getStatus(o.PAGE_CONST.list)===$nccConst.spell.browse,u=[p];return t.props.button.createOprationButton(u,{area:o.PAGE_CONST.tableButton,buttonLimit:3,onButtonClick:c})}}},1955:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Table=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(820);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.Table=function(e){function t(){var e,r,n;a(this,t);for(var i=arguments.length,p=Array(i),c=0;c<i;c++)p[c]=arguments[c];return r=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),n.selectedChange=function(){var e=$appRoot.props.editTable.getCheckedRows(o.PAGE_CONST.list);$appRoot.props.button.setButtonDisabled({Delete:!_.get(e,"length")})},s(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),n(t,[{key:"render",value:function(){return $appRoot.props.editTable.createEditTable(o.PAGE_CONST.list,{adaptionHeight:!0,showCheck:!0,showIndex:!0,onSelected:this.selectedChange,onSelectedAll:this.selectedChange,hiddenLeftItem:["ACTION"],high_filter:{nonFilterable:["numberindex","opr","checkbox","ACTION"]}})}}]),t}()},1956:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Buttons=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(979),a=r(820),s=r(16);function i(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}t.Buttons=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onButtonClick=function(e,t){log.info("id",t,e),console.log(t),r.props.topDisabledFn(!1),"Cancel"!=t&&"Save"!=t&&r.props.editshowSeachFn(!0),$appRoot.props.button.setPopContent("TableDel",$appRoot.state.json["182001524-000000"]),r[t]()},r.props=e,r}var r,p,c,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),n(t,[{key:"componentDidMount",value:function(){$appRoot.props.editTable.setStatus(a.PAGE_CONST.reportListTable,"edit")}},{key:"Add",value:function(){if(!$appRoot.getOrgRefPara())return $nccUtil.toast($appRoot.state.json["182001524-000001"],$nccConst.spell.warning);$appRoot.promiseShow(a.PAGE_CONST.stepModal)}},{key:"Edit",value:function(){$appRoot.props.button.setPopContent("TableDel",""),$appRoot.props.editTable.setStatus(a.PAGE_CONST.list,$nccConst.spell.edit);var e=$appRoot.props.editTable.getCheckedRows(a.PAGE_CONST.list);$appRoot.headBtnStatus.Edit({disabled:{Delete:!_.get(e,"length")}}),this.props.topDisabledFn(!0),this.props.editshowSeachFn(!1)}},{key:"Delete",value:(l=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promptBox($appRoot.state.json["182001524-000002"],$appRoot.state.json["182001524-000003"]);case 2:return e.abrupt("return",o.API.deleteApproveSet());case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"Refresh",value:(c=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.API.queryApproveSetByScheme();case 2:$nccUtil.toast($appRoot.state.json["182001524-000004"]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"Save",value:(p=i(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(1111),t=$appRoot.props.editTable.getAllRows(a.PAGE_CONST.list),r=!0,t.forEach((function(e){""==_.get(e,"values.pk_flow.display")&&($nccUtil.toast($appRoot.state.json["182001524-000026"],"danger"),r=!1)})),!r){e.next=12;break}return e.next=7,o.API.editSaveApproveSet();case 7:$appRoot.props.editTable.cancelEdit(a.PAGE_CONST.list),n=$appRoot.props.editTable.getCheckedRows(a.PAGE_CONST.list),$appRoot.headBtnStatus.Cancel({disabled:{Delete:!_.get(n,"length")}}),this.props.topDisabledFn(!1),this.props.editshowSeachFn(!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"Cancel",value:(r=i(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,s.promptBox)({color:"warning",title:$appRoot.state.json["182001524-000005"],content:$appRoot.state.json["182001524-000006"],beSureBtnClick:function(){$appRoot.props.editTable.cancelEdit(a.PAGE_CONST.list);var e=$appRoot.props.editTable.getCheckedRows(a.PAGE_CONST.list);$appRoot.headBtnStatus.Cancel({disabled:{Delete:!_.get(e,"length")}}),t.props.editshowSeachFn(!0)}});case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){return $appRoot.props.button.createButtonApp({area:a.PAGE_CONST.headArea,onButtonClick:this.onButtonClick,buttonLimit:3})}}]),t}()},1957:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(820),a=r(979);t.Search=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.clickSearchBtn=function(){$appRoot.props.editTable.getStatus(o.PAGE_CONST.list)===$nccConst.spell.browse?a.API.queryApproveSetByScheme():log.info("status","!-=")},r.onAfterEvent=function(e,t){if("pk_task"==e){var r={queryCondition:{pk_task:t&&t[0]&&t[0].refpk?t[0].refpk:void 0}};$appRoot.props.renderItem("search",o.PAGE_CONST.search,"pk_report",React.createElement($nccRefer.ReportRef,r))}},r.props=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),n(t,[{key:"render",value:function(){return $appRoot.props.search.NCCreateSearch(o.PAGE_CONST.search,{clickSearchBtn:this.clickSearchBtn,onAfterEvent:this.onAfterEvent})}}]),t}()},1958:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modals=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1959);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.Modals=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),n(t,[{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement(o.StepsModal,null))}}]),t}()},1959:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepsModal=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),i=(n=s)&&n.__esModule?n:{default:n},p=r(1960),c=r(1961),l=r(820),u=r(979);function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=$nccPlatform.base.NCStep,b=$nccPlatform.base.NCStep.NCSteps,y=0,g=1,T={ALL:[l.PAGE_CONST.StepPrev,l.PAGE_CONST.StepNext,l.PAGE_CONST.StepComplete,l.PAGE_CONST.StepCancel],StepPrev:function(e){var t=this.ALL.filter((function(e){return e!==l.PAGE_CONST.StepPrev})),r=void 0;try{r=$appRoot.props.syncTree.getTreeData(l.PAGE_CONST.rightTreeId).length}catch(e){}return{disabled:r?[l.PAGE_CONST.StepPrev]:[l.PAGE_CONST.StepPrev,l.PAGE_CONST.StepComplete],visible:t}},StepNext:function(e){var t=this.ALL.filter((function(e){return e!==l.PAGE_CONST.StepNext}));return{disabled:[l.PAGE_CONST.StepNext],visible:t}}},R=$nccUtil.getBtnStatusFunc(T),S={block:{display:"block",height:"100%"},none:{display:"none",height:"100%"}},C=(t.StepsModal=function(e){function t(){var e,r,n,a=this;d(this,t);for(var s=arguments.length,i=Array(s),p=0;p<s;p++)i[p]=arguments[p];return r=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={current:0},n.StepPrev=function(){R.StepPrev(),n.setState({current:y})},n.StepNext=f(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($appRoot.props.form.getFormItemsValue(l.PAGE_CONST.basicModalForm,"pk").value){e.next=3;break}return e.abrupt("return",$nccUtil.toast($appRoot.state.json["182001524-000018"],$nccConst.spell.warning));case 3:if(t=$nccStore.getDef(l.STORE.saveData)){e.next=6;break}return e.abrupt("return",log.error("savePara",t));case 6:if(r=void 0,r=t.areacode===l.PAGE_CONST.reportListTable?k():w()){e.next=10;break}return e.abrupt("return",$nccUtil.toast($appRoot.state.json["182001524-000019"],$nccConst.spell.warning));case 10:return t.dtos=r,e.next=13,n.setState({current:g});case 13:R.StepNext();case 14:case"end":return e.stop()}}),e,a)}))),n.StepCancel=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$appRoot.props.modal.close(l.PAGE_CONST.stepModal);case 1:case"end":return e.stop()}}),e,a)}))),n.StepComplete=f(regeneratorRuntime.mark((function e(){var t,r,n,s,i,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$appRoot.props.form.getFormItemsValue,r="TKAF"===(r=t(l.PAGE_CONST.basicModalForm,"flowtype").value)?"0":"1",n=!!t(l.PAGE_CONST.basicModalForm,"overflag").value,s=t(l.PAGE_CONST.basicModalForm,"pk").value,(i=$appRoot.props.syncTree.getTreeData(l.PAGE_CONST.rightTreeId).map((function(e){return _.get(e.nodeData,"pk_org")}))).length){e.next=8;break}return e.abrupt("return",$nccUtil.toast($appRoot.state.json["182001524-000020"],$nccConst.spell.warning));case 8:return p=$nccStore.getDef(l.STORE.saveData),e.next=11,u.API.saveApproveSet(o({pk_orgs:i},p,{flowtype:r,overflag:n,pk_task:s}));case 11:$appRoot.props.modal.close(l.PAGE_CONST.stepModal);case 12:case"end":return e.stop()}}),e,a)}))),n.onButtonClick=function(e,t){n[t]()},n.initState=function(){n.StepPrev();try{$nccStore.setDef(l.STORE.saveData,{}),$appRoot.props.form.EmptyAllFormValue(l.PAGE_CONST.basicModalForm),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.leftTreeId,[]),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.rightTreeId,[])}catch(e){}try{$appRoot.props.editTable.setTableData(l.PAGE_CONST.reportListTable,{rows:[]}),$appRoot.props.treeTableManyCol.emptyAllData(l.PAGE_CONST.reportTreeTable)}catch(e){}},n.closeModal=function(){$appRoot.props.modal.close(l.PAGE_CONST.stepModal)},h(n,r)}return m(t,e),a(t,[{key:"render",value:function(){var e,t=this,r={initState:this.initState,StepPrev:this.StepPrev,StepNext:this.StepNext};return $appRoot.props.modal.createModal(l.PAGE_CONST.stepModal,{title:$appRoot.state.json["182001524-000021"],content:i.default.createElement(C,o({},this.state,r)),beSureBtnClick:this.beSureBtnClick,noFooter:!1,showCustomBtns:!0,customBtns:$appRoot.props.button.createButtonApp({area:l.PAGE_CONST.stepBotArea,onButtonClick:this.onButtonClick,buttonLimit:3}),hasCloseBtn:!1,userControl:!0,size:$nccConst.spell.lg,validateCloseBtn:!0,closeModalEve:(e=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.closeModal();case 1:case"end":return e.stop()}}),e,t)}))),function(){return e.apply(this,arguments)})})}}]),t}(i.default.Component),function(e){function t(e){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.stepClick=function(e){return log.info("item step",e),e.step===y?r.props.StepPrev():e.step===g?r.props.StepNext():void 0},r.steps=[{title:$appRoot.state.json["182001524-000016"],content:i.default.createElement(p.Step1,null),step:y},{title:$appRoot.state.json["182001524-000017"],content:i.default.createElement(c.Step2,null),step:g}],r}return m(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.initState(),$appRoot.props.form.setFormItemsValue("basic_modal_form",{overflag:{value:"true"}})}},{key:"render",value:function(){var e=this,t=this.props.current;return i.default.createElement("div",{style:{background:"white",height:"100%"}},i.default.createElement("div",{style:{width:"550px",margin:"auto"}},i.default.createElement(b,{current:t},this.steps.map((function(t){return i.default.createElement(v,{onClick:function(){return e.stepClick(t)},key:t.title,title:t.title})})))),i.default.createElement("div",{style:{paddingTop:"8px",height:"calc(100% - 32px)"}},this.steps.map((function(e,r){return i.default.createElement("div",{style:t===r?S.block:S.none},e.content)}))))}}]),t}(i.default.Component)),k=function(){var e=!1,t=[],r=$appRoot.props.editTable.getAllRows(l.PAGE_CONST.reportListTable),n=!0,o=!1,a=void 0;try{for(var s,i=r[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var p=s.value,c=_.get(p,"values.pk_task.value"),u=_.get(p,"values.flowname.value"),f={pk_report:"",pk_task:c,flowvo:{node_name:_.get(p,"values.flowname.display"),pk_wf_def:u}};t.push(f),u&&(e=!0)}}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return e?t:null},w=function(){var e=!1,t=[];return function r(n){var o=!0,a=!1,s=void 0;try{for(var i,p=(n||[])[Symbol.iterator]();!(o=(i=p.next()).done);o=!0){var c=i.value,l=_.get(c,"values.isdir.value"),u=_.get(c,"values.pk_report.value"),f=_.get(c,"values.flowname.value"),d={pk_report:u,pk_task:"",flowvo:{node_name:_.get(c,"values.flowname.display"),pk_wf_def:f}};l||t.push(d),f&&(e=!0),r(c.children)}}catch(e){a=!0,s=e}finally{try{!o&&p.return&&p.return()}finally{if(a)throw s}}}($appRoot.props.treeTableManyCol.getAllValue(l.PAGE_CONST.reportTreeTable)),e?t:null}},1960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Step1=void 0;var n,o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(820),i=r(979);function p(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.Step1=(n=function(e){function t(){var e,r,n;c(this,t);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.call(n),l(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),a(t,[{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"step1Title"},$appRoot.state.json["182001524-000007"]),$appRoot.props.form.createForm(s.PAGE_CONST.basicModalForm,{onAfterEvent:this.onFormAfter})),React.createElement("div",null,React.createElement("span",{className:"step1Title"},$appRoot.state.json["182001524-000008"]),React.createElement($nccCom.If,{ef:this.isListTable()},$appRoot.props.editTable.createEditTable(s.PAGE_CONST.reportListTable,{showCheck:!1})),React.createElement($nccCom.If,{ef:!this.isListTable()},$appRoot.props.treeTableManyCol.treeTableCol(s.PAGE_CONST.reportTreeTable,{showCheck:!0,adaptionHeight:!1,scrollConfig:{y:"260px"}}))))}}]),t}(),o=function(){var e,t,r=this;this.state={areacode:s.PAGE_CONST.reportListTable},this.onFormAfter=(e=p(regeneratorRuntime.mark((function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var a,i,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(log.info("onFormAfter-args",n),a=n[2],i=n[3],"pk"!==a){e.next=9;break}return e.next=6,r.getTreeData();case 6:return e.abrupt("return",r.getTableData(i));case 9:"flowtype"===a&&(r.isListTable()?$appRoot.props.editTable.getAllData(s.PAGE_CONST.reportListTable).rows.length>0&&$appRoot.props.editTable.setValByKeyAndIndex(s.PAGE_CONST.reportListTable,0,"flowname",{value:"",display:""}):((p=$nccStore.getDef(s.STORE.currentData)).forEach((function(e){e.children&&e.children.length>0?e.children.forEach((function(e){e.values.flowname={}})):e.values.flowname={}})),$appRoot.props.treeTableManyCol.initTreeTableData(s.PAGE_CONST.reportTreeTable,p,"pk_taskreport",!0,[])));case 10:case"end":return e.stop()}}),e,r)}))),function(){return e.apply(this,arguments)}),this.getTreeData=p(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$appRoot.props.form.getFormItemsValue(s.PAGE_CONST.basicModalForm,"pk").value,$appRoot.props.syncTree.setSyncTreeData(s.PAGE_CONST.leftTreeId,[]),$appRoot.props.syncTree.setSyncTreeData(s.PAGE_CONST.rightTreeId,[]),$appRoot.props.button.setButtonDisabled({StepComplete:!0}),t){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,i.API.queryRmsMember();case 8:n=e.sent,(o=_.get(n,"data"))[0].pid=null,window.treeHandler=$nccUtil.getTeeHandler(o),$appRoot.props.syncTree.setSyncTreeData(s.PAGE_CONST.leftTreeId,o);try{$appRoot.props.syncTree.cancelSelectedNode(s.PAGE_CONST.leftTreeId),$appRoot.props.syncTree.cancelSelectedNode(s.PAGE_CONST.rightTreeId)}catch(e){}case 14:case"end":return e.stop()}}),e,r)}))),this.getTableData=(t=p(regeneratorRuntime.mark((function e(t){var n,o,a,p,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.get(t,"values.approvemode.value")){e.next=4;break}return r.isListTable()?$appRoot.props.editTable.setTableData(s.PAGE_CONST.reportListTable,{rows:[]}):$appRoot.props.treeTableManyCol.emptyAllData(s.PAGE_CONST.reportTreeTable),e.abrupt("return");case 4:return o=_.get(t,"values.pk_task.value"),a="0"!==n&&n?s.PAGE_CONST.reportTreeTable:s.PAGE_CONST.reportListTable,e.next=8,r.setState({areacode:a});case 8:return e.next=10,i.API.queryTaskReportByTask({approvemode:n,pk_task:o,areacode:a});case 10:p=e.sent,c=_.get(p,"data."+a),r.isListTable()?$appRoot.props.editTable.setTableData(s.PAGE_CONST.reportListTable,c):(l=_.get(c,"rows")||[],u=$appRoot.props.treeTableManyCol.createNewData(l),$appRoot.props.treeTableManyCol.initTreeTableData(s.PAGE_CONST.reportTreeTable,u,"pk_taskreport",!0,[]),c=u),$nccStore.setDef(s.STORE.currentData,c),$nccStore.setDef(s.STORE.saveData,{areacode:a,approvemode:n});case 15:case"end":return e.stop()}}),e,r)}))),function(e){return t.apply(this,arguments)}),this.isListTable=function(){return r.state.areacode===s.PAGE_CONST.reportListTable}},n)},1961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Step2=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(1962);var o=r(820);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=$nccPlatform.base.NCButton,u=$nccPlatform.base.NCRadio,f=$nccPlatform.base.NCCheckbox,d=(t.Step2=function(e){function t(e){i(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={checkedValue:"getCurrent"},r[">"]=function(){var e=r.getFormatTreeData();$appRoot.props.syncTree.setSyncTreeData(o.PAGE_CONST.rightTreeId,e),$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.rightTreeId,[]);var t=e.map((function(e){return e.refpk})),n=$appRoot.props.syncTree.getCheckedKeys(o.PAGE_CONST.leftTreeId).filter((function(e){return!t.includes(e)}));$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.leftTreeId,n),r.setState({})},r[">>"]=function(){$appRoot.props.syncTree.setSyncTreeData(o.PAGE_CONST.rightTreeId,r.getFormatTreeData(!0)),$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.rightTreeId,[]),$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.leftTreeId,[]),r.setState({})},r["<<"]=function(){$appRoot.props.syncTree.setSyncTreeData(o.PAGE_CONST.rightTreeId,[]),$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.rightTreeId,[]),r.setState({})},r["<"]=function(){var e=$appRoot.props.syncTree.getCheckedKeys(o.PAGE_CONST.rightTreeId),t=$appRoot.props.syncTree.getTreeData(o.PAGE_CONST.rightTreeId).filter((function(t){return!e.includes(t.refpk)}));$appRoot.props.syncTree.setSyncTreeData(o.PAGE_CONST.rightTreeId,t),$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.rightTreeId,[]),r.setState({})},r.getFormatTreeData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?[].concat(s(treeHandler.getAllPks())):$appRoot.props.syncTree.getCheckedKeys(o.PAGE_CONST.leftTreeId),n=$appRoot.props.syncTree.getTreeData(o.PAGE_CONST.rightTreeId),a=n.map((function(e){return e.refpk})),i=treeHandler[r.state.checkedValue]([].concat(s(t))),p=[].concat(s(n)),c=!0,l=!1,u=void 0;try{for(var f,d=i[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var h=f.value;a.includes(h.refpk)||p.push(h)}}catch(e){l=!0,u=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw u}}return p},r.onCheckChange=function(e){r.setState({checkedValue:e})},r.updateLeftTreeStatus=function(e){var t=[].concat(s(treeHandler.getAllPks())),n=e?t:[];$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.leftTreeId,n),r.setState({})},r.updateRightTreeStatus=function(e){var t=$appRoot.props.syncTree.getTreeData(o.PAGE_CONST.rightTreeId).map((function(e){return e.refpk})),n=e?t:[];$appRoot.props.syncTree.setNodeChecked(o.PAGE_CONST.rightTreeId,n),r.setState({})},r.updateState=function(){r.setState({})},r.checkBoxConfig=[{value:"getCurrent",display:$appRoot.state.json["182001524-000009"]},{value:"getDeepLower",display:$appRoot.state.json["182001524-000010"]},{value:"getLower",display:$appRoot.state.json["182001524-000011"]},{value:"getLeaf",display:$appRoot.state.json["182001524-000012"]}],r}return c(t,React.Component),n(t,[{key:"render",value:function(){var e,t=0,r=0;try{t=[].concat(s(treeHandler.getAllPks())).length}catch(e){}try{r=$appRoot.props.syncTree.getTreeData(o.PAGE_CONST.rightTreeId).length}catch(e){}var n=0,i=0;try{t&&(n=$appRoot.props.syncTree.getCheckedKeys(o.PAGE_CONST.leftTreeId).length)}catch(e){}try{r&&(i=$appRoot.props.syncTree.getCheckedKeys(o.PAGE_CONST.rightTreeId).length)}catch(e){}var p={onCheckChange:this.updateLeftTreeStatus,allNum:t,indeterminate:n!==t&&0!==n,selectedNum:n,isLeft:!0},c={onCheckChange:this.updateRightTreeStatus,allNum:r,indeterminate:i!==r&&0!==i,selectedNum:i,isLeft:!1},f=(a(e={},">",!n),a(e,">>",!t),a(e,"<<",!r),a(e,"<",!i),e);return React.createElement("div",{className:"steps_approval",style:{position:"relative",height:"100%"}},React.createElement("div",{className:"step_transfer_approval",style:{height:"calc(100% - 35px)",maxHeight:"none"}},React.createElement("div",{className:"step_common step_left"},React.createElement(m,p),React.createElement(d,{updateState:this.updateState})),React.createElement("div",{className:"step_btn_wrapper"},React.createElement("div",{className:"step_btn"},React.createElement(l,{fieldid:"uf-arrow-right",disabled:f[">"],onClick:this[">"],className:"uf uf uf-arrow-right"},React.createElement("span",null,React.createElement("i",{class:"iconfont icon-chuansuo-you"}))),React.createElement(l,{fieldid:"uf-2arrow-rightt",disabled:f[">>"],onClick:this[">>"],className:"uf uf uf-2arrow-right"},React.createElement("span",null,React.createElement("i",{class:"iconfont icon-chuansuo-quanbuyou"}))),React.createElement(l,{fieldid:"uf-2arrow-left",disabled:f["<<"],onClick:this["<<"],className:"rotate180 uf uf uf-2arrow-left"},React.createElement("span",null,React.createElement("i",{class:"iconfont icon-chuansuo-quanbuyou"}))),React.createElement(l,{fieldid:"uf-arrow-left",disabled:f["<"],onClick:this["<"],className:"rotate180 uf uf uf-arrow-left"},React.createElement("span",null,React.createElement("i",{class:"iconfont icon-chuansuo-you"}))))),React.createElement("div",{className:"step_common step_right"},React.createElement(m,c),React.createElement(h,{updateState:this.updateState}))),React.createElement("div",{className:"step_selection"},React.createElement("div",{className:"step_radio_group"},React.createElement("span",null,$appRoot.state.json["182001524-000015"]," "),React.createElement(u.NCRadioGroup,{name:"fruit",selectedValue:this.state.checkedValue,onChange:this.onCheckChange.bind(this)},this.checkBoxConfig.map((function(e){return React.createElement(u,{value:e.value},e.display)}))))))}}]),t}(),function(e){function t(){return i(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,React.Component),n(t,[{key:"onSelectEve",value:function(){$appRoot.props.syncTree.openNodeByPk(o.PAGE_CONST.leftTreeId,arguments.length<=0?void 0:arguments[0])}},{key:"render",value:function(){return React.createElement(React.Fragment,null,$appRoot.props.syncTree.createSyncTree({searchType:"filtration",treeId:o.PAGE_CONST.leftTreeId,onCheckEve:this.props.updateState,showModal:!0,needEdit:!1,checkable:!0,selectedForInit:!0,onSelectEve:this.onSelectEve,triggerCheckWhenSelect:!0}))}}]),t}()),h=function(e){function t(){return i(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,React.Component),n(t,[{key:"componentDidMount",value:function(){$appRoot.props.syncTree.setSyncTreeData(o.PAGE_CONST.rightTreeId,[])}},{key:"render",value:function(){return React.createElement(React.Fragment,null,$appRoot.props.syncTree.createSyncTree({searchType:"filtration",treeId:o.PAGE_CONST.rightTreeId,onCheckEve:this.props.updateState,showModal:!0,needEdit:!1,checkable:!0,triggerCheckWhenSelect:!0}))}}]),t}();function m(e){var t=e.isLeft?$appRoot.state.json["182001524-000013"]:$appRoot.state.json["182001524-000014"],r=!!e.allNum&&e.selectedNum-e.allNum==0;return React.createElement("div",{className:"to_checked_index"},React.createElement(f,{checked:r,onChange:e.onCheckChange,indeterminate:e.indeterminate},t,"(",e.selectedNum,"/",e.allNum,")"))}},1962:function(e,t,r){var n=r(1963);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};r(27)(n,o);n.locals&&(e.exports=n.locals)},1963:function(e,t,r){(e.exports=r(26)(!1)).push([e.i,".steps_approval .rotate180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n.steps_approval .step_transfer_approval {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  min-height: 400px;\n  max-height: 500px;\n}\n.steps_approval .step_transfer_approval .step_common {\n  border: 1px solid #d5d6d9;\n  border-radius: 2px;\n  padding: 10px;\n  margin: 10px 10px 40px 10px;\n}\n.steps_approval .step_transfer_approval .step_common .to_checked_index {\n  margin: -10px -10px 8px -10px;\n  background: #f3f3f3;\n  padding: 0 10px;\n  line-height: 25px;\n}\n.steps_approval .step_transfer_approval .step_btn_wrapper {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n}\n.steps_approval .step_transfer_approval .step_btn_wrapper .step_btn {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n}\n.steps_approval .step_transfer_approval .step_btn_wrapper .step_btn button {\n  margin: 5px 0;\n}\n.steps_approval .syncTreeCom {\n  padding-bottom: 25px;\n}\n.steps_approval .step_selection {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n",""])},1964:function(e,t,r){"use strict";var n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var a="Add",s="Edit",i="Delete",p="Refresh",c="Save",l="Cancel";t.HeadBtnStatus=(o(n={ALL:[a,s,i,p,c,l]},s,(function(e){return $appRoot.props.search.setDisabled("search",!0),{visible:[c,l],disabled:[a,s,p]}})),o(n,l,(function(){return $appRoot.props.search.setDisabled("search",!1),{visible:[a,s,i,p],disabled:[c,l]}})),o(n,"init",{visible:[a,s,i,p],disabled:[a,s,i]}),n)},1965:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeFields=function(){var e;return o(e={},n.PAGE_CONST.basicModalForm,{status:$nccConst.spell.edit,pk:{queryCondition:function(){var e={pk_receiveorg:a()};return log.info("queryCondition",e),e}}}),o(e,n.PAGE_CONST.reportListTable,{status:$nccConst.spell.edit,flowname:{refcode:"ufoe/refer/inner/ApproveFlowRef/index",queryCondition:function(e){var t={pk_org:a(),billtype:_.get(s(n.PAGE_CONST.basicModalForm,"flowtype"),"value")};return log.info("reportListTable(flowname)",t),t}}}),o(e,n.PAGE_CONST.reportTreeTable,{status:$nccConst.spell.edit,flowname:{itemtype:$nccConst.spell.customer,render:function(e,t){if(_.get(t,"values.isdir.value"))return React.createElement("span",null);var r={isAlwaysEmitOnChange:!0,queryCondition:function(){var e={pk_org:a(),billtype:_.get(s(n.PAGE_CONST.basicModalForm,"flowtype"),"value")};return log.info("reportTreeTable(flowname)",e),e},extraOnChange:function(e,r){t=_.set(t,"values.flowname",r),log.info("extraOnChange args",{node:e,value:r,item:t}),$appRoot.props.treeTableManyCol.editRowEve(n.PAGE_CONST.reportTreeTable,t)},foolValue:_.get(t,"values.flowname")||{display:"",value:""}};return React.createElement($nccRefer.ApproveFlowRef,r)}}}),o(e,n.PAGE_CONST.list,{pk_flow:{queryCondition:function(e){var t=e.path[0],r=a(),o=function(e,t,r){return $appRoot.props.editTable.getValByKeyAndRowId(e,t,r)}(n.PAGE_CONST.list,t.replace("-pk_flow",""),"flowtype").value,s={billtype:o=o-0==0?"TKAF":"AFAF",pk_org:r};return log.info("list(pk_flow)",s),s}}}),e};var n=r(820);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return _.get($appRoot.state[n.PAGE_CONST.pk_org],"value")}function s(e,t){return $appRoot.props.form.getFormItemsValue(e,t)}},1966:function(e,t,r){var n=r(1967);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};r(27)(n,o);n.locals&&(e.exports=n.locals)},1967:function(e,t,r){(e.exports=r(26)(!1)).push([e.i,".nc-single-table .nc-singleTable-header-area .header-title-search-area h2.title-search-detail {\n  margin-right: 24px;\n}\n.nc-single-table .nc-singleTable-header-area .header-title-search-area h2.ref {\n  margin-right: 10px !important;\n}\n.nc-singleTable-header-area .page-title-Icon {\n  margin: 4px 10px 0 0;\n}\n.step1Title {\n  display: block;\n  color: #555555;\n  margin-bottom: 2px;\n}\n.step_common {\n  width: 40% !important;\n}\n.syncTreeCom .synctree-area {\n  height: 400px;\n}\n.step1Title {\n  font-size: 12px;\n  line-height: 16px;\n}\n#step-modal .lightapp-component-editTable {\n  margin-top: 6px;\n}\n#step-modal .form-item {\n  width: 33.3333% !important;\n}\n#step-modal .leftspace {\n  width: 0  !important;\n}\n#step-modal .lightapp-component-form .form-item .form-item-label {\n  width: 94px !important;\n  max-width: none !important;\n  min-width: 94px !important;\n}\n.step_radio_group .radio-group-hotkey-wrapper {\n  display: inline-block;\n}\n.step-modal .scroll-container {\n  min-height: 300px !important;\n  max-height: 300px !important;\n  overflow: scroll !important;\n}\n#form_basic_modal_form .lightapp-component-form .form-item .form-item-label {\n  line-height: 26px !important;\n}\n",""])},2:function(t,r){t.exports=e},26:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),a=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(a).concat([o]).join("\n")}var s;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(n[a]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),t.push(s))}},t}},27:function(e,t,r){var n,o,a={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),i=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}((function(e){return document.querySelector(e)})),p=null,c=0,l=[],u=r(87);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=a[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(y(n.parts[s],t))}else{var i=[];for(s=0;s<n.parts.length;s++)i.push(y(n.parts[s],t));a[n.id]={id:n.id,refs:1,parts:i}}}}function d(e,t){for(var r=[],n={},o=0;o<e.length;o++){var a=e[o],s=t.base?a[0]+t.base:a[0],i={css:a[1],media:a[2],sourceMap:a[3]};n[s]?n[s].parts.push(i):r.push(n[s]={id:s,parts:[i]})}return r}function h(e,t){var r=i(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),l.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),h(e,t),t}function b(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function y(e,t){var r,n,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var s=c++;r=p||(p=v(t)),n=T.bind(null,r,s,!1),o=T.bind(null,r,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),h(e,t),t}(t),n=S.bind(null,r,t),o=function(){m(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=R.bind(null,r),o=function(){m(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=d(e,t);return f(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var s=r[o];(i=a[s.id]).refs--,n.push(i)}e&&f(d(e,t),t);for(o=0;o<n.length;o++){var i;if(0===(i=n[o]).refs){for(var p=0;p<i.parts.length;p++)i.parts[p]();delete a[i.id]}}}};var g,_=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function T(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var a=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function R(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function S(e,t,r){var n=r.css,o=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(s),i&&URL.revokeObjectURL(i)}},820:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAGE_CONST={list:"list",search:"search",headArea:"head_area",tableButton:"list_table_area",basicModalForm:"basic_modal_form",reportTreeTable:"report-tree-table",reportListTable:"report-list-table",stepModal:"step-modal",stepBotArea:"step-bot-area",StepPrev:"StepPrev",StepNext:"StepNext",StepComplete:"StepComplete",StepCancel:"StepCancel",leftTreeId:"left_tree_id",rightTreeId:"right_tree_id",pk_org:"pk_org",pk_rms:"pk_rms"},t.API_URL={queryApproveSetByTopRef:"/nccloud/ufoe/approveset/queryApproveSetByTopRef.do",qryDefaultByIndividualSet:"/nccloud/ufoe/individualset/qryDefaultByIndividualSet.do",deleteApproveSet:"/nccloud/ufoe/approveset/deleteApproveSet.do",editSaveApproveSet:"/nccloud/ufoe/approveset/editSaveApproveSet.do",saveApproveSet:"/nccloud/ufoe/approveset/saveApproveSet.do",queryTaskReportByTask:"/nccloud/ufoe/approveset/queryTaskReportByTask.do",queryApproveSet:"/nccloud/ufoe/approveset/queryApproveSet.do",queryApproveSetByScheme:"/nccloud/ufoe/approveset/queryApproveSetByScheme.do",queryRmsMember:"/nccloud/ufoe/approveset/queryRepManaStru.do"},t.STORE={saveData:"__save_data",currentData:""}},87:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?r+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},979:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(820);function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),i=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}t.API=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i,p,c,l,u;return o(e,null,[{key:"queryApproveSetByTopRef",value:(u=s(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={pagecode:$appRoot.props.getPageCode(),areacode:a.PAGE_CONST.list,pk_org:t,pk_rms:r},e.next=3,$nccUtil.promiseAjax(a.API_URL.queryApproveSetByTopRef,n);case 3:o=e.sent,_.get(o,"data."+a.PAGE_CONST.list)?$appRoot.headBtnStatus.Cancel({disabled:{Delete:!0}}):$appRoot.headBtnStatus.Cancel({disabled:{Delete:!0,Edit:!0}}),$appRoot.props.editTable.setTableData(a.PAGE_CONST.list,_.get(o,"data."+a.PAGE_CONST.list)||{rows:[]});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"queryApproveSetByScheme",value:(l=s(regeneratorRuntime.mark((function e(){var t,r,o,s,i,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$appRoot.getOrgRefPara()){e.next=6;break}throw $appRoot.headBtnStatus.init(),$appRoot.props.editTable.setTableData(a.PAGE_CONST.list,{rows:[]}),c&&$nccUtil.toast($appRoot.state.json["182001524-000001"],$nccConst.spell.warning),"";case 6:return r=n({pagecode:$appRoot.props.getPageCode(),areacode:a.PAGE_CONST.list,queryCondition:$appRoot.props.search.getQueryInfo(a.PAGE_CONST.search)},t,p),e.next=9,$nccUtil.promiseAjax(a.API_URL.queryApproveSetByScheme,r);case 9:o=e.sent,_.get(o,"data."+a.PAGE_CONST.list)?$appRoot.headBtnStatus.Cancel({disabled:{Delete:!0}}):$appRoot.headBtnStatus.Cancel({disabled:{Delete:!0,Edit:!0}}),s=_.get(o,"data."+a.PAGE_CONST.list,{rows:[]}),$appRoot.props.editTable.setTableData(a.PAGE_CONST.list,s),0===s.rows.length?$nccUtil.toast($appRoot.state.json["182001524-000027"],$nccConst.spell.warning):(i=""+$appRoot.state.json["182001524-000028"]+s.rows.length+$appRoot.state.json["182001524-000029"],$nccUtil.toast(i,$nccConst.spell.success));case 14:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"queryTaskReportByTask",value:(c=s(regeneratorRuntime.mark((function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n({pagecode:$appRoot.props.getPageCode()},r),e.next=3,$nccUtil.promiseAjax(a.API_URL.queryTaskReportByTask,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"editSaveApproveSet",value:(p=s(regeneratorRuntime.mark((function e(){var t,r,n,o,s,i,p,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($appRoot.props.editTable.filterEmptyRows(a.PAGE_CONST.list),(t=$appRoot.props.editTable.getChangedRows(a.PAGE_CONST.list)).length){e.next=4;break}return e.abrupt("return",$nccUtil.toast($appRoot.state.json["182001524-000022"],$nccConst.spell.warning));case 4:for(r=!0,n=!1,o=void 0,e.prev=7,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)p=i.value,c=_.get(p,"values.pk_flow.display"),_.set(p,"values.flowname",{value:c,display:c});e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),n=!0,o=e.t0;case 15:e.prev=15,e.prev=16,!r&&s.return&&s.return();case 18:if(e.prev=18,!n){e.next=21;break}throw o;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return l={pageid:$appRoot.props.getPageCode(),model:{areaType:$nccConst.spell.table,areacode:a.PAGE_CONST.list,rows:t}},e.next=26,$nccUtil.promiseAjax(a.API_URL.editSaveApproveSet,l);case 26:if(!e.sent.success){e.next=30;break}return $nccUtil.toast($appRoot.state.json["182001524-000023"]),e.abrupt("return",this.queryApproveSetByScheme());case 30:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22]])}))),function(){return p.apply(this,arguments)})},{key:"saveApproveSet",value:(i=s(regeneratorRuntime.mark((function e(t){var r,n=t.pk_orgs,o=t.areacode,s=t.approvemode,i=t.dtos,p=t.flowtype,c=t.overflag,l=t.pk_task;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={areacode:o,approvemode:s,flowtype:p,pk_task:l,pagecode:$appRoot.props.getPageCode(),pk_rms:$appRoot.state[a.PAGE_CONST.pk_rms].value,pk_orgs:n,curReportOrg:$appRoot.state[a.PAGE_CONST.pk_org].value,overflag:c,dtos:i},e.next=3,$nccUtil.promiseAjax(a.API_URL.saveApproveSet,r);case 3:if(!e.sent.success){e.next=7;break}return $nccUtil.toast($appRoot.state.json["182001524-000024"]),e.abrupt("return",this.queryApproveSetByScheme());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"deleteApproveSet",value:(r=s(regeneratorRuntime.mark((function e(){var t,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o,o.length||(t=$appRoot.props.editTable.getCheckedRows(a.PAGE_CONST.list),t=_.map(t,"data")),r=[],t=t.filter((function(e){return r.push(_.get(e,"values.numberindex.value")-1),!!_.get(e,"values.pk_approveset.value")})),log.info("delIndexes",r),n={pageid:$appRoot.props.getPageCode(),model:{areaType:$nccConst.spell.table,areacode:a.PAGE_CONST.list,rows:t}},e.next=8,$nccUtil.promiseAjax(a.API_URL.deleteApproveSet,n);case 8:if(!e.sent.success){e.next=13;break}return $nccUtil.toast($appRoot.state.json["182001524-000025"]),$appRoot.props.button.setButtonDisabled({Delete:!0}),e.abrupt("return",$appRoot.props.editTable.deleteTableRowsByIndex(a.PAGE_CONST.list,r));case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"queryRmsMember",value:(t=s(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$appRoot.getOrgRefPara(),r={strOrgPK:t[a.PAGE_CONST.pk_org],strRmsPK:t[a.PAGE_CONST.pk_rms]},e.next=4,$nccUtil.promiseAjax(a.API_URL.queryRmsMember,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()}})}));
//# sourceMappingURL=index.8a01b0a9.js.map
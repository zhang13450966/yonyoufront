/*! @ncctag {"date":"2022/7/15 下午2:36:47"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["react","nc-lightapp-front"],t):"object"==typeof exports?exports["ufoe/pages/batchCompute/main/index"]=t(require("react"),require("nc-lightapp-front")):e["ufoe/pages/batchCompute/main/index"]=t(e.React,e["nc-lightapp-front"])}(window,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=2029)}({1473:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),c=y(s),l=r(384),p=y(r(1474)),i=y(r(1475)),u=y(r(1476)),d=y(r(1477)),f=r(762),h=y(r(1478)),m=y(r(1479));r(1488);var g=r(718),T=r(623);function y(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}var b=$nccPlatform.createPage({})(n=$nccUtil.AppWrapper({lang:{resources:[{domainName:"ufoe",moduleId:"182012032"}]},use:{editTable:[l.PAGE_CONST.headCard,l.PAGE_CONST.dkerTableArea],form:[l.PAGE_CONST.treeAddModalContent,l.PAGE_CONST.addModalFormStepOne,l.PAGE_CONST.stepThreeForm,l.PAGE_CONST.stepFourForm],search:[],table:[],cardTable:[l.PAGE_CONST.bottomReportCard,l.PAGE_CONST.bottomKeyCard,l.PAGE_CONST.bottomOrgCard]},autoDisplay:{},changeFields:{},pageId:"182012032A_list"})(n=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.isComFromOtherPages=(n=v(regeneratorRuntime.mark((function e(t){var n,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.props.getUrlParam("pk_mainorg"),!(a={pk_org:n}).pk_org){e.next=12;break}return e.next=5,T.initRefer.get3ReferNode(n,null,null);case 5:s=e.sent,$appRoot.props.setUrlParam({pk_mainorg:""}),c=s.data.repOrgRef,$nccStore.setDef(l.STORE.pkOrg,c),(0,g.queryLeftTreeData)(a),e.next=13;break;case 12:g.setTopReferValue.call(o);case 13:case"end":return e.stop()}}),e,r)}))),function(e){return n.apply(this,arguments)}),o.state={json:{}},o.init(e),o}var r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"init",value:(r=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.initTemplate.call(this,t);case 2:(0,f.buttonStatusControl)("init"),this.isComFromOtherPages(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"render",value:function(){var e,t,r,n=this,a=void 0,s=void 0;e=$appRoot.state.json["182012032-000033"],t=c.default.createElement("div",{id:"topDivBox"},c.default.createElement("span",{className:"starSpan"},"*"),c.default.createElement(p.default,o({getThis:function(e){return n.TopRefer=e}},this.props))),r=c.default.createElement(i.default,this.props),a=c.default.createElement(u.default,this.props),s=c.default.createElement(d.default,this.props);var l={needIcon:!0,title:e,Input:t,Buttons:r,bottomArea:c.default.createElement("div",{className:"mainAreaBox"},c.default.createElement($appRoot.props.DragWidthCom,{leftDom:a instanceof Function?a():a,rightDom:s instanceof Function?s():s,defLeftWid:"280px"})),modals:c.default.createElement("div",null,c.default.createElement(h.default,this.props),c.default.createElement(m.default,this.props))};return c.default.createElement($nccCom.NcSingleTable,{pageConfig:l})}}]),t}(s.Component))||n)||n;t.default=b},1474:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=r(718);var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onChange=function(e){r.setState({value:{value:e.refpk,display:e.refname}}),$nccStore.setDef(c.STORE.pkOrg,e);var t={pk_org:e.refpk};if(t.pk_org)(0,l.queryLeftTreeData)(t);else{var n=[{children:[],code:"",iconBox:{addIcon:!1,editIcon:!1,delIcon:!1},id:"root",key:"root",name:$appRoot.state.json["182012032-000004"],nodeData:{},refname:$appRoot.state.json["182012032-000004"],refpk:"root",title:$appRoot.state.json["182012032-000004"],isleaf:!0}];$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.synTree,n),$appRoot.props.syncTree.setNodeSelected(c.PAGE_CONST.synTree,"root"),(0,l.clearTableData)(!0);var o={pk_batchrulesort:"root",pagecode:c.PAGE_CONST.pagecode,areacode:c.PAGE_CONST.headCard};$nccStore.setDef("leftTreeSearchParams",o),$nccStore.setDef(c.STORE.pkOrg,null)}},r.props.getThis(r),r.state={value:{value:null,display:null}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={queryCondition:{},refType:"tree",onChange:this.onChange,foolValue:this.state.value};return s.default.createElement($nccRefer.ReportMasterOrgRef,e)}}]),t}(a.Component);t.default=p},1475:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=((n=a)&&n.__esModule,r(384)),c=r(763);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.props=e,r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return $appRoot.props.button.createButtonApp({area:s.PAGE_CONST.ButtonArea,onButtonClick:c.onButtonClick.bind(this)})}}]),t}(a.Component);t.default=l},1476:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=r(718),p=r(762);function i(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}var u=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSelectEve=(n=i(regeneratorRuntime.mark((function e(t,n,o){var a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $nccStore.setDef("leftTreeNodeSelected",n),a=_.get($nccStore.getDef(c.STORE.pkOrg),"refpk"),s={pk_org:a,pk_batchrulesort:t,pagecode:c.PAGE_CONST.pagecode,areacode:c.PAGE_CONST.headCard},$nccStore.setDef("leftTreeSearchParams",s),e.next=6,(0,l.queryTableData)(s);case 6:(0,p.buttonStatusControl)("search"),$nccStore.getDef(c.STORE.pkOrg)||(0,p.buttonStatusControl)("init");case 8:case"end":return e.stop()}}),e,r)}))),function(e,t,r){return n.apply(this,arguments)}),a.delOneTreeData=(o=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promptBox($appRoot.state.json["182012032-000000"],$appRoot.state.json["182012032-000001"]);case 2:if(console.log($appRoot.state.json["182012032-000000"]),!t.children||!t.children.length){e.next=6;break}return $nccUtil.toast($appRoot.state.json["182012032-000002"],"warning"),e.abrupt("return",!1);case 6:return n={pk_batchrulesort:t.refpk},e.next=9,(0,l.DelLeftTreeData)(n);case 9:case"end":return e.stop()}}),e,r)}))),function(e){return o.apply(this,arguments)}),a.addOneTreeData=function(e){if(!$nccStore.getDef(c.STORE.pkOrg))return $nccUtil.toast($appRoot.state.json["182012032-000003"],"warning"),!1;if($appRoot.props.modal.show("LeftTreeAddModal",{},(function(){$nccStore.setDef("isNewAdd",!0)})),$appRoot.props.form.EmptyAllFormValue(c.PAGE_CONST.treeAddModalContent),"root"!==e.refpk){var t={value:e.key,display:e.name};$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.treeAddModalContent,{pk_parent:t})}},a.editOneTreeData=function(e){$appRoot.props.modal.show("LeftTreeAddModal",{},(function(){$nccStore.setDef("isNewAdd",!1)}));var t=e.nodeData.batchRuleSortVO[c.PAGE_CONST.treeAddModalContent];$appRoot.props.form.setAllFormValue(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},c.PAGE_CONST.treeAddModalContent,t))},a.onMouseEnterEve=function(e){var t=$appRoot.props.syncTree.getSyncTreeValue(c.PAGE_CONST.synTree,e),r={delIcon:$nccStore.getDef(c.STORE.delIcon)&&t.iconBox.delIcon,editIcon:$nccStore.getDef(c.STORE.editIcon)&&t.iconBox.editIcon,addIcon:$nccStore.getDef(c.STORE.addIcon)&&t.iconBox.addIcon};$appRoot.props.syncTree.hideIcon(c.PAGE_CONST.synTree,e,r)},a.props=e,a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=[{children:[],code:"",iconBox:{addIcon:!1,editIcon:!1,delIcon:!1},id:"root",key:"root",name:$appRoot.state.json["182012032-000004"],nodeData:{},refname:$appRoot.state.json["182012032-000004"],refpk:"root",title:$appRoot.state.json["182012032-000004"],isleaf:!0}];$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.synTree,e),$appRoot.props.syncTree.setNodeSelected(c.PAGE_CONST.synTree,"root")}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:"tree-area"},$appRoot.props.syncTree.createSyncTree({treeId:c.PAGE_CONST.synTree,onSelectEve:this.onSelectEve,showModal:!1,selectedForInit:!0,searchType:"filtration",clickEditIconEve:function(t){return e.editOneTreeData(t)},clickAddIconEve:function(t){return e.addOneTreeData(t)},clickDelIconEve:function(t){return e.delOneTreeData(t)},onMouseEnterEve:this.onMouseEnterEve}))}}]),t}(a.Component);t.default=u},1477:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=r(718),p=r(762);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.selectedChange=function(){var e=$appRoot.props.editTable.getCheckedRows(c.PAGE_CONST.headCard);if(console.log(e),e.length){(0,p.buttonStatusControl)("checked");var t={pk_batchrule:e[0].data.values.pk_batchrule.value};(0,l.queryBodyDataByTableHeader)(t)}else(0,p.buttonStatusControl)("unchecked"),(0,l.clearTableData)(!1)},r.selectAllRowsEvent=function(){r.selectedChange()},r.props=e,r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e;return s.default.createElement("div",{className:"table_arae flex-container",style:{height:"100%"}},s.default.createElement("div",{className:"flex-container",style:{flex:"none",height:280}},$appRoot.props.editTable.createEditTable(c.PAGE_CONST.headCard,{showIndex:!0,showCheck:!0,onSelected:this.selectedChange,onSelectedAll:this.selectAllRowsEvent})),s.default.createElement("div",{className:"right-bottom-table flex-container"},$appRoot.props.cardTable.createCardTable(c.PAGE_CONST.bottomReportCard,{multiConfig:(e={},i(e,c.PAGE_CONST.bottomReportCard,{showCheck:!1,adaptionHeight:!0,hideSwitch:function(){return!1}}),i(e,c.PAGE_CONST.bottomKeyCard,{showCheck:!1,adaptionHeight:!0,hideSwitch:function(){return!1}}),i(e,c.PAGE_CONST.bottomOrgCard,{showCheck:!1,adaptionHeight:!0,hideSwitch:function(){return!1}}),e)})))}}]),t}(a.Component);t.default=u},1478:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=r(763),p=r(909);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(e){i(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.confirmBtnEvent=function(){(0,p.addLeftData)()},r.cancleBtnEvent=function(){(0,p.cancleAdd)()},r.state={},r}return d(t,e),o(t,[{key:"render",value:function(){var e=this;return $appRoot.props.modal.createModal("LeftTreeAddModal",{title:"新增批量规则分类",content:s.default.createElement(h,null),hasCloseBtn:!1,userControl:!0,leftBtnName:"确定",rightBtnName:"取消",beSureBtnClick:function(){return e.confirmBtnEvent()},cancelBtnClick:function(){return e.cancleBtnEvent()}})}}]),t}(a.Component),h=function(e){function t(e){i(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onFormAfter=function(){console.log("hhhhhh")},r.state={},r}return d(t,e),o(t,[{key:"componentDidMount",value:function(){$appRoot.props.form.setFormStatus("sortAdd","edit");var e={queryCondition:{pk_org:$nccStore.getDef(c.STORE.pkOrg).refpk}};$appRoot.props.renderItem("form",c.PAGE_CONST.treeAddModalContent,"pk_parent",s.default.createElement($nccRefer.BatchRuleSortTreeRef,e))}},{key:"render",value:function(){return s.default.createElement("div",{className:"leftTreeAddContent"},$appRoot.props.form.createForm(c.PAGE_CONST.treeAddModalContent,{onAfterEvent:this.onFormAfter}))}}]),t}(a.Component);!function(e){function t(e){i(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}d(t,e),o(t,[{key:"render",value:function(){return $appRoot.props.button.createButtonApp({area:c.PAGE_CONST.treeAddModalBtn,onButtonClick:l.onButtonClick.bind(this)})}}])}(a.Component);t.default=f},1479:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=h(a),c=r(384),l=h(r(1480)),p=h(r(1481)),i=h(r(1482)),u=h(r(1483)),d=r(763),f=r(909);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r(1486);var y=$nccPlatform.base.NCStep,v=y.NCSteps,b=function(e){function t(e){m(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.beSureBtnClick=function(){console.log($appRoot.state.json["182012032-000009"])},r.changeCurrent=function(e){r.setState({current:e})},r.clickStep=function(e,t){$nccStore.getDef("isComeFromAdd")?(0,f.NextAction)(r.changeCurrent,t,!0):r.changeCurrent(t)},r.onEnter=function(){$nccStore.getDef("isComeFromAdd")&&$appRoot.props.form.EmptyAllFormValue(c.PAGE_CONST.addModalFormStepOne),r.setState({current:0});var e=$nccStore.getDef("leftTreeNodeSelected"),t={value:e.key,display:e.name};$nccStore.setDef("isEditAfter",!1),$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.addModalFormStepOne,{pk_batchrulesort:t}),$nccStore.setDef("leftTreeData",null),$nccStore.setDef("rightTreeData",null),console.log($nccStore.getDef("rightTreeData"),"==========================="),$nccStore.setDef("rightTreeDataStep3",null),$nccStore.setDef("stepThreeValue",null),$nccStore.setDef("treeDataStep3",null),$appRoot.props.form.EmptyAllFormValue(c.PAGE_CONST.stepThreeForm),$nccStore.setDef("stepFourFormData",null),$nccStore.setDef("newObjKeyAndValue",null),$nccStore.setDef("myDkerArr",null),$appRoot.props.form.EmptyAllFormValue(c.PAGE_CONST.stepFourForm),$appRoot.props.editTable.setTableData(c.PAGE_CONST.dkerTableArea,{rows:[]}),$nccStore.setDef("afterDelstrKeyVals",null),$nccStore.setDef("afterEditstrKeyVals",null),$nccStore.setDef("newObjKeyAndValue_last",null)},r.state={current:0},r}return T(t,e),o(t,[{key:"render",value:function(){return s.default.createElement("div",null,$appRoot.props.modal.createModal("headAddModal",{title:$appRoot.state.json["182012032-000010"],content:s.default.createElement(k,n({},this.state,{clickStep:this.clickStep})),beSureBtnClick:this.beSureBtnClick,noFooter:!1,showCustomBtns:!0,customBtns:s.default.createElement(S,n({changeCurrent:this.changeCurrent},this.state)),hasCloseBtn:!1,userControl:!0,size:$nccConst.spell.lg,onShow:this.onShow,onEnter:this.onEnter,onHide:this.onHide}),$appRoot.props.modal.createModal("headAddModal_edit",{title:$appRoot.state.json["182012032-000052"],content:s.default.createElement(k,n({},this.state,{clickStep:this.clickStep})),beSureBtnClick:this.beSureBtnClick,noFooter:!1,showCustomBtns:!0,customBtns:s.default.createElement(S,n({changeCurrent:this.changeCurrent},this.state)),hasCloseBtn:!1,userControl:!0,size:$nccConst.spell.lg,onShow:this.onShow,onEnter:this.onEnter,onHide:this.onHide}),$appRoot.props.modal.createModal("headAddModal_copy",{title:$appRoot.state.json["182012032-000053"],content:s.default.createElement(k,n({},this.state,{clickStep:this.clickStep})),beSureBtnClick:this.beSureBtnClick,noFooter:!1,showCustomBtns:!0,customBtns:s.default.createElement(S,n({changeCurrent:this.changeCurrent},this.state)),hasCloseBtn:!1,userControl:!0,size:$nccConst.spell.lg,onShow:this.onShow,onEnter:this.onEnter,onHide:this.onHide}))}}]),t}(a.Component),k=function(e){function t(e){m(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log(e,"-----------------------"),r.state={},r.steps=[{title:$appRoot.state.json["182012032-000005"],content:s.default.createElement(l.default,null)},{title:$appRoot.state.json["182012032-000006"],content:s.default.createElement(p.default,null)},{title:$appRoot.state.json["182012032-000007"],content:s.default.createElement(i.default,null)},{title:$appRoot.state.json["182012032-000008"],content:s.default.createElement(u.default,null)}],r}return T(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props.current;return s.default.createElement("div",{id:"modalBox"},s.default.createElement(v,{current:t},this.steps.map((function(t,r){return s.default.createElement(y,{key:t.title,title:t.title,onClick:function(t){e.props.clickStep(t,r)}})}))),s.default.createElement("div",{style:{paddingTop:"16px"},className:"modalBoxDiv"},this.steps[t].content))}}]),t}(a.Component),S=function(e){function t(e){m(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return T(t,e),o(t,[{key:"render",value:function(){return $appRoot.props.button.createButtonApp({area:c.PAGE_CONST.addModelBtnArea,onButtonClick:d.onButtonClickAddModal.bind(this)})}}]),t}(a.Component);t.default=b},1480:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=r(833);var p=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onFormAfter=(n=regeneratorRuntime.mark((function e(t,n,o,a,s){var l,p,i,u,d,f,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"pk_task"==o&&(console.log(a,"=========="),l=a.values,p=l.pk_accscheme,i=l.pk_keygroup,u=l.pk_task,d=l.busi_prop,$nccStore.setDef(c.STORE.busi_prop,null==d?null:d.value),$nccStore.setDef(c.STORE.pk_task,u.value),$nccStore.setDef(c.STORE.pk_keygroup,i.value),$nccStore.setDef(c.STORE.time_keygroup,i),$nccStore.setDef(c.STORE.pk_accscheme,p.value),$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.addModalFormStepOne,{pk_keygroup:i,pk_accscheme:p}),f=$appRoot.props.form.getAllFormValue(c.PAGE_CONST.addModalFormStepOne),console.log(f,"=================="),$nccStore.setDef("stepEditOneData",f),$nccStore.setDef("rightTreeData",null),$nccStore.setDef("leftTreeData",null),$nccStore.setDef("stepThreeValue",null),(h=$nccStore.getDef(c.STORE.rulecontent))&&((m=_.cloneDeep(h)).value.strRepPKs=null,m.value.strTaskPKs=null,m.value.strKeyVals=null,console.log(m,"================="),$nccStore.setDef(c.STORE.rulecontent,m),$nccStore.setDef("isEditAfter",!0)),$appRoot.props.editTable.setTableData(c.PAGE_CONST.dkerTableArea,{rows:[]}),$nccStore.setDef("stepFourFormData",null),$nccStore.setDef("myDkerArr",null),$nccStore.setDef("keyValueVOs",null)),"pk_accscheme"==o&&$nccStore.setDef(c.STORE.pk_accscheme,a.refpk);case 2:case"end":return e.stop()}}),e,r)})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(c)}("next")}))},function(e,t,r,n,a){return o.apply(this,arguments)}),a.isComFromAdd=function(){var e=$nccStore.getDef("leftTreeNodeSelected"),t={value:e.key,display:e.name};$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.addModalFormStepOne,{pk_batchrulesort:t})},a.isComFromEdit=function(){console.log($appRoot.state.json["182012032-000020"]);var e=$nccStore.getDef("stepEditOneData");$appRoot.props.form.setAllFormValue(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},c.PAGE_CONST.addModalFormStepOne,e))},a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){(0,l.buttonVisibleControl)("addModalInit"),$appRoot.props.form.setFormStatus(c.PAGE_CONST.addModalFormStepOne,"edit");var e=$nccStore.getDef(c.STORE.pkOrg),t={queryCondition:{pk_receiveorg:e.refpk}},r={queryCondition:{pk_org:e.refpk}};$appRoot.props.renderItem("form",c.PAGE_CONST.addModalFormStepOne,"pk_task",s.default.createElement($nccRefer.TaskGridRef,t)),$appRoot.props.renderItem("form",c.PAGE_CONST.addModalFormStepOne,"pk_batchrulesort",s.default.createElement($nccRefer.BatchRuleSortTreeRef,r)),$nccStore.getDef("isComeFromAdd")?this.isComFromAdd():this.isComFromEdit()}},{key:"render",value:function(){return s.default.createElement("div",null,$appRoot.props.form.createForm(c.PAGE_CONST.addModalFormStepOne,{onAfterEvent:this.onFormAfter}))}}]),t}(a.Component);t.default=p},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=r(833),p=r(16);function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r(693);var m=p.base.NCCheckbox,g=$nccPlatform.base.NCButton;window.leftTreeMapping=null;var T={},y=function(e){function t(e){var r=this;d(this,t);var n,o,a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getTransferData=u(regeneratorRuntime.mark((function e(){var t,n,o,s,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.comBineQueryDataParams(),console.log(t,"==================="),e.next=4,$nccUtil.promiseAjax(c.URLS.qryGroupTaskTreeAction,t);case 4:n=e.sent,o=n.success,s=n.data,o&&s&&(l=s.selectTaskRep,p=s.taskRepTree,l.forEach((function(e){e.refname=e.nodeData.reportName+"||"+e.nodeData.taskName})),a.setState({treeData:p,leftTreeData:$nccStore.getDef("leftTreeData")?$nccStore.getDef("leftTreeData"):p,rightTreeData:$nccStore.getDef("rightTreeData")?$nccStore.getDef("rightTreeData"):l},(function(){console.log(a.state.leftTreeData,a.state.rightTreeData,"========="),$nccStore.setDef("rightTreeData",a.state.rightTreeData);var e=[],t=[];a.tree2Array(a.state.leftTreeData,(function(t){return e.push(t)})),a.tree2Array(a.state.rightTreeData,(function(e){return t.push(e)})),a.setState({leftTreeCount:e.length,rightTreeCount:t.length})})));case 7:case"end":return e.stop()}}),e,r)}))),a.comBineQueryDataParams=function(){var e=$nccStore.getDef("isComeFromAdd"),t=$nccStore.getDef(c.STORE.pkOrg),r=$nccStore.getDef(c.STORE.pk_task),n={pk_org:t.refpk,pk_task:r,selTasks:"",selReps:"",isHB:!1};if(!e){var o=$nccStore.getDef(c.STORE.rulecontent).value,a=o.strRepPKs,s=o.strTaskPKs;console.log(a,s,"==================="),n.selTasks=a&&s.join()||"",n.selReps=s&&a.join()||""}return n},a[">"]=function(){a.leftTreeToRight(!1)},a[">>"]=function(){a.leftTreeToRight(!0)},a["<<"]=function(){a.rightTreeToLeft(!0)},a["<"]=function(){a.rightTreeToLeft(!1)},a.leftTreeToRight=(n=u(regeneratorRuntime.mark((function e(t){var n,o,s,l,p,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.treeData,n=_.cloneDeep(a.state.leftTreeData),o=_.cloneDeep($nccStore.getDef("rightTreeData")?$nccStore.getDef("rightTreeData"):a.state.rightTreeData),s=null,l=[],!t){e.next=11;break}a.getLeafNode(n,[]).forEach((function(e,t){console.log(e,"==========================================="),e.refname=e.nodeData.reportName+"||"+e.nodeData.taskName,o.push(e)})),s=a.delAll(n),e.next=20;break;case 11:if(p=[],$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneLeftTreeId).forEach((function(e){p.push($appRoot.props.syncTree.getSyncTreeValue(c.PAGE_CONST.addModalTransferOneLeftTreeId,e))})),!(p.length>0)){e.next=18;break}p.forEach((function(e){if(e.isleaf)s=a.delNode(n,e.refpk),e.refname=e.nodeData.reportName+"||"+e.nodeData.taskName,o.push(e);else{var t=a.delAll(JSON.parse(JSON.stringify([e])));s=a.editTreeNode(n,t[0]),a.getLeafNode([e],[]).forEach((function(e){e.refname=e.nodeData.reportName+"||"+e.nodeData.taskName,o.push(e)}))}})),e.next=20;break;case 18:return $nccUtil.toast($appRoot.state.json["182012032-000028"],$nccConst.spell.warning),e.abrupt("return");case 20:o.forEach((function(e){l.includes(e)||l.push(e)})),$nccStore.setDef("leftTreeData",s),$nccStore.setDef("rightTreeData",l),i=[],a.tree2Array($nccStore.getDef("leftTreeData"),(function(e){return i.push(e)})),a.setState({leftTreeData:s,rightTreeData:l,leftTreeCount:i.length,leftTreeSelectCount:0,leftTreeCheckAll:!1,rightTreeCount:l.length},(function(){console.log(a.state.leftTreeData,a.state.rightTreeData,"=========="),$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneLeftTreeId,s),$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneRightTreeId,l),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneLeftTreeId,[]),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneRightTreeId,[])}));case 26:case"end":return e.stop()}}),e,r)}))),function(e){return n.apply(this,arguments)}),a.rightTreeToLeft=(o=u(regeneratorRuntime.mark((function e(t){var n,o,s,l,p,u,d,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.cloneDeep($nccStore.getDef("leftTreeData")||a.state.leftTreeData),_.cloneDeep($nccStore.getDef("rightTreeData")?$nccStore.getDef("rightTreeData"):a.state.rightTreeData),o=null,s=[],!t){e.next=15;break}l=[],a.tree2Array(n,(function(e){return l.push(e)})),p=$appRoot.props.syncTree.getTreeData(c.PAGE_CONST.addModalTransferOneRightTreeId),console.log(p,"========================"),p.forEach((function(e){e.refname=e.nodeData.reportName})),(u=[].concat(l,i(p))).forEach((function(e){e.children&&delete e.children})),o=$appRoot.props.syncTree.createTreeData(u),e.next=28;break;case 15:if(d=[],$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneRightTreeId).forEach((function(e){d.push($appRoot.props.syncTree.getSyncTreeValue(c.PAGE_CONST.addModalTransferOneRightTreeId,e))})),!(d.length>0)){e.next=26;break}f=[],a.tree2Array(n,(function(e){return f.push(e)})),d.forEach((function(e){e.refname=e.nodeData.reportName,e.children&&delete e.children,f.push(e),$appRoot.props.syncTree.delNodeSuceess(c.PAGE_CONST.addModalTransferOneRightTreeId,e.refpk)})),o=$appRoot.props.syncTree.createTreeData(f),s=$appRoot.props.syncTree.getSyncTreeValue(c.PAGE_CONST.addModalTransferOneRightTreeId),e.next=28;break;case 26:return $nccUtil.toast($appRoot.state.json["182012032-000028"],$nccConst.spell.warning),e.abrupt("return");case 28:$nccStore.setDef("rightTreeData",s),$nccStore.setDef("leftTreeData",o),h=[],a.tree2Array($nccStore.getDef("leftTreeData"),(function(e){return h.push(e)})),a.setState({leftTreeData:o,rightTreeData:s,leftTreeCount:h.length,rightTreeSelectCount:0,rightTreeCount:s.length,rightTreeCheckAll:!1},(function(){console.log(a.state.leftTreeData,a.state.rightTreeData,"=========="),$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneLeftTreeId,o),$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneRightTreeId,s),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneLeftTreeId,[]),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneRightTreeId,[]),$nccStore.setDef("isEditAfter",!0)}));case 33:case"end":return e.stop()}}),e,r)}))),function(e){return o.apply(this,arguments)}),a.getLeafNode=function(e,t){return e&&e.forEach((function(e,r){if(!e.isleaf)return t.concat(a.getLeafNode(e.children,t));t.push(e)})),t},a.delAll=function(e){var t=e.filter((function(e){return 0==e.isleaf}));return t.forEach((function(e){return e.children&&(e.children=a.delAll(e.children))})),t},a.editTreeNode=function(e,t){var r=function e(t,r){t.forEach((function(t){if(t.refpk==r.refpk)return console.log(t),console.log(r),void(t.children=r.children);t.children&&e(t.children,r)}))};return"root"!=t.key?r(e[0].children,t):r(e,t),e},a.tree2Array=function(e,t){for(var r=Array.isArray(e)?[].concat(i(e)):[e];r.length;){var n=r.shift();t&&t(n);var o=n.children;if(o&&o.length)for(var a=0;a<o.length;a++)r.push(o[a])}},a.leftTreeCheckAllFn=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({leftTreeCheckAll:!a.state.leftTreeCheckAll});case 2:a.state.leftTreeCheckAll?(t=[],a.tree2Array($appRoot.props.syncTree.getTreeData(c.PAGE_CONST.addModalTransferOneLeftTreeId),(function(e){return t.push(e)})),n=[],t.forEach((function(e){n.push(e.refpk)})),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneLeftTreeId,n)):$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneLeftTreeId,[]),a.setState({leftTreeSelectCount:$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneLeftTreeId).length});case 4:case"end":return e.stop()}}),e,r)}))),a.add_step3_left_select=function(e,t){var r=$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneLeftTreeId);a.setState({leftTreeSelectCount:r.length})},a.add_step3_left_check=function(e,t,r){var n=r.checked,o=(r.checkedNodes,r.node),s=(r.event,$appRoot.props.syncTree.getSyncTreeValue(c.PAGE_CONST.addModalTransferOneLeftTreeId,o.props.refpk)),l=$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneLeftTreeId),p=[];a.tree2Array(s,(function(e){return p.push(e.refpk)}));var u=[];n?u=Array.from(new Set([].concat(i(l),p))):l.forEach((function(e){-1==p.indexOf(e)&&u.push(e)})),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneLeftTreeId,u);var d=$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneLeftTreeId).length;a.setState({leftTreeSelectCount:d})},a.rightTreeCheckAllFn=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({rightTreeCheckAll:!a.state.rightTreeCheckAll});case 2:a.state.rightTreeCheckAll?(t=[],a.tree2Array($appRoot.props.syncTree.getTreeData(c.PAGE_CONST.addModalTransferOneRightTreeId),(function(e){return t.push(e)})),n=[],t.forEach((function(e){n.push(e.refpk)})),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneRightTreeId,n)):$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneRightTreeId,[]),a.setState({rightTreeSelectCount:$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneRightTreeId).length});case 4:case"end":return e.stop()}}),e,r)}))),a.add_step3_right_select=function(e,t,r){r.checked,r.checkedNodes,r.node,r.event;var n=$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneRightTreeId);a.setState({rightTreeSelectCount:n.length})},a.add_step3_right_check=function(e,t,r){r.checked,r.checkedNodes,r.node,r.event;var n=$appRoot.props.syncTree.getCheckedKeys(c.PAGE_CONST.addModalTransferOneRightTreeId).length;a.setState({rightTreeSelectCount:n})},T.instance=a,a.state={treeData:null,leftTreeData:null,rightTreeData:null,leftTreeCheckAll:!1,leftTreeSelectCount:0,leftTreeCount:100,rightTreeCheckAll:!1,rightTreeSelectCount:0,rightTreeCount:0},a}return h(t,e),o(t,[{key:"componentDidMount",value:function(){(0,l.buttonVisibleControl)("notInit"),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneLeftTreeId,[]),$appRoot.props.syncTree.setNodeChecked(c.PAGE_CONST.addModalTransferOneRightTreeId,[]),this.getTransferData()}},{key:"delNode",value:function(e,t){var r=this,n=e.filter((function(e){return e.refpk!==t}));return n.forEach((function(e){return e.children&&(e.children=r.delNode(e.children,t))})),n}},{key:"render",value:function(){return s.default.createElement("div",{id:"steps_approval"},s.default.createElement("div",{className:"steps_approval"},s.default.createElement("div",{className:"step_transfer_approval"},s.default.createElement("div",{className:"step_common step_left"},s.default.createElement("div",{className:"tree_topDiv"},s.default.createElement("div",{className:"tree_topCount"},s.default.createElement(m,{colors:"info",onChange:this.leftTreeCheckAllFn,checked:this.state.leftTreeCheckAll}),this.state.leftTreeSelectCount,"/",this.state.leftTreeCount),s.default.createElement("div",{className:"tree_topTitle"},$appRoot.state.json["182012032-000025"])),s.default.createElement(v,{leftTreeData:this.state.leftTreeData,key:this.state.leftTreeData&&this.state.leftTreeData.length,add_step3_left_select:this.add_step3_left_select,add_step3_left_check:this.add_step3_left_check})),s.default.createElement("div",{className:"step_btn_wrapper"},s.default.createElement("div",{className:"step_btn"},s.default.createElement(g,{onClick:this[">"],className:"uf uf uf-arrow-right",disabled:0===this.state.leftTreeSelectCount},s.default.createElement("span",null,s.default.createElement("i",{class:"iconfont icon-chuansuo-you"}))),s.default.createElement(g,{onClick:this[">>"],className:"uf uf uf-2arrow-right",disabled:0===this.state.leftTreeCount},s.default.createElement("span",null,s.default.createElement("i",{class:"iconfont icon-chuansuo-quanbuyou"}))),s.default.createElement(g,{onClick:this["<"],className:"rotate180 uf uf uf-arrow-left",disabled:0===this.state.rightTreeSelectCount},s.default.createElement("span",null,s.default.createElement("i",{class:"iconfont icon-chuansuo-you"}))),s.default.createElement(g,{onClick:this["<<"],className:"rotate180 uf uf uf-2arrow-left",disabled:0===this.state.rightTreeCount},s.default.createElement("span",null,s.default.createElement("i",{class:"iconfont icon-chuansuo-quanbuyou"}))))),s.default.createElement("div",{className:"step_common step_right"},s.default.createElement("div",{className:"tree_topDiv"},s.default.createElement("div",{className:"tree_topCount"},s.default.createElement(m,{colors:"info",onChange:this.rightTreeCheckAllFn,checked:this.state.rightTreeCheckAll}),this.state.rightTreeSelectCount,"/",this.state.rightTreeCount),s.default.createElement("div",{className:"tree_topTitle"},$appRoot.state.json["182012032-000026"])),s.default.createElement(b,{rightTreeData:this.state.rightTreeData,key:this.state.rightTreeData&&this.state.rightTreeData.length,add_step3_right_select:this.add_step3_right_select,add_step3_right_check:this.add_step3_right_check})))))}}]),t}(a.Component),v=function(e){function t(e){d(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onCheckLeft=function(){console.log($appRoot.state.json["182012032-000029"])},r.state={},r}return h(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.leftTreeData?$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneLeftTreeId,this.props.leftTreeData):$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneLeftTreeId,[])}},{key:"render",value:function(){return $appRoot.props.syncTree.createSyncTree({treeId:c.PAGE_CONST.addModalTransferOneLeftTreeId,needSearch:!0,showModal:!0,needEdit:!1,checkable:!0,searchType:"filtration",defaultExpandAll:!0,onCheckEve:this.props.add_step3_left_check,onSelectEve:this.props.add_step3_left_select,getSearchVal:function(){var e=$appRoot.props.syncTree.getTreeToList(c.PAGE_CONST.addModalTransferOneLeftTreeId).length;T.instance.setState({leftTreeCount:e})}})}}]),t}(a.Component),b=function(e){function t(e){d(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return h(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.rightTreeData,$appRoot.props.syncTree.setSyncTreeData(c.PAGE_CONST.addModalTransferOneRightTreeId,this.props.rightTreeData)}},{key:"render",value:function(){return $appRoot.props.syncTree.createSyncTree({treeId:c.PAGE_CONST.addModalTransferOneRightTreeId,needSearch:!0,showModal:!0,needEdit:!1,checkable:!0,defaultExpandAll:!0,searchType:"filtration",onCheckEve:this.props.add_step3_right_check,onSelectEve:this.props.add_step3_right_select,getSearchVal:function(){var e=$appRoot.props.syncTree.getTreeToList(c.PAGE_CONST.addModalTransferOneRightTreeId).length;T.instance.setState({rightTreeCount:e})}})}}]),t}(a.Component);t.default=y},1482:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),c=(n=s)&&n.__esModule?n:{default:n},l=r(384),p=r(833);r(693);var i=r(623);function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=$nccPlatform.base.NCButton,T=$nccPlatform.base.NCCheckbox,y=$nccPlatform.base.NCRadio,v=null,b={},k=function(e){function t(e){var r=this;f(this,t);var n,a,s=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s[">"]=function(){console.log(">",s.getFormatTreeData());var e=s.getFormatTreeData();$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId,e),s.storeRightKeysData(e),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.leftTreeId,[])},s[">>"]=function(){console.log(">>",s.getFormatTreeData(!0));var e=s.getFormatTreeData(!0);$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId,e),s.storeRightKeysData(e),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.leftTreeId,[])},s["<<"]=function(){console.log("<<"),$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId,[]);s.storeRightKeysData([]),s.setState({rightTreeSelectCount:0}),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.leftTreeId,[])},s["<"]=function(){console.log("<");var e=$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoRightTreeId),t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=o.value;$appRoot.props.syncTree.delNodeSuceess(l.PAGE_CONST.addModalTransferTwoRightTreeId,c)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}var p=$appRoot.props.syncTree.getTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId);s.storeRightKeysData(p),s.setState({rightTreeSelectCount:0}),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.leftTreeId,[])},s.onCheckChange=function(e,t){s.setState(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t),(function(){}))},s.getFormatTreeData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?v.getAllPks():$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoLeftTreeId),r=$appRoot.props.syncTree.getTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId).map((function(e){return e.refpk})),n=s.state.selectedValue;return v[n]([].concat(d(r),d(t)))},s.storeRightKeysData=function(e){console.log(e,"================================="),e.length||$nccStore.setDef("unitDSInfos",[]),s.setState({rightTreeData:e,leftTreeSelectCount:0},(function(){$nccStore.setDef("rightTreeDataStep3",s.state.rightTreeData),$nccStore.setDef("isEditAfter",!0),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoLeftTreeId,[]),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoRightTreeId,[]);var e=[];s.tree2Array(s.state.rightTreeData,(function(t){return e.push(t)})),s.setState({rightTreeCount:e.length}),s.state.rightTreeData.length?$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!0}):$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!1})}))},s.addDefaultRms=u(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=$nccStore.getDef(l.STORE.pkOrg))){e.next=14;break}return e.next=4,i.initRefer.getRmsNodes(t.refpk);case 4:if(!(n=e.sent).length){e.next=14;break}return $nccStore.setDef("rightTreeDataStep3",[]),$nccStore.setDef("unitDSInfos",[]),a=o({},n[0],{display:n[0].refname,value:n[0].refpk}),$nccStore.setDef("stepThreeValue",a),e.next=12,s.getTransferData(a,{value:null});case 12:return e.next=14,s.initStepThreeFn();case 14:case"end":return e.stop()}}),e,r)}))),s.AddStepThreeAfterEvent=(n=u(regeneratorRuntime.mark((function e(t,n,o,a,c){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a,c,"==============="),a.value!=c.value){e.next=3;break}return e.abrupt("return",!1);case 3:return $nccStore.setDef("treeDataStep3",null),$nccStore.setDef("rightTreeDataStep3",[]),$nccStore.setDef("unitDSInfos",[]),$nccStore.setDef("stepThreeValue",a),a.value||$nccStore.setDef("stepThreeValue",null),e.next=10,s.getTransferData(a,c);case 10:case"end":return e.stop()}}),e,r)}))),function(e,t,r,o,a){return n.apply(this,arguments)}),s.getTransferData=(a=u(regeneratorRuntime.mark((function e(t,n){var o,a,c,p,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=$nccStore.getDef(l.STORE.pkOrg),a={pk_vid:t.value||t.values?t.values.pk_vid.value:"",pk_org:o.refpk,pk_task:$nccStore.getDef(l.STORE.pk_task)},e.next=4,$nccUtil.promiseAjax(l.URLS.qryRmsMember,a);case 4:if(!(c=e.sent).data){e.next=10;break}return c.data.forEach((function(e){e.pid&&delete e.pid})),e.next=9,$nccUtil.getTeeHandler(c.data);case 9:v=e.sent;case 10:console.log(c,"==============="),p=c.success,i=c.data,p&&(i&&i.length?s.setState({treeData:$nccStore.getDef("treeDataStep3")?$nccStore.getDef("treeDataStep3"):i,rightTreeData:$nccStore.getDef("rightTreeDataStep3")?$nccStore.getDef("rightTreeDataStep3"):[]},(function(){$nccStore.setDef("treeDataStep3",s.state.treeData),$nccStore.setDef("rightTreeDataStep3",s.state.rightTreeData);var e=[],t=[];s.tree2Array(s.state.treeData,(function(t){return e.push(t)})),s.tree2Array(s.state.rightTreeData,(function(e){return t.push(e)})),s.setState({leftTreeCount:e.length,rightTreeCount:t.length},(function(){console.log(s.state.leftTreeCount,s.state.rightTreeCount,"kkkkkkkkkkkkkkkkkkk")})),$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoLeftTreeId,s.state.treeData)})):s.setState({treeData:i,rightTreeData:[]}));case 13:case"end":return e.stop()}}),e,r)}))),function(e,t){return a.apply(this,arguments)}),s.initStepThreeFn=u(regeneratorRuntime.mark((function e(){var t,n,o,a,c,p,i,u,d,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$nccStore.getDef("isComeFromAdd")){e.next=9;break}t=$nccStore.getDef("stepThreeValue"),n=$nccStore.getDef("treeDataStep3"),o=$nccStore.getDef("rightTreeDataStep3"),console.log(o,"===============22222222222222"),t?(console.log(t,"=========="),$appRoot.props.form.setFormItemsValue(l.PAGE_CONST.stepThreeForm,{reportOrg:{value:t.value,display:t.display}}),s.setState({treeData:n,rightTreeData:o},(function(){var e=[];s.tree2Array(s.state.treeData,(function(t){return e.push(t)})),s.setState({leftTreeCount:e.length,rightTreeCount:s.state.rightTreeData.length}),s.state.rightTreeData.length?$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!0}):$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!1})}))):$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!1}),e.next=24;break;case 9:return a=$nccStore.getDef(l.STORE.rulecontent),c=$nccStore.getDef("unitDSInfos"),p=a.value.rmsPk,console.log(p,"llllllllllllll"),i=$nccStore.getDef("stepThreeValue"),$appRoot.props.form.setFormItemsValue(l.PAGE_CONST.stepThreeForm,{reportOrg:i||p}),u={values:{pk_vid:{value:i?i.values.pk_vid.value:p.pk_vid}}},e.next=18,s.getTransferData(u);case 18:d=s.state,f=d.treeData,h=d.rightTreeData,console.log(f,h,"========================"),console.log(c,"----------------"),h&&!h.length&&c.length&&(c.forEach((function(e){s.findRightTreeData(f,e,h)})),s.setState({rightTreeData:h},(function(){$nccStore.setDef("rightTreeDataStep3",h),s.setState({rightTreeCount:s.state.rightTreeData.length}),s.state.rightTreeData.length?$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!0}):$appRoot.props.form.setFormItemsDisabled(l.PAGE_CONST.stepThreeForm,{reportOrg:!1})}))),console.log(h,"===================================="),$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId,h);case 24:case"end":return e.stop()}}),e,r)}))),s.findRightTreeData=function(e,t,r){e.map((function(e){e.nodeData.pk_org==t.pk_org.value?r.push({code:e.code,iconBox:e.iconBox,id:e.id,key:e.key,name:e.name,refname:e.refname,refpk:e.refpk,title:e.title,nodeData:e.nodeData}):e.children&&e.children.length&&s.findRightTreeData(e.children,t,r)}))},s.leftTreeCheckAllFn=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({leftTreeCheckAll:!s.state.leftTreeCheckAll});case 2:s.state.leftTreeCheckAll?(t=[],s.tree2Array($appRoot.props.syncTree.getTreeData(l.PAGE_CONST.addModalTransferTwoLeftTreeId),(function(e){return t.push(e)})),n=[],t.forEach((function(e){n.push(e.refpk)})),s.setState({}),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoLeftTreeId,n)):$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoLeftTreeId,[]),s.setState({leftTreeSelectCount:$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoLeftTreeId).length});case 4:case"end":return e.stop()}}),e,r)}))),s.add_step4_left_select=function(e,t,r){r.checked,r.checkedNodes,r.node,r.event;var n=$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoLeftTreeId);s.setState({leftTreeSelectCount:n.length})},s.add_step4_left_check=function(e,t,r){r.checked,r.checkedNodes,r.node,r.event;var n=$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoLeftTreeId).length;s.setState({leftTreeSelectCount:n})},s.rightTreeCheckAllFn=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({rightTreeCheckAll:!s.state.rightTreeCheckAll});case 2:s.state.rightTreeCheckAll?(t=[],s.tree2Array($appRoot.props.syncTree.getTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId),(function(e){return t.push(e)})),n=[],t.forEach((function(e){n.push(e.refpk)})),s.setState({}),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoRightTreeId,n)):(s.setState({}),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoRightTreeId,[])),s.setState({rightTreeSelectCount:$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoRightTreeId).length});case 4:case"end":return e.stop()}}),e,r)}))),s.add_step4_right_select=function(e,t,r){r.checked,r.checkedNodes,r.node,r.event;var n=$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoRightTreeId);s.setState({rightTreeSelectCount:n.length})},s.add_step4_right_check=function(e,t,r){r.checked,r.checkedNodes,r.node,r.event;var n=$appRoot.props.syncTree.getCheckedKeys(l.PAGE_CONST.addModalTransferTwoRightTreeId).length;s.setState({rightTreeSelectCount:n})},s.tree2Array=function(e,t){for(var r=Array.isArray(e)?[].concat(d(e)):[e];r.length;){var n=r.shift();t&&t(n);var o=n.children;if(o&&o.length)for(var a=0;a<o.length;a++)r.push(o[a])}},b.instance=s,s.state={selectedValue:"getCurrent",treeData:null,rightTreeData:null,leftTreeSelectCount:0,leftTreeCount:0,rightTreeSelectCount:0,rightTreeCount:0,leftTreeCheckAll:!1,rightTreeCheckAll:!1},s.checkBoxConfig=[{value:"getCurrent",display:$appRoot.state.json["182012032-000021"]},{value:"getDeepLower",display:$appRoot.state.json["182012032-000022"]},{value:"getLower",display:$appRoot.state.json["182012032-000023"]},{value:"getLeaf",display:$appRoot.state.json["182012032-000024"]}],s}return m(t,e),a(t,[{key:"componentDidMount",value:function(){(0,p.buttonVisibleControl)("notInit"),$appRoot.props.form.setFormStatus(l.PAGE_CONST.stepThreeForm,"edit"),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoLeftTreeId,[]),$appRoot.props.syncTree.setNodeChecked(l.PAGE_CONST.addModalTransferTwoRightTreeId,[]);var e=$nccStore.getDef(l.STORE.pkOrg),t=$nccStore.getDef(l.STORE.busi_prop),r={queryCondition:{pk_org:e.refpk,busi_prop:t}};$appRoot.props.renderItem("form",l.PAGE_CONST.stepThreeForm,"reportOrg",c.default.createElement($nccRefer.ReportOrgSystemRef,r));var n=$nccStore.getDef("stepThreeValue"),o=$nccStore.getDef("isComeFromAdd");!n&&o?this.addDefaultRms():this.initStepThreeFn()}},{key:"render",value:function(){return c.default.createElement("div",{id:"steps_approval"},c.default.createElement("div",{className:"steps_approval"},c.default.createElement("div",{className:"transfer_header"},c.default.createElement("div",{className:"refer_box"},c.default.createElement("div",null,$appRoot.props.form.createForm(l.PAGE_CONST.stepThreeForm,{onAfterEvent:this.AddStepThreeAfterEvent,showSearchBtn:!1,showClearBtn:!1,showAdvBtn:!1})))),c.default.createElement("div",{className:"step_transfer_approval"},c.default.createElement("div",{className:"step_common step_left"},c.default.createElement("div",{className:"tree_topDiv"},c.default.createElement("div",{className:"tree_topCount"},c.default.createElement(T,{colors:"info",onChange:this.leftTreeCheckAllFn,checked:this.state.leftTreeCheckAll}),this.state.leftTreeSelectCount,"/",this.state.leftTreeCount),c.default.createElement("div",{className:"tree_topTitle"},$appRoot.state.json["182012032-000025"])),c.default.createElement(S,{treeData:this.state.treeData,key:this.state.treeData&&this.state.treeData.length,add_step4_left_select:this.add_step4_left_select,add_step4_left_check:this.add_step4_left_check})),c.default.createElement("div",{className:"step_btn_wrapper"},c.default.createElement("div",{className:"step_btn"},c.default.createElement(g,{onClick:this[">"],className:"uf uf uf-arrow-right",disabled:0===this.state.leftTreeSelectCount},c.default.createElement("span",null,c.default.createElement("i",{class:"iconfont icon-chuansuo-you"}))),c.default.createElement(g,{onClick:this[">>"],className:"uf uf uf-2arrow-right",disabled:0===this.state.leftTreeCount},c.default.createElement("span",null,c.default.createElement("i",{class:"iconfont icon-chuansuo-quanbuyou"}))),c.default.createElement(g,{onClick:this["<"],className:"rotate180 uf uf uf-arrow-left",disabled:0===this.state.rightTreeSelectCount},c.default.createElement("span",null,c.default.createElement("i",{class:"iconfont icon-chuansuo-you"}))),c.default.createElement(g,{onClick:this["<<"],className:"rotate180 uf uf uf-2arrow-left",disabled:0===this.state.rightTreeCount},c.default.createElement("span",null,c.default.createElement("i",{class:"iconfont icon-chuansuo-quanbuyou"}))))),c.default.createElement("div",{className:"step_common step_right"},c.default.createElement("div",{className:"tree_topDiv"},c.default.createElement("div",{className:"tree_topCount"},c.default.createElement(T,{colors:"info",onChange:this.rightTreeCheckAllFn,checked:this.state.rightTreeCheckAll}),this.state.rightTreeSelectCount,"/",this.state.rightTreeCount),c.default.createElement("div",{className:"tree_topTitle"},$appRoot.state.json["182012032-000026"])),c.default.createElement(_,{rightTreeData:this.state.rightTreeData,key:this.state.rightTreeData&&this.state.rightTreeData.length,add_step4_right_select:this.add_step4_right_select,add_step4_right_check:this.add_step4_right_check}))),c.default.createElement("div",{className:"checkbox_area"},c.default.createElement("div",{className:"step_selection"},c.default.createElement("div",{className:"footerDivRadio"},c.default.createElement("span",null,$appRoot.state.json["182012032-000027"]," "),c.default.createElement(y.NCRadioGroup,{name:"fruit",selectedValue:this.state.selectedValue,onChange:this.onCheckChange.bind(this,"selectedValue")},this.checkBoxConfig.map((function(e){return c.default.createElement(y,{value:e.value},e.display)}))))))))}}]),t}(s.Component),S=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.treeData;e?(e.forEach((function(e){e.pid&&delete e.pid})),v=$nccUtil.getTeeHandler(this.props.treeData),$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoLeftTreeId,this.props.treeData)):$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoLeftTreeId,[])}},{key:"render",value:function(){return $appRoot.props.syncTree.createSyncTree({treeId:l.PAGE_CONST.addModalTransferTwoLeftTreeId,needSearch:!0,showModal:!0,needEdit:!1,checkable:!0,searchType:"filtration",onCheckEve:this.props.add_step4_left_check,onSelectEve:this.props.add_step4_left_select,getSearchVal:function(){var e=$appRoot.props.syncTree.getTreeToList(l.PAGE_CONST.addModalTransferTwoLeftTreeId).length;b.instance.setState({leftTreeCount:e})}})}}]),t}(s.Component),_=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.rightTreeData||[];e.forEach((function(e){e.pid&&delete e.pid})),$appRoot.props.syncTree.setSyncTreeData(l.PAGE_CONST.addModalTransferTwoRightTreeId,e)}},{key:"render",value:function(){return $appRoot.props.syncTree.createSyncTree({searchType:"filtration",treeId:l.PAGE_CONST.addModalTransferTwoRightTreeId,needSearch:!0,showModal:!0,needEdit:!1,checkable:!0,onSelectEve:this.props.add_step4_right_select,onCheckEve:this.props.add_step4_right_check,getSearchVal:function(){var e=$appRoot.props.syncTree.getTreeToList(l.PAGE_CONST.addModalTransferTwoRightTreeId).length;b.instance.setState({rightTreeCount:e})}})}}]),t}(s.Component);t.default=k},1483:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=(n=a)&&n.__esModule?n:{default:n},c=r(384),l=(r(763),r(833)),p=r(718);function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}r(1484);var f=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.disabledDelButton=function(e){var t=$appRoot.props.button.setButtonDisabled,r={stepDelFour:!1};switch(e){case"disabledDelBtn":Object.assign(r,{stepDelFour:!0});break;case"abledDelBtn":Object.assign(r,{stepDelFour:!1})}t(r)},o.initStepFourContent=d(regeneratorRuntime.mark((function e(){var t,n,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.buttonVisibleControl)("addModalInit_one"),e.next=3,o.getKeyWordInfos();case 3:$nccStore.getDef("stepFourFormData")||$appRoot.props.form.EmptyAllFormValue(c.PAGE_CONST.stepFourForm),t=$nccStore.getDef("stepFourFormData"),n=$appRoot.props.meta.getMeta(),a=n.stepFourForm,(s=a.items.find((function(e){return"date"==e.attrcode})))&&("input"==s.itemtype?$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.stepFourForm,{check:{value:!0,display:$appRoot.state.json["182012032-000012"]},date:{value:"0000-00-00",display:"0000-00-00"}}):$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.stepFourForm,{check:{value:!0,display:$appRoot.state.json["182012032-000012"]},date:{value:"0000-00",display:"0000-00"}})),$appRoot.props.form.setFormItemsDisabled(c.PAGE_CONST.stepFourForm,{date:!0}),t&&(console.log(t,"============================"),$appRoot.props.form.setAllFormValue(u({},c.PAGE_CONST.stepFourForm,t[c.PAGE_CONST.stepFourForm])),$appRoot.props.form.getFormItemsValue([c.PAGE_CONST.stepFourForm],"check").value||($appRoot.props.form.setFormItemsDisabled(c.PAGE_CONST.stepFourForm,{date:!1}),s&&"input"==s.itemtype&&(n.stepFourForm.items.map((function(e){"date"==e.attrcode&&(e.itemtype="datepicker")})),console.log(n,"llllllllllllll"),$appRoot.props.meta.setMeta(n))));case 12:case"end":return e.stop()}}),e,r)}))),o.getKeyWordInfos=d(regeneratorRuntime.mark((function e(){var t,n,a,s,l,p,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$nccStore.getDef(c.STORE.pk_keygroup),n={pk_keygroup:t},e.next=4,$nccUtil.promiseAjax(c.URLS.queryKeyWordsByKeyGroup,n);case 4:if(a=e.sent,o.combineKeyWordFormMeta(a),$nccStore.getDef("isComeFromAdd")){e.next=21;break}if(s=_.cloneDeep($nccStore.getDef("keyValueVOs")),l=[],s){e.next=12;break}return e.abrupt("return",!1);case 12:s.model.rows.map((function(e){var t=e.values,r=[];Object.keys(t).forEach((function(e){r.push(t[e].display)})),l.push(r)})),p=$nccStore.getDef("myDkerArr"),l=p?l.concat(p):l,console.log(l,"==================================="),i=[],u=o.getOldStrKeyVals(),console.log(u,"kkkkkkkkkkkkkkkkkkkkkkkk"),l.forEach((function(e,t){i.push({status:"0",isOptimized:!1,values:{keyword:{display:e.join(),value:e.join(),valueDker:u[t].join()}}})})),$appRoot.props.editTable.setTableData(c.PAGE_CONST.dkerTableArea,{rows:i});case 21:case"end":return e.stop()}}),e,r)}))),o.getOldStrKeyVals=function(){var e=$nccStore.getDef(c.STORE.rulecontent);if(e){var t=e.value.strKeyVals;if(t){var r=[];t.forEach((function(e){r.push(e.join())})),console.log(r,"old_NewObjKeyAndValue");var n=[];if(r)return r.forEach((function(e){n.push(e.split(","))})),console.log(n,"dddddddddddddddddddd"),n}}},o.combineKeyWordFormMeta=function(e){var t={areaVisible:!0,moduletype:"form",status:"add",items:[]};if(e.success){var r=e.data;r.forEach((function(e){o.KeyOrder.push(e.code?e.code:e.pk_keyword),"date"==e.code&&$nccStore.setDef(c.STORE.periodCode,e.periodCode)}));var n=$appRoot.props.meta.getMeta(),a=t.items;r.forEach((function(e){if("corp"!=e.code){var t={},r={};if("1"==e.type)t={queryOperateType:"=@>@>=@<@<=@like@",isdrag:!0,attrcode:e.pk_keyword,disabled:!1,itemtype:"input",label:e.name,refcode:e.refPath,visible:!0,whichKeyToDisplay:"auto",placeholder:e.name};else if("4"==e.type||"2"==e.type&&"corp"!=e.code){if(t={queryOperateType:"=@>@>=@<@<=@like@",isdrag:!0,attrcode:e.code?e.code:e.pk_keyword,disabled:!1,itemtype:"refer",label:e.name,refcode:e.refPath,required:!0,visible:!0,whichKeyToDisplay:"auto",placeholder:e.name,isMultiSelectedEnabled:!0},"date"==e.code){r={attrcode:"check",col:"6",colnum:"1",color:"#555555",containlower:!1,datatype:"32",disabled:!1,editAfterFlag:!1,fieldDisplayed:"refname",fieldValue:{value:!0,display:$appRoot.state.json["182012032-000012"]},fieldValued:"refpk",formBack:{display:$appRoot.state.json["182012032-000013"],value:!1},formOldValues:{value:!0,display:$appRoot.state.json["182012032-000012"]},hyperlinkflag:!1,isDataPowerEnable:!0,isResLabel:!1,isShowUnit:!1,isnextrow:!1,isnotmeta:!1,isrevise:!1,itemtype:"checkbox_switch",label:$appRoot.state.json["182012032-000014"],leftspace:"0",maxlength:"20",onlyLeafCanSelect:!1,options:[{display:$appRoot.state.json["182012032-000012"],value:"Y"},{display:$appRoot.state.json["182012032-000013"],value:"N"}],position:"4",required:!1,rightspace:"0",rows:"0",scale:"0",verify:void 0,visible:!0};var n={queryCondition:{pk_accperiodscheme:$nccStore.getDef(c.STORE.pk_accscheme),pk_keygroup:$nccStore.getDef(c.STORE.pk_keygroup)}};$appRoot.props.renderItem("form",c.PAGE_CONST.stepFourForm,e.code,s.default.createElement($nccRefer.AccPeriodUFOERef,n))}"uapbd/refer/userdef/DefdocTreeRef/index"!=e.refPath&&"uapbd/refer/userdef/DefdocGridRef/index"!=e.refPath||(t.queryCondition=function(){return{pk_defdoclist:e.ref_pk}}),e.ref_pk&&$nccUtil.isShowUnitFn(e.ref_pk)&&(t.isShowUnit=!0)}else"3"==e.type&&(t={attrcode:e.code,itemtype:"input",label:e.name,required:!0,visible:!0,refcode:void 0},r={attrcode:"check",col:"6",colnum:"1",color:"#555555",containlower:!1,datatype:"32",disabled:!1,editAfterFlag:!1,fieldDisplayed:"refname",fieldValue:{value:!0,display:$appRoot.state.json["182012032-000012"]},fieldValued:"refpk",formBack:{display:$appRoot.state.json["182012032-000013"],value:!1},formOldValues:{value:!0,display:$appRoot.state.json["182012032-000012"]},hyperlinkflag:!1,isDataPowerEnable:!0,isResLabel:!1,isShowUnit:!1,isnextrow:!1,isnotmeta:!1,isrevise:!1,itemtype:"checkbox_switch",label:$appRoot.state.json["182012032-000014"],leftspace:"0",maxlength:"20",onlyLeafCanSelect:!1,options:[{display:$appRoot.state.json["182012032-000012"],value:"Y"},{display:$appRoot.state.json["182012032-000013"],value:"N"}],position:"4",required:!1,rightspace:"0",rows:"0",scale:"0",verify:void 0,visible:!0},$appRoot.props.renderItem("form",c.PAGE_CONST.stepFourForm,e.code,null));a.push(t),!_.isEmpty(r)&&a.push(r)}})),n[c.PAGE_CONST.stepFourForm]=t,$appRoot.props.meta.setMeta(n),console.log($appRoot.props.meta.getMeta(),"=============")}},o.step4RefOnFormAfter=(n=d(regeneratorRuntime.mark((function e(t,n,a,s,l){var p,i,u,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a,s,"============================="),"check"==a?($appRoot.props.form.setFormItemsDisabled(c.PAGE_CONST.stepFourForm,{date:s[s]}),p=$appRoot.props.meta.getMeta(),i=p.stepFourForm,u=i.items.find((function(e){return"date"==e.attrcode})),s.value?("datepicker"==u.itemtype?(p.stepFourForm.items.map((function(e){"date"==e.attrcode&&(e.itemtype="input")})),$appRoot.props.meta.setMeta(p),$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.stepFourForm,{date:{value:"0000-00-00",display:"0000-00-00"}})):$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.stepFourForm,{date:{value:"0000-00",display:"0000-00"}}),$appRoot.props.form.setFormItemsDisabled(c.PAGE_CONST.stepFourForm,{date:!0})):($appRoot.props.form.setFormItemsValue(c.PAGE_CONST.stepFourForm,{date:{value:null,display:null}}),u&&"input"==u.itemtype&&(p.stepFourForm.items.map((function(e){"date"==e.attrcode&&(e.itemtype="datepicker")})),$appRoot.props.meta.setMeta(p)))):"1001ZE100000000032CM"!==a&&(d=[],Object.keys(s).forEach((function(e){s[e].refcode&&d.push(s[e].refcode)})),console.log(d,"======================================"),o.ObjKeyAndCode[a]=d,console.log(o.ObjKeyAndCode,"======================")),f=$appRoot.props.form.getAllFormValue([c.PAGE_CONST.stepFourForm]),console.log(f,"========================================================"),$nccStore.setDef("stepFourFormData",f);case 5:case"end":return e.stop()}}),e,r)}))),function(e,t,r,o,a){return n.apply(this,arguments)}),o.onButtonClickStepFour=function(e,t){switch(t){case"stepAddFour":console.log($appRoot.state.json["182012032-000015"]),o.addStepFourData();break;case"stepDelFour":console.log($appRoot.state.json["182012032-000000"]),o.delTableRow()}},o.addStepFourData=d(regeneratorRuntime.mark((function e(){var t,n,a,s,l,u,f,h,m,g,T,y,v,b,k,S,C,R,O,D,A,$,E,w,x,N,P,j,M,F,G,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$appRoot.props.form.isCheckNow(c.PAGE_CONST.stepFourForm,"danger"),console.log(t,"========="),t){e.next=4;break}return e.abrupt("return",!1);case 4:return $nccStore.setDef("afterDelstrKeyVals",null),$nccStore.setDef("afterEditstrKeyVals",null),o.newObjKeyAndValue=[],n=$appRoot.props.form.getAllFormValue([c.PAGE_CONST.stepFourForm]),console.log(n,"======================"),a=n[c.PAGE_CONST.stepFourForm].rows[0].values,console.log(a,"=========aaaaaaaaaaaaaaa"),$nccStore.getDef(c.STORE.periodCode),e.next=14,new Promise(function(){var e=d(regeneratorRuntime.mark((function e(t,n){var s,l,p,i,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.date||!a.date.display){e.next=7;break}o.ObjKeyAndCode.date=a.date.display?a.date.display.split(","):[],o.ObjKeyAndValue.date=a.date.display?a.date.display.split(","):[],console.log(o.ObjKeyAndCode,o.ObjKeyAndValue,"kkkkkkk"),t(),e.next=28;break;case 7:if(!a.date){e.next=27;break}return s=$nccStore.getDef(c.STORE.pk_keygroup),l={pk_keygroup:s,date:a.date.value},e.next=12,$nccUtil.promiseAjax("/nccloud/ufoe/batchrule/batchRuleFourSelect.do",l);case 12:p=e.sent,i=JSON.parse(p.data),console.log(i),u=i||null,o.ObjKeyAndCode.date=a.date.value?[u]:[],o.ObjKeyAndValue.date=a.date.value?[u]:[],o.datePicker_value=[],o.datePicker_value.push(u),o.ObjKeyAndValue.date=o.datePicker_value,$appRoot.props.form.setFormItemsValue(c.PAGE_CONST.stepFourForm,{date:{value:null,display:null}}),d=$appRoot.props.form.getAllFormValue([c.PAGE_CONST.stepFourForm]),$nccStore.setDef("stepFourFormData",d),t(),e.next=28;break;case 27:t();case 28:case"end":return e.stop()}}),e,r)})));return function(t,r){return e.apply(this,arguments)}}());case 14:if(Object.keys(a).forEach((function(e){"undefined"!=e&&"check"!=e&&"date"!=e&&(o.ObjKeyAndValue[e]=a[e].value?a[e].value.split(","):[],"1001ZE100000000032CM"==e&&(o.ObjKeyAndCode[e]=a[e].value?a[e].value.split(","):[]))})),o.KeyOrder.forEach((function(e){Object.keys(o.ObjKeyAndValue).forEach((function(t){t==e&&o.newObjKeyAndValue.push(o.ObjKeyAndValue[t])}))})),console.log(o.newObjKeyAndValue,"-------------"),!(s=$nccStore.getDef("isComeFromAdd"))){for(l=$nccStore.getDef(c.STORE.rulecontent),u=$appRoot.props.editTable.getAllData(c.PAGE_CONST.dkerTableArea),f=[],h=[],m=0;m<u.rows.length;m++)f.push(u.rows[m].values.keyword.valueDker.split(",")),h.push(u.rows[m].values.keyword.value.split(","));$nccStore.setDef("tempvalue",h),l&&u.rows.length>0&&(g=[],(T=f)?(y=[],T.forEach((function(e){y.push(e.join())})),console.log(y,"old_NewObjKeyAndValue"),o.newObjKeyAndValue.length&&(o.newObjKeyAndValue.length>1?g=(0,p.multiCartesian)(o.newObjKeyAndValue):(g=[],o.newObjKeyAndValue[0].forEach((function(e,t){g.push([e])})))),console.log(g,"ggggggggggggggggggggggggggg"),g.length&&g.forEach((function(e){y=y.concat(e.join())})),console.log(y,"nnnnnnnnnnnnnnn"),y=[].concat(i(new Set(y))),console.log(y,"jjjjjjjjjjjjj"),v=[],y.map((function(e){v.push([e])})),console.log(v,"ffffffffffffffffffffffff"),$nccStore.setDef("afterEditstrKeyVals",v)):console.log($appRoot.state.json["182012032-000016"]))}console.log(o.newObjKeyAndValue,"================"),b=null,o.newObjKeyAndValue.length>1?b=(0,p.multiCartesian)(o.newObjKeyAndValue):(b=[],o.newObjKeyAndValue[0].forEach((function(e,t){b.push([e])}))),console.log(b,$appRoot.state.json["182012032-000017"]),(k=$nccStore.getDef("afterEditstrKeyVals"))&&(b=k),$nccStore.setDef("newObjKeyAndValue",o.newObjKeyAndValue),S=[],Object.keys(o.ObjKeyAndCode).forEach((function(e){o.ObjKeyAndCode[e].length&&S.unshift(o.ObjKeyAndCode[e])})),console.log(S,"================"),C=[],S.length&&(R=$nccStore.getDef("myDkerArr")?$nccStore.getDef("myDkerArr").concat((0,p.multiCartesian)(S)):(0,p.multiCartesian)(S),console.log(R,$appRoot.state.json["182012032-000018"]),O=[],R.forEach((function(e){O.push(e.join())})),O=[].concat(i(new Set(O))),D=[],O.forEach((function(e){D.push([e])})),console.log(D,"ooooooooooooooooooooooooooooooo"),$nccStore.setDef("myDkerArr",D),s||(A=_.cloneDeep($nccStore.getDef("keyValueVOs")),$=[],A&&($=$nccStore.getDef("tempvalue"),E=$nccStore.getDef("myDkerArr"),$=E?$.concat(E):$,console.log($,"rrrrrrrrrrrrrrrrrrrrrrrrrrrrrr"),w=[],$.forEach((function(e){w.push(e.join())})),w=[].concat(i(new Set(w))),x=[],w.forEach((function(e){x.push([e])})),D=x)),console.log(D,"11111111111111"),b.length!=D.length&&(N=$appRoot.props.editTable.getAllData(c.PAGE_CONST.dkerTableArea),P=[],N.rows.map((function(e){P.push(e.values.keyword.valueDker.split(","))})),b=P.concat(b),(j=$nccStore.getDef("newObjKeyAndValue")).length&&j.map((function(e,t){P.forEach((function(r,n){e.push(r[t])}))})),console.log(j,"0000000000000"),M=[],j.map((function(e){M.push([].concat(i(new Set(e))))})),console.log(M,"kkkkkkkkkk"),$nccStore.setDef("newObjKeyAndValue",M)),D.forEach((function(e,t){C.push({status:"0",isOptimized:!1,values:{keyword:{display:e.join(),value:e.join(),valueDker:b[t].join()}}})}))),0!=(F=$appRoot.props.editTable.getAllData(c.PAGE_CONST.dkerTableArea).rows.length)&&F==C.length&&$nccUtil.toast($appRoot.state.json["182012032-000019"],$nccConst.spell.danger),$appRoot.props.editTable.setTableData(c.PAGE_CONST.dkerTableArea,{rows:C}),G=$appRoot.props.editTable.getAllData(c.PAGE_CONST.dkerTableArea),I=[],G.rows.map((function(e){I.push(e.values.keyword.valueDker.split(","))})),$nccStore.setDef("newObjKeyAndValue_last",I);case 38:case"end":return e.stop()}}),e,r)}))),o.delTableRow=d(regeneratorRuntime.mark((function e(){var t,n,a,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=$appRoot.props.editTable.getCheckedRows(c.PAGE_CONST.dkerTableArea)).length&&(console.log(t,"kkkkkkkkkkkk"),n=[],t.map((function(e){n.push(e.index)})),console.log(n,"000000"),$appRoot.props.editTable.deleteTableRowsByIndex(c.PAGE_CONST.dkerTableArea,n,!0),a=$appRoot.props.editTable.getAllData(c.PAGE_CONST.dkerTableArea),console.log(a,"kkkkkkkkkkkkkkaaaaa"),s=[],a.rows.map((function(e){s.push(e.values.keyword.valueDker.split(","))})),$nccStore.setDef("afterDelstrKeyVals",s),l=$nccStore.getDef("myDkerArr"),t.map((function(e){l.map((function(t,r){t.join()==e.data.values.keyword.display&&l.splice(r,1)}))})),$nccStore.setDef("myDkerArr",l),o.disabledDelButton("disabledDelBtn"),console.log($nccStore.getDef("myDkerArr")));case 2:case"end":return e.stop()}}),e,r)}))),o.selectedChange=function(){$appRoot.props.editTable.getCheckedRows(c.PAGE_CONST.dkerTableArea).length?o.disabledDelButton("abledDelBtn"):o.disabledDelButton("disabledDelBtn")},o.state={},o.ObjKeyAndCode={},o.ObjKeyAndValue={},o.KeyOrder=[],o.newObjKeyAndValue=[],o.datePicker_value=[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.initStepFourContent(),this.disabledDelButton("disabledDelBtn")}},{key:"getMonday",value:function(e,t){switch(t){case"tendays":return(o=e.getMonth())+1>=1&&o+1<=3?o=3:o+1>=4&&o+1<=6?o=6:o+1>=7&&o+1<=9?o=9:o+1>=10&&o+1<=12&&(o=12),(n=e.getFullYear())+"-"+o+"-"+new Date(n,o,0).getDate();case"week":var r=7-e.getDay();return e.setDate(e.getDate()+r),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();case"day":return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();case"month":var n,o=e.getMonth()+1;return(n=e.getFullYear())+"-"+o+"-"+new Date(n,o,0).getDate()}}},{key:"render",value:function(){return s.default.createElement("div",null,$appRoot.props.form.createForm(c.PAGE_CONST.stepFourForm,{onAfterEvent:this.step4RefOnFormAfter,showSearchBtn:!1,showClearBtn:!1,showAdvBtn:!1}),s.default.createElement("div",{className:"stepFourBtn"},$appRoot.props.button.createButtonApp({area:c.PAGE_CONST.stepFourBtnArea,onButtonClick:this.onButtonClickStepFour.bind(this)})),$appRoot.props.editTable.createEditTable(c.PAGE_CONST.dkerTableArea,{showIndex:!0,showCheck:!0,onSelected:this.selectedChange,onSelectedAll:this.selectedChange}))}}]),t}(a.Component);t.default=f},1484:function(e,t,r){var n=r(1485);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};r(27)(n,o);n.locals&&(e.exports=n.locals)},1485:function(e,t,r){(e.exports=r(26)(!1)).push([e.i,".stepFourBtn {\n  margin-top: 10px;\n  margin-bottom: 8px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.modal-content-resizeWrap .modalBoxDiv > div {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n}\n",""])},1486:function(e,t,r){var n=r(1487);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};r(27)(n,o);n.locals&&(e.exports=n.locals)},1487:function(e,t,r){(e.exports=r(26)(!1)).push([e.i,".u-modal .u-modal-body {\n  min-height: 500px;\n  padding-top: 8px;\n}\n.u-steps-item-icon > .u-steps-icon {\n  display: block;\n  width: 18px;\n  height: 18px;\n  line-height: 18px;\n  top: -1px;\n  cursor: pointer;\n}\n#modalBox {\n  height: 100%;\n  background: var(--pui-black-derived-color-9, white);\n}\n#modalBox .modalBoxDiv {\n  height: calc(100% - 32px);\n}\n#modalBox .u-steps-item-icon {\n  cursor: pointer;\n}\n#modalBox .u-steps-item-title {\n  cursor: pointer;\n}\n",""])},1488:function(e,t,r){var n=r(1489);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};r(27)(n,o);n.locals&&(e.exports=n.locals)},1489:function(e,t,r){(e.exports=r(26)(!1)).push([e.i,".mainAreaBox {\n  height: 100%;\n}\n#modalBox .u-steps .u-steps-item {\n  -webkit-box-flex: 1 !important;\n      -ms-flex: 1 !important;\n          flex: 1 !important;\n}\n#topDivBox {\n  position: relative;\n}\n#topDivBox .starSpan {\n  color: red;\n  position: absolute;\n  z-index: 2;\n  top: 10px;\n  left: 2px;\n}\n.tree-area {\n  margin: 16px 0 0 20px;\n  height: calc(97%);\n}\n.dragWidthCom_left {\n  background: #f6f6f6;\n}\n.nc-single-table .nc-singleTable-table-area {\n  margin: 4px 0px 0;\n}\n.dragWidthCom .dragWidthCom_right {\n  padding: 10px 12px 0;\n}\n.dragWidthCom .dragWidthCom_right .table_arae {\n  height: 100%;\n  border: 1px solid #c6ccd7;\n  border-radius: 5px;\n}\n",""])},16:function(e,r){e.exports=t},2:function(t,r){t.exports=e},2029:function(e,t,r){"use strict";var n,o=r(2030),a=(n=o)&&n.__esModule?n:{default:n};(0,$nccPlatform.RenderRouter)(a.default,"app")},2030:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(1473),a=(n=o)&&n.__esModule?n:{default:n};$nccPlatform.asyncComponent;var s=[{path:"/",component:a.default,exact:!0},{path:"/list",component:a.default}];t.default=s},26:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),a=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(a).concat([o]).join("\n")}var s;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(n[a]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),t.push(s))}},t}},27:function(e,t,r){var n,o,a={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),c=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}((function(e){return document.querySelector(e)})),l=null,p=0,i=[],u=r(87);function d(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=a[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(y(n.parts[s],t))}else{var c=[];for(s=0;s<n.parts.length;s++)c.push(y(n.parts[s],t));a[n.id]={id:n.id,refs:1,parts:c}}}}function f(e,t){for(var r=[],n={},o=0;o<e.length;o++){var a=e[o],s=t.base?a[0]+t.base:a[0],c={css:a[1],media:a[2],sourceMap:a[3]};n[s]?n[s].parts.push(c):r.push(n[s]={id:s,parts:[c]})}return r}function h(e,t){var r=c(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=i[i.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),i.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=i.indexOf(e);t>=0&&i.splice(t,1)}function g(e){var t=document.createElement("style");return e.attrs.type="text/css",T(t,e.attrs),h(e,t),t}function T(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function y(e,t){var r,n,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var s=p++;r=l||(l=g(t)),n=k.bind(null,r,s,!1),o=k.bind(null,r,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",T(t,e.attrs),h(e,t),t}(t),n=_.bind(null,r,t),o=function(){m(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(t),n=S.bind(null,r),o=function(){m(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return d(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var s=r[o];(c=a[s.id]).refs--,n.push(c)}e&&d(f(e,t),t);for(o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete a[c.id]}}}};var v,b=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function k(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var a=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function S(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function _(e,t,r){var n=r.css,o=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(s),c&&URL.revokeObjectURL(c)}},384:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAGE_CONST={pagecode:"182012032A_list",ButtonArea:"headerBtnArea",LineArea:"lineArea",synTree:"synTree",headCard:"list_head",bottomReportCard:"tableList",bottomKeyCard:"keyValueList",bottomOrgCard:"orgList",treeAddModalBtn:"addModal",treeAddModalContent:"sortAdd",addModelBtnArea:"headAddModalBtnArea",addModalFormStepOne:"ruleAdd",addModalTransferOneLeftTreeId:"addModalTransferOneLeftTreeId",addModalTransferOneRightTreeId:"addModalTransferOneRightTreeId",addModalTransferTwoLeftTreeId:"addModalTransferTwoLeftTreeId",addModalTransferTwoRightTreeId:"addModalTransferTwoRightTreeId",stepThreeForm:"stepThreeForm",stepFourForm:"stepFourForm",stepFourBtnArea:"stepFour",dkerTableArea:"dkerArea"},t.STORE={pkOrg:"pkOrg",transferDataRightData:"transferDataRightData",pk_task:"pk_task",pk_keygroup:"pk_keygroup",time_keygroup:"time_keygroup",pk_accscheme:"pk_accscheme",rulecontent:"rulecontent",delIcon:"delIcon",editIcon:"editIcon",addIcon:"addIcon",busi_prop:"busi_prop",periodCode:"periodCode"};var n="/nccloud/ufoe/batchrule";t.URLS={batchTreeDataQuery:n+"/batchRuleSortQuery.do",batchTableDataQuery:n+"/batchRuleQueryBySort.do",batchTableBodyDataQuery:n+"/batchRuleGetDetailByHead.do",treeDataDel:n+"/batchRuleSortDelete.do",TreeDataSave:n+"/batchRuleSortSave.do",DataDel:n+"/batchRuleDelete.do",DataSave:n+"/batchRuleSave.do",DataAction:n+"/batchRuleExec.do",qryGroupTaskTreeAction:"/nccloud/ufoe/mailrule/qryGroupTaskTreeAction.do",qryRmsMember:"/nccloud/ufoe/refer/qryRmsMemberTreeAction.do",queryKeyWordsByKeyGroup:"/nccloud/ufoe/mailrule/queryKeyWordsByKeyGroup.do",getCopyDataName:n+"/batchRuleGetCopyName.do",qryDefaultByIndividualSet:"/nccloud/ufoe/individualset/qryDefaultByIndividualSet.do"},t.BUTTONS={LINEACTION:"LineAction",CHANGE:"Change",LINEDEL:"LineDel",LINECOPY:"LineCopy",ADD:"Add",DEL:"Del",ACTION:"Action",WATCH:"Watch",REFRESH:"Refresh"}},623:function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}Object.defineProperty(t,"__esModule",{value:!0});t.initRefer={getMainOrgNodes:function(){var e=this;return n(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={pageInfo:{pageIndex:-1},queryCondition:{isShowUnit:!1}},e.next=3,$nccUtil.promiseAjax("/nccloud/ufoe/refer/reportMainOrgTreeRef.do",r);case 3:return n=e.sent,e.abrupt("return",_.get(n,"data.rows")||[]);case 5:case"end":return e.stop()}}),t,e)})))()},getMainOrg:function(e){var t=this;return n(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getMainOrgNodes();case 2:return n=r.sent,r.abrupt("return",n.find((function(t){return t.refpk===e||t.refname===e})));case 4:case"end":return r.stop()}}),r,t)})))()},getRmsNodes:function(e){var t=this;return n(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={pageInfo:{pageIndex:0,pageSize:1e6},queryCondition:{isShowUnit:!1,pk_org:e,GridRefActionExt:$nccConst.value.GridRefActionExt}},t.next=3,$nccUtil.promiseAjax("/nccloud/ufoe/refer/reportOrgSysGridRef.do",n);case 3:return o=t.sent,t.abrupt("return",_.get(o,"data.rows")||[]);case 5:case"end":return t.stop()}}),r,t)})))()},getRms:function(e,t){var r=this;return n(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getRmsNodes(t);case 2:return o=n.sent,n.abrupt("return",o.find((function(t){return t.refpk===e||t.refname===e})));case 4:case"end":return n.stop()}}),n,r)})))()},getFirstRms:function(e){var t=this;return n(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getRmsNodes(e);case 2:return n=r.sent,r.abrupt("return",n[0]);case 4:case"end":return r.stop()}}),r,t)})))()},getTaskNodes:function(e,t){var r=this;return n(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={pageInfo:{pageIndex:0,pageSize:1e6},queryCondition:{isShowUnit:!1,pk_receiveorg:e,busi_prop:t||""}},r.next=3,$nccUtil.promiseAjax("/nccloud/ufoe/refer/taskGridRef.do",o);case 3:return a=r.sent,r.abrupt("return",_.get(a,"data.rows")||[]);case 5:case"end":return r.stop()}}),n,r)})))()},getTask:function(e,t,r){var o=this;return n(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.getTaskNodes(t,r);case 2:return a=n.sent,n.abrupt("return",a.find((function(t){return t.refpk===e||t.refname===e})));case 4:case"end":return n.stop()}}),n,o)})))()},getFirstTask:function(e,t){var r=this;return n(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getTaskNodes(e,t);case 2:return o=n.sent,n.abrupt("return",o[0]);case 4:case"end":return n.stop()}}),n,r)})))()},get3ReferNode:function(e,t,r){var o=this;return n(regeneratorRuntime.mark((function n(){var a,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.getMainOrg(e);case 2:return a=n.sent,n.next=5,o.getRms(t,e);case 5:return s=n.sent,n.next=8,o.getTask(r,e);case 8:return c=n.sent,n.abrupt("return",{mainOrgNode:a,rmsNode:s,taskNode:c});case 10:case"end":return n.stop()}}),n,o)})))()}}},693:function(e,t,r){var n=r(719);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};r(27)(n,o);n.locals&&(e.exports=n.locals)},718:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTopReferValue=t.leftTreeDataSave=t.DelLeftTreeData=t.queryBodyDataByTableHeader=t.queryTableData=t.queryLeftTreeData=void 0;var n,o,a,s,c,l,p=t.queryLeftTreeData=(n=f(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(u.URLS.batchTreeDataQuery,t);case 2:(r=e.sent).success&&($appRoot.props.syncTree.setSyncTreeData(u.PAGE_CONST.synTree,r.data),(0,d.buttonStatusControl)("searchTree"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),i=t.queryTableData=(o=f(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(u.URLS.batchTableDataQuery,t);case 2:return r=e.sent,e.abrupt("return",h(r,!0));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)});t.queryBodyDataByTableHeader=(a=f(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(u.URLS.batchTableBodyDataQuery,t);case 2:r=e.sent,console.log(r,"===="),h(r,!1);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),t.DelLeftTreeData=(s=f(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(u.URLS.treeDataDel,t);case 2:r=e.sent,console.log(r,"========="),r.success&&($nccPlatform.toast($appRoot.state.json["182012032-000042"],$nccConst.spell.success),$appRoot.props.syncTree.delNodeSuceess(u.PAGE_CONST.synTree,t.pk_batchrulesort),$appRoot.props.editTable.setTableData(u.PAGE_CONST.headCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomReportCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomOrgCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomKeyCard,{rows:[]}),(0,d.buttonStatusControl)("searchTree"));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),t.leftTreeDataSave=(c=f(regeneratorRuntime.mark((function e(t){var r,n,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(u.URLS.TreeDataSave,t);case 2:r=e.sent,n=r.success,o=r.data,n&&($nccStore.getDef("isNewAdd")?($nccUtil.toast($appRoot.state.json["182012032-000039"],"success"),$appRoot.props.syncTree.addNodeSuccess(u.PAGE_CONST.synTree,o[0])):($nccUtil.toast($appRoot.state.json["182012032-000038"],"success"),$appRoot.props.syncTree.editNodeSuccess(u.PAGE_CONST.synTree,o[0])),$appRoot.props.modal.close("LeftTreeAddModal"),$nccStore.setDef("leftTreeNodeSelected",o[0]),a=o[0].refpk,(0,d.produceParents)(a),s={pk_batchrulesort:a,pagecode:u.PAGE_CONST.pagecode,areacode:u.PAGE_CONST.headCard},$nccStore.setDef("leftTreeSearchParams",s),i(s));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)}),t.setTopReferValue=(l=f(regeneratorRuntime.mark((function e(){var t,r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promiseAjax(u.URLS.qryDefaultByIndividualSet);case 2:if(t=e.sent,r=t.data,n=r.repOrgRef,r.repRmsRef,r.taskRef,n){e.next=6;break}return e.abrupt("return");case 6:o={value:n.refpk,display:n.refname},a={pk_org:n.refpk},this.TopRefer.setState({value:o}),$nccStore.setDef(u.STORE.pkOrg,n),p(a);case 11:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)});t.clearTableData=m,t.multiCartesian=function(e){return e&&0!=e.length?function e(t,r,n,o){var a,s=[],c=r[n];if(n>o)return t;return t.forEach((function(e){c.forEach((function(t){(a=e.slice(0)).push(t),s.push(a)}))})),e(s,r,++n,o)}([[]],e,0,e.length-1):[]};var u=r(384),d=r(762);function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}function h(e,t){var r=e.success,n=e.data;if(r){if(n){var o=null;t&&(o=e.data.batchRuleVOs[u.PAGE_CONST.headCard].rows||[]);var a=e.data.reportVOs||[],s=e.data.unitDSInfo||[],c=JSON.parse($appRoot.$meta),l=c.template[u.PAGE_CONST.bottomKeyCard].items.map((function(e){return e.attrcode})),p=e.data,i=p.keyFieldName,d=p.keyValueVOs;d=JSON.parse(d),console.log(d,"=========================");var f=[];a.forEach((function(e){f.push({status:"0",isOptimized:!1,values:e})}));var h=[];if(s.forEach((function(e){h.push({status:"0",isOptimized:!1,values:e})})),t&&($appRoot.props.editTable.setTableData(u.PAGE_CONST.headCard,{rows:o}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomReportCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomOrgCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomKeyCard,{rows:[]})),!t){$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomReportCard,{rows:f}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomOrgCard,{rows:h}),$appRoot.props.cardTable.hideColByKey(u.PAGE_CONST.bottomKeyCard,l),$appRoot.props.cardTable.showColByKey(u.PAGE_CONST.bottomKeyCard,Object.keys(i)),console.log(c.template[u.PAGE_CONST.bottomKeyCard].items,"ppppppppppppp"),c.template[u.PAGE_CONST.bottomKeyCard].items.map((function(t){console.log(t,"==============111111"),t.visible?t.visible=!1:(console.log(t,"================="),Object.keys(e.data.keyFieldName).forEach((function(r){t.attrcode==r&&(t.visible=!0,t.label=e.data.keyFieldName[r])})))}));var g=$appRoot.props.meta.getMeta();g[u.PAGE_CONST.bottomKeyCard]=c.template[u.PAGE_CONST.bottomKeyCard],$appRoot.props.meta.setMeta(g),console.log($appRoot.props.meta.getMeta(),"==========================="),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomKeyCard,d.model)}}else m(t);return!0}return m(t),!1}function m(e){e&&$appRoot.props.editTable.setTableData(u.PAGE_CONST.headCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomReportCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomOrgCard,{rows:[]}),$appRoot.props.cardTable.setTableData(u.PAGE_CONST.bottomKeyCard,{rows:[]})}},719:function(e,t,r){(e.exports=r(26)(!1)).push([e.i,"#steps_approval {\n  height: 100%;\n}\n#steps_approval .rotate180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n#steps_approval .steps_approval {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n#steps_approval .steps_approval .step_transfer_approval {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  min-height: 350px;\n  max-height: 500px;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_common {\n  border: 1px solid var(--pui-black-derived-color-2, #c6ccd7);\n  border-radius: 5px;\n  padding: 10px;\n  margin: 10px;\n  background: var(--pui-black-derived-color-2, #fff);\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n  width: 40px;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn button {\n  margin: 5px 0;\n  background-color: var(--pui-black-derived-color-6, #fff);\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn button:hover {\n  background: var(--pui-black-derived-color-12, #f0f4fb);\n  color: var(--pui-black-font-color-3, var(--pui-theme-color, #2b2c42));\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn .uf-arrow-right {\n  width: 40px;\n  min-width: 40px;\n  height: 40px;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn .uf-2arrow-right {\n  width: 40px;\n  min-width: 40px;\n  height: 40px;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn .uf-2arrow-left {\n  width: 40px;\n  min-width: 40px;\n  height: 40px;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_btn_wrapper .step_btn .uf-arrow-left {\n  width: 40px;\n  min-width: 40px;\n  height: 40px;\n}\n#steps_approval .steps_approval .step_selection {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n#steps_approval .steps_approval .step_transfer_approval {\n  min-height: 390px;\n  max-height: 390px;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n#steps_approval .steps_approval .step_selection {\n  padding-left: 10px;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_common {\n  min-width: 300px;\n}\n#steps_approval * {\n  outline: none;\n}\n#steps_approval .steps_approval .step_transfer_approval .step_common {\n  width: 43%;\n  position: relative;\n  padding-top: 40px;\n}\n#steps_approval .tree_topDiv {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 30px;\n  background: var(--pui-black-derived-color-6, #f0f4fb);\n  color: var(--pui-black-font-color-1, #3e3e3e);\n  line-height: 30px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  font-family: MicrosoftYaHei, 微软雅黑;\n  font-weight: 400;\n  font-style: normal;\n  border-color: #cccccc #cccccc #cccccc;\n  border-bottom: 0px;\n  border-radius: 4px 4px 0px 0px;\n}\n#steps_approval .tree_topDiv .tree_topTitle {\n  position: absolute;\n  right: 10px;\n}\n#steps_approval .tree_topDiv .tree_topCount {\n  position: absolute;\n  left: 10px;\n}\n#steps_approval .checkbox_area {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n#steps_approval .footerDivRadio {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n#steps_approval .footerDivRadio span {\n  margin-right: 10px;\n}\n#steps_approval .steps_approval > div {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.refer_box .form-item-label {\n  text-align: left !important;\n  display: inline !important;\n}\n",""])},762:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var n,o;t.initTemplate=(n=regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTemplate();case 2:return r=e.sent,n=r.template,o=r.button,c.call(this,t,n),this.props.meta.setMeta(n),console.log(o),e.next=10,p.call(this,o);case 10:this.props.button.setButtons(o),$appRoot.props.button.setPopContent("LineDel",$appRoot.state.json["182012032-000048"]);case 12:case"end":return e.stop()}}),e,this)})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,r){return function n(o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(c)}("next")}))},function(e){return o.apply(this,arguments)});t.buttonStatusControl=l,t.produceParents=function(e){var t=new Set;(function e(r){var n=$appRoot.props.syncTree.getSyncTreeValue(a.PAGE_CONST.synTree,r);n&&n.pid&&(t.add(n.pid),e(n.pid))})(e),t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t)).reverse(),$appRoot.props.syncTree.openNodeByPk(a.PAGE_CONST.synTree,t),$appRoot.props.syncTree.setNodeSelected(a.PAGE_CONST.synTree,e),l("search")};var a=r(384),s=r(763);function c(e,t){var r=this;t[a.PAGE_CONST.headCard].items.push({itemtype:"customer",attrcode:"opr",visible:!0,disabled:!1,fixed:"right",label:$appRoot.state.json["182012032-000049"],required:!1,width:"150px",render:function(e,t,n){return r.props.button.createOprationButton(["LineAction","Change","LineDel","LineCopy"],{area:a.PAGE_CONST.LineArea,buttonLimit:3,onButtonClick:function(e,r){return(0,s.onButtonClickAction)(e,r,t)}})}})}function l(e){var t=$appRoot.props.button.setButtonDisabled,r={Add:!0,Del:!0,Action:!0,Watch:!0,Refresh:!0};switch(e){case"init":Object.keys(r).forEach((function(e){r[e]=!0}));break;case"search":var n=$appRoot.props.syncTree.getSelectNode(a.PAGE_CONST.synTree);Object.keys(r).forEach((function(e){"Add"!=e&&"Refresh"!=e&&"Watch"!=e||(r[e]=!1),"Add"==e&&"root"==n.id&&(r[e]=!0)}));break;case"searchTree":Object.keys(r).forEach((function(e){"Watch"!=e&&"Refresh"!=e||(r[e]=!1)}));break;case"checked":Object.keys(r).forEach((function(e){r[e]=!1}));break;case"unchecked":Object.keys(r).forEach((function(e){"Add"!=e&&"Refresh"!=e&&"Watch"!=e||(r[e]=!1)}))}t(r)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1,r=!1,n=!1;e.forEach((function(e){"delIcon"==e.key&&(t=!0),"editIcon"==e.key&&(r=!0),"addIcon"==e.key&&(n=!0)})),$nccStore.setDef(a.STORE.delIcon,t),$nccStore.setDef(a.STORE.editIcon,r),$nccStore.setDef(a.STORE.addIcon,n)}},763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onButtonClick=function(e,t){switch(console.log(t,"==========="),t){case"confirmAdd":(0,n.addLeftData)();break;case"cancleAdd":(0,n.cancleAdd)();break;case"Add":(0,n.openAddModal)();break;case"Refresh":(0,n.Refresh)(!0);break;case"Del":console.log($appRoot.state.json["182012032-000050"]),(0,n.headerDelData)();break;case"Action":(0,n.headerAction)();break;case"Watch":(0,n.ToWatchPage)()}},t.onButtonClickAddModal=function(e,t){console.log(t,"=========");var r=this.props.changeCurrent,o=this.props.current;switch(t){case"previousStep":console.log("11111111"),(0,n.PreviousAction)(r,o);break;case"nextStep":console.log($appRoot.state.json["182012032-000051"]),(0,n.NextAction)(r,o);break;case"ContinueStep":console.log("33333"),(0,n.completeAndGoOn)(o);break;case"ActionStep":console.log("4444"),(0,n.completeAndAction)(o);break;case"Complete":console.log("55555"),(0,n.newAddSave)(o);break;case"Cancle":console.log("6666666666"),(0,n.AddModalCancle)()}},t.onButtonClickAction=function(e,t,r){switch(console.log(t,"========="),t){case"LineDel":(0,n.lineDelData)(r);break;case"LineAction":(0,n.lineActionData)(r);break;case"Change":(0,n.lineDataChange)(r,null,"edit");break;case"LineCopy":console.log(t,"pppppp"),(0,n.lineCopyData)(r)}};r(384);var n=r(909)},833:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisibleControl=function(e){var t=$appRoot.props.button.setButtonVisible,r=[];switch(t(["previousStep","nextStep","ContinueStep","ActionStep","Complete","Cancle"],!1),e){case"addModalInit":r=["nextStep","ContinueStep","ActionStep","Complete","Cancle"];break;case"addModalInit_one":r=["previousStep","ContinueStep","ActionStep","Complete","Cancle"];break;case"notInit":r=["previousStep","nextStep","ContinueStep","ActionStep","Complete","Cancle"]}t(r,!0)}},87:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?r+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},909:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeAndAction=t.completeAndGoOn=t.AddModalCancle=t.changeRecordName=t.lineCopyData=t.lineDataChange=t.lineActionData=t.lineDelData=t.headerAction=t.headerDelData=t.Refresh=t.newAddSave=t.cancleAdd=t.addLeftData=void 0;var n,o,a,s,c,l,p,i,u,d,f,h,m,g,T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y=(t.addLeftData=(n=D(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={model:$appRoot.props.form.getAllFormValue(S.PAGE_CONST.treeAddModalContent),pageid:"182012032A_list"},r=$nccStore.getDef(S.STORE.pkOrg),t.model.rows.map((function(e){var t=$nccStore.getDef("isNewAdd");e.status=t?2:1,e.values.pk_org={value:r.refpk}})),e.next=5,(0,C.leftTreeDataSave)(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),t.cancleAdd=(o=D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$appRoot.props.modal.close("LeftTreeAddModal");case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),t.newAddSave=(a=D(regeneratorRuntime.mark((function e(t,r){var n,o,a,s,c,l,p,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,"ooo"),0!=t){e.next=6;break}if(n=$appRoot.props.form.isCheckNow(S.PAGE_CONST.addModalFormStepOne,"danger"),console.log(n,"========="),n){e.next=6;break}return e.abrupt("return",!1);case 6:if(o=E(),console.log(o,"=================="),o){e.next=10;break}return e.abrupt("return",!1);case 10:return a=$(),s=$nccStore.getDef(S.STORE.pkOrg),c=$nccStore.getDef("isComeFromAdd"),l=$nccStore.getDef("isComeFromCopy"),a.ruleVO.model.rows.map((function(e){c?e.status=2:(e.status=1,l&&(e.status=2,e.values=T({},e.values,{pk_batchrule:{},creator:{},creationtime:{},modifier:{},modifiedtime:{}}))),e.values.pk_org={value:s.refpk}})),console.log(a,"============================="),0==a.ruleDesc.strKeyVals.length&&$nccUtil.toast($appRoot.state.json["182001532-000054"],$nccConst.spell.danger),e.next=19,$nccUtil.promiseAjax(S.URLS.DataSave,a);case 19:if(!(p=e.sent).success){e.next=30;break}return i=c?$appRoot.state.json["182012032-000037"]:$appRoot.state.json["182012032-000038"],i=l?$appRoot.state.json["182012032-000039"]:i,"copy"==(u=$nccStore.getDef("modalTitle"))?$appRoot.props.modal.close("headAddModal_copy"):"edit"==u?$appRoot.props.modal.close("headAddModal_edit"):$appRoot.props.modal.close("headAddModal"),!r&&$nccUtil.toast(i,"success"),v(),l&&$nccStore.setDef("isComeFromCopy",null),e.abrupt("return",p);case 30:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})),v=t.Refresh=(s=D(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,R.buttonStatusControl)("search"),(r=$nccStore.getDef("leftTreeSearchParams")).pk_org||(r.pk_org=_.get($nccStore.getDef(S.STORE.pkOrg),"refpk")),e.next=5,(0,C.queryTableData)(r);case 5:e.sent&&t&&$nccUtil.toast($appRoot.state.json["182012032-000040"],"success");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),b=(t.headerDelData=(c=D(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$nccUtil.promptBox($appRoot.state.json["182012032-000000"],$appRoot.state.json["182012032-000041"]);case 2:return t=[],$appRoot.props.editTable.getCheckedRows(S.PAGE_CONST.headCard).map((function(e){t.push(e.data)})),r={pageid:"182012032A_list",model:{areaType:"table",rows:t}},e.next=8,$nccUtil.promiseAjax(S.URLS.DataDel,r);case 8:e.sent.success&&($nccUtil.toast($appRoot.state.json["182012032-000042"],"success"),v());case 11:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),t.headerAction=(l=D(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$appRoot.props.editTable.getCheckedRows(S.PAGE_CONST.headCard),r=[],t.map((function(e){r.push(e.data.values.pk_batchrule.value)})),console.log(r),n={selectPks:r},e.next=7,$nccUtil.promiseAjax(S.URLS.DataAction,n);case 7:return e.sent.success&&$nccUtil.toast($appRoot.state.json["182012032-000043"],"success"),e.next=12,$nccUtil.promptBox($appRoot.state.json["182012032-000044"],$appRoot.state.json["182012032-000045"]);case 12:w();case 13:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),t.lineDelData=(p=D(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={pageid:"182012032A_list",model:{areaType:"table",rows:[t]}},e.next=3,$nccUtil.promiseAjax(S.URLS.DataDel,r);case 3:e.sent.success&&($nccUtil.toast($appRoot.state.json["182012032-000042"],"success"),v());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)}),t.lineActionData=(i=D(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={selectPks:[t.values.pk_batchrule.value]},e.next=3,$nccUtil.promiseAjax(S.URLS.DataAction,r);case 3:return e.sent.success&&$nccUtil.toast($appRoot.state.json["182012032-000043"],"success"),e.next=8,$nccUtil.promptBox($appRoot.state.json["182012032-000044"],$appRoot.state.json["182012032-000045"]);case 8:w();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)}),t.lineDataChange=(u=D(regeneratorRuntime.mark((function e(t,r,n){var o,a,s,c,l,p,i,u,d,f,h,m,g,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=_.cloneDeep(t),$nccStore.setDef(S.STORE.pk_accscheme,_.get(o,"values.pk_accscheme.value")),$nccStore.setDef(S.STORE.pk_keygroup,_.get(o,"values.pk_keygroup.value")),console.log(o,"=============="),a=o.values.pk_batchrule,s={pk_batchrule:a.value},console.log(s,"33333333333333333333333"),e.next=9,$nccUtil.promiseAjax(S.URLS.batchTableBodyDataQuery,s);case 9:if(c=e.sent,l=null,!r){e.next=17;break}return e.next=14,k(o);case 14:p=e.sent,i=p.data,l=i.newName;case 17:console.log(l,"=========="),u=c.success,d=c.data,u&&($appRoot.props.form.EmptyAllFormValue(S.PAGE_CONST.addModalFormStepOne),d&&(o.values.pk_task=d.strCurTask,o.values.rulecontent.value.rmsPk=d.rmsPk,o.values.rulecontent.value.rmsPk.pk_vid=d.pk_rms_v.value,o.values.rulecontent.value.unitDSInfos=d.unitDSInfo),l&&(o.values.name.value=l),f={areacode:"ruleAdd",rows:[o]},$nccStore.setDef("isComeFromAdd",!1),$nccStore.setDef("modalTitle",n),$nccStore.setDef("stepEditOneData",f),h=o.values,m=h.pk_task,g=h.pk_keygroup,T=h.rulecontent,$nccStore.setDef(S.STORE.pk_task,m.value),$nccStore.setDef(S.STORE.pk_keygroup,g.value),$nccStore.setDef(S.STORE.time_keygroup,g),$nccStore.setDef(S.STORE.rulecontent,T),$nccStore.setDef("unitDSInfos",d.unitDSInfo),$nccStore.setDef("keyValueVOs",JSON.parse(d.keyValueVOs)),console.log(JSON.parse(d.keyValueVOs),"55555555555555555555555555555555555555555"),"copy"==$nccStore.getDef("modalTitle")?$appRoot.props.modal.show("headAddModal_copy"):$appRoot.props.modal.show("headAddModal_edit"));case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})),k=(t.lineCopyData=(d=D(regeneratorRuntime.mark((function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t,"==================="),$nccStore.setDef("isComeFromCopy",!0),b(t,r,"copy");case 3:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)}),t.changeRecordName=(f=D(regeneratorRuntime.mark((function e(t){var r,n,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.values,n=r.pk_batchrulesort,o=r.name,a={pk_batchrulesort:n.value,name:o.value},e.next=5,$nccUtil.promiseAjax(S.URLS.getCopyDataName,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)}));t.AddModalCancle=(h=D(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"copy"==(t=$nccStore.getDef("modalTitle"))?$appRoot.props.modal.close("headAddModal_copy"):"edit"==t?$appRoot.props.modal.close("headAddModal_edit"):$appRoot.props.modal.close("headAddModal");case 2:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),t.completeAndGoOn=(m=D(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t){e.next=5;break}if(r=$appRoot.props.form.isCheckNow(S.PAGE_CONST.addModalFormStepOne,"danger"),console.log(r,"========="),r){e.next=5;break}return e.abrupt("return",!1);case 5:return console.log(t,$appRoot.state.json["182012032-000046"]),e.next=8,y();case 8:A();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),t.completeAndAction=(g=D(regeneratorRuntime.mark((function e(t){var r,n,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,$appRoot.state.json["182012032-000047"]),0!=t){e.next=6;break}if(r=$appRoot.props.form.isCheckNow(S.PAGE_CONST.addModalFormStepOne,"danger"),console.log(r,"========="),r){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,y(null,!0);case 8:if(n=e.sent,o=n.success,a=n.data,s=null,!o||!a){e.next=15;break}s={selectPks:[a.pk_batchrule]},e.next=16;break;case 15:return e.abrupt("return",!1);case 16:return e.next=18,$nccUtil.promiseAjax(S.URLS.DataAction,s);case 18:if(!e.sent.success){e.next=26;break}return $nccUtil.toast($appRoot.state.json["182012032-000043"],$nccConst.spell.success),e.next=23,$nccUtil.promptBox($appRoot.state.json["182012032-000044"],$appRoot.state.json["182012032-000045"]);case 23:w(),e.next=26;break;case 26:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)});t.openAddModal=A,t.PreviousAction=function(e,t){"1"==t&&console.log($appRoot.state.json["182012032-000034"]);e(t-1)},t.NextAction=function(e,t,r){if(console.log(e,t,"============="),!r&&0==t||t>=1){var n=$appRoot.props.form.isCheckNow(S.PAGE_CONST.addModalFormStepOne,"danger");if(console.log(n,"========="),!n)return!1}if(!r&&1==t||t>=2){var o=$nccStore.getDef("rightTreeData");if(!o||!o.length)return $nccUtil.toast($appRoot.state.json["182012032-000035"],$nccConst.spell.danger),!1}if(!r&&2==t||t>=3){var a=$nccStore.getDef("rightTreeDataStep3");if(!a||!a.length)return $nccUtil.toast($appRoot.state.json["182012032-000036"],$nccConst.spell.danger),!1}if(r)e(t);else{var s=t+1;s>3&&(s=3),e(s)}},t.getAddSaveParams=$,t.testIsDataComplete=E,t.ToWatchPage=w;var S=r(384),C=r(718),R=r(762),O=r(16);function D(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(o,a){try{var s=t[o](a),c=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}function A(){$nccStore.setDef("isComeFromAdd",!0),$nccStore.setDef("modalTitle","add"),$appRoot.props.modal.show("headAddModal")}function $(){var e=$appRoot.props.form.getAllFormValue(S.PAGE_CONST.addModalFormStepOne);console.log(e,"==========");var t=$nccStore.getDef(S.STORE.pk_task);console.log(t,"===========");var r=$nccStore.getDef("rightTreeData");console.log(r,"=======================================");var n=[],o=[];if(r)r.forEach((function(e){n.push(_.last(e.refpk.split("@"))),o.push(e.nodeData.pk_task)}));else{var a=$nccStore.getDef(S.STORE.rulecontent);n=a.value.strRepPKs,o=a.value.strTaskPKs}var s=$nccStore.getDef("rightTreeDataStep3");console.log(s,"===================");var c=[];s?s.forEach((function(e){c.push({strDSOrgCode:e.code,strDsOrgName:e.name,strOrgPK:e.nodeData.pk_org})})):$nccStore.getDef(S.STORE.rulecontent).value.unitDSInfos.forEach((function(e){c.push({strDSOrgCode:e.code.value,strDsOrgName:e.name.value,strOrgPK:e.pk_org.value})}));var l=$nccStore.getDef("stepThreeValue"),p=$nccStore.getDef(S.STORE.rulecontent),i=l&&l.refpk||p.value.rmsPk.value,u=[],d=$nccStore.getDef("newObjKeyAndValue");if(console.log(d,"uuuuuuuuuuuuuuuuuuuuuuuuuuu"),d?(d=$nccStore.getDef("newObjKeyAndValue").filter((function(e){return e.length}))).length>1?u=(0,C.multiCartesian)(d):(u=[],console.log(d,"==============="),d[0].forEach((function(e,t){u.push([e])}))):p&&(u=p.value.strKeyVals),console.log(u,"======="),!$nccStore.getDef("isComeFromAdd")){var f=$nccStore.getDef("afterEditstrKeyVals"),h=[];f&&(f.map((function(e){h.push(e.join().split(","))})),console.log(h,"dddddddddddddddddddd"),u=h)}console.log(u,"=====================");var m=$nccStore.getDef("afterDelstrKeyVals");if(console.log(m,"kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"),m){var g=[];m.map((function(e){g.push(e.join().split(","))})),console.log(g,"dddddddddddddddddddd"),u=g}console.log(u,"pppppppppppppppfffffffff");var T=$nccStore.getDef("newObjKeyAndValue_last");return T&&u.length!==T&&(u=T),console.log(u,"pppppppppppppppfffffffff00000000"),{ruleVO:{model:e},ruleDesc:{rmsPk:i,strCurTask:t,strKeyVals:u,strRepPKs:n,strTaskPKs:o,unitDSInfos:c}}}function E(){var e=$nccStore.getDef("isEditAfter"),t=$nccStore.getDef("rightTreeData"),r=$nccStore.getDef("rightTreeDataStep3"),n=$nccStore.getDef("isComeFromAdd");return!(n||!n&&e)||(t&&t.length?r&&r.length?!(!r||!t)||void 0:($nccUtil.toast($appRoot.state.json["182012032-000036"],$nccConst.spell.danger),!1):($nccUtil.toast($appRoot.state.json["182012032-000035"],$nccConst.spell.danger),!1))}function w(){O.pageTo.openTo("/ufoe/pages/reportComputedMonitor/main/index.html",{appcode:"182002504A",pagecode:"182002504A_list",isComFrom:!0})}}})}));
//# sourceMappingURL=index.8a01b0a9.js.map